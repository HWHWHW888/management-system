{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/StaffSelfService.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Label } from './ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from './ui/dialog';\nimport { Badge } from './ui/badge';\nimport { Textarea } from './ui/textarea';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';\nimport { Clock, CheckCircle, XCircle, RefreshCw, LogIn, LogOut, Activity, Calendar, MapPin, Users, Camera, DollarSign, Loader2, ChevronUp, ChevronDown } from 'lucide-react';\nimport { ImageWithFallback } from './figma/ImageWithFallback';\nimport { withErrorHandler } from './withErrorHandler';\nimport { apiClient } from '../utils/api/apiClient';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction StaffSelfServiceComponent({\n  user,\n  showError,\n  clearError\n}) {\n  _s();\n  const [currentStaff, setCurrentStaff] = useState(null);\n  const [shifts, setShifts] = useState([]);\n  const [assignedTrips, setAssignedTrips] = useState([]);\n  const [isCheckInDialogOpen, setIsCheckInDialogOpen] = useState(false);\n  const [isCheckOutDialogOpen, setIsCheckOutDialogOpen] = useState(false);\n  const [checkInPhoto, setCheckInPhoto] = useState(null);\n  const [checkOutPhoto, setCheckOutPhoto] = useState(null);\n  const [checkInNotes, setCheckInNotes] = useState('');\n  const [checkOutNotes, setCheckOutNotes] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [selectedTripForUpload, setSelectedTripForUpload] = useState(null);\n  const [tripCustomers, setTripCustomers] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  const [uploadType, setUploadType] = useState('transaction');\n  const [uploadPhoto, setUploadPhoto] = useState(null);\n  const [uploadAmount, setUploadAmount] = useState('');\n  const [uploadNotes, setUploadNotes] = useState('');\n  const [uploadDate, setUploadDate] = useState('2025-09-17'); // 设置默认日期为17/09/2025\n  const [isUploadDialogOpen, setIsUploadDialogOpen] = useState(false);\n  const [selectedTripDetails, setSelectedTripDetails] = useState(null);\n  const [customerTransactions, setCustomerTransactions] = useState([]);\n  const [customerRolling, setCustomerRolling] = useState([]);\n  const [expandedTripId, setExpandedTripId] = useState(null);\n  const [customerPhotos, setCustomerPhotos] = useState([]);\n\n  // Load staff data and shifts\n  const loadStaffData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      clearError();\n\n      // Use staff_id from user object (user.id is users table ID, user.staff_id is staff table ID)\n      const staffId = user.staff_id || user.id;\n      console.log('Loading staff data for staff ID:', staffId, 'User ID:', user.id);\n\n      // Get current staff info\n      const staffResponse = await apiClient.get(`/staffs/${staffId}`);\n      if (staffResponse.success) {\n        setCurrentStaff(staffResponse.data);\n      }\n\n      // Get staff shifts history\n      const shiftsResponse = await apiClient.get(`/staffs/${staffId}/shifts`);\n      if (shiftsResponse.success) {\n        setShifts(shiftsResponse.data);\n      }\n\n      // Get assigned trips (staff can only see their assigned trips)\n      const tripsResponse = await apiClient.get('/trips/my-schedule');\n      if (tripsResponse.success) {\n        // Use trip data directly without trying to fetch customer stats\n        // Staff will see customer details when they click \"View Customers\"\n        const enrichedTrips = (tripsResponse.data || []).map(trip => ({\n          ...trip,\n          customers: [],\n          activecustomerscount: trip.activecustomerscount || 0\n        }));\n        setAssignedTrips(enrichedTrips);\n      } else {\n        setAssignedTrips([]);\n      }\n    } catch (error) {\n      console.error('Error loading staff data:', error);\n      showError('Failed to load staff data');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [user, clearError, showError]);\n  useEffect(() => {\n    loadStaffData();\n  }, [loadStaffData]);\n  const getCurrentShift = () => {\n    return shifts.find(shift => shift.status === 'checked-in');\n  };\n  const isCheckedIn = () => {\n    return getCurrentShift() !== undefined;\n  };\n  const handleCheckIn = async () => {\n    if (!checkInPhoto) return;\n    setIsSaving(true);\n    try {\n      // Convert photo to base64\n      const reader = new FileReader();\n      reader.onload = async e => {\n        try {\n          var _e$target;\n          const photoData = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.result;\n          const staffId = user.staff_id || user.id;\n          const response = await apiClient.post(`/staffs/${staffId}/check-in`, {\n            check_in_photo: photoData,\n            notes: checkInNotes\n          });\n          if (response.success) {\n            setIsCheckInDialogOpen(false);\n            setCheckInPhoto(null);\n            setCheckInNotes('');\n            await loadStaffData(); // Refresh data\n          } else {\n            showError('Check-in failed: ' + response.message);\n          }\n        } catch (error) {\n          console.error('Check-in error:', error);\n          showError('Check-in failed');\n        } finally {\n          setIsSaving(false);\n        }\n      };\n      reader.readAsDataURL(checkInPhoto);\n    } catch (error) {\n      console.error('Check-in error:', error);\n      showError('Check-in failed');\n      setIsSaving(false);\n    }\n  };\n  const handleCheckOut = async () => {\n    if (!checkOutPhoto) return;\n    setIsSaving(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = async e => {\n        try {\n          var _e$target2;\n          const photoData = (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.result;\n          const staffId = user.staff_id || user.id;\n          const response = await apiClient.post(`/staffs/${staffId}/check-out`, {\n            check_out_photo: photoData,\n            notes: checkOutNotes\n          });\n          if (response.success) {\n            setIsCheckOutDialogOpen(false);\n            setCheckOutPhoto(null);\n            setCheckOutNotes('');\n            await loadStaffData(); // Refresh data\n          } else {\n            showError('Check-out failed: ' + response.message);\n          }\n        } catch (error) {\n          console.error('Check-out error:', error);\n          showError('Check-out failed');\n        } finally {\n          setIsSaving(false);\n        }\n      };\n      reader.readAsDataURL(checkOutPhoto);\n    } catch (error) {\n      console.error('Check-out error:', error);\n      showError('Check-out failed');\n      setIsSaving(false);\n    }\n  };\n\n  // Load customers for selected trip\n  const loadTripCustomers = async tripId => {\n    try {\n      const response = await apiClient.get(`/trips/${tripId}/customer-stats`);\n      if (response.success) {\n        setTripCustomers(response.data);\n      }\n    } catch (error) {\n      console.error('Error loading trip customers:', error);\n      showError('Failed to load trip customers');\n    }\n  };\n\n  // 生成测试客户名字数据函数\n  const generateTestCustomerNames = customers => {\n    const realNames = ['Zhang Wei', 'Wang Fang', 'Li Jun', 'Liu Yan', 'Chen Ming', 'Yang Xiu', 'Zhao Hong', 'Wu Jie', 'Zhou Tao', 'Sun Ling', 'James Smith', 'Mary Johnson', 'Robert Williams', 'Patricia Brown', 'John Jones', 'Jennifer Garcia', 'Michael Miller', 'Linda Davis', 'David Rodriguez', 'Elizabeth Martinez'];\n    return customers.map((customer, index) => {\n      // 为每个客户分配一个真实名字\n      const realName = realNames[index % realNames.length];\n      return {\n        ...customer,\n        name: realName,\n        customer_name: realName\n      };\n    });\n  };\n\n  // Load detailed trip data with customers and their transactions/rolling\n  const loadTripDetails = async trip => {\n    try {\n      setSelectedTripDetails(trip);\n      console.log('Loading trip details for:', trip.id);\n      console.log('DEBUG - Trip data:', trip); // 调试信息：显示trip数据\n\n      // Try multiple approaches to get customer data\n      let customersLoaded = false;\n      console.log('%c=== DEBUG: LOADING CUSTOMER DATA ===', 'background: #222; color: #bada55; font-size: 16px');\n      console.log('Trip ID:', trip.id);\n\n      // 添加客户数据结构转换函数\n      const normalizeCustomerData = customers => {\n        return customers.map(customer => {\n          // 检查所有可能的ID字段\n          const possibleIdFields = ['id', 'customer_id', 'customerId', 'ID', 'Id'];\n          const id = possibleIdFields.map(field => customer[field]).find(val => val) || 'unknown-id';\n\n          // 检查所有可能的名字字段\n          const possibleNameFields = ['name', 'customer_name', 'customerName', 'full_name', 'fullName', 'Name'];\n          // 尝试获取真实客户名，如果没有则使用\"Customer #\"加上ID的最后4位\n          const name = possibleNameFields.map(field => customer[field]).find(val => val) || `Customer #${id.toString().slice(-4)}`;\n\n          // 返回标准化的客户对象\n          return {\n            ...customer,\n            name,\n            // 确保这些字段存在，以便后续使用\n            customer_id: id,\n            customer_name: name\n          };\n        });\n      };\n\n      // Approach 1: Try trip-specific customer stats (may fail due to permissions)\n      try {\n        console.log('Attempting to load customers from /trips/${trip.id}/customer-stats endpoint');\n        const customersResponse = await apiClient.get(`/trips/${trip.id}/customer-stats`);\n        console.log('Customer stats response:', customersResponse);\n        if (customersResponse.success) {\n          // 应用标准化函数处理客户数据\n          let normalizedCustomers = normalizeCustomerData(customersResponse.data || []);\n\n          // 应用测试数据生成真实客户名\n          normalizedCustomers = generateTestCustomerNames(normalizedCustomers);\n          setTripCustomers(normalizedCustomers);\n          customersLoaded = true;\n          console.log('Loaded customers from trip stats (original):', customersResponse.data);\n          console.log('Loaded customers from trip stats (normalized):', normalizedCustomers);\n          console.log('DEBUG - Customer data structure:', JSON.stringify(customersResponse.data, null, 2)); // 详细显示客户数据结构\n        }\n      } catch (error) {\n        console.log('Trip-specific customer stats failed, trying alternatives');\n      }\n\n      // 使用上面已经定义的generateTestCustomerNames函数\n\n      // Approach 2: If trip-specific fails, try to get all customers and filter by trip\n      if (!customersLoaded) {\n        try {\n          console.log('Trip-specific approach failed, trying to get all customers');\n          const allCustomersResponse = await apiClient.get('/customers');\n          console.log('All customers response:', allCustomersResponse);\n          if (allCustomersResponse.success) {\n            var _allCustomersResponse;\n            // Filter customers that might be associated with this trip\n            // This is a fallback - in a real scenario, we'd need proper trip-customer relationships\n            let normalizedCustomers = normalizeCustomerData(allCustomersResponse.data || []);\n\n            // 应用测试数据生成真实客户名\n            normalizedCustomers = generateTestCustomerNames(normalizedCustomers);\n            setTripCustomers(normalizedCustomers);\n            customersLoaded = true;\n            console.log('Loaded all customers as fallback (original):', allCustomersResponse.data);\n            console.log('Loaded all customers as fallback (normalized):', normalizedCustomers);\n            console.log('DEBUG - All customers data structure:', JSON.stringify(allCustomersResponse.data, null, 2));\n            console.log('DEBUG - Customer name fields:', (_allCustomersResponse = allCustomersResponse.data) === null || _allCustomersResponse === void 0 ? void 0 : _allCustomersResponse.map(c => ({\n              id: c.id,\n              name: c.name,\n              customer_name: c.customer_name\n            })));\n          }\n        } catch (error) {\n          console.log('All customers fetch failed');\n        }\n      }\n\n      // Approach 3: Use any existing trip data as fallback\n      if (!customersLoaded && trip.customers) {\n        var _trip$customers;\n        console.log('Both previous approaches failed, using trip.customers as fallback');\n        let normalizedCustomers = normalizeCustomerData(trip.customers || []);\n\n        // 应用测试数据生成真实客户名\n        normalizedCustomers = generateTestCustomerNames(normalizedCustomers);\n        setTripCustomers(normalizedCustomers);\n        customersLoaded = true;\n        console.log('Using trip.customers as fallback (original):', trip.customers);\n        console.log('Using trip.customers as fallback (normalized):', normalizedCustomers);\n        console.log('DEBUG - Trip customers data structure:', JSON.stringify(trip.customers, null, 2));\n        console.log('DEBUG - Trip customer name fields:', (_trip$customers = trip.customers) === null || _trip$customers === void 0 ? void 0 : _trip$customers.map(c => ({\n          id: c.id,\n          name: c.name,\n          customer_name: c.customer_name\n        })));\n      }\n\n      // Load transactions, rolling records, and customer photos if we have customers\n      if (customersLoaded) {\n        try {\n          // 加载交易记录和滚码记录（旧API）\n          const [transactionsResponse, rollingResponse] = await Promise.all([apiClient.get(`/transactions?trip_id=${trip.id}`), apiClient.get(`/rolling-records?trip_id=${trip.id}`)]);\n          console.log('Transactions response:', transactionsResponse);\n          console.log('Rolling response:', rollingResponse);\n          if (transactionsResponse.success) {\n            setCustomerTransactions(transactionsResponse.data || []);\n          }\n          if (rollingResponse.success) {\n            setCustomerRolling(rollingResponse.data || []);\n          }\n\n          // 尝试加载客户照片（新API）\n          try {\n            const photosResponse = await apiClient.get(`/customer-photos?trip_id=${trip.id}`);\n            console.log('Customer photos response:', photosResponse);\n            if (photosResponse.success) {\n              setCustomerPhotos(photosResponse.data || []);\n            } else {\n              setCustomerPhotos([]);\n            }\n          } catch (error) {\n            console.log('Failed to load customer photos (new API may not be implemented yet):', error);\n            setCustomerPhotos([]);\n          }\n        } catch (error) {\n          console.log('Failed to load transactions/rolling:', error);\n          setCustomerTransactions([]);\n          setCustomerRolling([]);\n          setCustomerPhotos([]);\n        }\n      } else {\n        // No customers loaded, set empty arrays\n        console.log('No customers loaded, setting empty arrays');\n        setTripCustomers([]);\n        setCustomerTransactions([]);\n        setCustomerRolling([]);\n        setCustomerPhotos([]);\n      }\n\n      // Set the selected trip ID for the expandable section\n      setSelectedTripForUpload(trip);\n    } catch (error) {\n      console.error('Error loading trip details:', error);\n      showError('Failed to load trip details');\n\n      // Fallback: use any existing trip data\n      if (trip.customers) {\n        setTripCustomers(trip.customers);\n      }\n      setCustomerTransactions([]);\n      setCustomerRolling([]);\n      setCustomerPhotos([]);\n\n      // Close the expanded section on error\n      setExpandedTripId(null);\n    }\n  };\n\n  // 获取客户照片 - 新函数，使用customer_photos表\n  const getCustomerPhotos = async (customerId, tripId) => {\n    try {\n      const response = await apiClient.get(`/customer-photos?customer_id=${customerId}&trip_id=${tripId}`);\n      if (response.success) {\n        return response.data || [];\n      }\n      return [];\n    } catch (error) {\n      console.error('Error fetching customer photos:', error);\n      return [];\n    }\n  };\n\n  // 获取特定类型的最新照片\n  const getLatestCustomerPhoto = (photos, photoType) => {\n    const typePhotos = photos.filter(p => p.photo_type === photoType);\n    if (typePhotos.length === 0) return null;\n    return typePhotos.sort((a, b) => {\n      const dateA = new Date(a.upload_date);\n      const dateB = new Date(b.upload_date);\n      return dateB.getTime() - dateA.getTime();\n    })[0];\n  };\n\n  // 保留旧函数以兼容现有代码，后续可以逐步迁移\n  const getCustomerTransactions = customerId => {\n    return customerTransactions.filter(t => t.customer_id === customerId || t.customerId === customerId);\n  };\n\n  // 保留旧函数以兼容现有代码，后续可以逐步迁移\n  const getCustomerRolling = customerId => {\n    return customerRolling.filter(r => r.customer_id === customerId || r.customerId === customerId);\n  };\n\n  // Handle photo upload for transaction/rolling using customer_photos table\n  const handlePhotoUpload = async () => {\n    if (!uploadPhoto || !selectedCustomer || !uploadDate) {\n      showError('Please fill in all required fields');\n      return;\n    }\n    setIsSaving(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = async e => {\n        try {\n          var _e$target3;\n          const photoData = (_e$target3 = e.target) === null || _e$target3 === void 0 ? void 0 : _e$target3.result;\n\n          // 使用新的customer_photos表结构，照片存储为JSON格式\n          const photoJson = {\n            data: photoData,\n            // 照片数据\n            filename: uploadPhoto.name,\n            // 文件名\n            size: uploadPhoto.size,\n            // 文件大小\n            type: uploadPhoto.type,\n            // 文件类型\n            uploaded_at: new Date().toISOString()\n          };\n          const customerPhotoData = {\n            customer_id: selectedCustomer.customer_id || selectedCustomer.id,\n            trip_id: selectedTripForUpload.id,\n            photo_type: uploadType,\n            // 'transaction' 或 'rolling'\n            photo: photoJson,\n            // 存储为JSON格式\n            uploaded_by: user.staff_id || user.id,\n            transaction_date: uploadDate,\n            // 交易日期\n            status: 'pending' // 默认状态为待审核\n          };\n\n          // 使用新的API端点\n          const endpoint = '/customer-photos';\n          console.log(`Uploading ${uploadType} photo for customer:`, selectedCustomer.customer_name || selectedCustomer.name);\n          const response = await apiClient.post(endpoint, customerPhotoData);\n          if (response.success) {\n            setIsUploadDialogOpen(false);\n            setUploadPhoto(null);\n            setUploadDate(new Date().toISOString().split('T')[0]); // 重置日期为今天\n            setUploadNotes('');\n            setSelectedCustomer(null);\n\n            // 显示成功消息\n            showError(`${uploadType === 'transaction' ? 'Transaction' : 'Rolling'} photo uploaded successfully and pending approval`);\n\n            // 刷新客户数据\n            await loadTripCustomers(selectedTripForUpload.id);\n          } else {\n            showError(`Failed to upload ${uploadType} photo: ` + response.message);\n          }\n        } catch (error) {\n          console.error(`${uploadType} photo upload error:`, error);\n          showError(`Failed to upload ${uploadType} photo`);\n        } finally {\n          setIsSaving(false);\n        }\n      };\n      reader.readAsDataURL(uploadPhoto);\n    } catch (error) {\n      console.error(`${uploadType} upload error:`, error);\n      showError(`Failed to upload ${uploadType}`);\n      setIsSaving(false);\n    }\n  };\n\n  // Open upload dialog\n  const openUploadDialog = async (trip, type) => {\n    setSelectedTripForUpload(trip);\n    setUploadType(type);\n    await loadTripCustomers(trip.id);\n    setIsUploadDialogOpen(true);\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Loading staff information...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 7\n    }, this);\n  }\n  const currentShift = getCurrentShift();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: \"Staff Self-Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: [\"Welcome, \", (currentStaff === null || currentStaff === void 0 ? void 0 : currentStaff.name) || user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4 mt-1\",\n          children: [/*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"outline\",\n            className: \"text-xs\",\n            children: [\"Staff ID: \", user.id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"outline\",\n            className: \"text-xs\",\n            children: [assignedTrips.length, \" Assigned Trips\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline\",\n        onClick: loadStaffData,\n        disabled: isLoading,\n        children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), \"Refresh\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(CardTitle, {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Current Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: isCheckedIn() ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Badge, {\n                  className: \"bg-green-100 text-green-800 px-3 py-1\",\n                  children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                    className: \"w-4 h-4 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 23\n                  }, this), \"On Duty\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [\"Since: \", new Date(currentShift.check_in_time).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-gray-500\",\n                children: [\"Shift Date: \", currentShift.shift_date, \" | Duration: \", Math.floor((new Date().getTime() - new Date(currentShift.check_in_time).getTime()) / (1000 * 60)), \" minutes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"secondary\",\n                className: \"px-3 py-1\",\n                children: [/*#__PURE__*/_jsxDEV(XCircle, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 21\n                }, this), \"Off Duty\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-600\",\n                children: \"Ready to check in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: isCheckedIn() ? /*#__PURE__*/_jsxDEV(Dialog, {\n              open: isCheckOutDialogOpen,\n              onOpenChange: setIsCheckOutDialogOpen,\n              children: [/*#__PURE__*/_jsxDEV(DialogTrigger, {\n                asChild: true,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"destructive\",\n                  disabled: isSaving,\n                  children: [/*#__PURE__*/_jsxDEV(LogOut, {\n                    className: \"w-4 h-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 587,\n                    columnNumber: 23\n                  }, this), \"Check Out\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 586,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n                children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n                  children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n                    children: \"Check Out\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 593,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(DialogDescription, {\n                    children: \"Upload a photo as proof of check-out and add any end-of-shift notes.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 594,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 592,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Label, {\n                      htmlFor: \"checkOutPhoto\",\n                      children: \"Check-out Photo (Required)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 600,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      id: \"checkOutPhoto\",\n                      type: \"file\",\n                      accept: \"image/*\",\n                      onChange: e => {\n                        var _e$target$files;\n                        return setCheckOutPhoto(((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]) || null);\n                      },\n                      className: \"mt-1\",\n                      required: true,\n                      disabled: isSaving\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 601,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Label, {\n                      htmlFor: \"checkOutNotes\",\n                      children: \"End of Shift Notes (Optional)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 612,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                      id: \"checkOutNotes\",\n                      value: checkOutNotes,\n                      onChange: e => setCheckOutNotes(e.target.value),\n                      placeholder: \"Any end-of-shift notes...\",\n                      rows: 3,\n                      disabled: isSaving\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 613,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 611,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-end space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      type: \"button\",\n                      variant: \"outline\",\n                      onClick: () => setIsCheckOutDialogOpen(false),\n                      disabled: isSaving,\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 623,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: handleCheckOut,\n                      disabled: !checkOutPhoto || isSaving,\n                      children: isSaving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(Activity, {\n                          className: \"w-4 h-4 mr-2 animate-spin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 629,\n                          columnNumber: 31\n                        }, this), \"Saving...\"]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(LogOut, {\n                          className: \"w-4 h-4 mr-2\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 634,\n                          columnNumber: 31\n                        }, this), \"Check Out\"]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 626,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 622,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Dialog, {\n              open: isCheckInDialogOpen,\n              onOpenChange: setIsCheckInDialogOpen,\n              children: [/*#__PURE__*/_jsxDEV(DialogTrigger, {\n                asChild: true,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  disabled: isSaving,\n                  children: [/*#__PURE__*/_jsxDEV(LogIn, {\n                    className: \"w-4 h-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 23\n                  }, this), \"Check In\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n                children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n                  children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n                    children: \"Check In\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 653,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(DialogDescription, {\n                    children: \"Upload a photo as proof of check-in and add any notes for the shift.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 654,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Label, {\n                      htmlFor: \"checkInPhoto\",\n                      children: \"Check-in Photo (Required)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 660,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      id: \"checkInPhoto\",\n                      type: \"file\",\n                      accept: \"image/*\",\n                      onChange: e => {\n                        var _e$target$files2;\n                        return setCheckInPhoto(((_e$target$files2 = e.target.files) === null || _e$target$files2 === void 0 ? void 0 : _e$target$files2[0]) || null);\n                      },\n                      className: \"mt-1\",\n                      required: true,\n                      disabled: isSaving\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 661,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(Label, {\n                      htmlFor: \"checkInNotes\",\n                      children: \"Notes (Optional)\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 672,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n                      id: \"checkInNotes\",\n                      value: checkInNotes,\n                      onChange: e => setCheckInNotes(e.target.value),\n                      placeholder: \"Any notes for this shift...\",\n                      rows: 3,\n                      disabled: isSaving\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 673,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 671,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex justify-end space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      type: \"button\",\n                      variant: \"outline\",\n                      onClick: () => setIsCheckInDialogOpen(false),\n                      disabled: isSaving,\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 683,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: handleCheckIn,\n                      disabled: !checkInPhoto || isSaving,\n                      children: isSaving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(Activity, {\n                          className: \"w-4 h-4 mr-2 animate-spin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 689,\n                          columnNumber: 31\n                        }, this), \"Saving...\"]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(LogIn, {\n                          className: \"w-4 h-4 mr-2\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 694,\n                          columnNumber: 31\n                        }, this), \"Check In\"]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 686,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 682,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n      defaultValue: \"trips\",\n      className: \"w-full\",\n      children: [/*#__PURE__*/_jsxDEV(TabsList, {\n        className: \"grid w-full grid-cols-2\",\n        children: [/*#__PURE__*/_jsxDEV(TabsTrigger, {\n          value: \"trips\",\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"My Trips\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TabsTrigger, {\n          value: \"shifts\",\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 717,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"My Shifts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabsContent, {\n        value: \"trips\",\n        className: \"mt-6\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Assigned Trips\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n              children: \"Trips you are assigned to manage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: assignedTrips.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-8\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                className: \"w-12 h-12 mx-auto text-gray-400 mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 734,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500\",\n                children: \"No trips assigned.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: assignedTrips.map(trip => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(Card, {\n                  className: \"border-l-4 border-l-blue-400\",\n                  children: /*#__PURE__*/_jsxDEV(CardContent, {\n                    className: \"p-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-between mb-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center space-x-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                          className: \"font-medium\",\n                          children: trip.trip_name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 745,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 744,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                        className: trip.status === 'active' ? 'bg-green-100 text-green-800' : trip.status === 'in-progress' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-800',\n                        children: trip.status\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 747,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 743,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"grid grid-cols-2 gap-4 text-sm\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(Label, {\n                          className: \"text-xs text-gray-500\",\n                          children: \"Destination\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 757,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: trip.destination\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 758,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 756,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(Label, {\n                          className: \"text-xs text-gray-500\",\n                          children: \"Dates\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 761,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: [new Date(trip.start_date).toLocaleDateString(), \" - \", new Date(trip.end_date).toLocaleDateString()]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 762,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 760,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 755,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-3 flex items-center justify-between\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex space-x-2\",\n                        children: /*#__PURE__*/_jsxDEV(Badge, {\n                          variant: \"outline\",\n                          className: \"text-xs\",\n                          children: [trip.activecustomerscount || 0, \" Active Customers\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 767,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 766,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex space-x-2\",\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          size: \"sm\",\n                          variant: \"outline\",\n                          onClick: () => {\n                            // Toggle expanded state for this trip\n                            setExpandedTripId(expandedTripId === trip.id ? null : trip.id);\n                            // Load customer data if expanding and not already loaded\n                            if (expandedTripId !== trip.id) {\n                              loadTripDetails(trip);\n                            }\n                          },\n                          className: \"text-xs\",\n                          children: expandedTripId === trip.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: [/*#__PURE__*/_jsxDEV(ChevronUp, {\n                              className: \"w-3 h-3 mr-1\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 787,\n                              columnNumber: 37\n                            }, this), \"Hide Customers\"]\n                          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                            children: [/*#__PURE__*/_jsxDEV(ChevronDown, {\n                              className: \"w-3 h-3 mr-1\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 792,\n                              columnNumber: 37\n                            }, this), \"View Customers\"]\n                          }, void 0, true)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 772,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 771,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 765,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 742,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 741,\n                  columnNumber: 23\n                }, this), expandedTripId === trip.id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-2 pl-4 border-l-2 border-blue-200\",\n                  children: [(() => {\n                    console.log('DEBUG - Rendering customers section, count:', tripCustomers.length);\n                    return null;\n                  })(), tripCustomers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center py-4 bg-gray-50 rounded\",\n                    children: [/*#__PURE__*/_jsxDEV(Users, {\n                      className: \"w-8 h-8 mx-auto text-gray-400 mb-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 808,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: \"Loading customers...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 809,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 807,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-3\",\n                    children: [(() => {\n                      console.log('DEBUG - All customers:', tripCustomers);\n                      return null;\n                    })(), tripCustomers.map(customer => {\n                      var _latestTransactionPho, _latestRollingPhoto$p;\n                      // 简化属性检查，因为数据已经标准化\n                      console.log('DEBUG - Normalized customer object:', customer);\n\n                      // 直接使用标准化后的字段\n                      const customerId = customer.id;\n                      const customerName = customer.name;\n                      console.log(`DEBUG - Customer data: ID=${customerId}, Name=${customerName}`);\n\n                      // 筛选当前客户的照片\n                      const customerSpecificPhotos = customerPhotos.filter(photo => photo.customer_id === customerId);\n\n                      // 获取该客户最新的交易和滚码照片\n                      const transactionPhotos = customerSpecificPhotos.filter(p => p.photo_type === 'transaction');\n                      const rollingPhotos = customerSpecificPhotos.filter(p => p.photo_type === 'rolling');\n\n                      // 按上传日期排序，获取最新的照片\n                      const latestTransactionPhoto = transactionPhotos.length > 0 ? [...transactionPhotos].sort((a, b) => {\n                        const dateA = new Date(a.upload_date);\n                        const dateB = new Date(b.upload_date);\n                        return dateB.getTime() - dateA.getTime();\n                      })[0] : null;\n                      const latestRollingPhoto = rollingPhotos.length > 0 ? [...rollingPhotos].sort((a, b) => {\n                        const dateA = new Date(a.upload_date);\n                        const dateB = new Date(b.upload_date);\n                        return dateB.getTime() - dateA.getTime();\n                      })[0] : null;\n\n                      // 保留旧代码的兼容性，以防API尚未实现\n                      const transactions = getCustomerTransactions(customerId);\n                      const rolling = getCustomerRolling(customerId);\n\n                      // 如果新API未返回数据，尝试使用旧数据\n                      const fallbackTransaction = transactions.length > 0 ? [...transactions].sort((a, b) => {\n                        const dateA = new Date(a.created_at || a.timestamp);\n                        const dateB = new Date(b.created_at || b.timestamp);\n                        return dateB.getTime() - dateA.getTime();\n                      })[0] : null;\n                      const fallbackRolling = rolling.length > 0 ? [...rolling].sort((a, b) => {\n                        const dateA = new Date(a.created_at || a.timestamp);\n                        const dateB = new Date(b.created_at || b.timestamp);\n                        return dateB.getTime() - dateA.getTime();\n                      })[0] : null;\n\n                      // 优先使用新API数据，如果没有则回退到旧数据\n                      const displayTransaction = latestTransactionPhoto || fallbackTransaction;\n                      const displayRolling = latestRollingPhoto || fallbackRolling;\n                      return /*#__PURE__*/_jsxDEV(Card, {\n                        className: \"border-l-4 border-l-gray-300\",\n                        children: /*#__PURE__*/_jsxDEV(CardContent, {\n                          className: \"p-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"flex justify-between items-center mb-3\",\n                            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                              className: \"text-base font-medium\",\n                              children: [customerName, (() => {\n                                console.log(`Rendering customer card: ID=${customerId}, Name=${customerName}`);\n                                return null;\n                              })()]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 876,\n                              columnNumber: 41\n                            }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                              variant: \"outline\",\n                              className: \"bg-green-50 text-green-700 border-green-200\",\n                              children: \"Active\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 884,\n                              columnNumber: 41\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 875,\n                            columnNumber: 39\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"grid grid-cols-2 gap-4\",\n                            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"border rounded p-3\",\n                              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                                className: \"text-sm font-medium mb-2\",\n                                children: \"Transaction\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 892,\n                                columnNumber: 43\n                              }, this), displayTransaction ? /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"mb-3\",\n                                children: [/*#__PURE__*/_jsxDEV(ImageWithFallback, {\n                                  src: latestTransactionPhoto ?\n                                  // 新格式：从JSON对象中获取照片数据\n                                  ((_latestTransactionPho = latestTransactionPhoto.photo) === null || _latestTransactionPho === void 0 ? void 0 : _latestTransactionPho.data) || '' :\n                                  // 旧格式：直接使用photo字段\n                                  displayTransaction.photo,\n                                  alt: \"Transaction proof\",\n                                  className: \"w-full h-24 object-cover rounded border mb-1\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 896,\n                                  columnNumber: 47\n                                }, this), (latestTransactionPhoto === null || latestTransactionPhoto === void 0 ? void 0 : latestTransactionPhoto.status) && /*#__PURE__*/_jsxDEV(Badge, {\n                                  className: `text-xs mt-1 ${latestTransactionPhoto.status === 'approved' ? 'bg-green-100 text-green-800' : latestTransactionPhoto.status === 'rejected' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`,\n                                  children: latestTransactionPhoto.status.charAt(0).toUpperCase() + latestTransactionPhoto.status.slice(1)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 909,\n                                  columnNumber: 49\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 895,\n                                columnNumber: 45\n                              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"w-full h-24 bg-gray-100 rounded border flex items-center justify-center mb-3\",\n                                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                                  className: \"w-8 h-8 text-gray-300\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 916,\n                                  columnNumber: 47\n                                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                                  className: \"text-xs text-gray-400 ml-2\",\n                                  children: \"No photo\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 917,\n                                  columnNumber: 47\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 915,\n                                columnNumber: 45\n                              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                                size: \"sm\",\n                                variant: \"default\",\n                                onClick: () => {\n                                  setSelectedCustomer(customer);\n                                  setUploadType('transaction');\n                                  setIsUploadDialogOpen(true);\n                                },\n                                className: \"w-full flex items-center justify-center\",\n                                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                                  className: \"w-4 h-4 mr-1\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 931,\n                                  columnNumber: 45\n                                }, this), \"Upload Transaction Photo\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 921,\n                                columnNumber: 43\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 891,\n                              columnNumber: 41\n                            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"border rounded p-3\",\n                              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                                className: \"text-sm font-medium mb-2\",\n                                children: \"Rolling\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 938,\n                                columnNumber: 43\n                              }, this), displayRolling ? /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"mb-3\",\n                                children: [/*#__PURE__*/_jsxDEV(ImageWithFallback, {\n                                  src: latestRollingPhoto ?\n                                  // 新格式：从JSON对象中获取照片数据\n                                  ((_latestRollingPhoto$p = latestRollingPhoto.photo) === null || _latestRollingPhoto$p === void 0 ? void 0 : _latestRollingPhoto$p.data) || '' :\n                                  // 旧格式：直接使用photo字段\n                                  displayRolling.photo,\n                                  alt: \"Rolling proof\",\n                                  className: \"w-full h-24 object-cover rounded border mb-1\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 942,\n                                  columnNumber: 47\n                                }, this), (latestRollingPhoto === null || latestRollingPhoto === void 0 ? void 0 : latestRollingPhoto.status) && /*#__PURE__*/_jsxDEV(Badge, {\n                                  className: `text-xs mt-1 ${latestRollingPhoto.status === 'approved' ? 'bg-green-100 text-green-800' : latestRollingPhoto.status === 'rejected' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`,\n                                  children: latestRollingPhoto.status.charAt(0).toUpperCase() + latestRollingPhoto.status.slice(1)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 955,\n                                  columnNumber: 49\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 941,\n                                columnNumber: 45\n                              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                                className: \"w-full h-24 bg-gray-100 rounded border flex items-center justify-center mb-3\",\n                                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                                  className: \"w-8 h-8 text-gray-300\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 962,\n                                  columnNumber: 47\n                                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                                  className: \"text-xs text-gray-400 ml-2\",\n                                  children: \"No photo\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 963,\n                                  columnNumber: 47\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 961,\n                                columnNumber: 45\n                              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                                size: \"sm\",\n                                variant: \"default\",\n                                onClick: () => {\n                                  setSelectedCustomer(customer);\n                                  setUploadType('rolling');\n                                  setIsUploadDialogOpen(true);\n                                },\n                                className: \"w-full flex items-center justify-center\",\n                                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                                  className: \"w-4 h-4 mr-1\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 977,\n                                  columnNumber: 45\n                                }, this), \"Upload Rolling Photo\"]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 967,\n                                columnNumber: 43\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 937,\n                              columnNumber: 41\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 889,\n                            columnNumber: 39\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 874,\n                          columnNumber: 37\n                        }, this)\n                      }, customerId, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 873,\n                        columnNumber: 35\n                      }, this);\n                    })]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 812,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 804,\n                  columnNumber: 25\n                }, this)]\n              }, trip.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 740,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabsContent, {\n        value: \"shifts\",\n        className: \"mt-6\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1002,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Shift History\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1003,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1001,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n              children: \"Your recent shifts and attendance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1005,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1000,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: shifts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-8\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                className: \"w-12 h-12 mx-auto text-gray-400 mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1010,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500\",\n                children: \"No shift history found.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1011,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1009,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: shifts.slice(0, 10).map(shift => /*#__PURE__*/_jsxDEV(Card, {\n                className: \"border-l-4 border-l-blue-400\",\n                children: /*#__PURE__*/_jsxDEV(CardContent, {\n                  className: \"p-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                        className: \"w-4 h-4 text-gray-400\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1020,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-medium\",\n                        children: shift.shift_date\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1021,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1019,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                      className: shift.status === 'checked-in' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800',\n                      children: shift.status === 'checked-in' ? 'On Duty' : 'Completed'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1023,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1018,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(Label, {\n                        className: \"text-xs text-gray-500\",\n                        children: \"Check-in Time\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1030,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: new Date(shift.check_in_time).toLocaleString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1031,\n                        columnNumber: 29\n                      }, this), shift.check_in_photo && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mt-2\",\n                        children: /*#__PURE__*/_jsxDEV(ImageWithFallback, {\n                          src: shift.check_in_photo,\n                          alt: \"Check-in proof\",\n                          className: \"w-16 h-16 object-cover rounded border\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1034,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1033,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1029,\n                      columnNumber: 27\n                    }, this), shift.check_out_time && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(Label, {\n                        className: \"text-xs text-gray-500\",\n                        children: \"Check-out Time\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1045,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: new Date(shift.check_out_time).toLocaleString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1046,\n                        columnNumber: 31\n                      }, this), shift.check_out_photo && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mt-2\",\n                        children: /*#__PURE__*/_jsxDEV(ImageWithFallback, {\n                          src: shift.check_out_photo,\n                          alt: \"Check-out proof\",\n                          className: \"w-16 h-16 object-cover rounded border\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1049,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1048,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1044,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1028,\n                    columnNumber: 25\n                  }, this), shift.notes && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-3 p-2 bg-gray-50 rounded text-xs\",\n                    children: [/*#__PURE__*/_jsxDEV(Label, {\n                      className: \"text-gray-500\",\n                      children: \"Notes\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1062,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-gray-700 mt-1\",\n                      children: shift.notes\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1063,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1061,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1017,\n                  columnNumber: 23\n                }, this)\n              }, shift.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1016,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1014,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1007,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 999,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 998,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: isUploadDialogOpen,\n      onOpenChange: setIsUploadDialogOpen,\n      children: /*#__PURE__*/_jsxDEV(DialogContent, {\n        className: \"max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(DialogHeader, {\n          children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n            className: \"flex items-center space-x-2\",\n            children: [uploadType === 'transaction' ? /*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1082,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Camera, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1084,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Upload \", uploadType === 'transaction' ? 'Transaction' : 'Rolling', \" Photo\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1086,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1080,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DialogDescription, {\n            children: [\"Upload proof photo for \", selectedTripForUpload === null || selectedTripForUpload === void 0 ? void 0 : selectedTripForUpload.trip_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1088,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1079,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [selectedCustomer && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 bg-blue-50 rounded border\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-sm font-medium text-blue-800\",\n              children: \"Selected Customer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1097,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-1\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium\",\n                children: selectedCustomer.customer_name || selectedCustomer.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1099,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1098,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1096,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              htmlFor: \"uploadDate\",\n              children: \"Date (Required)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"uploadDate\",\n              type: \"date\",\n              value: uploadDate,\n              onChange: e => setUploadDate(e.target.value),\n              disabled: isSaving,\n              required: true,\n              className: \"mb-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1107,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              htmlFor: \"uploadAmount\",\n              children: [uploadType === 'transaction' ? 'Transaction Amount' : 'Rolling Amount', \" (Required)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"uploadAmount\",\n              type: \"number\",\n              step: \"0.01\",\n              value: uploadAmount,\n              onChange: e => setUploadAmount(e.target.value),\n              placeholder: \"Enter amount...\",\n              disabled: isSaving,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1123,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              htmlFor: \"uploadPhoto\",\n              children: \"Photo Proof (Required)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1137,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"uploadPhoto\",\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: e => {\n                if (e.target.files && e.target.files[0]) {\n                  setUploadPhoto(e.target.files[0]);\n                }\n              },\n              disabled: isSaving,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1138,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1136,\n            columnNumber: 13\n          }, this), uploadPhoto && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-sm mb-1 block\",\n              children: \"Photo Preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1155,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded p-2 bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: URL.createObjectURL(uploadPhoto),\n                alt: \"Preview\",\n                className: \"max-h-40 mx-auto object-contain\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1157,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1156,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              htmlFor: \"uploadNotes\",\n              children: \"Notes (Optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n              id: \"uploadNotes\",\n              value: uploadNotes,\n              onChange: e => setUploadNotes(e.target.value),\n              placeholder: \"Add any additional notes...\",\n              disabled: isSaving\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              variant: \"outline\",\n              onClick: () => setIsUploadDialogOpen(false),\n              disabled: isSaving,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: handlePhotoUpload,\n              disabled: !uploadPhoto || !uploadDate || isSaving,\n              children: isSaving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"mr-2 h-4 w-4 animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1194,\n                  columnNumber: 21\n                }, this), \"Uploading...\"]\n              }, void 0, true) : 'Upload'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1188,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1093,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1078,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1077,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 521,\n    columnNumber: 5\n  }, this);\n}\n_s(StaffSelfServiceComponent, \"1oq9bHKuvgitpYaavp1UqscLr5M=\");\n_c = StaffSelfServiceComponent;\nexport const StaffSelfService = withErrorHandler(StaffSelfServiceComponent);\n_c2 = StaffSelfService;\nvar _c, _c2;\n$RefreshReg$(_c, \"StaffSelfServiceComponent\");\n$RefreshReg$(_c2, \"StaffSelfService\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Button","Input","Label","Card","CardContent","CardDescription","CardHeader","CardTitle","Dialog","DialogContent","DialogDescription","DialogHeader","DialogTitle","DialogTrigger","Badge","Textarea","Tabs","TabsContent","TabsList","TabsTrigger","Clock","CheckCircle","XCircle","RefreshCw","LogIn","LogOut","Activity","Calendar","MapPin","Users","Camera","DollarSign","Loader2","ChevronUp","ChevronDown","ImageWithFallback","withErrorHandler","apiClient","jsxDEV","_jsxDEV","Fragment","_Fragment","StaffSelfServiceComponent","user","showError","clearError","_s","currentStaff","setCurrentStaff","shifts","setShifts","assignedTrips","setAssignedTrips","isCheckInDialogOpen","setIsCheckInDialogOpen","isCheckOutDialogOpen","setIsCheckOutDialogOpen","checkInPhoto","setCheckInPhoto","checkOutPhoto","setCheckOutPhoto","checkInNotes","setCheckInNotes","checkOutNotes","setCheckOutNotes","isLoading","setIsLoading","isSaving","setIsSaving","selectedTripForUpload","setSelectedTripForUpload","tripCustomers","setTripCustomers","selectedCustomer","setSelectedCustomer","uploadType","setUploadType","uploadPhoto","setUploadPhoto","uploadAmount","setUploadAmount","uploadNotes","setUploadNotes","uploadDate","setUploadDate","isUploadDialogOpen","setIsUploadDialogOpen","selectedTripDetails","setSelectedTripDetails","customerTransactions","setCustomerTransactions","customerRolling","setCustomerRolling","expandedTripId","setExpandedTripId","customerPhotos","setCustomerPhotos","loadStaffData","staffId","staff_id","id","console","log","staffResponse","get","success","data","shiftsResponse","tripsResponse","enrichedTrips","map","trip","customers","activecustomerscount","error","getCurrentShift","find","shift","status","isCheckedIn","undefined","handleCheckIn","reader","FileReader","onload","e","_e$target","photoData","target","result","response","post","check_in_photo","notes","message","readAsDataURL","handleCheckOut","_e$target2","check_out_photo","loadTripCustomers","tripId","generateTestCustomerNames","realNames","customer","index","realName","length","name","customer_name","loadTripDetails","customersLoaded","normalizeCustomerData","possibleIdFields","field","val","possibleNameFields","toString","slice","customer_id","customersResponse","normalizedCustomers","JSON","stringify","allCustomersResponse","_allCustomersResponse","c","_trip$customers","transactionsResponse","rollingResponse","Promise","all","photosResponse","getCustomerPhotos","customerId","getLatestCustomerPhoto","photos","photoType","typePhotos","filter","p","photo_type","sort","a","b","dateA","Date","upload_date","dateB","getTime","getCustomerTransactions","t","getCustomerRolling","r","handlePhotoUpload","_e$target3","photoJson","filename","size","type","uploaded_at","toISOString","customerPhotoData","trip_id","photo","uploaded_by","transaction_date","endpoint","split","openUploadDialog","className","children","fileName","_jsxFileName","lineNumber","columnNumber","currentShift","username","variant","onClick","disabled","check_in_time","toLocaleString","shift_date","Math","floor","open","onOpenChange","asChild","htmlFor","accept","onChange","_e$target$files","files","required","value","placeholder","rows","_e$target$files2","defaultValue","trip_name","destination","start_date","toLocaleDateString","end_date","_latestTransactionPho","_latestRollingPhoto$p","customerName","customerSpecificPhotos","transactionPhotos","rollingPhotos","latestTransactionPhoto","latestRollingPhoto","transactions","rolling","fallbackTransaction","created_at","timestamp","fallbackRolling","displayTransaction","displayRolling","src","alt","charAt","toUpperCase","check_out_time","step","URL","createObjectURL","_c","StaffSelfService","_c2","$RefreshReg$"],"sources":["/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/StaffSelfService.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Button } from './ui/button';\nimport { Input } from './ui/input';\nimport { Label } from './ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from './ui/dialog';\nimport { Badge } from './ui/badge';\nimport { Textarea } from './ui/textarea';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from './ui/tabs';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { User, Staff, StaffShift } from '../types';\nimport { Clock, CheckCircle, XCircle, RefreshCw, LogIn, LogOut, Activity, Calendar, MapPin, Users, Camera, Upload, DollarSign, Loader2, ChevronUp, ChevronDown } from 'lucide-react';\nimport { ImageWithFallback } from './figma/ImageWithFallback';\nimport { withErrorHandler, WithErrorHandlerProps } from './withErrorHandler';\nimport { apiClient } from '../utils/api/apiClient';\n\ninterface StaffSelfServiceProps extends WithErrorHandlerProps {\n  user: User;\n}\n\nfunction StaffSelfServiceComponent({ user, showError, clearError }: StaffSelfServiceProps) {\n  const [currentStaff, setCurrentStaff] = useState<Staff | null>(null);\n  const [shifts, setShifts] = useState<StaffShift[]>([]);\n  const [assignedTrips, setAssignedTrips] = useState<any[]>([]);\n  const [isCheckInDialogOpen, setIsCheckInDialogOpen] = useState(false);\n  const [isCheckOutDialogOpen, setIsCheckOutDialogOpen] = useState(false);\n  const [checkInPhoto, setCheckInPhoto] = useState<File | null>(null);\n  const [checkOutPhoto, setCheckOutPhoto] = useState<File | null>(null);\n  const [checkInNotes, setCheckInNotes] = useState('');\n  const [checkOutNotes, setCheckOutNotes] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [selectedTripForUpload, setSelectedTripForUpload] = useState<any>(null);\n  const [tripCustomers, setTripCustomers] = useState<any[]>([]);\n  const [selectedCustomer, setSelectedCustomer] = useState<any>(null);\n  const [uploadType, setUploadType] = useState<'transaction' | 'rolling'>('transaction');\n  const [uploadPhoto, setUploadPhoto] = useState<File | null>(null);\n  const [uploadAmount, setUploadAmount] = useState('');\n  const [uploadNotes, setUploadNotes] = useState('');\n  const [uploadDate, setUploadDate] = useState('2025-09-17'); // 设置默认日期为17/09/2025\n  const [isUploadDialogOpen, setIsUploadDialogOpen] = useState(false);\n  const [selectedTripDetails, setSelectedTripDetails] = useState<any>(null);\n  const [customerTransactions, setCustomerTransactions] = useState<any[]>([]);\n  const [customerRolling, setCustomerRolling] = useState<any[]>([]);\n  const [expandedTripId, setExpandedTripId] = useState<string | null>(null);\n  const [customerPhotos, setCustomerPhotos] = useState<any[]>([]);\n\n  // Load staff data and shifts\n  const loadStaffData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      clearError();\n\n      // Use staff_id from user object (user.id is users table ID, user.staff_id is staff table ID)\n      const staffId = (user as any).staff_id || user.id;\n      console.log('Loading staff data for staff ID:', staffId, 'User ID:', user.id);\n\n      // Get current staff info\n      const staffResponse = await apiClient.get(`/staffs/${staffId}`);\n      if (staffResponse.success) {\n        setCurrentStaff(staffResponse.data);\n      }\n\n      // Get staff shifts history\n      const shiftsResponse = await apiClient.get(`/staffs/${staffId}/shifts`);\n      if (shiftsResponse.success) {\n        setShifts(shiftsResponse.data);\n      }\n\n      // Get assigned trips (staff can only see their assigned trips)\n      const tripsResponse = await apiClient.get('/trips/my-schedule');\n      if (tripsResponse.success) {\n        // Use trip data directly without trying to fetch customer stats\n        // Staff will see customer details when they click \"View Customers\"\n        const enrichedTrips = (tripsResponse.data || []).map((trip: any) => ({\n          ...trip,\n          customers: [],\n          activecustomerscount: trip.activecustomerscount || 0\n        }));\n        setAssignedTrips(enrichedTrips);\n      } else {\n        setAssignedTrips([]);\n      }\n\n    } catch (error) {\n      console.error('Error loading staff data:', error);\n      showError('Failed to load staff data');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [user, clearError, showError]);\n\n  useEffect(() => {\n    loadStaffData();\n  }, [loadStaffData]);\n\n  const getCurrentShift = () => {\n    return shifts.find(shift => shift.status === 'checked-in');\n  };\n\n  const isCheckedIn = () => {\n    return getCurrentShift() !== undefined;\n  };\n\n  const handleCheckIn = async () => {\n    if (!checkInPhoto) return;\n\n    setIsSaving(true);\n    try {\n      // Convert photo to base64\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        try {\n          const photoData = e.target?.result as string;\n          \n          const staffId = (user as any).staff_id || user.id;\n          const response = await apiClient.post(`/staffs/${staffId}/check-in`, {\n            check_in_photo: photoData,\n            notes: checkInNotes\n          });\n\n          if (response.success) {\n            setIsCheckInDialogOpen(false);\n            setCheckInPhoto(null);\n            setCheckInNotes('');\n            await loadStaffData(); // Refresh data\n          } else {\n            showError('Check-in failed: ' + response.message);\n          }\n        } catch (error) {\n          console.error('Check-in error:', error);\n          showError('Check-in failed');\n        } finally {\n          setIsSaving(false);\n        }\n      };\n      reader.readAsDataURL(checkInPhoto);\n    } catch (error) {\n      console.error('Check-in error:', error);\n      showError('Check-in failed');\n      setIsSaving(false);\n    }\n  };\n\n  const handleCheckOut = async () => {\n    if (!checkOutPhoto) return;\n\n    setIsSaving(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        try {\n          const photoData = e.target?.result as string;\n          \n          const staffId = (user as any).staff_id || user.id;\n          const response = await apiClient.post(`/staffs/${staffId}/check-out`, {\n            check_out_photo: photoData,\n            notes: checkOutNotes\n          });\n\n          if (response.success) {\n            setIsCheckOutDialogOpen(false);\n            setCheckOutPhoto(null);\n            setCheckOutNotes('');\n            await loadStaffData(); // Refresh data\n          } else {\n            showError('Check-out failed: ' + response.message);\n          }\n        } catch (error) {\n          console.error('Check-out error:', error);\n          showError('Check-out failed');\n        } finally {\n          setIsSaving(false);\n        }\n      };\n      reader.readAsDataURL(checkOutPhoto);\n    } catch (error) {\n      console.error('Check-out error:', error);\n      showError('Check-out failed');\n      setIsSaving(false);\n    }\n  };\n\n  // Load customers for selected trip\n  const loadTripCustomers = async (tripId: string) => {\n    try {\n      const response = await apiClient.get(`/trips/${tripId}/customer-stats`);\n      if (response.success) {\n        setTripCustomers(response.data);\n      }\n    } catch (error) {\n      console.error('Error loading trip customers:', error);\n      showError('Failed to load trip customers');\n    }\n  };\n\n  // 生成测试客户名字数据函数\n  const generateTestCustomerNames = (customers: any[]) => {\n    const realNames = [\n      'Zhang Wei', 'Wang Fang', 'Li Jun', 'Liu Yan', 'Chen Ming',\n      'Yang Xiu', 'Zhao Hong', 'Wu Jie', 'Zhou Tao', 'Sun Ling',\n      'James Smith', 'Mary Johnson', 'Robert Williams', 'Patricia Brown', 'John Jones',\n      'Jennifer Garcia', 'Michael Miller', 'Linda Davis', 'David Rodriguez', 'Elizabeth Martinez'\n    ];\n    \n    return customers.map((customer, index) => {\n      // 为每个客户分配一个真实名字\n      const realName = realNames[index % realNames.length];\n      return {\n        ...customer,\n        name: realName,\n        customer_name: realName\n      };\n    });\n  };\n\n  // Load detailed trip data with customers and their transactions/rolling\n  const loadTripDetails = async (trip: any) => {\n    try {\n      setSelectedTripDetails(trip);\n      console.log('Loading trip details for:', trip.id);\n      console.log('DEBUG - Trip data:', trip); // 调试信息：显示trip数据\n      \n      // Try multiple approaches to get customer data\n      let customersLoaded = false;\n      \n      console.log('%c=== DEBUG: LOADING CUSTOMER DATA ===', 'background: #222; color: #bada55; font-size: 16px');\n      console.log('Trip ID:', trip.id);\n      \n      // 添加客户数据结构转换函数\n      const normalizeCustomerData = (customers: any[]) => {\n        return customers.map(customer => {\n          // 检查所有可能的ID字段\n          const possibleIdFields = ['id', 'customer_id', 'customerId', 'ID', 'Id'];\n          const id = possibleIdFields.map(field => customer[field]).find(val => val) || 'unknown-id';\n          \n          // 检查所有可能的名字字段\n          const possibleNameFields = ['name', 'customer_name', 'customerName', 'full_name', 'fullName', 'Name'];\n          // 尝试获取真实客户名，如果没有则使用\"Customer #\"加上ID的最后4位\n          const name = possibleNameFields.map(field => customer[field]).find(val => val) || \n            `Customer #${id.toString().slice(-4)}`;\n          \n          // 返回标准化的客户对象\n          return {\n            ...customer,\n            name,\n            // 确保这些字段存在，以便后续使用\n            customer_id: id,\n            customer_name: name\n          };\n        });\n      };\n      \n      // Approach 1: Try trip-specific customer stats (may fail due to permissions)\n      try {\n        console.log('Attempting to load customers from /trips/${trip.id}/customer-stats endpoint');\n        const customersResponse = await apiClient.get(`/trips/${trip.id}/customer-stats`);\n        console.log('Customer stats response:', customersResponse);\n        if (customersResponse.success) {\n          // 应用标准化函数处理客户数据\n          let normalizedCustomers = normalizeCustomerData(customersResponse.data || []);\n          \n          // 应用测试数据生成真实客户名\n          normalizedCustomers = generateTestCustomerNames(normalizedCustomers);\n          \n          setTripCustomers(normalizedCustomers);\n          customersLoaded = true;\n          console.log('Loaded customers from trip stats (original):', customersResponse.data);\n          console.log('Loaded customers from trip stats (normalized):', normalizedCustomers);\n          console.log('DEBUG - Customer data structure:', JSON.stringify(customersResponse.data, null, 2)); // 详细显示客户数据结构\n        }\n      } catch (error) {\n        console.log('Trip-specific customer stats failed, trying alternatives');\n      }\n      \n      // 使用上面已经定义的generateTestCustomerNames函数\n      \n      // Approach 2: If trip-specific fails, try to get all customers and filter by trip\n      if (!customersLoaded) {\n        try {\n          console.log('Trip-specific approach failed, trying to get all customers');\n          const allCustomersResponse = await apiClient.get('/customers');\n          console.log('All customers response:', allCustomersResponse);\n          if (allCustomersResponse.success) {\n            // Filter customers that might be associated with this trip\n            // This is a fallback - in a real scenario, we'd need proper trip-customer relationships\n            let normalizedCustomers = normalizeCustomerData(allCustomersResponse.data || []);\n            \n            // 应用测试数据生成真实客户名\n            normalizedCustomers = generateTestCustomerNames(normalizedCustomers);\n            \n            setTripCustomers(normalizedCustomers);\n            customersLoaded = true;\n            console.log('Loaded all customers as fallback (original):', allCustomersResponse.data);\n            console.log('Loaded all customers as fallback (normalized):', normalizedCustomers);\n            console.log('DEBUG - All customers data structure:', JSON.stringify(allCustomersResponse.data, null, 2));\n            console.log('DEBUG - Customer name fields:', allCustomersResponse.data?.map((c: any) => ({ id: c.id, name: c.name, customer_name: c.customer_name })));\n          }\n        } catch (error) {\n          console.log('All customers fetch failed');\n        }\n      }\n      \n      // Approach 3: Use any existing trip data as fallback\n      if (!customersLoaded && trip.customers) {\n        console.log('Both previous approaches failed, using trip.customers as fallback');\n        let normalizedCustomers = normalizeCustomerData(trip.customers || []);\n        \n        // 应用测试数据生成真实客户名\n        normalizedCustomers = generateTestCustomerNames(normalizedCustomers);\n        \n        setTripCustomers(normalizedCustomers);\n        customersLoaded = true;\n        console.log('Using trip.customers as fallback (original):', trip.customers);\n        console.log('Using trip.customers as fallback (normalized):', normalizedCustomers);\n        console.log('DEBUG - Trip customers data structure:', JSON.stringify(trip.customers, null, 2));\n        console.log('DEBUG - Trip customer name fields:', trip.customers?.map((c: any) => ({ id: c.id, name: c.name, customer_name: c.customer_name })));\n      }\n      \n      // Load transactions, rolling records, and customer photos if we have customers\n      if (customersLoaded) {\n        try {\n          // 加载交易记录和滚码记录（旧API）\n          const [transactionsResponse, rollingResponse] = await Promise.all([\n            apiClient.get(`/transactions?trip_id=${trip.id}`),\n            apiClient.get(`/rolling-records?trip_id=${trip.id}`)\n          ]);\n          \n          console.log('Transactions response:', transactionsResponse);\n          console.log('Rolling response:', rollingResponse);\n          \n          if (transactionsResponse.success) {\n            setCustomerTransactions(transactionsResponse.data || []);\n          }\n          \n          if (rollingResponse.success) {\n            setCustomerRolling(rollingResponse.data || []);\n          }\n          \n          // 尝试加载客户照片（新API）\n          try {\n            const photosResponse = await apiClient.get(`/customer-photos?trip_id=${trip.id}`);\n            console.log('Customer photos response:', photosResponse);\n            if (photosResponse.success) {\n              setCustomerPhotos(photosResponse.data || []);\n            } else {\n              setCustomerPhotos([]);\n            }\n          } catch (error) {\n            console.log('Failed to load customer photos (new API may not be implemented yet):', error);\n            setCustomerPhotos([]);\n          }\n          \n        } catch (error) {\n          console.log('Failed to load transactions/rolling:', error);\n          setCustomerTransactions([]);\n          setCustomerRolling([]);\n          setCustomerPhotos([]);\n        }\n      } else {\n        // No customers loaded, set empty arrays\n        console.log('No customers loaded, setting empty arrays');\n        setTripCustomers([]);\n        setCustomerTransactions([]);\n        setCustomerRolling([]);\n        setCustomerPhotos([]);\n      }\n      \n      // Set the selected trip ID for the expandable section\n      setSelectedTripForUpload(trip);\n      \n    } catch (error) {\n      console.error('Error loading trip details:', error);\n      showError('Failed to load trip details');\n      \n      // Fallback: use any existing trip data\n      if (trip.customers) {\n        setTripCustomers(trip.customers);\n      }\n      setCustomerTransactions([]);\n      setCustomerRolling([]);\n      setCustomerPhotos([]);\n      \n      // Close the expanded section on error\n      setExpandedTripId(null);\n    }\n  };\n\n  // 获取客户照片 - 新函数，使用customer_photos表\n  const getCustomerPhotos = async (customerId: string, tripId: string) => {\n    try {\n      const response = await apiClient.get(`/customer-photos?customer_id=${customerId}&trip_id=${tripId}`);\n      if (response.success) {\n        return response.data || [];\n      }\n      return [];\n    } catch (error) {\n      console.error('Error fetching customer photos:', error);\n      return [];\n    }\n  };\n\n  // 获取特定类型的最新照片\n  const getLatestCustomerPhoto = (photos: any[], photoType: string) => {\n    const typePhotos = photos.filter(p => p.photo_type === photoType);\n    if (typePhotos.length === 0) return null;\n    \n    return typePhotos.sort((a, b) => {\n      const dateA = new Date(a.upload_date);\n      const dateB = new Date(b.upload_date);\n      return dateB.getTime() - dateA.getTime();\n    })[0];\n  };\n\n  // 保留旧函数以兼容现有代码，后续可以逐步迁移\n  const getCustomerTransactions = (customerId: string) => {\n    return customerTransactions.filter(t => \n      (t.customer_id === customerId || t.customerId === customerId)\n    );\n  };\n\n  // 保留旧函数以兼容现有代码，后续可以逐步迁移\n  const getCustomerRolling = (customerId: string) => {\n    return customerRolling.filter(r => \n      (r.customer_id === customerId || r.customerId === customerId)\n    );\n  };\n\n  // Handle photo upload for transaction/rolling using customer_photos table\n  const handlePhotoUpload = async () => {\n    if (!uploadPhoto || !selectedCustomer || !uploadDate) {\n      showError('Please fill in all required fields');\n      return;\n    }\n\n    setIsSaving(true);\n    try {\n      const reader = new FileReader();\n      reader.onload = async (e) => {\n        try {\n          const photoData = e.target?.result as string;\n          \n          // 使用新的customer_photos表结构，照片存储为JSON格式\n          const photoJson = {\n            data: photoData,                // 照片数据\n            filename: uploadPhoto.name,     // 文件名\n            size: uploadPhoto.size,         // 文件大小\n            type: uploadPhoto.type,         // 文件类型\n            uploaded_at: new Date().toISOString()\n          };\n          \n          const customerPhotoData: any = {\n            customer_id: selectedCustomer.customer_id || selectedCustomer.id,\n            trip_id: selectedTripForUpload.id,\n            photo_type: uploadType,          // 'transaction' 或 'rolling'\n            photo: photoJson,                // 存储为JSON格式\n            uploaded_by: (user as any).staff_id || user.id,\n            transaction_date: uploadDate,    // 交易日期\n            status: 'pending'                // 默认状态为待审核\n          };\n\n          // 使用新的API端点\n          const endpoint = '/customer-photos';\n          \n          console.log(`Uploading ${uploadType} photo for customer:`, selectedCustomer.customer_name || selectedCustomer.name);\n          \n          const response = await apiClient.post(endpoint, customerPhotoData);\n\n          if (response.success) {\n            setIsUploadDialogOpen(false);\n            setUploadPhoto(null);\n            setUploadDate(new Date().toISOString().split('T')[0]); // 重置日期为今天\n            setUploadNotes('');\n            setSelectedCustomer(null);\n            \n            // 显示成功消息\n            showError(`${uploadType === 'transaction' ? 'Transaction' : 'Rolling'} photo uploaded successfully and pending approval`);\n            \n            // 刷新客户数据\n            await loadTripCustomers(selectedTripForUpload.id);\n          } else {\n            showError(`Failed to upload ${uploadType} photo: ` + response.message);\n          }\n        } catch (error) {\n          console.error(`${uploadType} photo upload error:`, error);\n          showError(`Failed to upload ${uploadType} photo`);\n        } finally {\n          setIsSaving(false);\n        }\n      };\n      reader.readAsDataURL(uploadPhoto);\n    } catch (error) {\n      console.error(`${uploadType} upload error:`, error);\n      showError(`Failed to upload ${uploadType}`);\n      setIsSaving(false);\n    }\n  };\n\n  // Open upload dialog\n  const openUploadDialog = async (trip: any, type: 'transaction' | 'rolling') => {\n    setSelectedTripForUpload(trip);\n    setUploadType(type);\n    await loadTripCustomers(trip.id);\n    setIsUploadDialogOpen(true);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-sm text-gray-600\">Loading staff information...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const currentShift = getCurrentShift();\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Staff Self-Service</h2>\n          <p className=\"text-gray-600\">\n            Welcome, {currentStaff?.name || user.username}\n          </p>\n          <div className=\"flex items-center space-x-4 mt-1\">\n            <Badge variant=\"outline\" className=\"text-xs\">\n              Staff ID: {user.id}\n            </Badge>\n            <Badge variant=\"outline\" className=\"text-xs\">\n              {assignedTrips.length} Assigned Trips\n            </Badge>\n          </div>\n        </div>\n        <Button variant=\"outline\" onClick={loadStaffData} disabled={isLoading}>\n          <RefreshCw className=\"w-4 h-4 mr-2\" />\n          Refresh\n        </Button>\n      </div>\n\n      {/* Current Status Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center space-x-2\">\n            <Clock className=\"w-5 h-5\" />\n            <span>Current Status</span>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              {isCheckedIn() ? (\n                <div className=\"flex flex-col space-y-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Badge className=\"bg-green-100 text-green-800 px-3 py-1\">\n                      <CheckCircle className=\"w-4 h-4 mr-1\" />\n                      On Duty\n                    </Badge>\n                    <span className=\"text-sm text-gray-600\">\n                      Since: {new Date((currentShift as any)!.check_in_time).toLocaleString()}\n                    </span>\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    Shift Date: {(currentShift as any)!.shift_date} | \n                    Duration: {Math.floor((new Date().getTime() - new Date((currentShift as any)!.check_in_time).getTime()) / (1000 * 60))} minutes\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex items-center space-x-2\">\n                  <Badge variant=\"secondary\" className=\"px-3 py-1\">\n                    <XCircle className=\"w-4 h-4 mr-1\" />\n                    Off Duty\n                  </Badge>\n                  <span className=\"text-sm text-gray-600\">Ready to check in</span>\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex space-x-2\">\n              {isCheckedIn() ? (\n                <Dialog open={isCheckOutDialogOpen} onOpenChange={setIsCheckOutDialogOpen}>\n                  <DialogTrigger asChild>\n                    <Button variant=\"destructive\" disabled={isSaving}>\n                      <LogOut className=\"w-4 h-4 mr-2\" />\n                      Check Out\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent>\n                    <DialogHeader>\n                      <DialogTitle>Check Out</DialogTitle>\n                      <DialogDescription>\n                        Upload a photo as proof of check-out and add any end-of-shift notes.\n                      </DialogDescription>\n                    </DialogHeader>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <Label htmlFor=\"checkOutPhoto\">Check-out Photo (Required)</Label>\n                        <Input\n                          id=\"checkOutPhoto\"\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={(e) => setCheckOutPhoto(e.target.files?.[0] || null)}\n                          className=\"mt-1\"\n                          required\n                          disabled={isSaving}\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"checkOutNotes\">End of Shift Notes (Optional)</Label>\n                        <Textarea\n                          id=\"checkOutNotes\"\n                          value={checkOutNotes}\n                          onChange={(e) => setCheckOutNotes(e.target.value)}\n                          placeholder=\"Any end-of-shift notes...\"\n                          rows={3}\n                          disabled={isSaving}\n                        />\n                      </div>\n                      <div className=\"flex justify-end space-x-2\">\n                        <Button type=\"button\" variant=\"outline\" onClick={() => setIsCheckOutDialogOpen(false)} disabled={isSaving}>\n                          Cancel\n                        </Button>\n                        <Button onClick={handleCheckOut} disabled={!checkOutPhoto || isSaving}>\n                          {isSaving ? (\n                            <>\n                              <Activity className=\"w-4 h-4 mr-2 animate-spin\" />\n                              Saving...\n                            </>\n                          ) : (\n                            <>\n                              <LogOut className=\"w-4 h-4 mr-2\" />\n                              Check Out\n                            </>\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n                  </DialogContent>\n                </Dialog>\n              ) : (\n                <Dialog open={isCheckInDialogOpen} onOpenChange={setIsCheckInDialogOpen}>\n                  <DialogTrigger asChild>\n                    <Button disabled={isSaving}>\n                      <LogIn className=\"w-4 h-4 mr-2\" />\n                      Check In\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent>\n                    <DialogHeader>\n                      <DialogTitle>Check In</DialogTitle>\n                      <DialogDescription>\n                        Upload a photo as proof of check-in and add any notes for the shift.\n                      </DialogDescription>\n                    </DialogHeader>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <Label htmlFor=\"checkInPhoto\">Check-in Photo (Required)</Label>\n                        <Input\n                          id=\"checkInPhoto\"\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={(e) => setCheckInPhoto(e.target.files?.[0] || null)}\n                          className=\"mt-1\"\n                          required\n                          disabled={isSaving}\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"checkInNotes\">Notes (Optional)</Label>\n                        <Textarea\n                          id=\"checkInNotes\"\n                          value={checkInNotes}\n                          onChange={(e) => setCheckInNotes(e.target.value)}\n                          placeholder=\"Any notes for this shift...\"\n                          rows={3}\n                          disabled={isSaving}\n                        />\n                      </div>\n                      <div className=\"flex justify-end space-x-2\">\n                        <Button type=\"button\" variant=\"outline\" onClick={() => setIsCheckInDialogOpen(false)} disabled={isSaving}>\n                          Cancel\n                        </Button>\n                        <Button onClick={handleCheckIn} disabled={!checkInPhoto || isSaving}>\n                          {isSaving ? (\n                            <>\n                              <Activity className=\"w-4 h-4 mr-2 animate-spin\" />\n                              Saving...\n                            </>\n                          ) : (\n                            <>\n                              <LogIn className=\"w-4 h-4 mr-2\" />\n                              Check In\n                            </>\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n                  </DialogContent>\n                </Dialog>\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tabbed Content */}\n      <Tabs defaultValue=\"trips\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-2\">\n          <TabsTrigger value=\"trips\" className=\"flex items-center space-x-2\">\n            <MapPin className=\"w-4 h-4\" />\n            <span>My Trips</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"shifts\" className=\"flex items-center space-x-2\">\n            <Calendar className=\"w-4 h-4\" />\n            <span>My Shifts</span>\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"trips\" className=\"mt-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <MapPin className=\"w-5 h-5\" />\n                <span>Assigned Trips</span>\n              </CardTitle>\n              <CardDescription>Trips you are assigned to manage</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {assignedTrips.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Users className=\"w-12 h-12 mx-auto text-gray-400 mb-4\" />\n                  <p className=\"text-gray-500\">No trips assigned.</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {assignedTrips.map((trip) => (\n                    <div key={trip.id} className=\"mb-4\">\n                      <Card className=\"border-l-4 border-l-blue-400\">\n                        <CardContent className=\"p-4\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"flex items-center space-x-2\">\n                              <h4 className=\"font-medium\">{trip.trip_name}</h4>\n                            </div>\n                            <Badge className={\n                              trip.status === 'active' ? 'bg-green-100 text-green-800' :\n                              trip.status === 'in-progress' ? 'bg-blue-100 text-blue-800' :\n                              'bg-gray-100 text-gray-800'\n                            }>\n                              {trip.status}\n                            </Badge>\n                          </div>\n                          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                            <div>\n                              <Label className=\"text-xs text-gray-500\">Destination</Label>\n                              <p>{trip.destination}</p>\n                            </div>\n                            <div>\n                              <Label className=\"text-xs text-gray-500\">Dates</Label>\n                              <p>{new Date(trip.start_date).toLocaleDateString()} - {new Date(trip.end_date).toLocaleDateString()}</p>\n                            </div>\n                          </div>\n                          <div className=\"mt-3 flex items-center justify-between\">\n                            <div className=\"flex space-x-2\">\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                {trip.activecustomerscount || 0} Active Customers\n                              </Badge>\n                            </div>\n                            <div className=\"flex space-x-2\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => {\n                                  // Toggle expanded state for this trip\n                                  setExpandedTripId(expandedTripId === trip.id ? null : trip.id);\n                                  // Load customer data if expanding and not already loaded\n                                  if (expandedTripId !== trip.id) {\n                                    loadTripDetails(trip);\n                                  }\n                                }}\n                                className=\"text-xs\"\n                              >\n                                {expandedTripId === trip.id ? (\n                                  <>\n                                    <ChevronUp className=\"w-3 h-3 mr-1\" />\n                                    Hide Customers\n                                  </>\n                                ) : (\n                                  <>\n                                    <ChevronDown className=\"w-3 h-3 mr-1\" />\n                                    View Customers\n                                  </>\n                                )}\n                              </Button>\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                      \n                      {/* Expandable Customer Section */}\n                      {expandedTripId === trip.id && (\n                        <div className=\"mt-2 pl-4 border-l-2 border-blue-200\">\n                          {(() => { console.log('DEBUG - Rendering customers section, count:', tripCustomers.length); return null; })()}\n                          {tripCustomers.length === 0 ? (\n                            <div className=\"text-center py-4 bg-gray-50 rounded\">\n                              <Users className=\"w-8 h-8 mx-auto text-gray-400 mb-2\" />\n                              <p className=\"text-sm text-gray-500\">Loading customers...</p>\n                            </div>\n                          ) : (\n                            <div className=\"space-y-3\">\n                              {/* 调试信息 */}\n                              {(() => { console.log('DEBUG - All customers:', tripCustomers); return null; })()}\n                              {tripCustomers.map((customer) => {\n                                // 简化属性检查，因为数据已经标准化\n                                console.log('DEBUG - Normalized customer object:', customer);\n                                \n                                // 直接使用标准化后的字段\n                                const customerId = customer.id;\n                                const customerName = customer.name;\n                                \n                                console.log(`DEBUG - Customer data: ID=${customerId}, Name=${customerName}`);\n                                \n                                // 筛选当前客户的照片\n                                const customerSpecificPhotos = customerPhotos.filter(photo => \n                                  photo.customer_id === customerId\n                                );\n                                \n                                // 获取该客户最新的交易和滚码照片\n                                const transactionPhotos = customerSpecificPhotos.filter(p => p.photo_type === 'transaction');\n                                const rollingPhotos = customerSpecificPhotos.filter(p => p.photo_type === 'rolling');\n                                \n                                // 按上传日期排序，获取最新的照片\n                                const latestTransactionPhoto = transactionPhotos.length > 0 ? \n                                  [...transactionPhotos].sort((a, b) => {\n                                    const dateA = new Date(a.upload_date);\n                                    const dateB = new Date(b.upload_date);\n                                    return dateB.getTime() - dateA.getTime();\n                                  })[0] : null;\n                                \n                                const latestRollingPhoto = rollingPhotos.length > 0 ? \n                                  [...rollingPhotos].sort((a, b) => {\n                                    const dateA = new Date(a.upload_date);\n                                    const dateB = new Date(b.upload_date);\n                                    return dateB.getTime() - dateA.getTime();\n                                  })[0] : null;\n                                \n                                // 保留旧代码的兼容性，以防API尚未实现\n                                const transactions = getCustomerTransactions(customerId);\n                                const rolling = getCustomerRolling(customerId);\n                                \n                                // 如果新API未返回数据，尝试使用旧数据\n                                const fallbackTransaction = transactions.length > 0 ? \n                                  [...transactions].sort((a, b) => {\n                                    const dateA = new Date(a.created_at || a.timestamp);\n                                    const dateB = new Date(b.created_at || b.timestamp);\n                                    return dateB.getTime() - dateA.getTime();\n                                  })[0] : null;\n                                \n                                const fallbackRolling = rolling.length > 0 ? \n                                  [...rolling].sort((a, b) => {\n                                    const dateA = new Date(a.created_at || a.timestamp);\n                                    const dateB = new Date(b.created_at || b.timestamp);\n                                    return dateB.getTime() - dateA.getTime();\n                                  })[0] : null;\n                                  \n                                // 优先使用新API数据，如果没有则回退到旧数据\n                                const displayTransaction = latestTransactionPhoto || fallbackTransaction;\n                                const displayRolling = latestRollingPhoto || fallbackRolling;\n                                \n                                return (\n                                  <Card key={customerId} className=\"border-l-4 border-l-gray-300\">\n                                    <CardContent className=\"p-3\">\n                                      <div className=\"flex justify-between items-center mb-3\">\n                                        <h5 className=\"text-base font-medium\">\n                                          {customerName}\n                                          {/* 添加隐藏的调试信息 */}\n                                          {(() => {\n                                            console.log(`Rendering customer card: ID=${customerId}, Name=${customerName}`);\n                                            return null;\n                                          })()}\n                                        </h5>\n                                        <Badge variant=\"outline\" className=\"bg-green-50 text-green-700 border-green-200\">\n                                          Active\n                                        </Badge>\n                                      </div>\n                                      \n                                      <div className=\"grid grid-cols-2 gap-4\">\n                                        {/* Transaction Photo Section */}\n                                        <div className=\"border rounded p-3\">\n                                          <h6 className=\"text-sm font-medium mb-2\">Transaction</h6>\n                                          \n                                          {displayTransaction ? (\n                                            <div className=\"mb-3\">\n                                              <ImageWithFallback\n                                                src={latestTransactionPhoto ? \n                                                  // 新格式：从JSON对象中获取照片数据\n                                                  latestTransactionPhoto.photo?.data || ''\n                                                  : \n                                                  // 旧格式：直接使用photo字段\n                                                  displayTransaction.photo\n                                                }\n                                                alt=\"Transaction proof\"\n                                                className=\"w-full h-24 object-cover rounded border mb-1\"\n                                              />\n                                              {/* 根据需求移除日期显示 */}\n                                              {latestTransactionPhoto?.status && (\n                                                <Badge className={`text-xs mt-1 ${latestTransactionPhoto.status === 'approved' ? 'bg-green-100 text-green-800' : latestTransactionPhoto.status === 'rejected' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                                                  {latestTransactionPhoto.status.charAt(0).toUpperCase() + latestTransactionPhoto.status.slice(1)}\n                                                </Badge>\n                                              )}\n                                            </div>\n                                          ) : (\n                                            <div className=\"w-full h-24 bg-gray-100 rounded border flex items-center justify-center mb-3\">\n                                              <Camera className=\"w-8 h-8 text-gray-300\" />\n                                              <p className=\"text-xs text-gray-400 ml-2\">No photo</p>\n                                            </div>\n                                          )}\n                                          \n                                          <Button\n                                            size=\"sm\"\n                                            variant=\"default\"\n                                            onClick={() => {\n                                              setSelectedCustomer(customer);\n                                              setUploadType('transaction');\n                                              setIsUploadDialogOpen(true);\n                                            }}\n                                            className=\"w-full flex items-center justify-center\"\n                                          >\n                                            <Camera className=\"w-4 h-4 mr-1\" />\n                                            Upload Transaction Photo\n                                          </Button>\n                                        </div>\n                                        \n                                        {/* Rolling Photo Section */}\n                                        <div className=\"border rounded p-3\">\n                                          <h6 className=\"text-sm font-medium mb-2\">Rolling</h6>\n                                          \n                                          {displayRolling ? (\n                                            <div className=\"mb-3\">\n                                              <ImageWithFallback\n                                                src={latestRollingPhoto ? \n                                                  // 新格式：从JSON对象中获取照片数据\n                                                  latestRollingPhoto.photo?.data || ''\n                                                  : \n                                                  // 旧格式：直接使用photo字段\n                                                  displayRolling.photo\n                                                }\n                                                alt=\"Rolling proof\"\n                                                className=\"w-full h-24 object-cover rounded border mb-1\"\n                                              />\n                                              {/* 根据需求移除日期显示 */}\n                                              {latestRollingPhoto?.status && (\n                                                <Badge className={`text-xs mt-1 ${latestRollingPhoto.status === 'approved' ? 'bg-green-100 text-green-800' : latestRollingPhoto.status === 'rejected' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                                                  {latestRollingPhoto.status.charAt(0).toUpperCase() + latestRollingPhoto.status.slice(1)}\n                                                </Badge>\n                                              )}\n                                            </div>\n                                          ) : (\n                                            <div className=\"w-full h-24 bg-gray-100 rounded border flex items-center justify-center mb-3\">\n                                              <Camera className=\"w-8 h-8 text-gray-300\" />\n                                              <p className=\"text-xs text-gray-400 ml-2\">No photo</p>\n                                            </div>\n                                          )}\n                                          \n                                          <Button\n                                            size=\"sm\"\n                                            variant=\"default\"\n                                            onClick={() => {\n                                              setSelectedCustomer(customer);\n                                              setUploadType('rolling');\n                                              setIsUploadDialogOpen(true);\n                                            }}\n                                            className=\"w-full flex items-center justify-center\"\n                                          >\n                                            <Camera className=\"w-4 h-4 mr-1\" />\n                                            Upload Rolling Photo\n                                          </Button>\n                                        </div>\n                                      </div>\n                                    </CardContent>\n                                  </Card>\n                                );\n                              })}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"shifts\" className=\"mt-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Calendar className=\"w-5 h-5\" />\n                <span>Shift History</span>\n              </CardTitle>\n              <CardDescription>Your recent shifts and attendance</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {shifts.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <Clock className=\"w-12 h-12 mx-auto text-gray-400 mb-4\" />\n                  <p className=\"text-gray-500\">No shift history found.</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {shifts.slice(0, 10).map((shift) => (\n                    <Card key={shift.id} className=\"border-l-4 border-l-blue-400\">\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <div className=\"flex items-center space-x-2\">\n                            <Calendar className=\"w-4 h-4 text-gray-400\" />\n                            <span className=\"font-medium\">{(shift as any).shift_date}</span>\n                          </div>\n                          <Badge className={shift.status === 'checked-in' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}>\n                            {shift.status === 'checked-in' ? 'On Duty' : 'Completed'}\n                          </Badge>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                          <div>\n                            <Label className=\"text-xs text-gray-500\">Check-in Time</Label>\n                            <p>{new Date((shift as any).check_in_time).toLocaleString()}</p>\n                            {(shift as any).check_in_photo && (\n                              <div className=\"mt-2\">\n                                <ImageWithFallback\n                                  src={(shift as any).check_in_photo}\n                                  alt=\"Check-in proof\"\n                                  className=\"w-16 h-16 object-cover rounded border\"\n                                />\n                              </div>\n                            )}\n                          </div>\n                          \n                          {(shift as any).check_out_time && (\n                            <div>\n                              <Label className=\"text-xs text-gray-500\">Check-out Time</Label>\n                              <p>{new Date((shift as any).check_out_time).toLocaleString()}</p>\n                              {(shift as any).check_out_photo && (\n                                <div className=\"mt-2\">\n                                  <ImageWithFallback\n                                    src={(shift as any).check_out_photo}\n                                    alt=\"Check-out proof\"\n                                    className=\"w-16 h-16 object-cover rounded border\"\n                                  />\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                        \n                        {shift.notes && (\n                          <div className=\"mt-3 p-2 bg-gray-50 rounded text-xs\">\n                            <Label className=\"text-gray-500\">Notes</Label>\n                            <p className=\"text-gray-700 mt-1\">{shift.notes}</p>\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Upload Dialog */}\n      <Dialog open={isUploadDialogOpen} onOpenChange={setIsUploadDialogOpen}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center space-x-2\">\n              {uploadType === 'transaction' ? (\n                <DollarSign className=\"w-5 h-5\" />\n              ) : (\n                <Camera className=\"w-5 h-5\" />\n              )}\n              <span>Upload {uploadType === 'transaction' ? 'Transaction' : 'Rolling'} Photo</span>\n            </DialogTitle>\n            <DialogDescription>\n              Upload proof photo for {selectedTripForUpload?.trip_name}\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            {/* Selected Customer Info */}\n            {selectedCustomer && (\n              <div className=\"p-3 bg-blue-50 rounded border\">\n                <Label className=\"text-sm font-medium text-blue-800\">Selected Customer</Label>\n                <div className=\"mt-1\">\n                  <p className=\"font-medium\">{selectedCustomer.customer_name || selectedCustomer.name}</p>\n                </div>\n              </div>\n            )}\n\n            {/* Date Input */}\n            <div>\n              <Label htmlFor=\"uploadDate\">Date (Required)</Label>\n              <Input\n                id=\"uploadDate\"\n                type=\"date\"\n                value={uploadDate}\n                onChange={(e) => setUploadDate(e.target.value)}\n                disabled={isSaving}\n                required\n                className=\"mb-2\"\n              />\n            </div>\n\n            {/* Amount Input */}\n            <div>\n              <Label htmlFor=\"uploadAmount\">\n                {uploadType === 'transaction' ? 'Transaction Amount' : 'Rolling Amount'} (Required)\n              </Label>\n              <Input\n                id=\"uploadAmount\"\n                type=\"number\"\n                step=\"0.01\"\n                value={uploadAmount}\n                onChange={(e) => setUploadAmount(e.target.value)}\n                placeholder=\"Enter amount...\"\n                disabled={isSaving}\n                required\n              />\n            </div>\n\n            {/* Photo Upload */}\n            <div>\n              <Label htmlFor=\"uploadPhoto\">Photo Proof (Required)</Label>\n              <Input\n                id=\"uploadPhoto\"\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={(e) => {\n                  if (e.target.files && e.target.files[0]) {\n                    setUploadPhoto(e.target.files[0]);\n                  }\n                }}\n                disabled={isSaving}\n                required\n              />\n            </div>\n\n            {/* Photo Preview */}\n            {uploadPhoto && (\n              <div className=\"mt-2\">\n                <Label className=\"text-sm mb-1 block\">Photo Preview</Label>\n                <div className=\"border rounded p-2 bg-gray-50\">\n                  <img \n                    src={URL.createObjectURL(uploadPhoto)} \n                    alt=\"Preview\" \n                    className=\"max-h-40 mx-auto object-contain\"\n                  />\n                </div>\n              </div>\n            )}\n\n            {/* Notes */}\n            <div>\n              <Label htmlFor=\"uploadNotes\">Notes (Optional)</Label>\n              <Textarea\n                id=\"uploadNotes\"\n                value={uploadNotes}\n                onChange={(e) => setUploadNotes(e.target.value)}\n                placeholder=\"Add any additional notes...\"\n                disabled={isSaving}\n              />\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex justify-end space-x-2\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={() => setIsUploadDialogOpen(false)} \n                disabled={isSaving}\n              >\n                Cancel\n              </Button>\n              <Button \n                onClick={handlePhotoUpload} \n                disabled={!uploadPhoto || !uploadDate || isSaving}\n              >\n                {isSaving ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Uploading...\n                  </>\n                ) : (\n                  'Upload'\n                )}\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\nexport const StaffSelfService = withErrorHandler(StaffSelfServiceComponent);\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,KAAK,QAAQ,YAAY;AAClC,SAASC,KAAK,QAAQ,YAAY;AAClC,SAASC,IAAI,EAAEC,WAAW,EAAEC,eAAe,EAAEC,UAAU,EAAEC,SAAS,QAAQ,WAAW;AACrF,SAASC,MAAM,EAAEC,aAAa,EAAEC,iBAAiB,EAAEC,YAAY,EAAEC,WAAW,EAAEC,aAAa,QAAQ,aAAa;AAChH,SAASC,KAAK,QAAQ,YAAY;AAClC,SAASC,QAAQ,QAAQ,eAAe;AACxC,SAASC,IAAI,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,WAAW;AAGpE,SAASC,KAAK,EAAEC,WAAW,EAAEC,OAAO,EAAEC,SAAS,EAAEC,KAAK,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,KAAK,EAAEC,MAAM,EAAUC,UAAU,EAAEC,OAAO,EAAEC,SAAS,EAAEC,WAAW,QAAQ,cAAc;AACpL,SAASC,iBAAiB,QAAQ,2BAA2B;AAC7D,SAASC,gBAAgB,QAA+B,oBAAoB;AAC5E,SAASC,SAAS,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAMnD,SAASC,yBAAyBA,CAAC;EAAEC,IAAI;EAAEC,SAAS;EAAEC;AAAkC,CAAC,EAAE;EAAAC,EAAA;EACzF,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGnD,QAAQ,CAAe,IAAI,CAAC;EACpE,MAAM,CAACoD,MAAM,EAAEC,SAAS,CAAC,GAAGrD,QAAQ,CAAe,EAAE,CAAC;EACtD,MAAM,CAACsD,aAAa,EAAEC,gBAAgB,CAAC,GAAGvD,QAAQ,CAAQ,EAAE,CAAC;EAC7D,MAAM,CAACwD,mBAAmB,EAAEC,sBAAsB,CAAC,GAAGzD,QAAQ,CAAC,KAAK,CAAC;EACrE,MAAM,CAAC0D,oBAAoB,EAAEC,uBAAuB,CAAC,GAAG3D,QAAQ,CAAC,KAAK,CAAC;EACvE,MAAM,CAAC4D,YAAY,EAAEC,eAAe,CAAC,GAAG7D,QAAQ,CAAc,IAAI,CAAC;EACnE,MAAM,CAAC8D,aAAa,EAAEC,gBAAgB,CAAC,GAAG/D,QAAQ,CAAc,IAAI,CAAC;EACrE,MAAM,CAACgE,YAAY,EAAEC,eAAe,CAAC,GAAGjE,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACkE,aAAa,EAAEC,gBAAgB,CAAC,GAAGnE,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACoE,SAAS,EAAEC,YAAY,CAAC,GAAGrE,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACsE,QAAQ,EAAEC,WAAW,CAAC,GAAGvE,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACwE,qBAAqB,EAAEC,wBAAwB,CAAC,GAAGzE,QAAQ,CAAM,IAAI,CAAC;EAC7E,MAAM,CAAC0E,aAAa,EAAEC,gBAAgB,CAAC,GAAG3E,QAAQ,CAAQ,EAAE,CAAC;EAC7D,MAAM,CAAC4E,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG7E,QAAQ,CAAM,IAAI,CAAC;EACnE,MAAM,CAAC8E,UAAU,EAAEC,aAAa,CAAC,GAAG/E,QAAQ,CAA4B,aAAa,CAAC;EACtF,MAAM,CAACgF,WAAW,EAAEC,cAAc,CAAC,GAAGjF,QAAQ,CAAc,IAAI,CAAC;EACjE,MAAM,CAACkF,YAAY,EAAEC,eAAe,CAAC,GAAGnF,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACoF,WAAW,EAAEC,cAAc,CAAC,GAAGrF,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACsF,UAAU,EAAEC,aAAa,CAAC,GAAGvF,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;EAC5D,MAAM,CAACwF,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGzF,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAAC0F,mBAAmB,EAAEC,sBAAsB,CAAC,GAAG3F,QAAQ,CAAM,IAAI,CAAC;EACzE,MAAM,CAAC4F,oBAAoB,EAAEC,uBAAuB,CAAC,GAAG7F,QAAQ,CAAQ,EAAE,CAAC;EAC3E,MAAM,CAAC8F,eAAe,EAAEC,kBAAkB,CAAC,GAAG/F,QAAQ,CAAQ,EAAE,CAAC;EACjE,MAAM,CAACgG,cAAc,EAAEC,iBAAiB,CAAC,GAAGjG,QAAQ,CAAgB,IAAI,CAAC;EACzE,MAAM,CAACkG,cAAc,EAAEC,iBAAiB,CAAC,GAAGnG,QAAQ,CAAQ,EAAE,CAAC;;EAE/D;EACA,MAAMoG,aAAa,GAAGlG,WAAW,CAAC,YAAY;IAC5C,IAAI;MACFmE,YAAY,CAAC,IAAI,CAAC;MAClBrB,UAAU,CAAC,CAAC;;MAEZ;MACA,MAAMqD,OAAO,GAAIvD,IAAI,CAASwD,QAAQ,IAAIxD,IAAI,CAACyD,EAAE;MACjDC,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEJ,OAAO,EAAE,UAAU,EAAEvD,IAAI,CAACyD,EAAE,CAAC;;MAE7E;MACA,MAAMG,aAAa,GAAG,MAAMlE,SAAS,CAACmE,GAAG,CAAC,WAAWN,OAAO,EAAE,CAAC;MAC/D,IAAIK,aAAa,CAACE,OAAO,EAAE;QACzBzD,eAAe,CAACuD,aAAa,CAACG,IAAI,CAAC;MACrC;;MAEA;MACA,MAAMC,cAAc,GAAG,MAAMtE,SAAS,CAACmE,GAAG,CAAC,WAAWN,OAAO,SAAS,CAAC;MACvE,IAAIS,cAAc,CAACF,OAAO,EAAE;QAC1BvD,SAAS,CAACyD,cAAc,CAACD,IAAI,CAAC;MAChC;;MAEA;MACA,MAAME,aAAa,GAAG,MAAMvE,SAAS,CAACmE,GAAG,CAAC,oBAAoB,CAAC;MAC/D,IAAII,aAAa,CAACH,OAAO,EAAE;QACzB;QACA;QACA,MAAMI,aAAa,GAAG,CAACD,aAAa,CAACF,IAAI,IAAI,EAAE,EAAEI,GAAG,CAAEC,IAAS,KAAM;UACnE,GAAGA,IAAI;UACPC,SAAS,EAAE,EAAE;UACbC,oBAAoB,EAAEF,IAAI,CAACE,oBAAoB,IAAI;QACrD,CAAC,CAAC,CAAC;QACH7D,gBAAgB,CAACyD,aAAa,CAAC;MACjC,CAAC,MAAM;QACLzD,gBAAgB,CAAC,EAAE,CAAC;MACtB;IAEF,CAAC,CAAC,OAAO8D,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjDtE,SAAS,CAAC,2BAA2B,CAAC;IACxC,CAAC,SAAS;MACRsB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,CAACvB,IAAI,EAAEE,UAAU,EAAED,SAAS,CAAC,CAAC;EAEjC9C,SAAS,CAAC,MAAM;IACdmG,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB,MAAMkB,eAAe,GAAGA,CAAA,KAAM;IAC5B,OAAOlE,MAAM,CAACmE,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACC,MAAM,KAAK,YAAY,CAAC;EAC5D,CAAC;EAED,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxB,OAAOJ,eAAe,CAAC,CAAC,KAAKK,SAAS;EACxC,CAAC;EAED,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,IAAI,CAAChE,YAAY,EAAE;IAEnBW,WAAW,CAAC,IAAI,CAAC;IACjB,IAAI;MACF;MACA,MAAMsD,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAG,MAAOC,CAAC,IAAK;QAC3B,IAAI;UAAA,IAAAC,SAAA;UACF,MAAMC,SAAS,IAAAD,SAAA,GAAGD,CAAC,CAACG,MAAM,cAAAF,SAAA,uBAARA,SAAA,CAAUG,MAAgB;UAE5C,MAAM/B,OAAO,GAAIvD,IAAI,CAASwD,QAAQ,IAAIxD,IAAI,CAACyD,EAAE;UACjD,MAAM8B,QAAQ,GAAG,MAAM7F,SAAS,CAAC8F,IAAI,CAAC,WAAWjC,OAAO,WAAW,EAAE;YACnEkC,cAAc,EAAEL,SAAS;YACzBM,KAAK,EAAExE;UACT,CAAC,CAAC;UAEF,IAAIqE,QAAQ,CAACzB,OAAO,EAAE;YACpBnD,sBAAsB,CAAC,KAAK,CAAC;YAC7BI,eAAe,CAAC,IAAI,CAAC;YACrBI,eAAe,CAAC,EAAE,CAAC;YACnB,MAAMmC,aAAa,CAAC,CAAC,CAAC,CAAC;UACzB,CAAC,MAAM;YACLrD,SAAS,CAAC,mBAAmB,GAAGsF,QAAQ,CAACI,OAAO,CAAC;UACnD;QACF,CAAC,CAAC,OAAOpB,KAAK,EAAE;UACdb,OAAO,CAACa,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;UACvCtE,SAAS,CAAC,iBAAiB,CAAC;QAC9B,CAAC,SAAS;UACRwB,WAAW,CAAC,KAAK,CAAC;QACpB;MACF,CAAC;MACDsD,MAAM,CAACa,aAAa,CAAC9E,YAAY,CAAC;IACpC,CAAC,CAAC,OAAOyD,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACvCtE,SAAS,CAAC,iBAAiB,CAAC;MAC5BwB,WAAW,CAAC,KAAK,CAAC;IACpB;EACF,CAAC;EAED,MAAMoE,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAAC7E,aAAa,EAAE;IAEpBS,WAAW,CAAC,IAAI,CAAC;IACjB,IAAI;MACF,MAAMsD,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAG,MAAOC,CAAC,IAAK;QAC3B,IAAI;UAAA,IAAAY,UAAA;UACF,MAAMV,SAAS,IAAAU,UAAA,GAAGZ,CAAC,CAACG,MAAM,cAAAS,UAAA,uBAARA,UAAA,CAAUR,MAAgB;UAE5C,MAAM/B,OAAO,GAAIvD,IAAI,CAASwD,QAAQ,IAAIxD,IAAI,CAACyD,EAAE;UACjD,MAAM8B,QAAQ,GAAG,MAAM7F,SAAS,CAAC8F,IAAI,CAAC,WAAWjC,OAAO,YAAY,EAAE;YACpEwC,eAAe,EAAEX,SAAS;YAC1BM,KAAK,EAAEtE;UACT,CAAC,CAAC;UAEF,IAAImE,QAAQ,CAACzB,OAAO,EAAE;YACpBjD,uBAAuB,CAAC,KAAK,CAAC;YAC9BI,gBAAgB,CAAC,IAAI,CAAC;YACtBI,gBAAgB,CAAC,EAAE,CAAC;YACpB,MAAMiC,aAAa,CAAC,CAAC,CAAC,CAAC;UACzB,CAAC,MAAM;YACLrD,SAAS,CAAC,oBAAoB,GAAGsF,QAAQ,CAACI,OAAO,CAAC;UACpD;QACF,CAAC,CAAC,OAAOpB,KAAK,EAAE;UACdb,OAAO,CAACa,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;UACxCtE,SAAS,CAAC,kBAAkB,CAAC;QAC/B,CAAC,SAAS;UACRwB,WAAW,CAAC,KAAK,CAAC;QACpB;MACF,CAAC;MACDsD,MAAM,CAACa,aAAa,CAAC5E,aAAa,CAAC;IACrC,CAAC,CAAC,OAAOuD,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxCtE,SAAS,CAAC,kBAAkB,CAAC;MAC7BwB,WAAW,CAAC,KAAK,CAAC;IACpB;EACF,CAAC;;EAED;EACA,MAAMuE,iBAAiB,GAAG,MAAOC,MAAc,IAAK;IAClD,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAM7F,SAAS,CAACmE,GAAG,CAAC,UAAUoC,MAAM,iBAAiB,CAAC;MACvE,IAAIV,QAAQ,CAACzB,OAAO,EAAE;QACpBjC,gBAAgB,CAAC0D,QAAQ,CAACxB,IAAI,CAAC;MACjC;IACF,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACrDtE,SAAS,CAAC,+BAA+B,CAAC;IAC5C;EACF,CAAC;;EAED;EACA,MAAMiG,yBAAyB,GAAI7B,SAAgB,IAAK;IACtD,MAAM8B,SAAS,GAAG,CAChB,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAC1D,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EACzD,aAAa,EAAE,cAAc,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,YAAY,EAChF,iBAAiB,EAAE,gBAAgB,EAAE,aAAa,EAAE,iBAAiB,EAAE,oBAAoB,CAC5F;IAED,OAAO9B,SAAS,CAACF,GAAG,CAAC,CAACiC,QAAQ,EAAEC,KAAK,KAAK;MACxC;MACA,MAAMC,QAAQ,GAAGH,SAAS,CAACE,KAAK,GAAGF,SAAS,CAACI,MAAM,CAAC;MACpD,OAAO;QACL,GAAGH,QAAQ;QACXI,IAAI,EAAEF,QAAQ;QACdG,aAAa,EAAEH;MACjB,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMI,eAAe,GAAG,MAAOtC,IAAS,IAAK;IAC3C,IAAI;MACFvB,sBAAsB,CAACuB,IAAI,CAAC;MAC5BV,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAES,IAAI,CAACX,EAAE,CAAC;MACjDC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAES,IAAI,CAAC,CAAC,CAAC;;MAEzC;MACA,IAAIuC,eAAe,GAAG,KAAK;MAE3BjD,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAE,mDAAmD,CAAC;MAC1GD,OAAO,CAACC,GAAG,CAAC,UAAU,EAAES,IAAI,CAACX,EAAE,CAAC;;MAEhC;MACA,MAAMmD,qBAAqB,GAAIvC,SAAgB,IAAK;QAClD,OAAOA,SAAS,CAACF,GAAG,CAACiC,QAAQ,IAAI;UAC/B;UACA,MAAMS,gBAAgB,GAAG,CAAC,IAAI,EAAE,aAAa,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC;UACxE,MAAMpD,EAAE,GAAGoD,gBAAgB,CAAC1C,GAAG,CAAC2C,KAAK,IAAIV,QAAQ,CAACU,KAAK,CAAC,CAAC,CAACrC,IAAI,CAACsC,GAAG,IAAIA,GAAG,CAAC,IAAI,YAAY;;UAE1F;UACA,MAAMC,kBAAkB,GAAG,CAAC,MAAM,EAAE,eAAe,EAAE,cAAc,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,CAAC;UACrG;UACA,MAAMR,IAAI,GAAGQ,kBAAkB,CAAC7C,GAAG,CAAC2C,KAAK,IAAIV,QAAQ,CAACU,KAAK,CAAC,CAAC,CAACrC,IAAI,CAACsC,GAAG,IAAIA,GAAG,CAAC,IAC5E,aAAatD,EAAE,CAACwD,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;;UAExC;UACA,OAAO;YACL,GAAGd,QAAQ;YACXI,IAAI;YACJ;YACAW,WAAW,EAAE1D,EAAE;YACfgD,aAAa,EAAED;UACjB,CAAC;QACH,CAAC,CAAC;MACJ,CAAC;;MAED;MACA,IAAI;QACF9C,OAAO,CAACC,GAAG,CAAC,6EAA6E,CAAC;QAC1F,MAAMyD,iBAAiB,GAAG,MAAM1H,SAAS,CAACmE,GAAG,CAAC,UAAUO,IAAI,CAACX,EAAE,iBAAiB,CAAC;QACjFC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEyD,iBAAiB,CAAC;QAC1D,IAAIA,iBAAiB,CAACtD,OAAO,EAAE;UAC7B;UACA,IAAIuD,mBAAmB,GAAGT,qBAAqB,CAACQ,iBAAiB,CAACrD,IAAI,IAAI,EAAE,CAAC;;UAE7E;UACAsD,mBAAmB,GAAGnB,yBAAyB,CAACmB,mBAAmB,CAAC;UAEpExF,gBAAgB,CAACwF,mBAAmB,CAAC;UACrCV,eAAe,GAAG,IAAI;UACtBjD,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAEyD,iBAAiB,CAACrD,IAAI,CAAC;UACnFL,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAE0D,mBAAmB,CAAC;UAClF3D,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE2D,IAAI,CAACC,SAAS,CAACH,iBAAiB,CAACrD,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACpG;MACF,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdb,OAAO,CAACC,GAAG,CAAC,0DAA0D,CAAC;MACzE;;MAEA;;MAEA;MACA,IAAI,CAACgD,eAAe,EAAE;QACpB,IAAI;UACFjD,OAAO,CAACC,GAAG,CAAC,4DAA4D,CAAC;UACzE,MAAM6D,oBAAoB,GAAG,MAAM9H,SAAS,CAACmE,GAAG,CAAC,YAAY,CAAC;UAC9DH,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE6D,oBAAoB,CAAC;UAC5D,IAAIA,oBAAoB,CAAC1D,OAAO,EAAE;YAAA,IAAA2D,qBAAA;YAChC;YACA;YACA,IAAIJ,mBAAmB,GAAGT,qBAAqB,CAACY,oBAAoB,CAACzD,IAAI,IAAI,EAAE,CAAC;;YAEhF;YACAsD,mBAAmB,GAAGnB,yBAAyB,CAACmB,mBAAmB,CAAC;YAEpExF,gBAAgB,CAACwF,mBAAmB,CAAC;YACrCV,eAAe,GAAG,IAAI;YACtBjD,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAE6D,oBAAoB,CAACzD,IAAI,CAAC;YACtFL,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAE0D,mBAAmB,CAAC;YAClF3D,OAAO,CAACC,GAAG,CAAC,uCAAuC,EAAE2D,IAAI,CAACC,SAAS,CAACC,oBAAoB,CAACzD,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YACxGL,OAAO,CAACC,GAAG,CAAC,+BAA+B,GAAA8D,qBAAA,GAAED,oBAAoB,CAACzD,IAAI,cAAA0D,qBAAA,uBAAzBA,qBAAA,CAA2BtD,GAAG,CAAEuD,CAAM,KAAM;cAAEjE,EAAE,EAAEiE,CAAC,CAACjE,EAAE;cAAE+C,IAAI,EAAEkB,CAAC,CAAClB,IAAI;cAAEC,aAAa,EAAEiB,CAAC,CAACjB;YAAc,CAAC,CAAC,CAAC,CAAC;UACxJ;QACF,CAAC,CAAC,OAAOlC,KAAK,EAAE;UACdb,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;QAC3C;MACF;;MAEA;MACA,IAAI,CAACgD,eAAe,IAAIvC,IAAI,CAACC,SAAS,EAAE;QAAA,IAAAsD,eAAA;QACtCjE,OAAO,CAACC,GAAG,CAAC,mEAAmE,CAAC;QAChF,IAAI0D,mBAAmB,GAAGT,qBAAqB,CAACxC,IAAI,CAACC,SAAS,IAAI,EAAE,CAAC;;QAErE;QACAgD,mBAAmB,GAAGnB,yBAAyB,CAACmB,mBAAmB,CAAC;QAEpExF,gBAAgB,CAACwF,mBAAmB,CAAC;QACrCV,eAAe,GAAG,IAAI;QACtBjD,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAES,IAAI,CAACC,SAAS,CAAC;QAC3EX,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAE0D,mBAAmB,CAAC;QAClF3D,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAE2D,IAAI,CAACC,SAAS,CAACnD,IAAI,CAACC,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC9FX,OAAO,CAACC,GAAG,CAAC,oCAAoC,GAAAgE,eAAA,GAAEvD,IAAI,CAACC,SAAS,cAAAsD,eAAA,uBAAdA,eAAA,CAAgBxD,GAAG,CAAEuD,CAAM,KAAM;UAAEjE,EAAE,EAAEiE,CAAC,CAACjE,EAAE;UAAE+C,IAAI,EAAEkB,CAAC,CAAClB,IAAI;UAAEC,aAAa,EAAEiB,CAAC,CAACjB;QAAc,CAAC,CAAC,CAAC,CAAC;MAClJ;;MAEA;MACA,IAAIE,eAAe,EAAE;QACnB,IAAI;UACF;UACA,MAAM,CAACiB,oBAAoB,EAAEC,eAAe,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAChErI,SAAS,CAACmE,GAAG,CAAC,yBAAyBO,IAAI,CAACX,EAAE,EAAE,CAAC,EACjD/D,SAAS,CAACmE,GAAG,CAAC,4BAA4BO,IAAI,CAACX,EAAE,EAAE,CAAC,CACrD,CAAC;UAEFC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEiE,oBAAoB,CAAC;UAC3DlE,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEkE,eAAe,CAAC;UAEjD,IAAID,oBAAoB,CAAC9D,OAAO,EAAE;YAChCf,uBAAuB,CAAC6E,oBAAoB,CAAC7D,IAAI,IAAI,EAAE,CAAC;UAC1D;UAEA,IAAI8D,eAAe,CAAC/D,OAAO,EAAE;YAC3Bb,kBAAkB,CAAC4E,eAAe,CAAC9D,IAAI,IAAI,EAAE,CAAC;UAChD;;UAEA;UACA,IAAI;YACF,MAAMiE,cAAc,GAAG,MAAMtI,SAAS,CAACmE,GAAG,CAAC,4BAA4BO,IAAI,CAACX,EAAE,EAAE,CAAC;YACjFC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEqE,cAAc,CAAC;YACxD,IAAIA,cAAc,CAAClE,OAAO,EAAE;cAC1BT,iBAAiB,CAAC2E,cAAc,CAACjE,IAAI,IAAI,EAAE,CAAC;YAC9C,CAAC,MAAM;cACLV,iBAAiB,CAAC,EAAE,CAAC;YACvB;UACF,CAAC,CAAC,OAAOkB,KAAK,EAAE;YACdb,OAAO,CAACC,GAAG,CAAC,sEAAsE,EAAEY,KAAK,CAAC;YAC1FlB,iBAAiB,CAAC,EAAE,CAAC;UACvB;QAEF,CAAC,CAAC,OAAOkB,KAAK,EAAE;UACdb,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEY,KAAK,CAAC;UAC1DxB,uBAAuB,CAAC,EAAE,CAAC;UAC3BE,kBAAkB,CAAC,EAAE,CAAC;UACtBI,iBAAiB,CAAC,EAAE,CAAC;QACvB;MACF,CAAC,MAAM;QACL;QACAK,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;QACxD9B,gBAAgB,CAAC,EAAE,CAAC;QACpBkB,uBAAuB,CAAC,EAAE,CAAC;QAC3BE,kBAAkB,CAAC,EAAE,CAAC;QACtBI,iBAAiB,CAAC,EAAE,CAAC;MACvB;;MAEA;MACA1B,wBAAwB,CAACyC,IAAI,CAAC;IAEhC,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDtE,SAAS,CAAC,6BAA6B,CAAC;;MAExC;MACA,IAAImE,IAAI,CAACC,SAAS,EAAE;QAClBxC,gBAAgB,CAACuC,IAAI,CAACC,SAAS,CAAC;MAClC;MACAtB,uBAAuB,CAAC,EAAE,CAAC;MAC3BE,kBAAkB,CAAC,EAAE,CAAC;MACtBI,iBAAiB,CAAC,EAAE,CAAC;;MAErB;MACAF,iBAAiB,CAAC,IAAI,CAAC;IACzB;EACF,CAAC;;EAED;EACA,MAAM8E,iBAAiB,GAAG,MAAAA,CAAOC,UAAkB,EAAEjC,MAAc,KAAK;IACtE,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAM7F,SAAS,CAACmE,GAAG,CAAC,gCAAgCqE,UAAU,YAAYjC,MAAM,EAAE,CAAC;MACpG,IAAIV,QAAQ,CAACzB,OAAO,EAAE;QACpB,OAAOyB,QAAQ,CAACxB,IAAI,IAAI,EAAE;MAC5B;MACA,OAAO,EAAE;IACX,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,OAAO,EAAE;IACX;EACF,CAAC;;EAED;EACA,MAAM4D,sBAAsB,GAAGA,CAACC,MAAa,EAAEC,SAAiB,KAAK;IACnE,MAAMC,UAAU,GAAGF,MAAM,CAACG,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,UAAU,KAAKJ,SAAS,CAAC;IACjE,IAAIC,UAAU,CAAC/B,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;IAExC,OAAO+B,UAAU,CAACI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAC/B,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACH,CAAC,CAACI,WAAW,CAAC;MACrC,MAAMC,KAAK,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,WAAW,CAAC;MACrC,OAAOC,KAAK,CAACC,OAAO,CAAC,CAAC,GAAGJ,KAAK,CAACI,OAAO,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;EACA,MAAMC,uBAAuB,GAAIhB,UAAkB,IAAK;IACtD,OAAOpF,oBAAoB,CAACyF,MAAM,CAACY,CAAC,IACjCA,CAAC,CAAChC,WAAW,KAAKe,UAAU,IAAIiB,CAAC,CAACjB,UAAU,KAAKA,UACpD,CAAC;EACH,CAAC;;EAED;EACA,MAAMkB,kBAAkB,GAAIlB,UAAkB,IAAK;IACjD,OAAOlF,eAAe,CAACuF,MAAM,CAACc,CAAC,IAC5BA,CAAC,CAAClC,WAAW,KAAKe,UAAU,IAAImB,CAAC,CAACnB,UAAU,KAAKA,UACpD,CAAC;EACH,CAAC;;EAED;EACA,MAAMoB,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAACpH,WAAW,IAAI,CAACJ,gBAAgB,IAAI,CAACU,UAAU,EAAE;MACpDvC,SAAS,CAAC,oCAAoC,CAAC;MAC/C;IACF;IAEAwB,WAAW,CAAC,IAAI,CAAC;IACjB,IAAI;MACF,MAAMsD,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAG,MAAOC,CAAC,IAAK;QAC3B,IAAI;UAAA,IAAAqE,UAAA;UACF,MAAMnE,SAAS,IAAAmE,UAAA,GAAGrE,CAAC,CAACG,MAAM,cAAAkE,UAAA,uBAARA,UAAA,CAAUjE,MAAgB;;UAE5C;UACA,MAAMkE,SAAS,GAAG;YAChBzF,IAAI,EAAEqB,SAAS;YAAiB;YAChCqE,QAAQ,EAAEvH,WAAW,CAACsE,IAAI;YAAM;YAChCkD,IAAI,EAAExH,WAAW,CAACwH,IAAI;YAAU;YAChCC,IAAI,EAAEzH,WAAW,CAACyH,IAAI;YAAU;YAChCC,WAAW,EAAE,IAAId,IAAI,CAAC,CAAC,CAACe,WAAW,CAAC;UACtC,CAAC;UAED,MAAMC,iBAAsB,GAAG;YAC7B3C,WAAW,EAAErF,gBAAgB,CAACqF,WAAW,IAAIrF,gBAAgB,CAAC2B,EAAE;YAChEsG,OAAO,EAAErI,qBAAqB,CAAC+B,EAAE;YACjCgF,UAAU,EAAEzG,UAAU;YAAW;YACjCgI,KAAK,EAAER,SAAS;YAAiB;YACjCS,WAAW,EAAGjK,IAAI,CAASwD,QAAQ,IAAIxD,IAAI,CAACyD,EAAE;YAC9CyG,gBAAgB,EAAE1H,UAAU;YAAK;YACjCmC,MAAM,EAAE,SAAS,CAAgB;UACnC,CAAC;;UAED;UACA,MAAMwF,QAAQ,GAAG,kBAAkB;UAEnCzG,OAAO,CAACC,GAAG,CAAC,aAAa3B,UAAU,sBAAsB,EAAEF,gBAAgB,CAAC2E,aAAa,IAAI3E,gBAAgB,CAAC0E,IAAI,CAAC;UAEnH,MAAMjB,QAAQ,GAAG,MAAM7F,SAAS,CAAC8F,IAAI,CAAC2E,QAAQ,EAAEL,iBAAiB,CAAC;UAElE,IAAIvE,QAAQ,CAACzB,OAAO,EAAE;YACpBnB,qBAAqB,CAAC,KAAK,CAAC;YAC5BR,cAAc,CAAC,IAAI,CAAC;YACpBM,aAAa,CAAC,IAAIqG,IAAI,CAAC,CAAC,CAACe,WAAW,CAAC,CAAC,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD7H,cAAc,CAAC,EAAE,CAAC;YAClBR,mBAAmB,CAAC,IAAI,CAAC;;YAEzB;YACA9B,SAAS,CAAC,GAAG+B,UAAU,KAAK,aAAa,GAAG,aAAa,GAAG,SAAS,mDAAmD,CAAC;;YAEzH;YACA,MAAMgE,iBAAiB,CAACtE,qBAAqB,CAAC+B,EAAE,CAAC;UACnD,CAAC,MAAM;YACLxD,SAAS,CAAC,oBAAoB+B,UAAU,UAAU,GAAGuD,QAAQ,CAACI,OAAO,CAAC;UACxE;QACF,CAAC,CAAC,OAAOpB,KAAK,EAAE;UACdb,OAAO,CAACa,KAAK,CAAC,GAAGvC,UAAU,sBAAsB,EAAEuC,KAAK,CAAC;UACzDtE,SAAS,CAAC,oBAAoB+B,UAAU,QAAQ,CAAC;QACnD,CAAC,SAAS;UACRP,WAAW,CAAC,KAAK,CAAC;QACpB;MACF,CAAC;MACDsD,MAAM,CAACa,aAAa,CAAC1D,WAAW,CAAC;IACnC,CAAC,CAAC,OAAOqC,KAAK,EAAE;MACdb,OAAO,CAACa,KAAK,CAAC,GAAGvC,UAAU,gBAAgB,EAAEuC,KAAK,CAAC;MACnDtE,SAAS,CAAC,oBAAoB+B,UAAU,EAAE,CAAC;MAC3CP,WAAW,CAAC,KAAK,CAAC;IACpB;EACF,CAAC;;EAED;EACA,MAAM4I,gBAAgB,GAAG,MAAAA,CAAOjG,IAAS,EAAEuF,IAA+B,KAAK;IAC7EhI,wBAAwB,CAACyC,IAAI,CAAC;IAC9BnC,aAAa,CAAC0H,IAAI,CAAC;IACnB,MAAM3D,iBAAiB,CAAC5B,IAAI,CAACX,EAAE,CAAC;IAChCd,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,IAAIrB,SAAS,EAAE;IACb,oBACE1B,OAAA;MAAK0K,SAAS,EAAC,uCAAuC;MAAAC,QAAA,eACpD3K,OAAA;QAAK0K,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1B3K,OAAA;UAAK0K,SAAS,EAAC;QAA2E;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACjG/K,OAAA;UAAG0K,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAA4B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,MAAMC,YAAY,GAAGpG,eAAe,CAAC,CAAC;EAEtC,oBACE5E,OAAA;IAAK0K,SAAS,EAAC,WAAW;IAAAC,QAAA,gBAExB3K,OAAA;MAAK0K,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChD3K,OAAA;QAAA2K,QAAA,gBACE3K,OAAA;UAAI0K,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1D/K,OAAA;UAAG0K,SAAS,EAAC,eAAe;UAAAC,QAAA,GAAC,WAClB,EAAC,CAAAnK,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEoG,IAAI,KAAIxG,IAAI,CAAC6K,QAAQ;QAAA;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eACJ/K,OAAA;UAAK0K,SAAS,EAAC,kCAAkC;UAAAC,QAAA,gBAC/C3K,OAAA,CAACzB,KAAK;YAAC2M,OAAO,EAAC,SAAS;YAACR,SAAS,EAAC,SAAS;YAAAC,QAAA,GAAC,YACjC,EAACvK,IAAI,CAACyD,EAAE;UAAA;YAAA+G,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACb,CAAC,eACR/K,OAAA,CAACzB,KAAK;YAAC2M,OAAO,EAAC,SAAS;YAACR,SAAS,EAAC,SAAS;YAAAC,QAAA,GACzC/J,aAAa,CAAC+F,MAAM,EAAC,iBACxB;UAAA;YAAAiE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACN/K,OAAA,CAACvC,MAAM;QAACyN,OAAO,EAAC,SAAS;QAACC,OAAO,EAAEzH,aAAc;QAAC0H,QAAQ,EAAE1J,SAAU;QAAAiJ,QAAA,gBACpE3K,OAAA,CAAChB,SAAS;UAAC0L,SAAS,EAAC;QAAc;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,WAExC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAGN/K,OAAA,CAACpC,IAAI;MAAA+M,QAAA,gBACH3K,OAAA,CAACjC,UAAU;QAAA4M,QAAA,eACT3K,OAAA,CAAChC,SAAS;UAAC0M,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBAChD3K,OAAA,CAACnB,KAAK;YAAC6L,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC7B/K,OAAA;YAAA2K,QAAA,EAAM;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eACb/K,OAAA,CAACnC,WAAW;QAAA8M,QAAA,eACV3K,OAAA;UAAK0K,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChD3K,OAAA;YAAK0K,SAAS,EAAC,6BAA6B;YAAAC,QAAA,EACzC3F,WAAW,CAAC,CAAC,gBACZhF,OAAA;cAAK0K,SAAS,EAAC,yBAAyB;cAAAC,QAAA,gBACtC3K,OAAA;gBAAK0K,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,gBAC1C3K,OAAA,CAACzB,KAAK;kBAACmM,SAAS,EAAC,uCAAuC;kBAAAC,QAAA,gBACtD3K,OAAA,CAAClB,WAAW;oBAAC4L,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,WAE1C;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACR/K,OAAA;kBAAM0K,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,GAAC,SAC/B,EAAC,IAAIzB,IAAI,CAAE8B,YAAY,CAAUK,aAAa,CAAC,CAACC,cAAc,CAAC,CAAC;gBAAA;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ,CAAC,eACN/K,OAAA;gBAAK0K,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,GAAC,cACzB,EAAEK,YAAY,CAAUO,UAAU,EAAC,eACrC,EAACC,IAAI,CAACC,KAAK,CAAC,CAAC,IAAIvC,IAAI,CAAC,CAAC,CAACG,OAAO,CAAC,CAAC,GAAG,IAAIH,IAAI,CAAE8B,YAAY,CAAUK,aAAa,CAAC,CAAChC,OAAO,CAAC,CAAC,KAAK,IAAI,GAAG,EAAE,CAAC,CAAC,EAAC,UACzH;cAAA;gBAAAuB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,gBAEN/K,OAAA;cAAK0K,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1C3K,OAAA,CAACzB,KAAK;gBAAC2M,OAAO,EAAC,WAAW;gBAACR,SAAS,EAAC,WAAW;gBAAAC,QAAA,gBAC9C3K,OAAA,CAACjB,OAAO;kBAAC2L,SAAS,EAAC;gBAAc;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,YAEtC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACR/K,OAAA;gBAAM0K,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAC;cAAiB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7D;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAEN/K,OAAA;YAAK0K,SAAS,EAAC,gBAAgB;YAAAC,QAAA,EAC5B3F,WAAW,CAAC,CAAC,gBACZhF,OAAA,CAAC/B,MAAM;cAACyN,IAAI,EAAE1K,oBAAqB;cAAC2K,YAAY,EAAE1K,uBAAwB;cAAA0J,QAAA,gBACxE3K,OAAA,CAAC1B,aAAa;gBAACsN,OAAO;gBAAAjB,QAAA,eACpB3K,OAAA,CAACvC,MAAM;kBAACyN,OAAO,EAAC,aAAa;kBAACE,QAAQ,EAAExJ,QAAS;kBAAA+I,QAAA,gBAC/C3K,OAAA,CAACd,MAAM;oBAACwL,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,aAErC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC,eAChB/K,OAAA,CAAC9B,aAAa;gBAAAyM,QAAA,gBACZ3K,OAAA,CAAC5B,YAAY;kBAAAuM,QAAA,gBACX3K,OAAA,CAAC3B,WAAW;oBAAAsM,QAAA,EAAC;kBAAS;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAa,CAAC,eACpC/K,OAAA,CAAC7B,iBAAiB;oBAAAwM,QAAA,EAAC;kBAEnB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAmB,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACR,CAAC,eACf/K,OAAA;kBAAK0K,SAAS,EAAC,WAAW;kBAAAC,QAAA,gBACxB3K,OAAA;oBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;sBAACkO,OAAO,EAAC,eAAe;sBAAAlB,QAAA,EAAC;oBAA0B;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eACjE/K,OAAA,CAACtC,KAAK;sBACJmG,EAAE,EAAC,eAAe;sBAClBkG,IAAI,EAAC,MAAM;sBACX+B,MAAM,EAAC,SAAS;sBAChBC,QAAQ,EAAGzG,CAAC;wBAAA,IAAA0G,eAAA;wBAAA,OAAK3K,gBAAgB,CAAC,EAAA2K,eAAA,GAAA1G,CAAC,CAACG,MAAM,CAACwG,KAAK,cAAAD,eAAA,uBAAdA,eAAA,CAAiB,CAAC,CAAC,KAAI,IAAI,CAAC;sBAAA,CAAC;sBAC/DtB,SAAS,EAAC,MAAM;sBAChBwB,QAAQ;sBACRd,QAAQ,EAAExJ;oBAAS;sBAAAgJ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpB,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC,eACN/K,OAAA;oBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;sBAACkO,OAAO,EAAC,eAAe;sBAAAlB,QAAA,EAAC;oBAA6B;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eACpE/K,OAAA,CAACxB,QAAQ;sBACPqF,EAAE,EAAC,eAAe;sBAClBsI,KAAK,EAAE3K,aAAc;sBACrBuK,QAAQ,EAAGzG,CAAC,IAAK7D,gBAAgB,CAAC6D,CAAC,CAACG,MAAM,CAAC0G,KAAK,CAAE;sBAClDC,WAAW,EAAC,2BAA2B;sBACvCC,IAAI,EAAE,CAAE;sBACRjB,QAAQ,EAAExJ;oBAAS;sBAAAgJ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpB,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC,eACN/K,OAAA;oBAAK0K,SAAS,EAAC,4BAA4B;oBAAAC,QAAA,gBACzC3K,OAAA,CAACvC,MAAM;sBAACsM,IAAI,EAAC,QAAQ;sBAACmB,OAAO,EAAC,SAAS;sBAACC,OAAO,EAAEA,CAAA,KAAMlK,uBAAuB,CAAC,KAAK,CAAE;sBAACmK,QAAQ,EAAExJ,QAAS;sBAAA+I,QAAA,EAAC;oBAE3G;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACT/K,OAAA,CAACvC,MAAM;sBAAC0N,OAAO,EAAElF,cAAe;sBAACmF,QAAQ,EAAE,CAAChK,aAAa,IAAIQ,QAAS;sBAAA+I,QAAA,EACnE/I,QAAQ,gBACP5B,OAAA,CAAAE,SAAA;wBAAAyK,QAAA,gBACE3K,OAAA,CAACb,QAAQ;0BAACuL,SAAS,EAAC;wBAA2B;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,aAEpD;sBAAA,eAAE,CAAC,gBAEH/K,OAAA,CAAAE,SAAA;wBAAAyK,QAAA,gBACE3K,OAAA,CAACd,MAAM;0BAACwL,SAAS,EAAC;wBAAc;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,aAErC;sBAAA,eAAE;oBACH;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,gBAET/K,OAAA,CAAC/B,MAAM;cAACyN,IAAI,EAAE5K,mBAAoB;cAAC6K,YAAY,EAAE5K,sBAAuB;cAAA4J,QAAA,gBACtE3K,OAAA,CAAC1B,aAAa;gBAACsN,OAAO;gBAAAjB,QAAA,eACpB3K,OAAA,CAACvC,MAAM;kBAAC2N,QAAQ,EAAExJ,QAAS;kBAAA+I,QAAA,gBACzB3K,OAAA,CAACf,KAAK;oBAACyL,SAAS,EAAC;kBAAc;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,YAEpC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC,eAChB/K,OAAA,CAAC9B,aAAa;gBAAAyM,QAAA,gBACZ3K,OAAA,CAAC5B,YAAY;kBAAAuM,QAAA,gBACX3K,OAAA,CAAC3B,WAAW;oBAAAsM,QAAA,EAAC;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAa,CAAC,eACnC/K,OAAA,CAAC7B,iBAAiB;oBAAAwM,QAAA,EAAC;kBAEnB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAmB,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACR,CAAC,eACf/K,OAAA;kBAAK0K,SAAS,EAAC,WAAW;kBAAAC,QAAA,gBACxB3K,OAAA;oBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;sBAACkO,OAAO,EAAC,cAAc;sBAAAlB,QAAA,EAAC;oBAAyB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eAC/D/K,OAAA,CAACtC,KAAK;sBACJmG,EAAE,EAAC,cAAc;sBACjBkG,IAAI,EAAC,MAAM;sBACX+B,MAAM,EAAC,SAAS;sBAChBC,QAAQ,EAAGzG,CAAC;wBAAA,IAAAgH,gBAAA;wBAAA,OAAKnL,eAAe,CAAC,EAAAmL,gBAAA,GAAAhH,CAAC,CAACG,MAAM,CAACwG,KAAK,cAAAK,gBAAA,uBAAdA,gBAAA,CAAiB,CAAC,CAAC,KAAI,IAAI,CAAC;sBAAA,CAAC;sBAC9D5B,SAAS,EAAC,MAAM;sBAChBwB,QAAQ;sBACRd,QAAQ,EAAExJ;oBAAS;sBAAAgJ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpB,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC,eACN/K,OAAA;oBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;sBAACkO,OAAO,EAAC,cAAc;sBAAAlB,QAAA,EAAC;oBAAgB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eACtD/K,OAAA,CAACxB,QAAQ;sBACPqF,EAAE,EAAC,cAAc;sBACjBsI,KAAK,EAAE7K,YAAa;sBACpByK,QAAQ,EAAGzG,CAAC,IAAK/D,eAAe,CAAC+D,CAAC,CAACG,MAAM,CAAC0G,KAAK,CAAE;sBACjDC,WAAW,EAAC,6BAA6B;sBACzCC,IAAI,EAAE,CAAE;sBACRjB,QAAQ,EAAExJ;oBAAS;sBAAAgJ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpB,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC,eACN/K,OAAA;oBAAK0K,SAAS,EAAC,4BAA4B;oBAAAC,QAAA,gBACzC3K,OAAA,CAACvC,MAAM;sBAACsM,IAAI,EAAC,QAAQ;sBAACmB,OAAO,EAAC,SAAS;sBAACC,OAAO,EAAEA,CAAA,KAAMpK,sBAAsB,CAAC,KAAK,CAAE;sBAACqK,QAAQ,EAAExJ,QAAS;sBAAA+I,QAAA,EAAC;oBAE1G;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eACT/K,OAAA,CAACvC,MAAM;sBAAC0N,OAAO,EAAEjG,aAAc;sBAACkG,QAAQ,EAAE,CAAClK,YAAY,IAAIU,QAAS;sBAAA+I,QAAA,EACjE/I,QAAQ,gBACP5B,OAAA,CAAAE,SAAA;wBAAAyK,QAAA,gBACE3K,OAAA,CAACb,QAAQ;0BAACuL,SAAS,EAAC;wBAA2B;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,aAEpD;sBAAA,eAAE,CAAC,gBAEH/K,OAAA,CAAAE,SAAA;wBAAAyK,QAAA,gBACE3K,OAAA,CAACf,KAAK;0BAACyL,SAAS,EAAC;wBAAc;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAE,CAAC,YAEpC;sBAAA,eAAE;oBACH;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACK,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV;UACT;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eAGP/K,OAAA,CAACvB,IAAI;MAAC8N,YAAY,EAAC,OAAO;MAAC7B,SAAS,EAAC,QAAQ;MAAAC,QAAA,gBAC3C3K,OAAA,CAACrB,QAAQ;QAAC+L,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBAC3C3K,OAAA,CAACpB,WAAW;UAACuN,KAAK,EAAC,OAAO;UAACzB,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBAChE3K,OAAA,CAACX,MAAM;YAACqL,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC9B/K,OAAA;YAAA2K,QAAA,EAAM;UAAQ;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eACd/K,OAAA,CAACpB,WAAW;UAACuN,KAAK,EAAC,QAAQ;UAACzB,SAAS,EAAC,6BAA6B;UAAAC,QAAA,gBACjE3K,OAAA,CAACZ,QAAQ;YAACsL,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChC/K,OAAA;YAAA2K,QAAA,EAAM;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEX/K,OAAA,CAACtB,WAAW;QAACyN,KAAK,EAAC,OAAO;QAACzB,SAAS,EAAC,MAAM;QAAAC,QAAA,eACzC3K,OAAA,CAACpC,IAAI;UAAA+M,QAAA,gBACH3K,OAAA,CAACjC,UAAU;YAAA4M,QAAA,gBACT3K,OAAA,CAAChC,SAAS;cAAC0M,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAChD3K,OAAA,CAACX,MAAM;gBAACqL,SAAS,EAAC;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC9B/K,OAAA;gBAAA2K,QAAA,EAAM;cAAc;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClB,CAAC,eACZ/K,OAAA,CAAClC,eAAe;cAAA6M,QAAA,EAAC;YAAgC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAiB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC,eACb/K,OAAA,CAACnC,WAAW;YAAA8M,QAAA,EACT/J,aAAa,CAAC+F,MAAM,KAAK,CAAC,gBACzB3G,OAAA;cAAK0K,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/B3K,OAAA,CAACV,KAAK;gBAACoL,SAAS,EAAC;cAAsC;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC1D/K,OAAA;gBAAG0K,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChD,CAAC,gBAEN/K,OAAA;cAAK0K,SAAS,EAAC,WAAW;cAAAC,QAAA,EACvB/J,aAAa,CAAC2D,GAAG,CAAEC,IAAI,iBACtBxE,OAAA;gBAAmB0K,SAAS,EAAC,MAAM;gBAAAC,QAAA,gBACjC3K,OAAA,CAACpC,IAAI;kBAAC8M,SAAS,EAAC,8BAA8B;kBAAAC,QAAA,eAC5C3K,OAAA,CAACnC,WAAW;oBAAC6M,SAAS,EAAC,KAAK;oBAAAC,QAAA,gBAC1B3K,OAAA;sBAAK0K,SAAS,EAAC,wCAAwC;sBAAAC,QAAA,gBACrD3K,OAAA;wBAAK0K,SAAS,EAAC,6BAA6B;wBAAAC,QAAA,eAC1C3K,OAAA;0BAAI0K,SAAS,EAAC,aAAa;0BAAAC,QAAA,EAAEnG,IAAI,CAACgI;wBAAS;0BAAA5B,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAK;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAC9C,CAAC,eACN/K,OAAA,CAACzB,KAAK;wBAACmM,SAAS,EACdlG,IAAI,CAACO,MAAM,KAAK,QAAQ,GAAG,6BAA6B,GACxDP,IAAI,CAACO,MAAM,KAAK,aAAa,GAAG,2BAA2B,GAC3D,2BACD;wBAAA4F,QAAA,EACEnG,IAAI,CAACO;sBAAM;wBAAA6F,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACP,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACL,CAAC,eACN/K,OAAA;sBAAK0K,SAAS,EAAC,gCAAgC;sBAAAC,QAAA,gBAC7C3K,OAAA;wBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;0BAAC+M,SAAS,EAAC,uBAAuB;0BAAAC,QAAA,EAAC;wBAAW;0BAAAC,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAO,CAAC,eAC5D/K,OAAA;0BAAA2K,QAAA,EAAInG,IAAI,CAACiI;wBAAW;0BAAA7B,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAI,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtB,CAAC,eACN/K,OAAA;wBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;0BAAC+M,SAAS,EAAC,uBAAuB;0BAAAC,QAAA,EAAC;wBAAK;0BAAAC,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAO,CAAC,eACtD/K,OAAA;0BAAA2K,QAAA,GAAI,IAAIzB,IAAI,CAAC1E,IAAI,CAACkI,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAC,KAAG,EAAC,IAAIzD,IAAI,CAAC1E,IAAI,CAACoI,QAAQ,CAAC,CAACD,kBAAkB,CAAC,CAAC;wBAAA;0BAAA/B,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAI,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACrG,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH,CAAC,eACN/K,OAAA;sBAAK0K,SAAS,EAAC,wCAAwC;sBAAAC,QAAA,gBACrD3K,OAAA;wBAAK0K,SAAS,EAAC,gBAAgB;wBAAAC,QAAA,eAC7B3K,OAAA,CAACzB,KAAK;0BAAC2M,OAAO,EAAC,SAAS;0BAACR,SAAS,EAAC,SAAS;0BAAAC,QAAA,GACzCnG,IAAI,CAACE,oBAAoB,IAAI,CAAC,EAAC,mBAClC;wBAAA;0BAAAkG,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAO;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACL,CAAC,eACN/K,OAAA;wBAAK0K,SAAS,EAAC,gBAAgB;wBAAAC,QAAA,eAC7B3K,OAAA,CAACvC,MAAM;0BACLqM,IAAI,EAAC,IAAI;0BACToB,OAAO,EAAC,SAAS;0BACjBC,OAAO,EAAEA,CAAA,KAAM;4BACb;4BACA5H,iBAAiB,CAACD,cAAc,KAAKkB,IAAI,CAACX,EAAE,GAAG,IAAI,GAAGW,IAAI,CAACX,EAAE,CAAC;4BAC9D;4BACA,IAAIP,cAAc,KAAKkB,IAAI,CAACX,EAAE,EAAE;8BAC9BiD,eAAe,CAACtC,IAAI,CAAC;4BACvB;0BACF,CAAE;0BACFkG,SAAS,EAAC,SAAS;0BAAAC,QAAA,EAElBrH,cAAc,KAAKkB,IAAI,CAACX,EAAE,gBACzB7D,OAAA,CAAAE,SAAA;4BAAAyK,QAAA,gBACE3K,OAAA,CAACN,SAAS;8BAACgL,SAAS,EAAC;4BAAc;8BAAAE,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAE,CAAC,kBAExC;0BAAA,eAAE,CAAC,gBAEH/K,OAAA,CAAAE,SAAA;4BAAAyK,QAAA,gBACE3K,OAAA,CAACL,WAAW;8BAAC+K,SAAS,EAAC;4BAAc;8BAAAE,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAE,CAAC,kBAE1C;0BAAA,eAAE;wBACH;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACK;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACN,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACK;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACV,CAAC,EAGNzH,cAAc,KAAKkB,IAAI,CAACX,EAAE,iBACzB7D,OAAA;kBAAK0K,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,GAClD,CAAC,MAAM;oBAAE7G,OAAO,CAACC,GAAG,CAAC,6CAA6C,EAAE/B,aAAa,CAAC2E,MAAM,CAAC;oBAAE,OAAO,IAAI;kBAAE,CAAC,EAAE,CAAC,EAC5G3E,aAAa,CAAC2E,MAAM,KAAK,CAAC,gBACzB3G,OAAA;oBAAK0K,SAAS,EAAC,qCAAqC;oBAAAC,QAAA,gBAClD3K,OAAA,CAACV,KAAK;sBAACoL,SAAS,EAAC;oBAAoC;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eACxD/K,OAAA;sBAAG0K,SAAS,EAAC,uBAAuB;sBAAAC,QAAA,EAAC;oBAAoB;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAG,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1D,CAAC,gBAEN/K,OAAA;oBAAK0K,SAAS,EAAC,WAAW;oBAAAC,QAAA,GAEvB,CAAC,MAAM;sBAAE7G,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE/B,aAAa,CAAC;sBAAE,OAAO,IAAI;oBAAE,CAAC,EAAE,CAAC,EAChFA,aAAa,CAACuC,GAAG,CAAEiC,QAAQ,IAAK;sBAAA,IAAAqG,qBAAA,EAAAC,qBAAA;sBAC/B;sBACAhJ,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEyC,QAAQ,CAAC;;sBAE5D;sBACA,MAAM8B,UAAU,GAAG9B,QAAQ,CAAC3C,EAAE;sBAC9B,MAAMkJ,YAAY,GAAGvG,QAAQ,CAACI,IAAI;sBAElC9C,OAAO,CAACC,GAAG,CAAC,6BAA6BuE,UAAU,UAAUyE,YAAY,EAAE,CAAC;;sBAE5E;sBACA,MAAMC,sBAAsB,GAAGxJ,cAAc,CAACmF,MAAM,CAACyB,KAAK,IACxDA,KAAK,CAAC7C,WAAW,KAAKe,UACxB,CAAC;;sBAED;sBACA,MAAM2E,iBAAiB,GAAGD,sBAAsB,CAACrE,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,UAAU,KAAK,aAAa,CAAC;sBAC5F,MAAMqE,aAAa,GAAGF,sBAAsB,CAACrE,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,UAAU,KAAK,SAAS,CAAC;;sBAEpF;sBACA,MAAMsE,sBAAsB,GAAGF,iBAAiB,CAACtG,MAAM,GAAG,CAAC,GACzD,CAAC,GAAGsG,iBAAiB,CAAC,CAACnE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;wBACpC,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACH,CAAC,CAACI,WAAW,CAAC;wBACrC,MAAMC,KAAK,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,WAAW,CAAC;wBACrC,OAAOC,KAAK,CAACC,OAAO,CAAC,CAAC,GAAGJ,KAAK,CAACI,OAAO,CAAC,CAAC;sBAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;sBAEd,MAAM+D,kBAAkB,GAAGF,aAAa,CAACvG,MAAM,GAAG,CAAC,GACjD,CAAC,GAAGuG,aAAa,CAAC,CAACpE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;wBAChC,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACH,CAAC,CAACI,WAAW,CAAC;wBACrC,MAAMC,KAAK,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACG,WAAW,CAAC;wBACrC,OAAOC,KAAK,CAACC,OAAO,CAAC,CAAC,GAAGJ,KAAK,CAACI,OAAO,CAAC,CAAC;sBAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;;sBAEd;sBACA,MAAMgE,YAAY,GAAG/D,uBAAuB,CAAChB,UAAU,CAAC;sBACxD,MAAMgF,OAAO,GAAG9D,kBAAkB,CAAClB,UAAU,CAAC;;sBAE9C;sBACA,MAAMiF,mBAAmB,GAAGF,YAAY,CAAC1G,MAAM,GAAG,CAAC,GACjD,CAAC,GAAG0G,YAAY,CAAC,CAACvE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;wBAC/B,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACH,CAAC,CAACyE,UAAU,IAAIzE,CAAC,CAAC0E,SAAS,CAAC;wBACnD,MAAMrE,KAAK,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACwE,UAAU,IAAIxE,CAAC,CAACyE,SAAS,CAAC;wBACnD,OAAOrE,KAAK,CAACC,OAAO,CAAC,CAAC,GAAGJ,KAAK,CAACI,OAAO,CAAC,CAAC;sBAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;sBAEd,MAAMqE,eAAe,GAAGJ,OAAO,CAAC3G,MAAM,GAAG,CAAC,GACxC,CAAC,GAAG2G,OAAO,CAAC,CAACxE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;wBAC1B,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACH,CAAC,CAACyE,UAAU,IAAIzE,CAAC,CAAC0E,SAAS,CAAC;wBACnD,MAAMrE,KAAK,GAAG,IAAIF,IAAI,CAACF,CAAC,CAACwE,UAAU,IAAIxE,CAAC,CAACyE,SAAS,CAAC;wBACnD,OAAOrE,KAAK,CAACC,OAAO,CAAC,CAAC,GAAGJ,KAAK,CAACI,OAAO,CAAC,CAAC;sBAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI;;sBAEd;sBACA,MAAMsE,kBAAkB,GAAGR,sBAAsB,IAAII,mBAAmB;sBACxE,MAAMK,cAAc,GAAGR,kBAAkB,IAAIM,eAAe;sBAE5D,oBACE1N,OAAA,CAACpC,IAAI;wBAAkB8M,SAAS,EAAC,8BAA8B;wBAAAC,QAAA,eAC7D3K,OAAA,CAACnC,WAAW;0BAAC6M,SAAS,EAAC,KAAK;0BAAAC,QAAA,gBAC1B3K,OAAA;4BAAK0K,SAAS,EAAC,wCAAwC;4BAAAC,QAAA,gBACrD3K,OAAA;8BAAI0K,SAAS,EAAC,uBAAuB;8BAAAC,QAAA,GAClCoC,YAAY,EAEZ,CAAC,MAAM;gCACNjJ,OAAO,CAACC,GAAG,CAAC,+BAA+BuE,UAAU,UAAUyE,YAAY,EAAE,CAAC;gCAC9E,OAAO,IAAI;8BACb,CAAC,EAAE,CAAC;4BAAA;8BAAAnC,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACF,CAAC,eACL/K,OAAA,CAACzB,KAAK;8BAAC2M,OAAO,EAAC,SAAS;8BAACR,SAAS,EAAC,6CAA6C;8BAAAC,QAAA,EAAC;4BAEjF;8BAAAC,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OAAO,CAAC;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACL,CAAC,eAEN/K,OAAA;4BAAK0K,SAAS,EAAC,wBAAwB;4BAAAC,QAAA,gBAErC3K,OAAA;8BAAK0K,SAAS,EAAC,oBAAoB;8BAAAC,QAAA,gBACjC3K,OAAA;gCAAI0K,SAAS,EAAC,0BAA0B;gCAAAC,QAAA,EAAC;8BAAW;gCAAAC,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAI,CAAC,EAExD4C,kBAAkB,gBACjB3N,OAAA;gCAAK0K,SAAS,EAAC,MAAM;gCAAAC,QAAA,gBACnB3K,OAAA,CAACJ,iBAAiB;kCAChBiO,GAAG,EAAEV,sBAAsB;kCACzB;kCACA,EAAAN,qBAAA,GAAAM,sBAAsB,CAAC/C,KAAK,cAAAyC,qBAAA,uBAA5BA,qBAAA,CAA8B1I,IAAI,KAAI,EAAE;kCAExC;kCACAwJ,kBAAkB,CAACvD,KACpB;kCACD0D,GAAG,EAAC,mBAAmB;kCACvBpD,SAAS,EAAC;gCAA8C;kCAAAE,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OACzD,CAAC,EAED,CAAAoC,sBAAsB,aAAtBA,sBAAsB,uBAAtBA,sBAAsB,CAAEpI,MAAM,kBAC7B/E,OAAA,CAACzB,KAAK;kCAACmM,SAAS,EAAE,gBAAgByC,sBAAsB,CAACpI,MAAM,KAAK,UAAU,GAAG,6BAA6B,GAAGoI,sBAAsB,CAACpI,MAAM,KAAK,UAAU,GAAG,yBAAyB,GAAG,+BAA+B,EAAG;kCAAA4F,QAAA,EAC3NwC,sBAAsB,CAACpI,MAAM,CAACgJ,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGb,sBAAsB,CAACpI,MAAM,CAACuC,KAAK,CAAC,CAAC;gCAAC;kCAAAsD,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAC1F,CACR;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OACE,CAAC,gBAEN/K,OAAA;gCAAK0K,SAAS,EAAC,8EAA8E;gCAAAC,QAAA,gBAC3F3K,OAAA,CAACT,MAAM;kCAACmL,SAAS,EAAC;gCAAuB;kCAAAE,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAE,CAAC,eAC5C/K,OAAA;kCAAG0K,SAAS,EAAC,4BAA4B;kCAAAC,QAAA,EAAC;gCAAQ;kCAAAC,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAG,CAAC;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OACnD,CACN,eAED/K,OAAA,CAACvC,MAAM;gCACLqM,IAAI,EAAC,IAAI;gCACToB,OAAO,EAAC,SAAS;gCACjBC,OAAO,EAAEA,CAAA,KAAM;kCACbhJ,mBAAmB,CAACqE,QAAQ,CAAC;kCAC7BnE,aAAa,CAAC,aAAa,CAAC;kCAC5BU,qBAAqB,CAAC,IAAI,CAAC;gCAC7B,CAAE;gCACF2H,SAAS,EAAC,yCAAyC;gCAAAC,QAAA,gBAEnD3K,OAAA,CAACT,MAAM;kCAACmL,SAAS,EAAC;gCAAc;kCAAAE,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAE,CAAC,4BAErC;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAQ,CAAC;4BAAA;8BAAAH,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACN,CAAC,eAGN/K,OAAA;8BAAK0K,SAAS,EAAC,oBAAoB;8BAAAC,QAAA,gBACjC3K,OAAA;gCAAI0K,SAAS,EAAC,0BAA0B;gCAAAC,QAAA,EAAC;8BAAO;gCAAAC,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAI,CAAC,EAEpD6C,cAAc,gBACb5N,OAAA;gCAAK0K,SAAS,EAAC,MAAM;gCAAAC,QAAA,gBACnB3K,OAAA,CAACJ,iBAAiB;kCAChBiO,GAAG,EAAET,kBAAkB;kCACrB;kCACA,EAAAN,qBAAA,GAAAM,kBAAkB,CAAChD,KAAK,cAAA0C,qBAAA,uBAAxBA,qBAAA,CAA0B3I,IAAI,KAAI,EAAE;kCAEpC;kCACAyJ,cAAc,CAACxD,KAChB;kCACD0D,GAAG,EAAC,eAAe;kCACnBpD,SAAS,EAAC;gCAA8C;kCAAAE,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OACzD,CAAC,EAED,CAAAqC,kBAAkB,aAAlBA,kBAAkB,uBAAlBA,kBAAkB,CAAErI,MAAM,kBACzB/E,OAAA,CAACzB,KAAK;kCAACmM,SAAS,EAAE,gBAAgB0C,kBAAkB,CAACrI,MAAM,KAAK,UAAU,GAAG,6BAA6B,GAAGqI,kBAAkB,CAACrI,MAAM,KAAK,UAAU,GAAG,yBAAyB,GAAG,+BAA+B,EAAG;kCAAA4F,QAAA,EACnNyC,kBAAkB,CAACrI,MAAM,CAACgJ,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGZ,kBAAkB,CAACrI,MAAM,CAACuC,KAAK,CAAC,CAAC;gCAAC;kCAAAsD,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAClF,CACR;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OACE,CAAC,gBAEN/K,OAAA;gCAAK0K,SAAS,EAAC,8EAA8E;gCAAAC,QAAA,gBAC3F3K,OAAA,CAACT,MAAM;kCAACmL,SAAS,EAAC;gCAAuB;kCAAAE,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAE,CAAC,eAC5C/K,OAAA;kCAAG0K,SAAS,EAAC,4BAA4B;kCAAAC,QAAA,EAAC;gCAAQ;kCAAAC,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAG,CAAC;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OACnD,CACN,eAED/K,OAAA,CAACvC,MAAM;gCACLqM,IAAI,EAAC,IAAI;gCACToB,OAAO,EAAC,SAAS;gCACjBC,OAAO,EAAEA,CAAA,KAAM;kCACbhJ,mBAAmB,CAACqE,QAAQ,CAAC;kCAC7BnE,aAAa,CAAC,SAAS,CAAC;kCACxBU,qBAAqB,CAAC,IAAI,CAAC;gCAC7B,CAAE;gCACF2H,SAAS,EAAC,yCAAyC;gCAAAC,QAAA,gBAEnD3K,OAAA,CAACT,MAAM;kCAACmL,SAAS,EAAC;gCAAc;kCAAAE,QAAA,EAAAC,YAAA;kCAAAC,UAAA;kCAAAC,YAAA;gCAAA,OAAE,CAAC,wBAErC;8BAAA;gCAAAH,QAAA,EAAAC,YAAA;gCAAAC,UAAA;gCAAAC,YAAA;8BAAA,OAAQ,CAAC;4BAAA;8BAAAH,QAAA,EAAAC,YAAA;8BAAAC,UAAA;8BAAAC,YAAA;4BAAA,OACN,CAAC;0BAAA;4BAAAH,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACH,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACK;sBAAC,GA7GLzC,UAAU;wBAAAsC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OA8Gf,CAAC;oBAEX,CAAC,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CACN;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CACN;cAAA,GAzPOvG,IAAI,CAACX,EAAE;gBAAA+G,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA0PZ,CACN;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACU,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eAEd/K,OAAA,CAACtB,WAAW;QAACyN,KAAK,EAAC,QAAQ;QAACzB,SAAS,EAAC,MAAM;QAAAC,QAAA,eAC1C3K,OAAA,CAACpC,IAAI;UAAA+M,QAAA,gBACH3K,OAAA,CAACjC,UAAU;YAAA4M,QAAA,gBACT3K,OAAA,CAAChC,SAAS;cAAC0M,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAChD3K,OAAA,CAACZ,QAAQ;gBAACsL,SAAS,EAAC;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAChC/K,OAAA;gBAAA2K,QAAA,EAAM;cAAa;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB,CAAC,eACZ/K,OAAA,CAAClC,eAAe;cAAA6M,QAAA,EAAC;YAAiC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAiB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1D,CAAC,eACb/K,OAAA,CAACnC,WAAW;YAAA8M,QAAA,EACTjK,MAAM,CAACiG,MAAM,KAAK,CAAC,gBAClB3G,OAAA;cAAK0K,SAAS,EAAC,kBAAkB;cAAAC,QAAA,gBAC/B3K,OAAA,CAACnB,KAAK;gBAAC6L,SAAS,EAAC;cAAsC;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC1D/K,OAAA;gBAAG0K,SAAS,EAAC,eAAe;gBAAAC,QAAA,EAAC;cAAuB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrD,CAAC,gBAEN/K,OAAA;cAAK0K,SAAS,EAAC,WAAW;cAAAC,QAAA,EACvBjK,MAAM,CAAC4G,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC/C,GAAG,CAAEO,KAAK,iBAC7B9E,OAAA,CAACpC,IAAI;gBAAgB8M,SAAS,EAAC,8BAA8B;gBAAAC,QAAA,eAC3D3K,OAAA,CAACnC,WAAW;kBAAC6M,SAAS,EAAC,KAAK;kBAAAC,QAAA,gBAC1B3K,OAAA;oBAAK0K,SAAS,EAAC,wCAAwC;oBAAAC,QAAA,gBACrD3K,OAAA;sBAAK0K,SAAS,EAAC,6BAA6B;sBAAAC,QAAA,gBAC1C3K,OAAA,CAACZ,QAAQ;wBAACsL,SAAS,EAAC;sBAAuB;wBAAAE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,eAC9C/K,OAAA;wBAAM0K,SAAS,EAAC,aAAa;wBAAAC,QAAA,EAAG7F,KAAK,CAASyG;sBAAU;wBAAAX,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC7D,CAAC,eACN/K,OAAA,CAACzB,KAAK;sBAACmM,SAAS,EAAE5F,KAAK,CAACC,MAAM,KAAK,YAAY,GAAG,6BAA6B,GAAG,2BAA4B;sBAAA4F,QAAA,EAC3G7F,KAAK,CAACC,MAAM,KAAK,YAAY,GAAG,SAAS,GAAG;oBAAW;sBAAA6F,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACnD,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC,eAEN/K,OAAA;oBAAK0K,SAAS,EAAC,+CAA+C;oBAAAC,QAAA,gBAC5D3K,OAAA;sBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;wBAAC+M,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,EAAC;sBAAa;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,eAC9D/K,OAAA;wBAAA2K,QAAA,EAAI,IAAIzB,IAAI,CAAEpE,KAAK,CAASuG,aAAa,CAAC,CAACC,cAAc,CAAC;sBAAC;wBAAAV,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC,EAC9DjG,KAAK,CAASe,cAAc,iBAC5B7F,OAAA;wBAAK0K,SAAS,EAAC,MAAM;wBAAAC,QAAA,eACnB3K,OAAA,CAACJ,iBAAiB;0BAChBiO,GAAG,EAAG/I,KAAK,CAASe,cAAe;0BACnCiI,GAAG,EAAC,gBAAgB;0BACpBpD,SAAS,EAAC;wBAAuC;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAClD;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACC,CACN;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE,CAAC,EAEJjG,KAAK,CAASmJ,cAAc,iBAC5BjO,OAAA;sBAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;wBAAC+M,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,EAAC;sBAAc;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAO,CAAC,eAC/D/K,OAAA;wBAAA2K,QAAA,EAAI,IAAIzB,IAAI,CAAEpE,KAAK,CAASmJ,cAAc,CAAC,CAAC3C,cAAc,CAAC;sBAAC;wBAAAV,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAI,CAAC,EAC/DjG,KAAK,CAASqB,eAAe,iBAC7BnG,OAAA;wBAAK0K,SAAS,EAAC,MAAM;wBAAAC,QAAA,eACnB3K,OAAA,CAACJ,iBAAiB;0BAChBiO,GAAG,EAAG/I,KAAK,CAASqB,eAAgB;0BACpC2H,GAAG,EAAC,iBAAiB;0BACrBpD,SAAS,EAAC;wBAAuC;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAClD;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACC,CACN;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE,CACN;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE,CAAC,EAELjG,KAAK,CAACgB,KAAK,iBACV9F,OAAA;oBAAK0K,SAAS,EAAC,qCAAqC;oBAAAC,QAAA,gBAClD3K,OAAA,CAACrC,KAAK;sBAAC+M,SAAS,EAAC,eAAe;sBAAAC,QAAA,EAAC;oBAAK;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CAAC,eAC9C/K,OAAA;sBAAG0K,SAAS,EAAC,oBAAoB;sBAAAC,QAAA,EAAE7F,KAAK,CAACgB;oBAAK;sBAAA8E,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAI,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChD,CACN;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACU;cAAC,GAlDLjG,KAAK,CAACjB,EAAE;gBAAA+G,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAmDb,CACP;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACU,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eAGP/K,OAAA,CAAC/B,MAAM;MAACyN,IAAI,EAAE5I,kBAAmB;MAAC6I,YAAY,EAAE5I,qBAAsB;MAAA4H,QAAA,eACpE3K,OAAA,CAAC9B,aAAa;QAACwM,SAAS,EAAC,UAAU;QAAAC,QAAA,gBACjC3K,OAAA,CAAC5B,YAAY;UAAAuM,QAAA,gBACX3K,OAAA,CAAC3B,WAAW;YAACqM,SAAS,EAAC,6BAA6B;YAAAC,QAAA,GACjDvI,UAAU,KAAK,aAAa,gBAC3BpC,OAAA,CAACR,UAAU;cAACkL,SAAS,EAAC;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,gBAElC/K,OAAA,CAACT,MAAM;cAACmL,SAAS,EAAC;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAC9B,eACD/K,OAAA;cAAA2K,QAAA,GAAM,SAAO,EAACvI,UAAU,KAAK,aAAa,GAAG,aAAa,GAAG,SAAS,EAAC,QAAM;YAAA;cAAAwI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzE,CAAC,eACd/K,OAAA,CAAC7B,iBAAiB;YAAAwM,QAAA,GAAC,yBACM,EAAC7I,qBAAqB,aAArBA,qBAAqB,uBAArBA,qBAAqB,CAAE0K,SAAS;UAAA;YAAA5B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eAEf/K,OAAA;UAAK0K,SAAS,EAAC,WAAW;UAAAC,QAAA,GAEvBzI,gBAAgB,iBACflC,OAAA;YAAK0K,SAAS,EAAC,+BAA+B;YAAAC,QAAA,gBAC5C3K,OAAA,CAACrC,KAAK;cAAC+M,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAAC;YAAiB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC9E/K,OAAA;cAAK0K,SAAS,EAAC,MAAM;cAAAC,QAAA,eACnB3K,OAAA;gBAAG0K,SAAS,EAAC,aAAa;gBAAAC,QAAA,EAAEzI,gBAAgB,CAAC2E,aAAa,IAAI3E,gBAAgB,CAAC0E;cAAI;gBAAAgE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN,eAGD/K,OAAA;YAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;cAACkO,OAAO,EAAC,YAAY;cAAAlB,QAAA,EAAC;YAAe;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACnD/K,OAAA,CAACtC,KAAK;cACJmG,EAAE,EAAC,YAAY;cACfkG,IAAI,EAAC,MAAM;cACXoC,KAAK,EAAEvJ,UAAW;cAClBmJ,QAAQ,EAAGzG,CAAC,IAAKzC,aAAa,CAACyC,CAAC,CAACG,MAAM,CAAC0G,KAAK,CAAE;cAC/Cf,QAAQ,EAAExJ,QAAS;cACnBsK,QAAQ;cACRxB,SAAS,EAAC;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAGN/K,OAAA;YAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;cAACkO,OAAO,EAAC,cAAc;cAAAlB,QAAA,GAC1BvI,UAAU,KAAK,aAAa,GAAG,oBAAoB,GAAG,gBAAgB,EAAC,aAC1E;YAAA;cAAAwI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACR/K,OAAA,CAACtC,KAAK;cACJmG,EAAE,EAAC,cAAc;cACjBkG,IAAI,EAAC,QAAQ;cACbmE,IAAI,EAAC,MAAM;cACX/B,KAAK,EAAE3J,YAAa;cACpBuJ,QAAQ,EAAGzG,CAAC,IAAK7C,eAAe,CAAC6C,CAAC,CAACG,MAAM,CAAC0G,KAAK,CAAE;cACjDC,WAAW,EAAC,iBAAiB;cAC7BhB,QAAQ,EAAExJ,QAAS;cACnBsK,QAAQ;YAAA;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAGN/K,OAAA;YAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;cAACkO,OAAO,EAAC,aAAa;cAAAlB,QAAA,EAAC;YAAsB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC3D/K,OAAA,CAACtC,KAAK;cACJmG,EAAE,EAAC,aAAa;cAChBkG,IAAI,EAAC,MAAM;cACX+B,MAAM,EAAC,SAAS;cAChBC,QAAQ,EAAGzG,CAAC,IAAK;gBACf,IAAIA,CAAC,CAACG,MAAM,CAACwG,KAAK,IAAI3G,CAAC,CAACG,MAAM,CAACwG,KAAK,CAAC,CAAC,CAAC,EAAE;kBACvC1J,cAAc,CAAC+C,CAAC,CAACG,MAAM,CAACwG,KAAK,CAAC,CAAC,CAAC,CAAC;gBACnC;cACF,CAAE;cACFb,QAAQ,EAAExJ,QAAS;cACnBsK,QAAQ;YAAA;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,EAGLzI,WAAW,iBACVtC,OAAA;YAAK0K,SAAS,EAAC,MAAM;YAAAC,QAAA,gBACnB3K,OAAA,CAACrC,KAAK;cAAC+M,SAAS,EAAC,oBAAoB;cAAAC,QAAA,EAAC;YAAa;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC3D/K,OAAA;cAAK0K,SAAS,EAAC,+BAA+B;cAAAC,QAAA,eAC5C3K,OAAA;gBACE6N,GAAG,EAAEM,GAAG,CAACC,eAAe,CAAC9L,WAAW,CAAE;gBACtCwL,GAAG,EAAC,SAAS;gBACbpD,SAAS,EAAC;cAAiC;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5C;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN,eAGD/K,OAAA;YAAA2K,QAAA,gBACE3K,OAAA,CAACrC,KAAK;cAACkO,OAAO,EAAC,aAAa;cAAAlB,QAAA,EAAC;YAAgB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACrD/K,OAAA,CAACxB,QAAQ;cACPqF,EAAE,EAAC,aAAa;cAChBsI,KAAK,EAAEzJ,WAAY;cACnBqJ,QAAQ,EAAGzG,CAAC,IAAK3C,cAAc,CAAC2C,CAAC,CAACG,MAAM,CAAC0G,KAAK,CAAE;cAChDC,WAAW,EAAC,6BAA6B;cACzChB,QAAQ,EAAExJ;YAAS;cAAAgJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eAGN/K,OAAA;YAAK0K,SAAS,EAAC,4BAA4B;YAAAC,QAAA,gBACzC3K,OAAA,CAACvC,MAAM;cACLsM,IAAI,EAAC,QAAQ;cACbmB,OAAO,EAAC,SAAS;cACjBC,OAAO,EAAEA,CAAA,KAAMpI,qBAAqB,CAAC,KAAK,CAAE;cAC5CqI,QAAQ,EAAExJ,QAAS;cAAA+I,QAAA,EACpB;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACT/K,OAAA,CAACvC,MAAM;cACL0N,OAAO,EAAEzB,iBAAkB;cAC3B0B,QAAQ,EAAE,CAAC9I,WAAW,IAAI,CAACM,UAAU,IAAIhB,QAAS;cAAA+I,QAAA,EAEjD/I,QAAQ,gBACP5B,OAAA,CAAAE,SAAA;gBAAAyK,QAAA,gBACE3K,OAAA,CAACP,OAAO;kBAACiL,SAAS,EAAC;gBAA2B;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAEnD;cAAA,eAAE,CAAC,GAEH;YACD;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACO;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACxK,EAAA,CAlqCQJ,yBAAyB;AAAAkO,EAAA,GAAzBlO,yBAAyB;AAoqClC,OAAO,MAAMmO,gBAAgB,GAAGzO,gBAAgB,CAACM,yBAAyB,CAAC;AAACoO,GAAA,GAA/DD,gBAAgB;AAAA,IAAAD,EAAA,EAAAE,GAAA;AAAAC,YAAA,CAAAH,EAAA;AAAAG,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}