{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Dashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { Users, UserCheck, TrendingDown, DollarSign, Receipt, Trophy, Target, MapPin, Activity } from 'lucide-react';\nimport { db } from '../utils/supabase/supabaseClients';\nimport { apiClient } from '../utils/api/apiClient';\n\n// Type definitions\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Real-time refresh interval (30 seconds)\nconst REAL_TIME_REFRESH_INTERVAL = 30000;\nexport function Dashboard({\n  user\n}) {\n  _s();\n  // Data states with real-time updates\n  const [agents, setAgents] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [trips, setTrips] = useState([]);\n  const [rollingRecords, setRollingRecords] = useState([]);\n  const [buyInOutRecords, setBuyInOutRecords] = useState([]);\n\n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [lastSyncTime, setLastSyncTime] = useState(null);\n  const [connectionStatus, setConnectionStatus] = useState('connected');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isRealTimeEnabled, setIsRealTimeEnabled] = useState(true);\n\n  // Helper functions\n  const safeFormatNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n  const safeNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Real-time data loading from Supabase with API integration\n  const loadRealTimeData = useCallback(async () => {\n    try {\n      setRefreshing(true);\n      setErrorMessage('');\n      console.log('ðŸ”„ Loading real-time dashboard data from API...');\n\n      // Load all required data from API in parallel\n      const [agentsData, customersData, transactionsData, tripsApiResponse] = await Promise.all([db.get('agents', []), db.get('customers', []), db.get('transactions', []), apiClient.getTripsWithSharing()]);\n      const tripsData = tripsApiResponse.data || [];\n      console.log('ðŸ“Š Dashboard data loaded:', {\n        agents: Array.isArray(agentsData) ? agentsData.length : 0,\n        customers: Array.isArray(customersData) ? customersData.length : 0,\n        trips: Array.isArray(tripsData) ? tripsData.length : 0,\n        transactions: Array.isArray(transactionsData) ? transactionsData.length : 0\n      });\n\n      // Debug: Log sample data\n      if (Array.isArray(customersData) && customersData.length > 0) {\n        console.log('ðŸ” Sample customer data:', customersData[0]);\n      }\n      if (Array.isArray(tripsData) && tripsData.length > 0) {\n        console.log('ðŸ” Sample trip data with sharing:', tripsData[0]);\n      }\n      if (Array.isArray(transactionsData) && transactionsData.length > 0) {\n        console.log('ðŸ” Sample transaction data:', transactionsData[0]);\n      }\n\n      // Process customers - use database totals directly\n      const processedCustomers = (Array.isArray(customersData) ? customersData : []).map(customer => {\n        return {\n          ...customer,\n          id: customer.id,\n          name: customer.name,\n          agentName: customer.agent_name,\n          isActive: customer.status === 'active',\n          totalRolling: parseFloat(customer.total_rolling) || 0,\n          totalWinLoss: parseFloat(customer.total_win_loss) || 0,\n          totalBuyIn: parseFloat(customer.total_buy_in) || 0,\n          totalBuyOut: parseFloat(customer.total_buy_out) || 0,\n          attachments: customer.attachments || [],\n          isAgent: customer.is_agent || false,\n          rollingPercentage: parseFloat(customer.rolling_percentage) || 1.4,\n          creditLimit: parseFloat(customer.credit_limit) || 0,\n          availableCredit: parseFloat(customer.available_credit) || 0\n        };\n      });\n\n      // Process trips - preserve sharing data from API directly\n      const processedTrips = (Array.isArray(tripsData) ? tripsData : []).map(trip => {\n        console.log('ðŸ” Processing trip:', trip.trip_name, 'sharing data:', trip.sharing);\n        return {\n          ...trip,\n          attachments: trip.attachments || []\n          // Don't override sharing - keep original API data\n        };\n      });\n\n      // Set processed data\n      setAgents(agentsData);\n      setCustomers(processedCustomers);\n      setTrips(processedTrips);\n      setRollingRecords([]); // No longer extracting from trips\n      setBuyInOutRecords(transactionsData || []);\n      setLastSyncTime(new Date());\n      setConnectionStatus('connected');\n      console.log(`âœ… Real-time dashboard data loaded: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips with sharing data`);\n    } catch (error) {\n      console.error('âŒ Error loading real-time dashboard data:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setErrorMessage(`Failed to load dashboard data: ${errorMessage}`);\n      setConnectionStatus('error');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, []);\n\n  // Real-time data sync with automatic refresh\n  useEffect(() => {\n    loadRealTimeData();\n\n    // Set up real-time refresh interval\n    let refreshInterval;\n    if (isRealTimeEnabled) {\n      refreshInterval = setInterval(() => {\n        console.log('ðŸ”„ Real-time dashboard refresh triggered');\n        loadRealTimeData();\n      }, REAL_TIME_REFRESH_INTERVAL);\n    }\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, [loadRealTimeData, isRealTimeEnabled]);\n\n  // Toggle real-time updates\n  const toggleRealTime = () => {\n    setIsRealTimeEnabled(!isRealTimeEnabled);\n    if (!isRealTimeEnabled) {\n      loadRealTimeData(); // Refresh immediately when re-enabling\n    }\n  };\n\n  // Filter data based on user role\n  const getFilteredData = () => {\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => c.agentId === user.agentId);\n      filteredTrips = trips.filter(t => t.agents && t.agents.some(agent => agent.agentId === user.agentId) || t.agentId === user.agentId);\n    }\n    return {\n      filteredCustomers,\n      filteredTrips\n    };\n  };\n  const {\n    filteredCustomers,\n    filteredTrips\n  } = getFilteredData();\n\n  // Calculate comprehensive metrics from real-time data\n  const calculateMetrics = () => {\n    // Trip-based financial metrics\n    const tripTotalRolling = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalRolling), 0);\n    const tripTotalWinLoss = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalWinLoss), 0);\n    const totalRollingCommission = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.calculatedTotalRolling), 0);\n    const totalExpenses = filteredTrips.reduce((sum, trip) => sum + (trip.expenses || []).reduce((expSum, exp) => expSum + safeNumber(exp.amount), 0), 0);\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    const activeCustomers = filteredCustomers.filter(c => c.isActive).length;\n    const customerTotalWinLoss = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalWinLoss), 0);\n    const customerTotalBuyIn = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyIn), 0);\n    const customerTotalBuyOut = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyOut), 0);\n\n    // Total Rolling from trip_sharing table (always positive for rebate calculation)\n    const tripSharingTotalRolling = trips.reduce((sum, trip) => {\n      var _trip$sharing, _trip$sharing2, _trip$sharing3;\n      const value = Math.abs(safeNumber(((_trip$sharing = trip.sharing) === null || _trip$sharing === void 0 ? void 0 : _trip$sharing.total_rolling) || ((_trip$sharing2 = trip.sharing) === null || _trip$sharing2 === void 0 ? void 0 : _trip$sharing2.totalRolling)));\n      console.log(`Trip ${trip.trip_name}: total_rolling = ${(_trip$sharing3 = trip.sharing) === null || _trip$sharing3 === void 0 ? void 0 : _trip$sharing3.total_rolling}, contributing ${value} to total rolling`);\n      return sum + value;\n    }, 0);\n\n    // Agent metrics\n    const totalAgents = agents.length;\n    const activeAgents = agents.filter(a => a.status === 'active').length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'ongoing').length;\n    const plannedTrips = filteredTrips.filter(t => t.status === 'planned').length;\n\n    // Calculate metrics from trip_sharing table data (all trips, no filtering)\n    console.log('ðŸ” Debug trips data for calculations:', trips.length);\n    trips.forEach((trip, index) => {\n      console.log(`Trip ${index + 1} (${trip.trip_name}):`, {\n        hasSharing: !!trip.sharing,\n        sharingKeys: trip.sharing ? Object.keys(trip.sharing) : 'no sharing',\n        sharingData: trip.sharing\n      });\n    });\n    const tripSharingGrossProfit = trips.reduce((sum, trip) => {\n      var _trip$sharing4, _trip$sharing5, _trip$sharing6;\n      const value = Math.abs(safeNumber(((_trip$sharing4 = trip.sharing) === null || _trip$sharing4 === void 0 ? void 0 : _trip$sharing4.total_win_loss) || ((_trip$sharing5 = trip.sharing) === null || _trip$sharing5 === void 0 ? void 0 : _trip$sharing5.totalWinLoss)));\n      console.log(`Trip ${trip.trip_name}: total_win_loss = ${(_trip$sharing6 = trip.sharing) === null || _trip$sharing6 === void 0 ? void 0 : _trip$sharing6.total_win_loss}, contributing ${value} to gross profit`);\n      return sum + value;\n    }, 0);\n    const tripSharingExpenses = trips.reduce((sum, trip) => {\n      var _trip$sharing7, _trip$sharing8, _trip$sharing9;\n      const value = Math.abs(safeNumber(((_trip$sharing7 = trip.sharing) === null || _trip$sharing7 === void 0 ? void 0 : _trip$sharing7.total_expenses) || ((_trip$sharing8 = trip.sharing) === null || _trip$sharing8 === void 0 ? void 0 : _trip$sharing8.totalExpenses)));\n      console.log(`Trip ${trip.trip_name}: total_expenses = ${(_trip$sharing9 = trip.sharing) === null || _trip$sharing9 === void 0 ? void 0 : _trip$sharing9.total_expenses}, contributing ${value} to expenses`);\n      return sum + value;\n    }, 0);\n    const tripSharingNetProfit = trips.reduce((sum, trip) => {\n      var _trip$sharing0, _trip$sharing1, _trip$sharing10;\n      const value = safeNumber(((_trip$sharing0 = trip.sharing) === null || _trip$sharing0 === void 0 ? void 0 : _trip$sharing0.company_share) || ((_trip$sharing1 = trip.sharing) === null || _trip$sharing1 === void 0 ? void 0 : _trip$sharing1.companyShare));\n      console.log(`Trip ${trip.trip_name}: company_share = ${(_trip$sharing10 = trip.sharing) === null || _trip$sharing10 === void 0 ? void 0 : _trip$sharing10.company_share}, contributing ${value} to net profit`);\n      return sum + value;\n    }, 0);\n    console.log('ðŸ“Š Final calculations:', {\n      tripSharingGrossProfit,\n      tripSharingExpenses,\n      tripSharingNetProfit\n    });\n\n    // House performance calculations (using trip_sharing data)\n    const houseGrossWin = tripSharingGrossProfit;\n    const houseNetWin = houseGrossWin - totalRollingCommission;\n    const houseFinalProfit = tripSharingNetProfit;\n\n    // Performance ratios (using trip_sharing total_rolling)\n    const profitMargin = tripSharingTotalRolling > 0 ? houseFinalProfit / tripSharingTotalRolling * 100 : 0;\n    const expenseRatio = tripSharingTotalRolling > 0 ? totalExpenses / tripSharingTotalRolling * 100 : 0;\n    const commissionRatio = tripSharingTotalRolling > 0 ? totalRollingCommission / tripSharingTotalRolling * 100 : 0;\n\n    // Recent activity metrics\n    const recentRollingRecords = rollingRecords.filter(record => Date.now() - new Date(record.recordedAt).getTime() < 24 * 60 * 60 * 1000).length;\n    const recentBuyInOutRecords = buyInOutRecords.filter(record => Date.now() - new Date(record.timestamp).getTime() < 24 * 60 * 60 * 1000).length;\n    return {\n      // Trip metrics\n      tripTotalRolling,\n      tripTotalWinLoss,\n      totalRollingCommission,\n      totalExpenses: tripSharingExpenses,\n      // Customer metrics\n      totalCustomers,\n      activeCustomers,\n      customerTotalRolling: tripSharingTotalRolling,\n      // Use trip_sharing total_rolling\n      customerTotalWinLoss,\n      customerTotalBuyIn,\n      customerTotalBuyOut,\n      // Agent metrics\n      totalAgents,\n      activeAgents,\n      // Trip counts\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      plannedTrips,\n      // House performance\n      houseGrossWin,\n      houseNetWin,\n      houseFinalProfit,\n      // Ratios\n      profitMargin,\n      expenseRatio,\n      commissionRatio,\n      // Activity\n      recentRollingRecords,\n      recentBuyInOutRecords,\n      totalRollingRecords: rollingRecords.length,\n      totalBuyInOutRecords: buyInOutRecords.length\n    };\n  };\n  const metrics = calculateMetrics();\n\n  // Filter active trips and use trip_sharing data\n  const activeTrips = filteredTrips.filter(trip => trip.status && trip.status.toLowerCase() === 'active').map(trip => {\n    // Use trip_sharing data directly instead of enriching with calculations\n    const tripCustomers = filteredCustomers.filter(c => {\n      var _trip$customers;\n      return (_trip$customers = trip.customers) === null || _trip$customers === void 0 ? void 0 : _trip$customers.some(tc => tc.customerId === c.id || tc.customer_id === c.id);\n    });\n    return {\n      ...trip,\n      customers: tripCustomers\n      // Keep original sharing data from trip_sharing table\n    };\n  });\n  const getWinLossStatus = winLoss => {\n    if (winLoss === 0) {\n      return {\n        text: 'Break Even',\n        icon: Target,\n        color: 'text-gray-600'\n      };\n    } else if (winLoss > 0) {\n      return {\n        text: 'Junket Loss',\n        icon: TrendingDown,\n        color: 'text-red-600'\n      };\n    } else {\n      return {\n        text: 'Junket Profit',\n        icon: Trophy,\n        color: 'text-green-600'\n      };\n    }\n  };\n\n  // Show loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-gray-600\",\n          children: \"Loading dashboard data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-4\",\n        children: \"Real-time Financial Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-blue-800\",\n              children: \"Total Rolling Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-700\",\n              children: [\"HK$\", safeFormatNumber(metrics.customerTotalRolling)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-600\",\n              children: [\"From \", metrics.totalRollingRecords, \" rolling records across \", metrics.totalCustomers, \" customers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.houseGrossWin >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.houseGrossWin >= 0 ? 'text-green-800' : 'text-red-800'}`,\n              children: \"Company Gross Profit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 15\n            }, this), metrics.houseGrossWin >= 0 ? /*#__PURE__*/_jsxDEV(Trophy, {\n              className: \"h-4 w-4 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: [\"HK$\", safeFormatNumber(metrics.houseGrossWin)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: \"From trip sharing win/loss data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-red-50 to-red-100 border-red-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Expenses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Receipt, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-red-700\",\n              children: [\"HK$\", safeFormatNumber(metrics.totalExpenses)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-red-600\",\n              children: \"Total operational expenses from trip sharing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.houseFinalProfit >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.houseFinalProfit >= 0 ? 'text-green-800' : 'text-red-800'}`,\n              children: \"Company Net Profit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this), metrics.houseFinalProfit >= 0 ? /*#__PURE__*/_jsxDEV(Trophy, {\n              className: \"h-4 w-4 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: [\"HK$\", safeFormatNumber(metrics.houseFinalProfit)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: \"Company share from trip sharing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-4\",\n        children: \"Operations Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Active Customers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Users, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold\",\n              children: metrics.activeCustomers\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [\"of \", metrics.totalCustomers, \" total customers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Active Agents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(UserCheck, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold\",\n              children: metrics.activeAgents\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [\"of \", metrics.totalAgents, \" total agents\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Trip Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold\",\n              children: metrics.totalTrips\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [metrics.completedTrips, \" completed, \", metrics.ongoingTrips, \" ongoing, \", metrics.plannedTrips, \" planned\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Recent Activity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Activity, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold\",\n              children: metrics.recentRollingRecords + metrics.recentBuyInOutRecords\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: \"Transactions in last 24 hours\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"h-full\",\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          children: \"Active Trips\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          children: \"Current ongoing trips with real-time performance data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: activeTrips.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            className: \"h-12 w-12 text-gray-300 mx-auto mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No active trips found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-400 mt-1\",\n            children: \"Active trips will appear here when trips are in progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: activeTrips.slice(0, 5) // Show up to 5 trips to match customer performance section\n          .map(trip => {\n            var _trip$sharing11, _trip$sharing12, _trip$sharing13, _trip$sharing14, _trip$customers2;\n            // Use trip_sharing data directly\n            const totalRolling = Math.abs(((_trip$sharing11 = trip.sharing) === null || _trip$sharing11 === void 0 ? void 0 : _trip$sharing11.total_rolling) || ((_trip$sharing12 = trip.sharing) === null || _trip$sharing12 === void 0 ? void 0 : _trip$sharing12.totalRolling) || 0);\n            const winLoss = ((_trip$sharing13 = trip.sharing) === null || _trip$sharing13 === void 0 ? void 0 : _trip$sharing13.total_win_loss) || ((_trip$sharing14 = trip.sharing) === null || _trip$sharing14 === void 0 ? void 0 : _trip$sharing14.totalWinLoss) || 0;\n\n            // Calculate progress based on dates\n            const startDate = trip.start_date ? new Date(trip.start_date) : null;\n            const endDate = trip.end_date ? new Date(trip.end_date) : null;\n            const now = new Date();\n            let progress = 0;\n            if (startDate && endDate) {\n              const totalDuration = endDate.getTime() - startDate.getTime();\n              const elapsed = now.getTime() - startDate.getTime();\n              progress = Math.max(0, Math.min(100, elapsed / totalDuration * 100));\n            }\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-shrink-0\",\n                  children: /*#__PURE__*/_jsxDEV(Badge, {\n                    variant: \"secondary\",\n                    className: \"bg-green-100 text-green-700 border-green-200\",\n                    children: trip.status === 'active' ? 'Active' : 'Ongoing'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 635,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 634,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: trip.trip_name || trip.name || 'Unnamed Trip'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 640,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500 flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                      className: \"h-3 w-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 642,\n                      columnNumber: 29\n                    }, this), trip.destination || 'Unknown Destination', \" \\u2022 \", ((_trip$customers2 = trip.customers) === null || _trip$customers2 === void 0 ? void 0 : _trip$customers2.length) || 0, \" customers\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 641,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-blue-600\",\n                    children: [\"Progress: \", Math.round(progress), \"% \\u2022 \", trip.start_date ? new Date(trip.start_date).toLocaleDateString() : 'TBD', \" - \", trip.end_date ? new Date(trip.end_date).toLocaleDateString() : 'TBD']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-6 text-right text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: \"Rolling\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-blue-600\",\n                    children: [\"HK$\", safeFormatNumber(totalRolling)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 653,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 651,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: \"Win/Loss\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 656,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `font-medium ${winLoss <= 0 ? 'text-green-600' : 'text-red-600'}`,\n                    children: [\"HK$\", safeFormatNumber(Math.abs(winLoss))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 657,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 655,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 23\n              }, this)]\n            }, trip.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          children: \"Real-time Customer Performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          children: [\"Top performing customers based on live rolling data \", user.role === 'agent' ? 'you manage' : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: filteredCustomers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"h-12 w-12 text-gray-300 mx-auto mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No customer data found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-400 mt-1\",\n            children: \"Customer performance will appear here once rolling records are created\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: filteredCustomers.sort((a, b) => safeNumber(b.totalRolling) - safeNumber(a.totalRolling)).slice(0, 5).map(customer => {\n            const indicator = getWinLossStatus(customer.totalWinLoss || 0);\n            const Icon = indicator.icon;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(Icon, {\n                  className: `h-5 w-5 ${indicator.color}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 700,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: customer.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 702,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: [\"Agent: \", customer.agentName, \" \\u2022 \", customer.isActive ? 'Active' : 'Inactive']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 703,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-purple-600\",\n                    children: [\"Commission Rate: \", customer.rollingPercentage, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 706,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 701,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-6 text-right text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: \"Rolling\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-blue-600\",\n                    children: [\"HK$\", safeFormatNumber(Math.abs(customer.totalRolling || 0))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 714,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 712,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: \"Win/Loss\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 717,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `font-medium ${(customer.totalWinLoss || 0) <= 0 ? 'text-green-600' : 'text-red-600'}`,\n                    children: [\"HK$\", safeFormatNumber(Math.abs(customer.totalWinLoss || 0))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 716,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 711,\n                columnNumber: 23\n              }, this)]\n            }, customer.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 461,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"cZmucIthKKmBBKwOS/Bow/MAsEI=\");\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Card","CardContent","CardHeader","CardTitle","CardDescription","Badge","Users","UserCheck","TrendingDown","DollarSign","Receipt","Trophy","Target","MapPin","Activity","db","apiClient","jsxDEV","_jsxDEV","REAL_TIME_REFRESH_INTERVAL","Dashboard","user","_s","agents","setAgents","customers","setCustomers","trips","setTrips","rollingRecords","setRollingRecords","buyInOutRecords","setBuyInOutRecords","loading","setLoading","refreshing","setRefreshing","lastSyncTime","setLastSyncTime","connectionStatus","setConnectionStatus","errorMessage","setErrorMessage","isRealTimeEnabled","setIsRealTimeEnabled","safeFormatNumber","value","undefined","isNaN","toLocaleString","safeNumber","loadRealTimeData","console","log","agentsData","customersData","transactionsData","tripsApiResponse","Promise","all","get","getTripsWithSharing","tripsData","data","Array","isArray","length","transactions","processedCustomers","map","customer","id","name","agentName","agent_name","isActive","status","totalRolling","parseFloat","total_rolling","totalWinLoss","total_win_loss","totalBuyIn","total_buy_in","totalBuyOut","total_buy_out","attachments","isAgent","is_agent","rollingPercentage","rolling_percentage","creditLimit","credit_limit","availableCredit","available_credit","processedTrips","trip","trip_name","sharing","Date","error","Error","message","refreshInterval","setInterval","clearInterval","toggleRealTime","getFilteredData","filteredCustomers","filteredTrips","role","agentId","filter","c","t","some","agent","calculateMetrics","tripTotalRolling","reduce","sum","tripTotalWinLoss","totalRollingCommission","calculatedTotalRolling","totalExpenses","expenses","expSum","exp","amount","totalCustomers","activeCustomers","customerTotalWinLoss","customerTotalBuyIn","customerTotalBuyOut","tripSharingTotalRolling","_trip$sharing","_trip$sharing2","_trip$sharing3","Math","abs","totalAgents","activeAgents","a","totalTrips","completedTrips","ongoingTrips","plannedTrips","forEach","index","hasSharing","sharingKeys","Object","keys","sharingData","tripSharingGrossProfit","_trip$sharing4","_trip$sharing5","_trip$sharing6","tripSharingExpenses","_trip$sharing7","_trip$sharing8","_trip$sharing9","total_expenses","tripSharingNetProfit","_trip$sharing0","_trip$sharing1","_trip$sharing10","company_share","companyShare","houseGrossWin","houseNetWin","houseFinalProfit","profitMargin","expenseRatio","commissionRatio","recentRollingRecords","record","now","recordedAt","getTime","recentBuyInOutRecords","timestamp","customerTotalRolling","totalRollingRecords","totalBuyInOutRecords","metrics","activeTrips","toLowerCase","tripCustomers","_trip$customers","tc","customerId","customer_id","getWinLossStatus","winLoss","text","icon","color","className","children","fileName","_jsxFileName","lineNumber","columnNumber","slice","_trip$sharing11","_trip$sharing12","_trip$sharing13","_trip$sharing14","_trip$customers2","startDate","start_date","endDate","end_date","progress","totalDuration","elapsed","max","min","variant","destination","round","toLocaleDateString","sort","b","indicator","Icon","_c","$RefreshReg$"],"sources":["/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from './ui/card';\nimport { Badge } from './ui/badge';\nimport { \n  Users, UserCheck, TrendingDown, DollarSign, Receipt, Trophy, Target, \n  MapPin, Activity\n} from 'lucide-react';\nimport { db } from '../utils/supabase/supabaseClients';\nimport { apiClient } from '../utils/api/apiClient';\n\n// Type definitions\ninterface User {\n  id: string;\n  role: string;\n  agentId?: string;\n}\n\ninterface Agent {\n  id: string;\n  status: string;\n}\n\ninterface Customer {\n  id: string;\n  customerId?: string;\n  customer_id?: string;\n  name?: string;\n  agentName?: string;\n  isActive: boolean;\n  agentId?: string;\n  totalRolling?: number;\n  totalWinLoss?: number;\n  totalBuyIn?: number;\n  totalBuyOut?: number;\n  attachments?: any[];\n  isAgent?: boolean;\n  rollingPercentage?: number;\n  creditLimit?: number;\n  availableCredit?: number;\n}\n\ninterface Trip {\n  id: string;\n  status: string;\n  agentId?: string;\n  agents?: any[];\n  customers?: any[];\n  expenses?: any[];\n  totalRolling?: number;\n  totalWinLoss?: number;\n  totalBuyIn?: number;\n  totalBuyOut?: number;\n  calculatedTotalRolling?: number;\n  attachments?: any[];\n  // Trip details\n  trip_name?: string;\n  name?: string;\n  destination?: string;\n  start_date?: string;\n  end_date?: string;\n  sharing?: {\n    // Support both camelCase (fallback) and snake_case (API response) formats\n    totalWinLoss?: number;\n    total_win_loss?: number;\n    totalExpenses?: number;\n    total_expenses?: number;\n    netResult?: number;\n    net_result?: number;\n    companyShare?: number;\n    company_share?: number;\n    agentShare?: number;\n    total_agent_share?: number;\n    totalRolling?: number;\n    total_rolling?: number;\n    totalRollingCommission?: number;\n    total_rolling_commission?: number;\n    totalBuyIn?: number;\n    total_buy_in?: number;\n    totalBuyOut?: number;\n    total_buy_out?: number;\n    netCashFlow?: number;\n    net_cash_flow?: number;\n    totalAgentShare?: number;\n    agentSharePercentage?: number;\n    agent_share_percentage?: number;\n    companySharePercentage?: number;\n    company_share_percentage?: number;\n    agentBreakdown?: any[];\n    agent_breakdown?: any[];\n  };\n}\n\ninterface RollingRecord {\n  id: string;\n  customerId?: string;\n  customer_id?: string;\n  tripId?: string;\n  trip_id?: string;\n  recordedAt: string;\n  rollingAmount?: number;\n  rolling_amount?: number;\n  winLoss?: number;\n  win_loss?: number;\n}\n\ninterface BuyInOutRecord {\n  id: string;\n  customerId?: string;\n  customer_id?: string;\n  tripId?: string;\n  trip_id?: string;\n  timestamp: string;\n  transactionType?: string;\n  transaction_type?: string;\n  amount: number;\n}\n\ninterface DashboardProps {\n  user: User;\n}\n\n// Real-time refresh interval (30 seconds)\nconst REAL_TIME_REFRESH_INTERVAL = 30000;\n\nexport function Dashboard({ user }: DashboardProps) {\n  // Data states with real-time updates\n  const [agents, setAgents] = useState<Agent[]>([]);\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [trips, setTrips] = useState<Trip[]>([]);\n  const [rollingRecords, setRollingRecords] = useState<RollingRecord[]>([]);\n  const [buyInOutRecords, setBuyInOutRecords] = useState<BuyInOutRecord[]>([]);\n  \n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [lastSyncTime, setLastSyncTime] = useState<Date | null>(null);\n  const [connectionStatus, setConnectionStatus] = useState<'connected' | 'disconnected' | 'error'>('connected');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isRealTimeEnabled, setIsRealTimeEnabled] = useState(true);\n\n  // Helper functions\n  const safeFormatNumber = (value: number | undefined | null): string => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n\n  const safeNumber = (value: number | undefined | null): number => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Real-time data loading from Supabase with API integration\n  const loadRealTimeData = useCallback(async () => {\n    try {\n      setRefreshing(true);\n      setErrorMessage('');\n      \n      console.log('ðŸ”„ Loading real-time dashboard data from API...');\n      \n      // Load all required data from API in parallel\n      const [agentsData, customersData, transactionsData, tripsApiResponse] = await Promise.all([\n        db.get('agents', []),\n        db.get('customers', []),\n        db.get('transactions', []),\n        apiClient.getTripsWithSharing()\n      ]);\n\n      const tripsData = tripsApiResponse.data || [];\n\n      console.log('ðŸ“Š Dashboard data loaded:', {\n        agents: Array.isArray(agentsData) ? agentsData.length : 0,\n        customers: Array.isArray(customersData) ? customersData.length : 0,\n        trips: Array.isArray(tripsData) ? tripsData.length : 0,\n        transactions: Array.isArray(transactionsData) ? transactionsData.length : 0\n      });\n\n      // Debug: Log sample data\n      if (Array.isArray(customersData) && customersData.length > 0) {\n        console.log('ðŸ” Sample customer data:', customersData[0]);\n      }\n      if (Array.isArray(tripsData) && tripsData.length > 0) {\n        console.log('ðŸ” Sample trip data with sharing:', tripsData[0]);\n      }\n      if (Array.isArray(transactionsData) && transactionsData.length > 0) {\n        console.log('ðŸ” Sample transaction data:', transactionsData[0]);\n      }\n\n      // Process customers - use database totals directly\n      const processedCustomers = (Array.isArray(customersData) ? customersData : []).map((customer: any) => {\n        return {\n          ...customer,\n          id: customer.id,\n          name: customer.name,\n          agentName: customer.agent_name,\n          isActive: customer.status === 'active',\n          totalRolling: parseFloat(customer.total_rolling) || 0,\n          totalWinLoss: parseFloat(customer.total_win_loss) || 0,\n          totalBuyIn: parseFloat(customer.total_buy_in) || 0,\n          totalBuyOut: parseFloat(customer.total_buy_out) || 0,\n          attachments: customer.attachments || [],\n          isAgent: customer.is_agent || false,\n          rollingPercentage: parseFloat(customer.rolling_percentage) || 1.4,\n          creditLimit: parseFloat(customer.credit_limit) || 0,\n          availableCredit: parseFloat(customer.available_credit) || 0\n        };\n      });\n\n      // Process trips - preserve sharing data from API directly\n      const processedTrips = (Array.isArray(tripsData) ? tripsData : []).map((trip: any) => {\n        console.log('ðŸ” Processing trip:', trip.trip_name, 'sharing data:', trip.sharing);\n        return {\n          ...trip,\n          attachments: trip.attachments || []\n          // Don't override sharing - keep original API data\n        };\n      });\n\n      // Set processed data\n      setAgents(agentsData);\n      setCustomers(processedCustomers);\n      setTrips(processedTrips);\n      setRollingRecords([]); // No longer extracting from trips\n      setBuyInOutRecords(transactionsData || []);\n      setLastSyncTime(new Date());\n      setConnectionStatus('connected');\n      \n      console.log(`âœ… Real-time dashboard data loaded: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips with sharing data`);\n      \n    } catch (error) {\n      console.error('âŒ Error loading real-time dashboard data:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setErrorMessage(`Failed to load dashboard data: ${errorMessage}`);\n      setConnectionStatus('error');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, []);\n\n  // Real-time data sync with automatic refresh\n  useEffect(() => {\n    loadRealTimeData();\n    \n    // Set up real-time refresh interval\n    let refreshInterval: NodeJS.Timeout;\n    if (isRealTimeEnabled) {\n      refreshInterval = setInterval(() => {\n        console.log('ðŸ”„ Real-time dashboard refresh triggered');\n        loadRealTimeData();\n      }, REAL_TIME_REFRESH_INTERVAL);\n    }\n\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, [loadRealTimeData, isRealTimeEnabled]);\n\n  // Toggle real-time updates\n  const toggleRealTime = () => {\n    setIsRealTimeEnabled(!isRealTimeEnabled);\n    if (!isRealTimeEnabled) {\n      loadRealTimeData(); // Refresh immediately when re-enabling\n    }\n  };\n\n  // Filter data based on user role\n  const getFilteredData = () => {\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => c.agentId === user.agentId);\n      filteredTrips = trips.filter(t => \n        (t.agents && t.agents.some(agent => agent.agentId === user.agentId)) ||\n        t.agentId === user.agentId\n      );\n    }\n\n    return { filteredCustomers, filteredTrips };\n  };\n\n  const { filteredCustomers, filteredTrips } = getFilteredData();\n\n  // Calculate comprehensive metrics from real-time data\n  const calculateMetrics = () => {\n    // Trip-based financial metrics\n    const tripTotalRolling = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalRolling), 0);\n    const tripTotalWinLoss = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalWinLoss), 0);\n    const totalRollingCommission = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.calculatedTotalRolling), 0);\n    const totalExpenses = filteredTrips.reduce((sum, trip) => \n      sum + (trip.expenses || []).reduce((expSum, exp) => expSum + safeNumber(exp.amount), 0), 0\n    );\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    const activeCustomers = filteredCustomers.filter(c => c.isActive).length;\n    const customerTotalWinLoss = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalWinLoss), 0);\n    const customerTotalBuyIn = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyIn), 0);\n    const customerTotalBuyOut = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyOut), 0);\n    \n    // Total Rolling from trip_sharing table (always positive for rebate calculation)\n    const tripSharingTotalRolling = trips.reduce((sum, trip) => {\n      const value = Math.abs(safeNumber(trip.sharing?.total_rolling || trip.sharing?.totalRolling));\n      console.log(`Trip ${trip.trip_name}: total_rolling = ${trip.sharing?.total_rolling}, contributing ${value} to total rolling`);\n      return sum + value;\n    }, 0);\n\n    // Agent metrics\n    const totalAgents = agents.length;\n    const activeAgents = agents.filter(a => a.status === 'active').length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'ongoing').length;\n    const plannedTrips = filteredTrips.filter(t => t.status === 'planned').length;\n\n    // Calculate metrics from trip_sharing table data (all trips, no filtering)\n    console.log('ðŸ” Debug trips data for calculations:', trips.length);\n    trips.forEach((trip, index) => {\n      console.log(`Trip ${index + 1} (${trip.trip_name}):`, {\n        hasSharing: !!trip.sharing,\n        sharingKeys: trip.sharing ? Object.keys(trip.sharing) : 'no sharing',\n        sharingData: trip.sharing\n      });\n    });\n    \n    const tripSharingGrossProfit = trips.reduce((sum, trip) => {\n      const value = Math.abs(safeNumber(trip.sharing?.total_win_loss || trip.sharing?.totalWinLoss));\n      console.log(`Trip ${trip.trip_name}: total_win_loss = ${trip.sharing?.total_win_loss}, contributing ${value} to gross profit`);\n      return sum + value;\n    }, 0);\n    \n    const tripSharingExpenses = trips.reduce((sum, trip) => {\n      const value = Math.abs(safeNumber(trip.sharing?.total_expenses || trip.sharing?.totalExpenses));\n      console.log(`Trip ${trip.trip_name}: total_expenses = ${trip.sharing?.total_expenses}, contributing ${value} to expenses`);\n      return sum + value;\n    }, 0);\n    \n    const tripSharingNetProfit = trips.reduce((sum, trip) => {\n      const value = safeNumber(trip.sharing?.company_share || trip.sharing?.companyShare);\n      console.log(`Trip ${trip.trip_name}: company_share = ${trip.sharing?.company_share}, contributing ${value} to net profit`);\n      return sum + value;\n    }, 0);\n    \n    console.log('ðŸ“Š Final calculations:', {\n      tripSharingGrossProfit,\n      tripSharingExpenses, \n      tripSharingNetProfit\n    });\n\n    // House performance calculations (using trip_sharing data)\n    const houseGrossWin = tripSharingGrossProfit;\n    const houseNetWin = houseGrossWin - totalRollingCommission;\n    const houseFinalProfit = tripSharingNetProfit;\n\n    // Performance ratios (using trip_sharing total_rolling)\n    const profitMargin = tripSharingTotalRolling > 0 ? ((houseFinalProfit / tripSharingTotalRolling) * 100) : 0;\n    const expenseRatio = tripSharingTotalRolling > 0 ? ((totalExpenses / tripSharingTotalRolling) * 100) : 0;\n    const commissionRatio = tripSharingTotalRolling > 0 ? ((totalRollingCommission / tripSharingTotalRolling) * 100) : 0;\n\n    // Recent activity metrics\n    const recentRollingRecords = rollingRecords.filter(record => \n      (Date.now() - new Date(record.recordedAt).getTime()) < 24 * 60 * 60 * 1000\n    ).length;\n\n    const recentBuyInOutRecords = buyInOutRecords.filter(record => \n      (Date.now() - new Date(record.timestamp).getTime()) < 24 * 60 * 60 * 1000\n    ).length;\n\n    return {\n      // Trip metrics\n      tripTotalRolling,\n      tripTotalWinLoss,\n      totalRollingCommission,\n      totalExpenses: tripSharingExpenses,\n      \n      // Customer metrics\n      totalCustomers,\n      activeCustomers,\n      customerTotalRolling: tripSharingTotalRolling, // Use trip_sharing total_rolling\n      customerTotalWinLoss,\n      customerTotalBuyIn,\n      customerTotalBuyOut,\n      \n      // Agent metrics\n      totalAgents,\n      activeAgents,\n      \n      // Trip counts\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      plannedTrips,\n      \n      // House performance\n      houseGrossWin,\n      houseNetWin,\n      houseFinalProfit,\n      \n      // Ratios\n      profitMargin,\n      expenseRatio,\n      commissionRatio,\n      \n      // Activity\n      recentRollingRecords,\n      recentBuyInOutRecords,\n      totalRollingRecords: rollingRecords.length,\n      totalBuyInOutRecords: buyInOutRecords.length\n    };\n  };\n\n  const metrics = calculateMetrics();\n\n  // Filter active trips and use trip_sharing data\n  const activeTrips = filteredTrips.filter(trip => \n    trip.status && trip.status.toLowerCase() === 'active'\n  ).map(trip => {\n    // Use trip_sharing data directly instead of enriching with calculations\n    const tripCustomers = filteredCustomers.filter(c => \n      trip.customers?.some(tc => tc.customerId === c.id || tc.customer_id === c.id)\n    );\n    \n    return {\n      ...trip,\n      customers: tripCustomers\n      // Keep original sharing data from trip_sharing table\n    };\n  });\n\n  const getWinLossStatus = (winLoss: number) => {\n    if (winLoss === 0) {\n      return { text: 'Break Even', icon: Target, color: 'text-gray-600' };\n    } else if (winLoss > 0) {\n      return { text: 'Junket Loss', icon: TrendingDown, color: 'text-red-600' };\n    } else {\n      return { text: 'Junket Profit', icon: Trophy, color: 'text-green-600' };\n    }\n  };\n\n  // Show loading state\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-2 text-sm text-gray-600\">Loading dashboard data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n\n      {/* Key Performance Metrics - Real-time Customer Data */}\n      <div>\n        <h3 className=\"text-lg font-medium mb-4\">Real-time Financial Overview</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          <Card className=\"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-blue-800\">Total Rolling Amount</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-blue-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-blue-700\">HK${safeFormatNumber(metrics.customerTotalRolling)}</div>\n              <p className=\"text-xs text-blue-600\">\n                From {metrics.totalRollingRecords} rolling records across {metrics.totalCustomers} customers\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className={`bg-gradient-to-r ${metrics.houseGrossWin >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.houseGrossWin >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                Company Gross Profit\n              </CardTitle>\n              {metrics.houseGrossWin >= 0 ? (\n                <Trophy className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <TrendingDown className=\"h-4 w-4 text-red-600\" />\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                HK${safeFormatNumber(metrics.houseGrossWin)}\n              </div>\n              <p className={`text-xs ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                From trip sharing win/loss data\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-r from-red-50 to-red-100 border-red-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-red-800\">Expenses</CardTitle>\n              <Receipt className=\"h-4 w-4 text-red-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-red-700\">HK${safeFormatNumber(metrics.totalExpenses)}</div>\n              <p className=\"text-xs text-red-600\">\n                Total operational expenses from trip sharing\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className={`bg-gradient-to-r ${metrics.houseFinalProfit >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.houseFinalProfit >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                Company Net Profit\n              </CardTitle>\n              {metrics.houseFinalProfit >= 0 ? (\n                <Trophy className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <TrendingDown className=\"h-4 w-4 text-red-600\" />\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                HK${safeFormatNumber(metrics.houseFinalProfit)}\n              </div>\n              <p className={`text-xs ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                Company share from trip sharing\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Secondary Metrics - Operations Overview */}\n      <div>\n        <h3 className=\"text-lg font-medium mb-4\">Operations Overview</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Customers</CardTitle>\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics.activeCustomers}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                of {metrics.totalCustomers} total customers\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Agents</CardTitle>\n              <UserCheck className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics.activeAgents}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                of {metrics.totalAgents} total agents\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Trip Summary</CardTitle>\n              <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics.totalTrips}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                {metrics.completedTrips} completed, {metrics.ongoingTrips} ongoing, {metrics.plannedTrips} planned\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Recent Activity</CardTitle>\n              <Activity className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics.recentRollingRecords + metrics.recentBuyInOutRecords}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                Transactions in last 24 hours\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Active Trips */}\n      <Card className=\"h-full\">\n        <CardHeader>\n          <CardTitle>Active Trips</CardTitle>\n          <CardDescription>\n            Current ongoing trips with real-time performance data\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {activeTrips.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <MapPin className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-500\">No active trips found</p>\n              <p className=\"text-xs text-gray-400 mt-1\">Active trips will appear here when trips are in progress</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {activeTrips\n                .slice(0, 5) // Show up to 5 trips to match customer performance section\n                .map((trip) => {\n                  // Use trip_sharing data directly\n                  const totalRolling = Math.abs(trip.sharing?.total_rolling || trip.sharing?.totalRolling || 0);\n                  const winLoss = trip.sharing?.total_win_loss || trip.sharing?.totalWinLoss || 0;\n                  \n                  // Calculate progress based on dates\n                  const startDate = trip.start_date ? new Date(trip.start_date) : null;\n                  const endDate = trip.end_date ? new Date(trip.end_date) : null;\n                  const now = new Date();\n                  let progress = 0;\n                  \n                  if (startDate && endDate) {\n                    const totalDuration = endDate.getTime() - startDate.getTime();\n                    const elapsed = now.getTime() - startDate.getTime();\n                    progress = Math.max(0, Math.min(100, (elapsed / totalDuration) * 100));\n                  }\n                  \n                  return (\n                    <div key={trip.id} className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex-shrink-0\">\n                          <Badge variant=\"secondary\" className=\"bg-green-100 text-green-700 border-green-200\">\n                            {trip.status === 'active' ? 'Active' : 'Ongoing'}\n                          </Badge>\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{trip.trip_name || trip.name || 'Unnamed Trip'}</p>\n                          <p className=\"text-sm text-gray-500 flex items-center\">\n                            <MapPin className=\"h-3 w-3 mr-1\" />\n                            {trip.destination || 'Unknown Destination'} â€¢ {trip.customers?.length || 0} customers\n                          </p>\n                          <p className=\"text-xs text-blue-600\">\n                            Progress: {Math.round(progress)}% â€¢ {trip.start_date ? new Date(trip.start_date).toLocaleDateString() : 'TBD'} - {trip.end_date ? new Date(trip.end_date).toLocaleDateString() : 'TBD'}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"grid grid-cols-2 gap-6 text-right text-xs\">\n                        <div>\n                          <div className=\"text-gray-500\">Rolling</div>\n                          <div className=\"font-medium text-blue-600\">HK${safeFormatNumber(totalRolling)}</div>\n                        </div>\n                        <div>\n                          <div className=\"text-gray-500\">Win/Loss</div>\n                          <div className={`font-medium ${\n                            winLoss <= 0 ? 'text-green-600' : 'text-red-600'\n                          }`}>\n                            HK${safeFormatNumber(Math.abs(winLoss))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })\n              }\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Recent Customer Activity */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Real-time Customer Performance</CardTitle>\n          <CardDescription>\n            Top performing customers based on live rolling data {user.role === 'agent' ? 'you manage' : ''}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {filteredCustomers.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <Users className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-500\">No customer data found</p>\n              <p className=\"text-xs text-gray-400 mt-1\">Customer performance will appear here once rolling records are created</p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {filteredCustomers\n                .sort((a, b) => safeNumber(b.totalRolling) - safeNumber(a.totalRolling))\n                .slice(0, 5)\n                .map((customer) => {\n                  const indicator = getWinLossStatus(customer.totalWinLoss || 0);\n                  const Icon = indicator.icon;\n                  \n                  return (\n                    <div key={customer.id} className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\">\n                      <div className=\"flex items-center space-x-4\">\n                        <Icon className={`h-5 w-5 ${indicator.color}`} />\n                        <div>\n                          <p className=\"font-medium\">{customer.name}</p>\n                          <p className=\"text-sm text-gray-500\">\n                            Agent: {customer.agentName} â€¢ {customer.isActive ? 'Active' : 'Inactive'}\n                          </p>\n                          <p className=\"text-xs text-purple-600\">\n                            Commission Rate: {customer.rollingPercentage}%\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"grid grid-cols-2 gap-6 text-right text-xs\">\n                        <div>\n                          <div className=\"text-gray-500\">Rolling</div>\n                          <div className=\"font-medium text-blue-600\">HK${safeFormatNumber(Math.abs(customer.totalRolling || 0))}</div>\n                        </div>\n                        <div>\n                          <div className=\"text-gray-500\">Win/Loss</div>\n                          <div className={`font-medium ${\n                            (customer.totalWinLoss || 0) <= 0 ? 'text-green-600' : 'text-red-600'\n                          }`}>\n                            HK${safeFormatNumber(Math.abs(customer.totalWinLoss || 0))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}