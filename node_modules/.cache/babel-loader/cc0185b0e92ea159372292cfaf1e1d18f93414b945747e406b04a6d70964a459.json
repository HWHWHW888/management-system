{"ast":null,"code":"import _objectSpread from\"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{Button}from'./ui/button';import{Input}from'./ui/input';import{Label}from'./ui/label';import{Card,CardContent,CardDescription,CardHeader,CardTitle}from'./ui/card';import{Dialog,DialogContent,DialogDescription,DialogHeader,DialogTitle,DialogTrigger}from'./ui/dialog';import{AlertDialog,AlertDialogAction,AlertDialogCancel,AlertDialogContent,AlertDialogDescription,AlertDialogFooter,AlertDialogHeader,AlertDialogTitle,AlertDialogTrigger}from'./ui/alert-dialog';import{Badge}from'./ui/badge';import{Alert,AlertDescription}from'./ui/alert';import{Tabs,TabsContent,TabsList,TabsTrigger}from'./ui/tabs';import{Collapsible,CollapsibleContent,CollapsibleTrigger}from'./ui/collapsible';import{withErrorHandler}from'./withErrorHandler';import{db}from'../utils/supabase/supabaseClients';import{Plus,Edit,Shield,Key,Eye,EyeOff,ChevronDown,ChevronUp,Database,Save,Trash2,UserPlus,Crown,AlertTriangle,RefreshCw,Sparkles,CheckCircle}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AdminManagementComponent(_ref){let{user,showError,clearError}=_ref;const[admins,setAdmins]=useState([]);const[isDialogOpen,setIsDialogOpen]=useState(false);const[editingAdmin,setEditingAdmin]=useState(null);const[expandedAdmin,setExpandedAdmin]=useState(null);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[showPassword,setShowPassword]=useState(false);const[formData,setFormData]=useState({username:'',password:'',confirmPassword:''});const loadAdminData=useCallback(async()=>{try{setLoading(true);clearError();console.log('ðŸ”„ Loading admin accounts from Supabase...');// Load admin users from Supabase\nconst usersData=await db.get('users',[]);const adminUsers=usersData.filter(u=>u.role==='admin');// Transform to AdminAccount format\nconst adminAccounts=adminUsers.map(u=>({id:u.id,username:u.username,password:u.password||'',role:'admin',isActive:u.isActive!==false,// Default to true if not specified\ncreatedAt:u.createdAt||new Date().toISOString().split('T')[0],lastLogin:u.lastLogin,createdBy:u.createdBy}));setAdmins(adminAccounts);console.log(\"\\u2705 Loaded \".concat(adminAccounts.length,\" admin accounts from Supabase\"));}catch(error){console.error('âŒ Error loading admin data:',error);showError(\"Failed to load admin data: \".concat(error instanceof Error?error.message:'Unknown error occurred'));}finally{setLoading(false);}},[clearError,showError]);useEffect(()=>{loadAdminData();},[loadAdminData]);const saveAdminsToSupabase=async updatedAdmins=>{try{setSaving(true);clearError();console.log('ðŸ’¾ Saving admin accounts to Supabase...');// Get all users data\nconst allUsers=await db.get('users',[]);// Filter out admin users and replace with updated ones\nconst otherUsers=allUsers.filter(u=>u.role!=='admin');const adminUsers=updatedAdmins.map(admin=>({id:admin.id,username:admin.username,password:admin.password,role:admin.role,isActive:admin.isActive,createdAt:admin.createdAt,lastLogin:admin.lastLogin,createdBy:admin.createdBy}));// Save updated users list\nconst newUsers=[...otherUsers,...adminUsers];await db.save('users',newUsers);setAdmins(updatedAdmins);console.log('âœ… Successfully saved admin accounts to Supabase');}catch(error){console.error('âŒ Error saving admin accounts:',error);showError(\"Failed to save admin data: \".concat(error instanceof Error?error.message:'Unknown error occurred'));throw error;}finally{setSaving(false);}};const handleSubmit=async e=>{e.preventDefault();try{// Validate form data\nif(!formData.username.trim()){showError('Username is required!');return;}if(!formData.password.trim()){showError('Password is required!');return;}// Validate passwords match\nif(formData.password!==formData.confirmPassword){showError('Passwords do not match!');return;}// Check if username already exists (excluding current admin if editing)\nconst existingAdmin=admins.find(admin=>admin.username===formData.username&&admin.id!==(editingAdmin===null||editingAdmin===void 0?void 0:editingAdmin.id));if(existingAdmin){showError('Username already exists! Please choose a different username.');return;}let updatedAdmins;if(editingAdmin){// Update existing admin\nupdatedAdmins=admins.map(admin=>admin.id===editingAdmin.id?_objectSpread(_objectSpread({},admin),{},{username:formData.username,password:formData.password}):admin);console.log(\"\\uD83D\\uDD04 Updating admin account: \".concat(editingAdmin.username,\" -> \").concat(formData.username));}else{// Add new admin\nconst newAdmin={id:\"admin_\".concat(Date.now()),username:formData.username,password:formData.password,role:'admin',isActive:true,createdAt:new Date().toISOString().split('T')[0],createdBy:user.username};updatedAdmins=[...admins,newAdmin];console.log(\"\\u2795 Creating new admin account: \".concat(formData.username));}// Save immediately to Supabase\nawait saveAdminsToSupabase(updatedAdmins);// Reset form and close dialog\nresetForm();}catch(error){// Error already handled in saveAdminsToSupabase\n// Don't close dialog if save failed\n}};const handleEdit=admin=>{setEditingAdmin(admin);setFormData({username:admin.username,password:admin.password,confirmPassword:admin.password});setIsDialogOpen(true);};const handleDelete=async adminId=>{try{// Prevent deleting the last admin or current admin\nif(admins.length<=1){showError('Cannot delete the last admin account!');return;}const adminToDelete=admins.find(a=>a.id===adminId);if((adminToDelete===null||adminToDelete===void 0?void 0:adminToDelete.username)===user.username){showError('Cannot delete your own admin account!');return;}console.log(\"\\uD83D\\uDDD1\\uFE0F Deleting admin account: \".concat(adminToDelete===null||adminToDelete===void 0?void 0:adminToDelete.username));const updatedAdmins=admins.filter(admin=>admin.id!==adminId);await saveAdminsToSupabase(updatedAdmins);}catch(error){// Error already handled in saveAdminsToSupabase\n}};const toggleAdminStatus=async adminId=>{try{// Prevent deactivating the last active admin or current admin\nconst adminToToggle=admins.find(a=>a.id===adminId);if((adminToToggle===null||adminToToggle===void 0?void 0:adminToToggle.username)===user.username){showError('Cannot deactivate your own admin account!');return;}const activeAdmins=admins.filter(a=>a.isActive&&a.id!==adminId);if(activeAdmins.length===0){showError('Cannot deactivate the last active admin account!');return;}console.log(\"\\uD83D\\uDD04 Toggling admin status: \".concat(adminToToggle===null||adminToToggle===void 0?void 0:adminToToggle.username));const updatedAdmins=admins.map(admin=>admin.id===adminId?_objectSpread(_objectSpread({},admin),{},{isActive:!admin.isActive}):admin);await saveAdminsToSupabase(updatedAdmins);}catch(error){// Error already handled in saveAdminsToSupabase\n}};const toggleAdminExpansion=adminId=>{setExpandedAdmin(expandedAdmin===adminId?null:adminId);};const resetForm=()=>{setFormData({username:'',password:'',confirmPassword:''});setEditingAdmin(null);setIsDialogOpen(false);setShowPassword(false);};const generatePassword=()=>{const chars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';let password='';for(let i=0;i<12;i++){password+=chars.charAt(Math.floor(Math.random()*chars.length));}setFormData(_objectSpread(_objectSpread({},formData),{},{password:password,confirmPassword:password}));};// Show loading state\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Loading admin accounts from Supabase...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-50 border border-green-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Database,{className:\"w-4 h-4 text-green-600 mr-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-green-800\",children:\"\\u2705 Admin Login CRUD - Supabase Connected\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-green-600\",children:\"All admin login changes are immediately saved to Supabase database. These credentials control system access.\"})]}),saving&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-blue-600\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-1 animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"Saving...\"})]})]})}),/*#__PURE__*/_jsxs(Alert,{className:\"border-blue-200 bg-blue-50\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4 text-blue-600\"}),/*#__PURE__*/_jsxs(AlertDescription,{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Admin Login Management:\"}),\" This section controls the login credentials for admin access. The system starts with \",/*#__PURE__*/_jsx(\"code\",{className:\"bg-blue-100 px-1 rounded text-blue-900\",children:\"admin / admin123\"}),\" as the default credentials. You can Create, Read, Update, and Delete admin accounts here. All changes are stored in Supabase.\",/*#__PURE__*/_jsxs(Button,{onClick:loadAdminData,size:\"sm\",variant:\"outline\",className:\"ml-3 text-blue-800 border-blue-300 hover:bg-blue-100\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-3 h-3 mr-1\"}),\"Refresh\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-amber-50 border border-amber-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(Crown,{className:\"w-5 h-5 text-amber-600 mr-2 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-amber-800\",children:\"Security Notice\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-amber-600 mt-1\",children:\"Admin accounts have full system access including customer data, financial records, and system settings. Ensure passwords are strong and only share credentials with authorized administrators.\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Admin Login Credentials (CRUD)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Create, Read, Update, and Delete admin login credentials stored in Supabase\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Default admin credentials: admin / admin123 (can be modified)\"})]}),/*#__PURE__*/_jsxs(Dialog,{open:isDialogOpen,onOpenChange:setIsDialogOpen,children:[/*#__PURE__*/_jsx(DialogTrigger,{asChild:true,children:/*#__PURE__*/_jsxs(Button,{onClick:()=>setIsDialogOpen(true),disabled:saving,children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"Create Admin\"]})}),/*#__PURE__*/_jsxs(DialogContent,{className:\"max-w-lg\",children:[/*#__PURE__*/_jsxs(DialogHeader,{children:[/*#__PURE__*/_jsxs(DialogTitle,{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:editingAdmin?'Update Admin Credentials':'Create New Admin Account'})]}),/*#__PURE__*/_jsx(DialogDescription,{children:editingAdmin?'Update administrator login credentials in Supabase':'Create a new administrator account with login credentials'})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"username\",children:\"Username *\"}),/*#__PURE__*/_jsx(Input,{id:\"username\",value:formData.username,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{username:e.target.value})),placeholder:\"Enter admin username\",required:true,disabled:saving}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"This username will be used to login to the admin portal\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"password\",children:\"Password *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Input,{id:\"password\",type:showPassword?\"text\":\"password\",value:formData.password,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value})),placeholder:\"Enter secure password\",required:true,disabled:saving}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"ghost\",size:\"sm\",className:\"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent\",onClick:()=>setShowPassword(!showPassword),disabled:saving,children:showPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Eye,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mt-1\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",size:\"sm\",onClick:generatePassword,className:\"text-xs\",disabled:saving,children:\"Generate Password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Minimum 8 characters recommended\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{htmlFor:\"confirmPassword\",children:\"Confirm Password *\"}),/*#__PURE__*/_jsx(Input,{id:\"confirmPassword\",type:showPassword?\"text\":\"password\",value:formData.confirmPassword,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{confirmPassword:e.target.value})),placeholder:\"Confirm password\",required:true,disabled:saving})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-red-50 border border-red-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-red-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Security Warning:\"}),\" Admin credentials provide full system access. Changes are immediately saved to Supabase and will affect login access.\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:resetForm,disabled:saving,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:saving,children:saving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-2 animate-spin\"}),\"Saving to Supabase...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4 mr-2\"}),editingAdmin?'Update':'Create',\" Admin\"]})})]})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-6\",children:admins.length===0?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-12 h-12 mx-auto text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No Admin Accounts Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"The default admin account (admin/admin123) should be present. Try refreshing the data.\"}),/*#__PURE__*/_jsxs(Button,{onClick:loadAdminData,disabled:loading,children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 mr-2\"}),\"Refresh Data\"]})]})}):admins.map(admin=>{const isExpanded=expandedAdmin===admin.id;const isCurrentUser=admin.username===user.username;const isDefaultAdmin=admin.username==='admin'&&admin.password==='admin123';return/*#__PURE__*/_jsx(Collapsible,{open:isExpanded,onOpenChange:()=>toggleAdminExpansion(admin.id),children:/*#__PURE__*/_jsxs(Card,{className:\"overflow-hidden\",children:[/*#__PURE__*/_jsx(CollapsibleTrigger,{asChild:true,children:/*#__PURE__*/_jsx(CardHeader,{className:\"cursor-pointer hover:bg-gray-50 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(CardTitle,{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:admin.username}),/*#__PURE__*/_jsx(Badge,{variant:admin.isActive?\"default\":\"secondary\",children:admin.isActive?'Active':'Inactive'}),/*#__PURE__*/_jsxs(Badge,{variant:\"outline\",className:\"bg-purple-50 text-purple-700 border-purple-200\",children:[/*#__PURE__*/_jsx(Crown,{className:\"w-3 h-3 mr-1\"}),\"Admin\"]}),isCurrentUser&&/*#__PURE__*/_jsxs(Badge,{variant:\"outline\",className:\"bg-blue-50 text-blue-700 border-blue-200\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-3 h-3 mr-1\"}),\"You\"]}),isDefaultAdmin&&/*#__PURE__*/_jsxs(Badge,{variant:\"outline\",className:\"bg-green-50 text-green-700 border-green-200\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-3 h-3 mr-1\"}),\"Default\"]})]}),/*#__PURE__*/_jsxs(CardDescription,{children:[\"Created \",admin.createdAt,admin.createdBy&&\" \\u2022 Created by \".concat(admin.createdBy),isDefaultAdmin&&' â€¢ Default admin credentials (editable)']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:isExpanded?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-5 h-5 text-gray-400\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-5 h-5 text-gray-400\"})})]})})}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-4\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",onClick:()=>handleEdit(admin),disabled:saving,children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4 mr-2\"}),\"Update Credentials\"]}),!isCurrentUser&&admin.isActive?/*#__PURE__*/_jsxs(AlertDialog,{children:[/*#__PURE__*/_jsx(AlertDialogTrigger,{asChild:true,children:/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"sm\",disabled:saving,children:\"Deactivate\"})}),/*#__PURE__*/_jsxs(AlertDialogContent,{children:[/*#__PURE__*/_jsxs(AlertDialogHeader,{children:[/*#__PURE__*/_jsx(AlertDialogTitle,{children:\"Deactivate Admin Account\"}),/*#__PURE__*/_jsxs(AlertDialogDescription,{children:[\"Are you sure you want to deactivate the admin account for \\\"\",admin.username,\"\\\"? Deactivated administrators will not be able to login to the system.\"]})]}),/*#__PURE__*/_jsxs(AlertDialogFooter,{children:[/*#__PURE__*/_jsx(AlertDialogCancel,{children:\"Cancel\"}),/*#__PURE__*/_jsx(AlertDialogAction,{onClick:()=>toggleAdminStatus(admin.id),className:\"bg-yellow-600 text-white hover:bg-yellow-700\",disabled:saving,children:saving?'Saving...':'Deactivate Account'})]})]})]}):!isCurrentUser&&!admin.isActive?/*#__PURE__*/_jsx(Button,{variant:\"default\",size:\"sm\",onClick:()=>toggleAdminStatus(admin.id),disabled:saving,children:saving?'Saving...':'Activate'}):null,!isCurrentUser&&admins.length>1&&/*#__PURE__*/_jsxs(AlertDialog,{children:[/*#__PURE__*/_jsx(AlertDialogTrigger,{asChild:true,children:/*#__PURE__*/_jsxs(Button,{variant:\"destructive\",size:\"sm\",disabled:saving,children:[/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4 mr-2\"}),\"Delete\"]})}),/*#__PURE__*/_jsxs(AlertDialogContent,{children:[/*#__PURE__*/_jsxs(AlertDialogHeader,{children:[/*#__PURE__*/_jsx(AlertDialogTitle,{children:\"Delete Admin Account\"}),/*#__PURE__*/_jsxs(AlertDialogDescription,{children:[\"Are you sure you want to permanently delete the admin account for \\\"\",admin.username,\"\\\"? This action cannot be undone and will immediately revoke all system access.\"]})]}),/*#__PURE__*/_jsxs(AlertDialogFooter,{children:[/*#__PURE__*/_jsx(AlertDialogCancel,{children:\"Cancel\"}),/*#__PURE__*/_jsx(AlertDialogAction,{onClick:()=>handleDelete(admin.id),className:\"bg-destructive text-destructive-foreground hover:bg-destructive/90\",disabled:saving,children:saving?'Deleting...':'Delete Account'})]})]})]})]}),isCurrentUser&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current Account:\"}),\" This is your active admin account. You cannot deactivate or delete your own account for security reasons, but you can update the credentials.\"]})}),isDefaultAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-50 border border-green-200 rounded-lg mb-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Default Admin:\"}),\" This is the system default admin account with preset credentials. You can update both the username and password using the \\\"Update Credentials\\\" button above. Changes are saved to Supabase immediately.\"]})}),/*#__PURE__*/_jsx(CollapsibleContent,{className:\"mt-6\",children:/*#__PURE__*/_jsxs(Tabs,{defaultValue:\"info\",className:\"w-full\",children:[/*#__PURE__*/_jsxs(TabsList,{className:\"grid w-full grid-cols-2\",children:[/*#__PURE__*/_jsxs(TabsTrigger,{value:\"info\",className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Account Information\"})]}),/*#__PURE__*/_jsxs(TabsTrigger,{value:\"security\",className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Key,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Security & CRUD\"})]})]}),/*#__PURE__*/_jsx(TabsContent,{value:\"info\",className:\"space-y-4 mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Username\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-mono\",children:admin.username})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Role\"}),/*#__PURE__*/_jsxs(Badge,{variant:\"outline\",className:\"bg-purple-50 text-purple-700 border-purple-200\",children:[/*#__PURE__*/_jsx(Crown,{className:\"w-3 h-3 mr-1\"}),\"Administrator\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Account Status\"}),/*#__PURE__*/_jsx(Badge,{variant:admin.isActive?\"default\":\"secondary\",children:admin.isActive?'Active':'Inactive'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Created Date\"}),/*#__PURE__*/_jsx(\"p\",{children:admin.createdAt})]}),admin.createdBy&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Created By\"}),/*#__PURE__*/_jsx(\"p\",{children:admin.createdBy})]}),admin.lastLogin&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Last Login\"}),/*#__PURE__*/_jsx(\"p\",{children:new Date(admin.lastLogin).toLocaleString()})]})]})]})}),/*#__PURE__*/_jsx(TabsContent,{value:\"security\",className:\"space-y-4 mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Label,{className:\"text-sm font-medium text-gray-500\",children:\"Login Credentials (CRUD)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-mono bg-gray-100 p-2 rounded flex-1\",children:[admin.username,\" / \\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline\",size:\"sm\",onClick:()=>handleEdit(admin),disabled:saving,children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4 mr-2\"}),\"Update\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3 inline mr-1 text-green-600\"}),\"Full CRUD operations available - Create, Read, Update, Delete admin credentials stored in Supabase\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-50 border border-gray-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-4 h-4 text-yellow-600 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-800\",children:\"Admin Permissions\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs text-gray-600 mt-2 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Full CRUD access to admin login credentials\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Complete system administration access\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Customer and agent management\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Staff administration and monitoring\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Financial reports and analytics\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Database management and backups\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 System configuration and settings\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-50 border border-green-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Supabase Integration:\"}),\" All admin credentials are stored securely in Supabase with real-time synchronization. Changes to login credentials take effect immediately and are reflected across all system components.\"]})})]})})]})})]})]})},admin.id);})})]});}// Export both as named and default export for compatibility\nexport const AdminManagement=withErrorHandler(AdminManagementComponent);export default AdminManagement;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}