{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Reports.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { TrendingDown, Users, DollarSign, Activity, RefreshCw, Download, BarChart3, Zap, AlertTriangle, Percent, Trophy, ArrowUpCircle, ArrowUpDown } from 'lucide-react';\nimport { tokenManager } from '../utils/auth/tokenManager';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { Button } from './ui/button';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Badge } from './ui/badge';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst REAL_TIME_REFRESH_INTERVAL = 30000;\nexport function Reports({\n  user\n}) {\n  _s();\n  // Data states\n  const [trips, setTrips] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [agents, setAgents] = useState([]);\n\n  // Filter states\n  const [dateRange, setDateRange] = useState('30');\n  const [selectedAgent, setSelectedAgent] = useState('all');\n  const [reportType, setReportType] = useState('overview');\n\n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [lastSyncTime, setLastSyncTime] = useState(null);\n  const [connectionStatus, setConnectionStatus] = useState('connected');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isRealTimeEnabled, setIsRealTimeEnabled] = useState(true);\n\n  // Helper functions\n  const safeFormatNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n  const safeNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Load data from backend API\n  const loadReportsData = useCallback(async () => {\n    try {\n      setRefreshing(true);\n      setErrorMessage('');\n      console.log('ðŸ“Š Loading reports data from backend API...');\n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n      const token = await tokenManager.getToken();\n      if (!token) {\n        throw new Error('No authentication token found. Please log in again.');\n      }\n\n      // Load all required data from backend API\n      const [tripsResponse, customersResponse, agentsResponse] = await Promise.all([fetch(`${API_URL}/trips`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }), fetch(`${API_URL}/customers`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }), fetch(`${API_URL}/agents`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })]);\n      if (!tripsResponse.ok || !customersResponse.ok || !agentsResponse.ok) {\n        throw new Error('Failed to fetch data from backend API');\n      }\n      const [tripsResult, customersResult, agentsResult] = await Promise.all([tripsResponse.json(), customersResponse.json(), agentsResponse.json()]);\n      const tripsData = tripsResult.data || [];\n      const customersData = customersResult.data || [];\n      const agentsData = agentsResult.data || [];\n\n      // Process trips data with sharing information\n      const processedTrips = tripsData.map(trip => ({\n        ...trip,\n        sharing: trip.sharing || {\n          total_win_loss: 0,\n          total_expenses: 0,\n          total_rolling_commission: 0,\n          total_buy_in: 0,\n          total_buy_out: 0,\n          net_cash_flow: 0,\n          net_result: 0,\n          total_agent_share: 0,\n          company_share: 0,\n          agent_share_percentage: 0,\n          company_share_percentage: 100,\n          total_rolling: 0\n        }\n      }));\n\n      // Process customers data\n      const processedCustomers = customersData.map(customer => ({\n        ...customer,\n        totalRolling: customer.totalRolling || 0,\n        totalWinLoss: customer.totalWinLoss || 0,\n        totalBuyIn: customer.totalBuyIn || 0,\n        totalBuyOut: customer.totalBuyOut || 0,\n        isActive: customer.isActive || false,\n        rollingPercentage: customer.rollingPercentage || 1.4\n      }));\n\n      // Set processed data\n      setTrips(processedTrips);\n      setCustomers(processedCustomers);\n      setAgents(agentsData);\n      setLastSyncTime(new Date());\n      setConnectionStatus('connected');\n      console.log(`âœ… Reports data loaded: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips`);\n    } catch (error) {\n      console.error('âŒ Error loading reports data:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setErrorMessage(`Failed to load reports data: ${errorMessage}`);\n      setConnectionStatus('error');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, []);\n\n  // Real-time data sync\n  useEffect(() => {\n    loadReportsData();\n    let refreshInterval;\n    if (isRealTimeEnabled) {\n      refreshInterval = setInterval(() => {\n        console.log('ðŸ“Š Real-time reports refresh triggered');\n        loadReportsData();\n      }, REAL_TIME_REFRESH_INTERVAL);\n    }\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, [loadReportsData, isRealTimeEnabled]);\n\n  // Toggle real-time updates\n  const toggleRealTime = () => {\n    setIsRealTimeEnabled(!isRealTimeEnabled);\n    if (!isRealTimeEnabled) {\n      loadReportsData();\n    }\n  };\n\n  // Filter data based on user role and filters\n  const getFilteredData = () => {\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n\n    // Apply user role filter\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => c.agentId === user.agentId);\n      filteredTrips = trips.filter(t => t.agents && t.agents.some(agent => agent.agentId === user.agentId) || t.agentId === user.agentId);\n    } else if (user.role === 'staff' && user.staffId) {\n      filteredTrips = trips.filter(t => t.staffId === user.staffId);\n      const tripCustomerIds = Array.from(new Set(filteredTrips.flatMap(t => {\n        var _t$customers;\n        return ((_t$customers = t.customers) === null || _t$customers === void 0 ? void 0 : _t$customers.map(tc => tc.customerId)) || [];\n      })));\n      filteredCustomers = customers.filter(c => tripCustomerIds.includes(c.id));\n    }\n\n    // Apply agent filter (admin only)\n    if (user.role === 'admin' && selectedAgent !== 'all') {\n      filteredCustomers = filteredCustomers.filter(c => c.agentId === selectedAgent);\n      filteredTrips = filteredTrips.filter(t => t.agents && t.agents.some(agent => agent.agentId === selectedAgent) || t.agentId === selectedAgent);\n    }\n\n    // Apply date range filter\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - parseInt(dateRange));\n    filteredTrips = filteredTrips.filter(t => {\n      const tripDate = t.start_date || t.end_date;\n      return tripDate && new Date(tripDate) >= cutoffDate;\n    });\n    return {\n      filteredCustomers,\n      filteredTrips\n    };\n  };\n  const {\n    filteredCustomers,\n    filteredTrips\n  } = getFilteredData();\n\n  // Calculate metrics from trip_sharing data\n  const calculateMetrics = () => {\n    // Main metrics from trip_sharing table\n    const totalRolling = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing;\n      return sum + safeNumber((_trip$sharing = trip.sharing) === null || _trip$sharing === void 0 ? void 0 : _trip$sharing.total_rolling);\n    }, 0);\n    const totalWinLoss = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing2;\n      return sum + safeNumber((_trip$sharing2 = trip.sharing) === null || _trip$sharing2 === void 0 ? void 0 : _trip$sharing2.total_win_loss);\n    }, 0);\n    const totalRollingCommission = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing3;\n      return sum + safeNumber((_trip$sharing3 = trip.sharing) === null || _trip$sharing3 === void 0 ? void 0 : _trip$sharing3.total_rolling_commission);\n    }, 0);\n    const companyShare = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing4;\n      return sum + safeNumber((_trip$sharing4 = trip.sharing) === null || _trip$sharing4 === void 0 ? void 0 : _trip$sharing4.company_share);\n    }, 0);\n    const totalBuyIn = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing5;\n      return sum + safeNumber((_trip$sharing5 = trip.sharing) === null || _trip$sharing5 === void 0 ? void 0 : _trip$sharing5.total_buy_in);\n    }, 0);\n    const totalBuyOut = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing6;\n      return sum + safeNumber((_trip$sharing6 = trip.sharing) === null || _trip$sharing6 === void 0 ? void 0 : _trip$sharing6.total_buy_out);\n    }, 0);\n    const totalExpenses = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing7;\n      return sum + safeNumber((_trip$sharing7 = trip.sharing) === null || _trip$sharing7 === void 0 ? void 0 : _trip$sharing7.total_expenses);\n    }, 0);\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    const activeCustomers = filteredCustomers.filter(c => (c.totalRolling || 0) > 0).length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'in-progress').length;\n\n    // Performance ratios\n    const isCompanyProfitable = companyShare > 0;\n    const profitMargin = totalRolling > 0 ? companyShare / totalRolling * 100 : 0;\n    console.group('ðŸ“Š Calculated Metrics from trip_sharing');\n    console.log('ðŸŽ² Total Rolling:', totalRolling);\n    console.log('ðŸ’° Total Win/Loss:', totalWinLoss);\n    console.log('ðŸ’¼ Total Rolling Commission:', totalRollingCommission);\n    console.log('ðŸ¢ Company Share:', companyShare);\n    console.log('ðŸ‘¥ Active Customers:', activeCustomers);\n    console.log('ðŸ“ˆ Is Company Profitable:', isCompanyProfitable);\n    console.groupEnd();\n    return {\n      totalRolling,\n      totalWinLoss: Math.abs(totalWinLoss),\n      totalRollingCommission,\n      companyShare,\n      totalBuyIn,\n      totalBuyOut,\n      totalExpenses,\n      totalCustomers,\n      activeCustomers,\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      isCompanyProfitable,\n      profitMargin,\n      netCashFlow: totalBuyOut - totalBuyIn\n    };\n  };\n  const metrics = calculateMetrics();\n\n  // Export functionality\n  const handleExport = () => {\n    const reportData = {\n      generatedAt: new Date().toISOString(),\n      dateRange: dateRange,\n      selectedAgent: selectedAgent,\n      userRole: user.role,\n      summary: metrics,\n      rawData: {\n        customers: filteredCustomers.length,\n        trips: filteredTrips.length\n      }\n    };\n    const blob = new Blob([JSON.stringify(reportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `casino-reports-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-gray-600\",\n          children: \"Loading reports data...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-purple-50 border border-purple-200 rounded-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n            className: \"w-5 h-5 text-purple-600 mr-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-medium text-purple-800\",\n              children: \"\\uD83D\\uDCCA Real-time Reports & Analytics - Live Data from trip_sharing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-purple-600\",\n              children: [\"Data sourced from trip_sharing table with accurate financial metrics.\", lastSyncTime && ` â€¢ Last sync: ${lastSyncTime.toLocaleTimeString()}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [refreshing && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-blue-600\",\n            children: [/*#__PURE__*/_jsxDEV(Activity, {\n              className: \"w-4 h-4 mr-1 animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Syncing...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: loadReportsData,\n            disabled: refreshing,\n            className: \"text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n              className: \"w-3 h-3 mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), \"Refresh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            onClick: toggleRealTime,\n            className: \"text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(Zap, {\n              className: `w-3 h-3 mr-1 ${isRealTimeEnabled ? 'text-green-500' : 'text-gray-500'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), isRealTimeEnabled ? 'Live' : 'Manual']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"outline\",\n            className: `text-xs ${connectionStatus === 'connected' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-2 h-2 rounded-full mr-1 ${connectionStatus === 'connected' ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this), connectionStatus === 'connected' ? 'Live Data' : 'Error']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"border-red-200 bg-red-50\",\n      children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n        className: \"w-4 h-4 text-red-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AlertDescription, {\n        className: \"text-red-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Reports Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this), \" \", errorMessage, /*#__PURE__*/_jsxDEV(Button, {\n          onClick: loadReportsData,\n          size: \"sm\",\n          variant: \"outline\",\n          className: \"ml-3 text-red-800 border-red-300 hover:bg-red-100\",\n          children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: \"w-3 h-3 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this), \"Retry\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: \"Real-time Reports & Analytics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: [user.role === 'agent' ? 'Performance overview for your customers' : user.role === 'staff' ? 'Reports for your recorded transactions' : 'Comprehensive business analytics', \" \\u2022 Live data from trip_sharing\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500 mt-1\",\n          children: [\"Showing data for last \", dateRange, \" days \\u2022 \", metrics.totalTrips, \" trips \\u2022 Based on trip_sharing table\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          value: dateRange,\n          onValueChange: setDateRange,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-32\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"Date range\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"7\",\n              children: \"Last 7 days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"30\",\n              children: \"Last 30 days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"90\",\n              children: \"Last 90 days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"365\",\n              children: \"Last year\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this), user.role === 'admin' && /*#__PURE__*/_jsxDEV(Select, {\n          value: selectedAgent,\n          onValueChange: setSelectedAgent,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-40\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"All agents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"all\",\n              children: \"All Agents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this), agents.map(agent => /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: agent.id,\n              children: agent.name\n            }, agent.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: reportType,\n          onValueChange: setReportType,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-36\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"Report type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"overview\",\n              children: \"Overview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"financial\",\n              children: \"Financial\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"customer\",\n              children: \"Customer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"operational\",\n              children: \"Operational\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: handleExport,\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 13\n          }, this), \"Export\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-4\",\n        children: \"Key Performance Metrics\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-blue-800\",\n              children: \"Total Rolling\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-700\",\n              children: [\"HK$\", safeFormatNumber(metrics.totalRolling)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-600\",\n              children: [\"From trip_sharing.total_rolling \\u2022 Last \", dateRange, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-purple-800\",\n              children: \"Commission\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Percent, {\n              className: \"h-4 w-4 text-purple-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-purple-700\",\n              children: [\"HK$\", safeFormatNumber(metrics.totalRollingCommission)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-purple-600\",\n              children: \"From trip_sharing.total_rolling_commission\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.isCompanyProfitable ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.isCompanyProfitable ? 'text-green-800' : 'text-red-800'}`,\n              children: \"House P&L\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this), metrics.isCompanyProfitable ? /*#__PURE__*/_jsxDEV(Trophy, {\n              className: \"h-4 w-4 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`,\n              children: [\"HK$\", safeFormatNumber(Math.abs(metrics.companyShare))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`,\n              children: [metrics.isCompanyProfitable ? 'Company Profit' : 'Company Loss', \" \\u2022 trip_sharing.company_share\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-orange-800\",\n              children: \"Cash Flow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ArrowUpCircle, {\n              className: \"h-4 w-4 text-orange-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-orange-700\",\n              children: [\"HK$\", safeFormatNumber(metrics.netCashFlow)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-orange-600\",\n              children: \"Net: Buy-out - Buy-in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Active Customers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Users, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold\",\n              children: metrics.activeCustomers\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [\"With rolling amount \\u2022 of \", metrics.totalCustomers, \" total\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Performance Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: \"Key operational metrics from trip_sharing\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-3 bg-blue-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-blue-800\",\n                children: \"Total Trips\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-blue-700\",\n                children: metrics.totalTrips\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-3 bg-green-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-green-800\",\n                children: \"Completed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 576,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-green-700\",\n                children: metrics.completedTrips\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-3 bg-orange-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-orange-800\",\n                children: \"Ongoing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-orange-700\",\n                children: metrics.ongoingTrips\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-3 bg-purple-50 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-purple-800\",\n                children: \"Profit Margin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold text-purple-700\",\n                children: [metrics.profitMargin.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Financial Overview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: \"Revenue and cost breakdown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n                className: \"w-5 h-5 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Total Rolling\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 601,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xl font-bold text-blue-600\",\n                  children: [\"HK$\", safeFormatNumber(metrics.totalRolling)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 602,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(Percent, {\n                className: \"w-5 h-5 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 606,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Commission Earned\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 608,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xl font-bold text-purple-600\",\n                  children: [\"HK$\", safeFormatNumber(metrics.totalRollingCommission)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(Trophy, {\n                className: `w-5 h-5 ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Company Share\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 615,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: `text-xl font-bold ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`,\n                  children: [\"HK$\", safeFormatNumber(Math.abs(metrics.companyShare))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            children: \"Activity Overview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n            children: \"Customer and transaction summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                className: \"w-5 h-5 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Active Customers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xl font-bold text-blue-600\",\n                  children: metrics.activeCustomers\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 636,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(ArrowUpDown, {\n                className: \"w-5 h-5 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Cash Transactions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 642,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xl font-bold text-green-600\",\n                  children: [\"HK$\", safeFormatNumber(metrics.totalBuyIn + metrics.totalBuyOut)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(Activity, {\n                className: \"w-5 h-5 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: \"Trip Count\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xl font-bold text-purple-600\",\n                  children: metrics.totalTrips\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 5\n  }, this);\n}\n_s(Reports, \"4q66saIW/y8IbnFdj4yuv/oAylk=\");\n_c = Reports;\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","TrendingDown","Users","DollarSign","Activity","RefreshCw","Download","BarChart3","Zap","AlertTriangle","Percent","Trophy","ArrowUpCircle","ArrowUpDown","tokenManager","Card","CardContent","CardDescription","CardHeader","CardTitle","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","Button","Alert","AlertDescription","Badge","jsxDEV","_jsxDEV","REAL_TIME_REFRESH_INTERVAL","Reports","user","_s","trips","setTrips","customers","setCustomers","agents","setAgents","dateRange","setDateRange","selectedAgent","setSelectedAgent","reportType","setReportType","loading","setLoading","refreshing","setRefreshing","lastSyncTime","setLastSyncTime","connectionStatus","setConnectionStatus","errorMessage","setErrorMessage","isRealTimeEnabled","setIsRealTimeEnabled","safeFormatNumber","value","undefined","isNaN","toLocaleString","safeNumber","loadReportsData","console","log","API_URL","process","env","REACT_APP_API_URL","token","getToken","Error","tripsResponse","customersResponse","agentsResponse","Promise","all","fetch","headers","ok","tripsResult","customersResult","agentsResult","json","tripsData","data","customersData","agentsData","processedTrips","map","trip","sharing","total_win_loss","total_expenses","total_rolling_commission","total_buy_in","total_buy_out","net_cash_flow","net_result","total_agent_share","company_share","agent_share_percentage","company_share_percentage","total_rolling","processedCustomers","customer","totalRolling","totalWinLoss","totalBuyIn","totalBuyOut","isActive","rollingPercentage","Date","length","error","message","refreshInterval","setInterval","clearInterval","toggleRealTime","getFilteredData","filteredCustomers","filteredTrips","role","agentId","filter","c","t","some","agent","staffId","tripCustomerIds","Array","from","Set","flatMap","_t$customers","tc","customerId","includes","id","cutoffDate","setDate","getDate","parseInt","tripDate","start_date","end_date","calculateMetrics","reduce","sum","_trip$sharing","_trip$sharing2","totalRollingCommission","_trip$sharing3","companyShare","_trip$sharing4","_trip$sharing5","_trip$sharing6","totalExpenses","_trip$sharing7","totalCustomers","activeCustomers","totalTrips","completedTrips","status","ongoingTrips","isCompanyProfitable","profitMargin","group","groupEnd","Math","abs","netCashFlow","metrics","handleExport","reportData","generatedAt","toISOString","userRole","summary","rawData","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","a","document","createElement","href","download","split","body","appendChild","click","removeChild","revokeObjectURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleTimeString","variant","size","onClick","disabled","onValueChange","placeholder","name","toFixed","_c","$RefreshReg$"],"sources":["/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Reports.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ComposedChart, AreaChart, Area, Line } from 'recharts';\nimport { TrendingDown, Users, DollarSign, Activity, RefreshCw, Download, BarChart3, Zap, AlertTriangle, Percent, Trophy, ArrowUpCircle, ArrowUpDown } from 'lucide-react';\nimport { tokenManager } from '../utils/auth/tokenManager';\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { Button } from './ui/button';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Badge } from './ui/badge';\nimport { User } from '../types';\n\nconst REAL_TIME_REFRESH_INTERVAL = 30000;\n\ninterface ReportsProps {\n  user: User;\n}\n\ninterface TripSharingData {\n  trip_id: string;\n  total_win_loss: number;\n  total_expenses: number;\n  total_rolling_commission: number;\n  total_buy_in: number;\n  total_buy_out: number;\n  net_cash_flow: number;\n  net_result: number;\n  total_agent_share: number;\n  company_share: number;\n  agent_share_percentage: number;\n  company_share_percentage: number;\n  total_rolling: number;\n}\n\ninterface TripData {\n  id: string;\n  trip_name: string;\n  destination: string;\n  start_date: string;\n  end_date: string;\n  status: string;\n  sharing?: TripSharingData;\n}\n\ninterface CustomerData {\n  id: string;\n  name: string;\n  email: string;\n  vip_level: string;\n  totalRolling: number;\n  totalWinLoss: number;\n  totalBuyIn: number;\n  totalBuyOut: number;\n  isActive: boolean;\n  rollingPercentage: number;\n}\n\ninterface AgentData {\n  id: string;\n  name: string;\n  email: string;\n  status: string;\n  commission_rate: number;\n}\n\nexport function Reports({ user }: ReportsProps) {\n  // Data states\n  const [trips, setTrips] = useState<TripData[]>([]);\n  const [customers, setCustomers] = useState<CustomerData[]>([]);\n  const [agents, setAgents] = useState<AgentData[]>([]);\n  \n  // Filter states\n  const [dateRange, setDateRange] = useState('30');\n  const [selectedAgent, setSelectedAgent] = useState('all');\n  const [reportType, setReportType] = useState('overview');\n  \n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [lastSyncTime, setLastSyncTime] = useState<Date | null>(null);\n  const [connectionStatus, setConnectionStatus] = useState<'connected' | 'disconnected' | 'error'>('connected');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isRealTimeEnabled, setIsRealTimeEnabled] = useState(true);\n\n  // Helper functions\n  const safeFormatNumber = (value: number | undefined | null): string => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n\n  const safeNumber = (value: number | undefined | null): number => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Load data from backend API\n  const loadReportsData = useCallback(async () => {\n    try {\n      setRefreshing(true);\n      setErrorMessage('');\n      \n      console.log('ðŸ“Š Loading reports data from backend API...');\n      \n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n      const token = await tokenManager.getToken();\n      \n      if (!token) {\n        throw new Error('No authentication token found. Please log in again.');\n      }\n      \n      // Load all required data from backend API\n      const [tripsResponse, customersResponse, agentsResponse] = await Promise.all([\n        fetch(`${API_URL}/trips`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        }),\n        fetch(`${API_URL}/customers`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        }),\n        fetch(`${API_URL}/agents`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        })\n      ]);\n      \n      if (!tripsResponse.ok || !customersResponse.ok || !agentsResponse.ok) {\n        throw new Error('Failed to fetch data from backend API');\n      }\n      \n      const [tripsResult, customersResult, agentsResult] = await Promise.all([\n        tripsResponse.json(),\n        customersResponse.json(),\n        agentsResponse.json()\n      ]);\n      \n      const tripsData = tripsResult.data || [];\n      const customersData = customersResult.data || [];\n      const agentsData = agentsResult.data || [];\n\n      // Process trips data with sharing information\n      const processedTrips = tripsData.map((trip: any) => ({\n        ...trip,\n        sharing: trip.sharing || {\n          total_win_loss: 0,\n          total_expenses: 0,\n          total_rolling_commission: 0,\n          total_buy_in: 0,\n          total_buy_out: 0,\n          net_cash_flow: 0,\n          net_result: 0,\n          total_agent_share: 0,\n          company_share: 0,\n          agent_share_percentage: 0,\n          company_share_percentage: 100,\n          total_rolling: 0\n        }\n      }));\n\n      // Process customers data\n      const processedCustomers = customersData.map((customer: any) => ({\n        ...customer,\n        totalRolling: customer.totalRolling || 0,\n        totalWinLoss: customer.totalWinLoss || 0,\n        totalBuyIn: customer.totalBuyIn || 0,\n        totalBuyOut: customer.totalBuyOut || 0,\n        isActive: customer.isActive || false,\n        rollingPercentage: customer.rollingPercentage || 1.4\n      }));\n\n      // Set processed data\n      setTrips(processedTrips);\n      setCustomers(processedCustomers);\n      setAgents(agentsData);\n      setLastSyncTime(new Date());\n      setConnectionStatus('connected');\n      \n      console.log(`âœ… Reports data loaded: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips`);\n      \n    } catch (error) {\n      console.error('âŒ Error loading reports data:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setErrorMessage(`Failed to load reports data: ${errorMessage}`);\n      setConnectionStatus('error');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, []);\n\n  // Real-time data sync\n  useEffect(() => {\n    loadReportsData();\n    \n    let refreshInterval: NodeJS.Timeout;\n    if (isRealTimeEnabled) {\n      refreshInterval = setInterval(() => {\n        console.log('ðŸ“Š Real-time reports refresh triggered');\n        loadReportsData();\n      }, REAL_TIME_REFRESH_INTERVAL);\n    }\n\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, [loadReportsData, isRealTimeEnabled]);\n\n  // Toggle real-time updates\n  const toggleRealTime = () => {\n    setIsRealTimeEnabled(!isRealTimeEnabled);\n    if (!isRealTimeEnabled) {\n      loadReportsData();\n    }\n  };\n\n  // Filter data based on user role and filters\n  const getFilteredData = () => {\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n\n    // Apply user role filter\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => c.agentId === user.agentId);\n      filteredTrips = trips.filter(t => \n        (t.agents && t.agents.some(agent => agent.agentId === user.agentId)) ||\n        t.agentId === user.agentId\n      );\n    } else if (user.role === 'staff' && user.staffId) {\n      filteredTrips = trips.filter(t => (t as any).staffId === user.staffId);\n      const tripCustomerIds = Array.from(new Set(\n        filteredTrips.flatMap(t => t.customers?.map(tc => tc.customerId) || [])\n      ));\n      filteredCustomers = customers.filter(c => tripCustomerIds.includes(c.id));\n    }\n\n    // Apply agent filter (admin only)\n    if (user.role === 'admin' && selectedAgent !== 'all') {\n      filteredCustomers = filteredCustomers.filter(c => c.agentId === selectedAgent);\n      filteredTrips = filteredTrips.filter(t => \n        (t.agents && t.agents.some(agent => agent.agentId === selectedAgent)) ||\n        t.agentId === selectedAgent\n      );\n    }\n\n    // Apply date range filter\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - parseInt(dateRange));\n    \n    filteredTrips = filteredTrips.filter(t => {\n      const tripDate = t.start_date || t.end_date;\n      return tripDate && new Date(tripDate) >= cutoffDate;\n    });\n\n    return { filteredCustomers, filteredTrips };\n  };\n\n  const { filteredCustomers, filteredTrips } = getFilteredData();\n\n  // Calculate metrics from trip_sharing data\n  const calculateMetrics = () => {\n    // Main metrics from trip_sharing table\n    const totalRolling = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.total_rolling), 0);\n    const totalWinLoss = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.total_win_loss), 0);\n    const totalRollingCommission = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.total_rolling_commission), 0);\n    const companyShare = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.company_share), 0);\n    const totalBuyIn = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.total_buy_in), 0);\n    const totalBuyOut = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.total_buy_out), 0);\n    const totalExpenses = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.sharing?.total_expenses), 0);\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    const activeCustomers = filteredCustomers.filter(c => (c.totalRolling || 0) > 0).length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'in-progress').length;\n\n    // Performance ratios\n    const isCompanyProfitable = companyShare > 0;\n    const profitMargin = totalRolling > 0 ? ((companyShare / totalRolling) * 100) : 0;\n\n    console.group('ðŸ“Š Calculated Metrics from trip_sharing');\n    console.log('ðŸŽ² Total Rolling:', totalRolling);\n    console.log('ðŸ’° Total Win/Loss:', totalWinLoss);\n    console.log('ðŸ’¼ Total Rolling Commission:', totalRollingCommission);\n    console.log('ðŸ¢ Company Share:', companyShare);\n    console.log('ðŸ‘¥ Active Customers:', activeCustomers);\n    console.log('ðŸ“ˆ Is Company Profitable:', isCompanyProfitable);\n    console.groupEnd();\n\n    return {\n      totalRolling,\n      totalWinLoss: Math.abs(totalWinLoss),\n      totalRollingCommission,\n      companyShare,\n      totalBuyIn,\n      totalBuyOut,\n      totalExpenses,\n      totalCustomers,\n      activeCustomers,\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      isCompanyProfitable,\n      profitMargin,\n      netCashFlow: totalBuyOut - totalBuyIn\n    };\n  };\n\n  const metrics = calculateMetrics();\n\n  // Export functionality\n  const handleExport = () => {\n    const reportData = {\n      generatedAt: new Date().toISOString(),\n      dateRange: dateRange,\n      selectedAgent: selectedAgent,\n      userRole: user.role,\n      summary: metrics,\n      rawData: {\n        customers: filteredCustomers.length,\n        trips: filteredTrips.length\n      }\n    };\n\n    const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `casino-reports-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-2 text-sm text-gray-600\">Loading reports data...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Real-time Status Header */}\n      <div className=\"p-4 bg-purple-50 border border-purple-200 rounded-lg\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <BarChart3 className=\"w-5 h-5 text-purple-600 mr-3\" />\n            <div>\n              <p className=\"text-sm font-medium text-purple-800\">\n                ðŸ“Š Real-time Reports & Analytics - Live Data from trip_sharing\n              </p>\n              <p className=\"text-xs text-purple-600\">\n                Data sourced from trip_sharing table with accurate financial metrics.\n                {lastSyncTime && ` â€¢ Last sync: ${lastSyncTime.toLocaleTimeString()}`}\n              </p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            {refreshing && (\n              <div className=\"flex items-center text-blue-600\">\n                <Activity className=\"w-4 h-4 mr-1 animate-pulse\" />\n                <span className=\"text-xs\">Syncing...</span>\n              </div>\n            )}\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={loadReportsData}\n              disabled={refreshing}\n              className=\"text-xs\"\n            >\n              <RefreshCw className=\"w-3 h-3 mr-1\" />\n              Refresh\n            </Button>\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={toggleRealTime}\n              className=\"text-xs\"\n            >\n              <Zap className={`w-3 h-3 mr-1 ${isRealTimeEnabled ? 'text-green-500' : 'text-gray-500'}`} />\n              {isRealTimeEnabled ? 'Live' : 'Manual'}\n            </Button>\n            <Badge variant=\"outline\" className={`text-xs ${connectionStatus === 'connected' ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'}`}>\n              <div className={`w-2 h-2 rounded-full mr-1 ${connectionStatus === 'connected' ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`}></div>\n              {connectionStatus === 'connected' ? 'Live Data' : 'Error'}\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Error Alert */}\n      {errorMessage && (\n        <Alert className=\"border-red-200 bg-red-50\">\n          <AlertTriangle className=\"w-4 h-4 text-red-600\" />\n          <AlertDescription className=\"text-red-800\">\n            <strong>Reports Error:</strong> {errorMessage}\n            <Button\n              onClick={loadReportsData}\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"ml-3 text-red-800 border-red-300 hover:bg-red-100\"\n            >\n              <RefreshCw className=\"w-3 h-3 mr-1\" />\n              Retry\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Header and Filters */}\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Real-time Reports & Analytics</h2>\n          <p className=\"text-gray-600\">\n            {user.role === 'agent' ? 'Performance overview for your customers' : \n             user.role === 'staff' ? 'Reports for your recorded transactions' :\n             'Comprehensive business analytics'} â€¢ Live data from trip_sharing\n          </p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Showing data for last {dateRange} days â€¢ {metrics.totalTrips} trips â€¢ Based on trip_sharing table\n          </p>\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          <Select value={dateRange} onValueChange={setDateRange}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue placeholder=\"Date range\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"7\">Last 7 days</SelectItem>\n              <SelectItem value=\"30\">Last 30 days</SelectItem>\n              <SelectItem value=\"90\">Last 90 days</SelectItem>\n              <SelectItem value=\"365\">Last year</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          {user.role === 'admin' && (\n            <Select value={selectedAgent} onValueChange={setSelectedAgent}>\n              <SelectTrigger className=\"w-40\">\n                <SelectValue placeholder=\"All agents\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Agents</SelectItem>\n                {agents.map((agent) => (\n                  <SelectItem key={agent.id} value={agent.id}>\n                    {agent.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          )}\n\n          <Select value={reportType} onValueChange={setReportType}>\n            <SelectTrigger className=\"w-36\">\n              <SelectValue placeholder=\"Report type\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"overview\">Overview</SelectItem>\n              <SelectItem value=\"financial\">Financial</SelectItem>\n              <SelectItem value=\"customer\">Customer</SelectItem>\n              <SelectItem value=\"operational\">Operational</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          <Button variant=\"outline\" onClick={handleExport}>\n            <Download className=\"w-4 h-4 mr-2\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div>\n        <h3 className=\"text-lg font-medium mb-4\">Key Performance Metrics</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\">\n          <Card className=\"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-blue-800\">Total Rolling</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-blue-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-blue-700\">HK${safeFormatNumber(metrics.totalRolling)}</div>\n              <p className=\"text-xs text-blue-600\">\n                From trip_sharing.total_rolling â€¢ Last {dateRange} days\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-purple-800\">Commission</CardTitle>\n              <Percent className=\"h-4 w-4 text-purple-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-purple-700\">HK${safeFormatNumber(metrics.totalRollingCommission)}</div>\n              <p className=\"text-xs text-purple-600\">\n                From trip_sharing.total_rolling_commission\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className={`bg-gradient-to-r ${metrics.isCompanyProfitable ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.isCompanyProfitable ? 'text-green-800' : 'text-red-800'}`}>House P&L</CardTitle>\n              {metrics.isCompanyProfitable ? (\n                <Trophy className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <TrendingDown className=\"h-4 w-4 text-red-600\" />\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`}>\n                HK${safeFormatNumber(Math.abs(metrics.companyShare))}\n              </div>\n              <p className={`text-xs ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`}>\n                {metrics.isCompanyProfitable ? 'Company Profit' : 'Company Loss'} â€¢ trip_sharing.company_share\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-orange-800\">Cash Flow</CardTitle>\n              <ArrowUpCircle className=\"h-4 w-4 text-orange-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-orange-700\">\n                HK${safeFormatNumber(metrics.netCashFlow)}\n              </div>\n              <p className=\"text-xs text-orange-600\">\n                Net: Buy-out - Buy-in\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Customers</CardTitle>\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics.activeCustomers}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                With rolling amount â€¢ of {metrics.totalCustomers} total\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Performance Summary */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Performance Summary</CardTitle>\n            <CardDescription>Key operational metrics from trip_sharing</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between items-center p-3 bg-blue-50 rounded-lg\">\n                <span className=\"text-sm text-blue-800\">Total Trips</span>\n                <span className=\"font-bold text-blue-700\">{metrics.totalTrips}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-3 bg-green-50 rounded-lg\">\n                <span className=\"text-sm text-green-800\">Completed</span>\n                <span className=\"font-bold text-green-700\">{metrics.completedTrips}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-3 bg-orange-50 rounded-lg\">\n                <span className=\"text-sm text-orange-800\">Ongoing</span>\n                <span className=\"font-bold text-orange-700\">{metrics.ongoingTrips}</span>\n              </div>\n              <div className=\"flex justify-between items-center p-3 bg-purple-50 rounded-lg\">\n                <span className=\"text-sm text-purple-800\">Profit Margin</span>\n                <span className=\"font-bold text-purple-700\">{metrics.profitMargin.toFixed(1)}%</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Financial Overview</CardTitle>\n            <CardDescription>Revenue and cost breakdown</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <DollarSign className=\"w-5 h-5 text-blue-600\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Total Rolling</p>\n                  <p className=\"text-xl font-bold text-blue-600\">HK${safeFormatNumber(metrics.totalRolling)}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <Percent className=\"w-5 h-5 text-purple-600\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Commission Earned</p>\n                  <p className=\"text-xl font-bold text-purple-600\">HK${safeFormatNumber(metrics.totalRollingCommission)}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <Trophy className={`w-5 h-5 ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`} />\n                <div>\n                  <p className=\"text-sm font-medium\">Company Share</p>\n                  <p className={`text-xl font-bold ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`}>\n                    HK${safeFormatNumber(Math.abs(metrics.companyShare))}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Activity Overview</CardTitle>\n            <CardDescription>Customer and transaction summary</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <Users className=\"w-5 h-5 text-blue-600\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Active Customers</p>\n                  <p className=\"text-xl font-bold text-blue-600\">{metrics.activeCustomers}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <ArrowUpDown className=\"w-5 h-5 text-green-600\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Cash Transactions</p>\n                  <p className=\"text-xl font-bold text-green-600\">HK${safeFormatNumber(metrics.totalBuyIn + metrics.totalBuyOut)}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <Activity className=\"w-5 h-5 text-purple-600\" />\n                <div>\n                  <p className=\"text-sm font-medium\">Trip Count</p>\n                  <p className=\"text-xl font-bold text-purple-600\">{metrics.totalTrips}</p>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}