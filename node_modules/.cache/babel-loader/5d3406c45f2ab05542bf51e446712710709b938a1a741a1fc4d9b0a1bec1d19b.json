{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Dashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from './ui/card';\nimport { Users, UserCheck, TrendingDown, DollarSign, Receipt, Trophy, Target, MapPin, Activity, ArrowUpDown, ArrowUp, ArrowDown, Loader2 } from 'lucide-react';\nimport { db } from '../utils/supabase/supabaseClients';\nimport { apiClient } from '../utils/api/apiClient';\nimport { useLanguage } from '../contexts/LanguageContext';\nimport { useCurrency } from '../contexts/CurrencyContext';\nimport { DSContainer, DSBadge, typography } from './common/DesignSystem';\n\n// Additional type definitions for Dashboard\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Dashboard({\n  user\n}) {\n  _s();\n  const {\n    t\n  } = useLanguage();\n  const {\n    formatGlobalCurrency,\n    currencySymbol,\n    convertToGlobalCurrency,\n    globalCurrency\n  } = useCurrency();\n\n  // Data states with real-time updates\n  const [agents, setAgents] = useState([]);\n  const [customers, setCustomers] = useState([]);\n  const [trips, setTrips] = useState([]);\n  const [rollingRecords, setRollingRecords] = useState([]);\n  const [buyInOutRecords, setBuyInOutRecords] = useState([]);\n\n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n\n  // Sorting states for customer performance\n  const [sortBy, setSortBy] = useState('rolling');\n  const [sortOrder, setSortOrder] = useState('desc');\n\n  // Helper functions\n  const safeFormatNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n  const safeNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Data loading from API\n  const loadData = useCallback(async () => {\n    try {\n      console.log('🔄 Loading dashboard data from API...');\n\n      // Load all required data from API in parallel\n      const [agentsData, customersData, transactionsData, tripsApiResponse] = await Promise.all([db.get('agents', []), db.get('customers', []), db.get('transactions', []), apiClient.getTripsWithSharing()]);\n      const tripsData = tripsApiResponse.data || [];\n      console.log('📊 Dashboard data loaded:', {\n        agents: Array.isArray(agentsData) ? agentsData.length : 0,\n        customers: Array.isArray(customersData) ? customersData.length : 0,\n        trips: Array.isArray(tripsData) ? tripsData.length : 0,\n        transactions: Array.isArray(transactionsData) ? transactionsData.length : 0\n      });\n\n      // Process customers - use database totals directly\n      const processedCustomers = (Array.isArray(customersData) ? customersData : []).map(customer => {\n        return {\n          ...customer,\n          id: customer.id,\n          name: customer.name,\n          agentName: customer.agent_name,\n          isActive: customer.status === 'active',\n          totalRolling: parseFloat(customer.total_rolling) || 0,\n          totalWinLoss: parseFloat(customer.total_win_loss) || 0,\n          totalBuyIn: parseFloat(customer.total_buy_in) || 0,\n          totalBuyOut: parseFloat(customer.total_buy_out) || 0,\n          attachments: customer.attachments || [],\n          isAgent: customer.is_agent || false,\n          rollingPercentage: parseFloat(customer.rolling_percentage) || 1.4,\n          creditLimit: parseFloat(customer.credit_limit) || 0,\n          availableCredit: parseFloat(customer.available_credit) || 0\n        };\n      });\n\n      // Process trips - preserve sharing data from API directly\n      const processedTrips = (Array.isArray(tripsData) ? tripsData : []).map(trip => {\n        return {\n          ...trip,\n          attachments: trip.attachments || []\n        };\n      });\n\n      // Set processed data\n      setAgents(agentsData);\n      setCustomers(processedCustomers);\n      setTrips(processedTrips);\n      setRollingRecords([]);\n      setBuyInOutRecords(transactionsData || []);\n      console.log(`✅ Dashboard data loaded: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips`);\n    } catch (error) {\n      console.error('❌ Error loading dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Load data on component mount\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  // Filter data based on user role\n  const getFilteredData = () => {\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => c.agentId === user.agentId);\n      filteredTrips = trips.filter(t => t.agents && t.agents.some(agent => agent.agentId === user.agentId) || t.agentId === user.agentId);\n    }\n    return {\n      filteredCustomers,\n      filteredTrips\n    };\n  };\n  const {\n    filteredCustomers,\n    filteredTrips\n  } = getFilteredData();\n\n  // Sorting function for customers\n  const getSortedCustomers = () => {\n    const sorted = [...filteredCustomers].sort((a, b) => {\n      let valueA, valueB;\n      if (sortBy === 'rolling') {\n        valueA = safeNumber(a.totalRolling);\n        valueB = safeNumber(b.totalRolling);\n      } else {\n        valueA = safeNumber(a.totalWinLoss);\n        valueB = safeNumber(b.totalWinLoss);\n      }\n      return sortOrder === 'desc' ? valueB - valueA : valueA - valueB;\n    });\n\n    // Return all customers, not just top 5\n    return sorted;\n  };\n\n  // Calculate comprehensive metrics from real-time data\n  const calculateMetrics = () => {\n    // Trip-based financial metrics\n    const tripTotalRolling = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalRolling), 0);\n    const tripTotalWinLoss = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalWinLoss), 0);\n    const totalRollingCommission = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.calculatedTotalRolling), 0);\n    const totalExpenses = filteredTrips.reduce((sum, trip) => sum + (trip.expenses || []).reduce((expSum, exp) => expSum + safeNumber(exp.amount), 0), 0);\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    const activeCustomers = filteredCustomers.filter(c => c.isActive).length;\n    const customerTotalWinLoss = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalWinLoss), 0);\n    const customerTotalBuyIn = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyIn), 0);\n    const customerTotalBuyOut = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyOut), 0);\n\n    // Total Rolling from trip_sharing table with currency conversion\n    const tripSharingTotalRolling = trips.reduce((sum, trip) => {\n      var _trip$sharing, _trip$sharing2;\n      const originalValue = safeNumber(((_trip$sharing = trip.sharing) === null || _trip$sharing === void 0 ? void 0 : _trip$sharing.total_rolling) || ((_trip$sharing2 = trip.sharing) === null || _trip$sharing2 === void 0 ? void 0 : _trip$sharing2.totalRolling));\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`🔍 Trip ${trip.name}:`, {\n        hasSharing: !!trip.sharing,\n        tripCurrency: trip.currency,\n        originalValue,\n        convertedValue,\n        sharingObject: trip.sharing\n      });\n      return sum + convertedValue;\n    }, 0);\n    console.log('📊 Dashboard Total Rolling Summary:', {\n      totalTrips: trips.length,\n      tripsWithSharing: trips.filter(t => t.sharing).length,\n      finalTotalRolling: tripSharingTotalRolling\n    });\n\n    // Agent metrics\n    const totalAgents = agents.length;\n    const activeAgents = agents.filter(a => a.status === 'active').length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'in-progress').length;\n    const plannedTrips = filteredTrips.filter(t => t.status === 'active').length;\n\n    // Calculate metrics from trip_sharing table data (all trips, no filtering)\n    console.log('🔍 Debug trips data for calculations:', trips.length);\n    trips.forEach((trip, index) => {\n      console.log(`Trip ${index + 1} (${trip.name}):`, {\n        hasSharing: !!trip.sharing,\n        sharingKeys: trip.sharing ? Object.keys(trip.sharing) : 'no sharing',\n        sharingData: trip.sharing\n      });\n    });\n    const tripSharingGrossProfit = trips.reduce((sum, trip) => {\n      var _trip$sharing3, _trip$sharing4;\n      const originalValue = safeNumber(((_trip$sharing3 = trip.sharing) === null || _trip$sharing3 === void 0 ? void 0 : _trip$sharing3.total_win_loss) || ((_trip$sharing4 = trip.sharing) === null || _trip$sharing4 === void 0 ? void 0 : _trip$sharing4.totalWinLoss));\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`Trip ${trip.name}: total_win_loss = ${originalValue} -> ${convertedValue} (${trip.currency} -> ${globalCurrency})`);\n      return sum + convertedValue;\n    }, 0);\n    const tripSharingExpenses = trips.reduce((sum, trip) => {\n      var _trip$sharing5, _trip$sharing6;\n      const originalValue = safeNumber(((_trip$sharing5 = trip.sharing) === null || _trip$sharing5 === void 0 ? void 0 : _trip$sharing5.total_expenses) || ((_trip$sharing6 = trip.sharing) === null || _trip$sharing6 === void 0 ? void 0 : _trip$sharing6.totalExpenses));\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`Trip ${trip.name}: total_expenses = ${originalValue} -> ${convertedValue} (${trip.currency} -> ${globalCurrency})`);\n      return sum + convertedValue;\n    }, 0);\n    const tripSharingNetProfit = trips.reduce((sum, trip) => {\n      var _trip$sharing7, _trip$sharing8;\n      const originalValue = safeNumber(((_trip$sharing7 = trip.sharing) === null || _trip$sharing7 === void 0 ? void 0 : _trip$sharing7.company_share) || ((_trip$sharing8 = trip.sharing) === null || _trip$sharing8 === void 0 ? void 0 : _trip$sharing8.companyShare));\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`Trip ${trip.name}: company_share = ${originalValue} -> ${convertedValue} (${trip.currency} -> ${globalCurrency})`);\n      return sum + convertedValue;\n    }, 0);\n    console.log('📊 Final calculations:', {\n      tripSharingGrossProfit,\n      tripSharingExpenses,\n      tripSharingNetProfit\n    });\n\n    // House performance calculations (using trip_sharing data)\n    const houseGrossWin = tripSharingGrossProfit;\n    const houseNetWin = houseGrossWin - totalRollingCommission;\n    const houseFinalProfit = tripSharingNetProfit;\n\n    // Performance ratios (using trip_sharing total_rolling)\n    const profitMargin = tripSharingTotalRolling > 0 ? houseFinalProfit / tripSharingTotalRolling * 100 : 0;\n    const expenseRatio = tripSharingTotalRolling > 0 ? totalExpenses / tripSharingTotalRolling * 100 : 0;\n    const commissionRatio = tripSharingTotalRolling > 0 ? totalRollingCommission / tripSharingTotalRolling * 100 : 0;\n\n    // Recent activity metrics\n    const recentRollingRecords = rollingRecords.filter(record => Date.now() - new Date(record.datetime || record.created_at).getTime() < 24 * 60 * 60 * 1000).length;\n    const recentBuyInOutRecords = buyInOutRecords.filter(record => Date.now() - new Date(record.timestamp).getTime() < 24 * 60 * 60 * 1000).length;\n    return {\n      // Trip metrics\n      tripTotalRolling,\n      tripTotalWinLoss,\n      totalRollingCommission,\n      totalExpenses: tripSharingExpenses,\n      // Customer metrics\n      totalCustomers,\n      activeCustomers,\n      customerTotalRolling: tripSharingTotalRolling,\n      // Use trip_sharing total_rolling\n      customerTotalWinLoss,\n      customerTotalBuyIn,\n      customerTotalBuyOut,\n      // Agent metrics\n      totalAgents,\n      activeAgents,\n      // Trip counts\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      plannedTrips,\n      // House performance\n      houseGrossWin,\n      houseNetWin,\n      houseFinalProfit,\n      // Ratios\n      profitMargin,\n      expenseRatio,\n      commissionRatio,\n      // Activity\n      recentRollingRecords,\n      recentBuyInOutRecords,\n      totalRollingRecords: rollingRecords.length,\n      totalBuyInOutRecords: buyInOutRecords.length\n    };\n  };\n  const metrics = calculateMetrics();\n\n  // Filter active trips and use trip_sharing data\n  const activeTrips = filteredTrips.filter(trip => trip.status && trip.status.toLowerCase() === 'active').map(trip => {\n    // Use trip_sharing data directly instead of enriching with calculations\n    const tripCustomers = filteredCustomers.filter(c => {\n      var _trip$customers;\n      return (_trip$customers = trip.customers) === null || _trip$customers === void 0 ? void 0 : _trip$customers.some(tc => tc.customerId === c.id);\n    });\n    return {\n      ...trip,\n      customers: tripCustomers\n      // Keep original sharing data from trip_sharing table\n    };\n  });\n  const getWinLossStatus = winLoss => {\n    if (winLoss === 0) {\n      return {\n        text: 'Break Even',\n        icon: Target,\n        color: 'text-gray-600'\n      };\n    } else if (winLoss > 0) {\n      return {\n        text: 'Junket Loss',\n        icon: TrendingDown,\n        color: 'text-red-600'\n      };\n    } else {\n      return {\n        text: 'Junket Profit',\n        icon: Trophy,\n        color: 'text-green-600'\n      };\n    }\n  };\n\n  // Show loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(DSContainer, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center py-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"w-8 h-8 animate-spin text-blue-600 mx-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `mt-2 ${typography.small} text-gray-600`,\n            children: \"Loading dashboard data...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(DSContainer, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `${typography.h3} mb-3 sm:mb-4 px-1 sm:px-0`,\n        children: \"Real-time Financial Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-blue-800\",\n              children: \"Total Rolling Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl sm:text-2xl font-bold text-blue-700 break-words\",\n              children: [currencySymbol, safeFormatNumber(Math.abs(metrics.customerTotalRolling))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-600 mt-1\",\n              children: [\"From \", metrics.totalRollingRecords, \" rolling records across \", metrics.totalCustomers, \" customers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.houseGrossWin >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.houseGrossWin >= 0 ? 'text-green-800' : 'text-red-800'}`,\n              children: \"Company Gross Profit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), metrics.houseGrossWin >= 0 ? /*#__PURE__*/_jsxDEV(Trophy, {\n              className: \"h-4 w-4 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-xl sm:text-2xl font-bold break-words ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: [currencySymbol, safeFormatNumber(Math.abs(metrics.houseGrossWin))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs mt-1 ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: \"From trip sharing win/loss data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-red-50 to-red-100 border-red-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-red-800\",\n              children: \"Expenses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Receipt, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-red-700\",\n              children: [currencySymbol, safeFormatNumber(Math.abs(metrics.totalExpenses))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-red-600\",\n              children: \"Total operational expenses from trip sharing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.houseFinalProfit >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.houseFinalProfit >= 0 ? 'text-green-800' : 'text-red-800'}`,\n              children: \"Company Net Profit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, this), metrics.houseFinalProfit >= 0 ? /*#__PURE__*/_jsxDEV(Trophy, {\n              className: \"h-4 w-4 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: [currencySymbol, safeFormatNumber(Math.abs(metrics.houseFinalProfit))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`,\n              children: \"Company share from trip sharing\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: `${typography.h3} mb-3 sm:mb-4 px-1 sm:px-0`,\n        children: \"Operations Overview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Active Customers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Users, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl sm:text-2xl font-bold\",\n              children: metrics.activeCustomers\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [\"of \", metrics.totalCustomers, \" total customers\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Active Agents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(UserCheck, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl sm:text-2xl font-bold\",\n              children: metrics.activeAgents\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [\"of \", metrics.totalAgents, \" total agents\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Trip Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl sm:text-2xl font-bold\",\n              children: metrics.totalTrips\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [metrics.completedTrips, \" completed, \", metrics.ongoingTrips, \" ongoing, \", metrics.plannedTrips, \" planned\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: \"Recent Activity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Activity, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xl sm:text-2xl font-bold\",\n              children: metrics.recentRollingRecords + metrics.recentBuyInOutRecords\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: \"Transactions in last 24 hours\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"h-full\",\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        className: \"pb-3\",\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          className: typography.h4,\n          children: \"Active Trips\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          className: \"text-xs sm:text-sm\",\n          children: \"Current ongoing trips with real-time performance data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: activeTrips.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: [/*#__PURE__*/_jsxDEV(MapPin, {\n            className: \"h-12 w-12 text-gray-300 mx-auto mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No active trips found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-400 mt-1\",\n            children: \"Active trips will appear here when trips are in progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3 sm:space-y-4\",\n          children: activeTrips.slice(0, 5) // Show up to 5 trips to match customer performance section\n          .map(trip => {\n            var _trip$sharing9, _trip$sharing0, _trip$sharing1, _trip$sharing10, _trip$customers2;\n            // Use trip_sharing data with currency conversion\n            const originalRolling = ((_trip$sharing9 = trip.sharing) === null || _trip$sharing9 === void 0 ? void 0 : _trip$sharing9.total_rolling) || ((_trip$sharing0 = trip.sharing) === null || _trip$sharing0 === void 0 ? void 0 : _trip$sharing0.totalRolling) || 0;\n            const originalWinLoss = ((_trip$sharing1 = trip.sharing) === null || _trip$sharing1 === void 0 ? void 0 : _trip$sharing1.total_win_loss) || ((_trip$sharing10 = trip.sharing) === null || _trip$sharing10 === void 0 ? void 0 : _trip$sharing10.totalWinLoss) || 0;\n            const totalRolling = convertToGlobalCurrency(originalRolling, trip.currency || 'HKD', trip);\n            const winLoss = convertToGlobalCurrency(originalWinLoss, trip.currency || 'HKD', trip);\n\n            // Calculate progress based on dates\n            const startDate = trip.date ? new Date(trip.date) : null;\n            const endDate = startDate ? new Date(startDate.getTime() + 7 * 24 * 60 * 60 * 1000) : null; // Assume 7 days duration\n            const now = new Date();\n            let progress = 0;\n            if (startDate && endDate) {\n              const totalDuration = endDate.getTime() - startDate.getTime();\n              const elapsed = now.getTime() - startDate.getTime();\n              progress = Math.max(0, Math.min(100, elapsed / totalDuration * 100));\n            }\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-shrink-0\",\n                  children: /*#__PURE__*/_jsxDEV(DSBadge, {\n                    variant: \"success\",\n                    children: trip.status === 'active' ? t('active') : trip.status === 'in-progress' ? t('ongoing') : t('completed')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium\",\n                    children: trip.name || 'Unnamed Trip'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500 flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                      className: \"h-3 w-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 29\n                    }, this), trip.description || t('unknown_destination'), \" \\u2022 \", ((_trip$customers2 = trip.customers) === null || _trip$customers2 === void 0 ? void 0 : _trip$customers2.length) || 0, \" \", t('customers')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-blue-600\",\n                    children: [t('progress'), \": \", Math.round(progress), \"% \\u2022 \", trip.date ? new Date(trip.date).toLocaleDateString() : 'TBD']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6 text-right text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: t('rolling')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 575,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-blue-600\",\n                    children: [currencySymbol, safeFormatNumber(Math.abs(totalRolling))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 576,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: t('win_loss')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 579,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `font-medium ${winLoss < 0 ? 'text-red-600' : winLoss >= 0 ? 'text-green-600' : 'text-gray-600'}`,\n                    children: [currencySymbol, safeFormatNumber(Math.abs(winLoss))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 580,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 578,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 23\n              }, this)]\n            }, trip.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        className: \"pb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-base sm:text-lg\",\n              children: t('customer_performance')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n              className: \"text-xs sm:text-sm\",\n              children: [t('all_customers_based_on'), \" \", user.role === 'agent' ? 'you manage' : '', \" (\", filteredCustomers.length, \" \", t('customers'), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2 text-xs sm:text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-1 text-xs sm:text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500 hidden sm:inline\",\n                children: t('sort_by')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setSortBy(sortBy === 'rolling' ? 'winloss' : 'rolling'),\n                className: \"flex items-center space-x-1 px-2 py-1 rounded hover:bg-gray-100 transition-colors text-xs sm:text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: sortBy === 'rolling' ? t('rolling') : t('win_loss')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 613,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ArrowUpDown, {\n                  className: \"h-3 w-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSortOrder(sortOrder === 'desc' ? 'asc' : 'desc'),\n              className: \"flex items-center px-2 py-1 rounded hover:bg-gray-100 transition-colors\",\n              title: `Sort ${sortOrder === 'desc' ? 'ascending' : 'descending'}`,\n              children: sortOrder === 'desc' ? /*#__PURE__*/_jsxDEV(ArrowDown, {\n                className: \"h-4 w-4 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(ArrowUp, {\n                className: \"h-4 w-4 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: filteredCustomers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-8\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"h-12 w-12 text-gray-300 mx-auto mb-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500\",\n            children: \"No customer data found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-400 mt-1\",\n            children: \"Customer performance will appear here once rolling records are created\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3 sm:space-y-4 max-h-96 overflow-y-auto pr-1 sm:pr-2\",\n          children: getSortedCustomers().map(customer => {\n            const indicator = getWinLossStatus(customer.totalWinLoss || 0);\n            const Icon = indicator.icon;\n            const winLoss = customer.totalWinLoss || 0;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 border rounded-lg hover:bg-gray-50 transition-colors space-y-2 sm:space-y-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3 sm:space-x-4 flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(Icon, {\n                  className: `h-4 w-4 sm:h-5 sm:w-5 ${indicator.color} flex-shrink-0`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"min-w-0 flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium text-sm sm:text-base truncate\",\n                    children: customer.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs sm:text-sm text-gray-500 truncate\",\n                    children: [t('agent'), \": \", customer.agentName, \" \\u2022 \", customer.isActive ? t('active') : t('inactive')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 653,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-purple-600\",\n                    children: [t('commission_rate'), \": \", customer.rollingPercentage, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 656,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 651,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6 text-right text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: t('rolling')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 663,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-blue-600\",\n                    children: [\"HK$\", safeFormatNumber(Math.abs(customer.totalRolling || 0))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 664,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 662,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-gray-500\",\n                    children: t('win_loss')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 667,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `font-medium ${winLoss < 0 ? 'text-red-600' : winLoss > 0 ? 'text-green-600' : 'text-gray-600'}`,\n                    children: [\"HK$\", safeFormatNumber(Math.abs(winLoss))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 668,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `text-xs ${winLoss < 0 ? 'text-red-500' : winLoss > 0 ? 'text-green-500' : 'text-gray-500'}`,\n                    children: winLoss < 0 ? t('company_loss') : winLoss > 0 ? t('company_win') : t('break_even')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 673,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 21\n              }, this)]\n            }, customer.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"HqfW1WnWg863Tux+tDwcPQojznA=\", false, function () {\n  return [useLanguage, useCurrency];\n});\n_c = Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Card","CardContent","CardHeader","CardTitle","CardDescription","Users","UserCheck","TrendingDown","DollarSign","Receipt","Trophy","Target","MapPin","Activity","ArrowUpDown","ArrowUp","ArrowDown","Loader2","db","apiClient","useLanguage","useCurrency","DSContainer","DSBadge","typography","jsxDEV","_jsxDEV","Dashboard","user","_s","t","formatGlobalCurrency","currencySymbol","convertToGlobalCurrency","globalCurrency","agents","setAgents","customers","setCustomers","trips","setTrips","rollingRecords","setRollingRecords","buyInOutRecords","setBuyInOutRecords","loading","setLoading","sortBy","setSortBy","sortOrder","setSortOrder","safeFormatNumber","value","undefined","isNaN","toLocaleString","safeNumber","loadData","console","log","agentsData","customersData","transactionsData","tripsApiResponse","Promise","all","get","getTripsWithSharing","tripsData","data","Array","isArray","length","transactions","processedCustomers","map","customer","id","name","agentName","agent_name","isActive","status","totalRolling","parseFloat","total_rolling","totalWinLoss","total_win_loss","totalBuyIn","total_buy_in","totalBuyOut","total_buy_out","attachments","isAgent","is_agent","rollingPercentage","rolling_percentage","creditLimit","credit_limit","availableCredit","available_credit","processedTrips","trip","error","getFilteredData","filteredCustomers","filteredTrips","role","agentId","filter","c","some","agent","getSortedCustomers","sorted","sort","a","b","valueA","valueB","calculateMetrics","tripTotalRolling","reduce","sum","tripTotalWinLoss","totalRollingCommission","calculatedTotalRolling","totalExpenses","expenses","expSum","exp","amount","totalCustomers","activeCustomers","customerTotalWinLoss","customerTotalBuyIn","customerTotalBuyOut","tripSharingTotalRolling","_trip$sharing","_trip$sharing2","originalValue","sharing","convertedValue","currency","hasSharing","tripCurrency","sharingObject","totalTrips","tripsWithSharing","finalTotalRolling","totalAgents","activeAgents","completedTrips","ongoingTrips","plannedTrips","forEach","index","sharingKeys","Object","keys","sharingData","tripSharingGrossProfit","_trip$sharing3","_trip$sharing4","tripSharingExpenses","_trip$sharing5","_trip$sharing6","total_expenses","tripSharingNetProfit","_trip$sharing7","_trip$sharing8","company_share","companyShare","houseGrossWin","houseNetWin","houseFinalProfit","profitMargin","expenseRatio","commissionRatio","recentRollingRecords","record","Date","now","datetime","created_at","getTime","recentBuyInOutRecords","timestamp","customerTotalRolling","totalRollingRecords","totalBuyInOutRecords","metrics","activeTrips","toLowerCase","tripCustomers","_trip$customers","tc","customerId","getWinLossStatus","winLoss","text","icon","color","children","className","fileName","_jsxFileName","lineNumber","columnNumber","small","h3","Math","abs","h4","slice","_trip$sharing9","_trip$sharing0","_trip$sharing1","_trip$sharing10","_trip$customers2","originalRolling","originalWinLoss","startDate","date","endDate","progress","totalDuration","elapsed","max","min","variant","description","round","toLocaleDateString","onClick","title","indicator","Icon","_c","$RefreshReg$"],"sources":["/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from './ui/card';\nimport { \n  Users, UserCheck, TrendingDown, DollarSign, Receipt, Trophy, Target, \n  MapPin, Activity, ArrowUpDown, ArrowUp, ArrowDown, Loader2\n} from 'lucide-react';\nimport { User, Trip, Customer, Agent } from '../types';\nimport { db } from '../utils/supabase/supabaseClients';\nimport { apiClient } from '../utils/api/apiClient';\nimport { useLanguage } from '../contexts/LanguageContext';\nimport { useCurrency } from '../contexts/CurrencyContext';\nimport { \n  DSContainer, \n  DSBadge, \n  typography\n} from './common/DesignSystem';\n\n// Additional type definitions for Dashboard\ninterface RollingRecord {\n  id: string;\n  customer_id: string;\n  trip_id: string;\n  amount: number;\n  game_type: string;\n  venue: string;\n  staff_id: string;\n  datetime: string;\n  created_at: string;\n  updated_at: string;\n  customer?: Customer;\n  trip?: Trip;\n}\n\ninterface BuyInOutRecord {\n  id: string;\n  customerId?: string;\n  customer_id?: string;\n  tripId?: string;\n  trip_id?: string;\n  timestamp: string;\n  transactionType?: string;\n  transaction_type?: string;\n  amount: number;\n}\n\ninterface DashboardProps {\n  user: User;\n}\n\n\nexport function Dashboard({ user }: DashboardProps) {\n  const { t } = useLanguage();\n  const { formatGlobalCurrency, currencySymbol, convertToGlobalCurrency, globalCurrency } = useCurrency();\n  \n  // Data states with real-time updates\n  const [agents, setAgents] = useState<Agent[]>([]);\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [trips, setTrips] = useState<Trip[]>([]);\n  const [rollingRecords, setRollingRecords] = useState<RollingRecord[]>([]);\n  const [buyInOutRecords, setBuyInOutRecords] = useState<BuyInOutRecord[]>([]);\n  \n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  \n  // Sorting states for customer performance\n  const [sortBy, setSortBy] = useState<'rolling' | 'winloss'>('rolling');\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\n\n  // Helper functions\n  const safeFormatNumber = (value: number | undefined | null): string => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n\n  const safeNumber = (value: number | undefined | null): number => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Data loading from API\n  const loadData = useCallback(async () => {\n    try {\n      console.log('🔄 Loading dashboard data from API...');\n      \n      // Load all required data from API in parallel\n      const [agentsData, customersData, transactionsData, tripsApiResponse] = await Promise.all([\n        db.get('agents', []),\n        db.get('customers', []),\n        db.get('transactions', []),\n        apiClient.getTripsWithSharing()\n      ]);\n\n      const tripsData = tripsApiResponse.data || [];\n\n      console.log('📊 Dashboard data loaded:', {\n        agents: Array.isArray(agentsData) ? agentsData.length : 0,\n        customers: Array.isArray(customersData) ? customersData.length : 0,\n        trips: Array.isArray(tripsData) ? tripsData.length : 0,\n        transactions: Array.isArray(transactionsData) ? transactionsData.length : 0\n      });\n\n      // Process customers - use database totals directly\n      const processedCustomers = (Array.isArray(customersData) ? customersData : []).map((customer: any) => {\n        return {\n          ...customer,\n          id: customer.id,\n          name: customer.name,\n          agentName: customer.agent_name,\n          isActive: customer.status === 'active',\n          totalRolling: parseFloat(customer.total_rolling) || 0,\n          totalWinLoss: parseFloat(customer.total_win_loss) || 0,\n          totalBuyIn: parseFloat(customer.total_buy_in) || 0,\n          totalBuyOut: parseFloat(customer.total_buy_out) || 0,\n          attachments: customer.attachments || [],\n          isAgent: customer.is_agent || false,\n          rollingPercentage: parseFloat(customer.rolling_percentage) || 1.4,\n          creditLimit: parseFloat(customer.credit_limit) || 0,\n          availableCredit: parseFloat(customer.available_credit) || 0\n        };\n      });\n\n      // Process trips - preserve sharing data from API directly\n      const processedTrips = (Array.isArray(tripsData) ? tripsData : []).map((trip: any) => {\n        return {\n          ...trip,\n          attachments: trip.attachments || []\n        };\n      });\n\n      // Set processed data\n      setAgents(agentsData);\n      setCustomers(processedCustomers);\n      setTrips(processedTrips);\n      setRollingRecords([]);\n      setBuyInOutRecords(transactionsData || []);\n      \n      console.log(`✅ Dashboard data loaded: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips`);\n      \n    } catch (error) {\n      console.error('❌ Error loading dashboard data:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Load data on component mount\n  useEffect(() => {\n    loadData();\n  }, [loadData]);\n\n  // Filter data based on user role\n  const getFilteredData = () => {\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => c.agentId === user.agentId);\n      filteredTrips = trips.filter(t => \n        (t.agents && t.agents.some(agent => agent.agentId === user.agentId)) ||\n        t.agentId === user.agentId\n      );\n    }\n\n    return { filteredCustomers, filteredTrips };\n  };\n\n  const { filteredCustomers, filteredTrips } = getFilteredData();\n\n  // Sorting function for customers\n  const getSortedCustomers = () => {\n    const sorted = [...filteredCustomers].sort((a, b) => {\n      let valueA, valueB;\n      \n      if (sortBy === 'rolling') {\n        valueA = safeNumber(a.totalRolling);\n        valueB = safeNumber(b.totalRolling);\n      } else {\n        valueA = safeNumber(a.totalWinLoss);\n        valueB = safeNumber(b.totalWinLoss);\n      }\n      \n      return sortOrder === 'desc' ? valueB - valueA : valueA - valueB;\n    });\n    \n    // Return all customers, not just top 5\n    return sorted;\n  };\n\n  // Calculate comprehensive metrics from real-time data\n  const calculateMetrics = () => {\n    // Trip-based financial metrics\n    const tripTotalRolling = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalRolling), 0);\n    const tripTotalWinLoss = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.totalWinLoss), 0);\n    const totalRollingCommission = filteredTrips.reduce((sum, trip) => sum + safeNumber(trip.calculatedTotalRolling), 0);\n    const totalExpenses = filteredTrips.reduce((sum, trip) => \n      sum + (trip.expenses || []).reduce((expSum, exp) => expSum + safeNumber(exp.amount), 0), 0\n    );\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    const activeCustomers = filteredCustomers.filter(c => c.isActive).length;\n    const customerTotalWinLoss = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalWinLoss), 0);\n    const customerTotalBuyIn = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyIn), 0);\n    const customerTotalBuyOut = filteredCustomers.reduce((sum, c) => sum + safeNumber(c.totalBuyOut), 0);\n    \n    // Total Rolling from trip_sharing table with currency conversion\n    const tripSharingTotalRolling = trips.reduce((sum, trip) => {\n      const originalValue = safeNumber(trip.sharing?.total_rolling || trip.sharing?.totalRolling);\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`🔍 Trip ${trip.name}:`, {\n        hasSharing: !!trip.sharing,\n        tripCurrency: trip.currency,\n        originalValue,\n        convertedValue,\n        sharingObject: trip.sharing\n      });\n      return sum + convertedValue;\n    }, 0);\n    \n    console.log('📊 Dashboard Total Rolling Summary:', {\n      totalTrips: trips.length,\n      tripsWithSharing: trips.filter(t => t.sharing).length,\n      finalTotalRolling: tripSharingTotalRolling\n    });\n\n    // Agent metrics\n    const totalAgents = agents.length;\n    const activeAgents = agents.filter(a => a.status === 'active').length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'in-progress').length;\n    const plannedTrips = filteredTrips.filter(t => t.status === 'active').length;\n\n    // Calculate metrics from trip_sharing table data (all trips, no filtering)\n    console.log('🔍 Debug trips data for calculations:', trips.length);\n    trips.forEach((trip, index) => {\n      console.log(`Trip ${index + 1} (${trip.name}):`, {\n        hasSharing: !!trip.sharing,\n        sharingKeys: trip.sharing ? Object.keys(trip.sharing) : 'no sharing',\n        sharingData: trip.sharing\n      });\n    });\n    \n    const tripSharingGrossProfit = trips.reduce((sum, trip) => {\n      const originalValue = safeNumber(trip.sharing?.total_win_loss || trip.sharing?.totalWinLoss);\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`Trip ${trip.name}: total_win_loss = ${originalValue} -> ${convertedValue} (${trip.currency} -> ${globalCurrency})`);\n      return sum + convertedValue;\n    }, 0);\n    \n    const tripSharingExpenses = trips.reduce((sum, trip) => {\n      const originalValue = safeNumber(trip.sharing?.total_expenses || trip.sharing?.totalExpenses);\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`Trip ${trip.name}: total_expenses = ${originalValue} -> ${convertedValue} (${trip.currency} -> ${globalCurrency})`);\n      return sum + convertedValue;\n    }, 0);\n    \n    const tripSharingNetProfit = trips.reduce((sum, trip) => {\n      const originalValue = safeNumber(trip.sharing?.company_share || trip.sharing?.companyShare);\n      const convertedValue = convertToGlobalCurrency(originalValue, trip.currency || 'HKD', trip);\n      console.log(`Trip ${trip.name}: company_share = ${originalValue} -> ${convertedValue} (${trip.currency} -> ${globalCurrency})`);\n      return sum + convertedValue;\n    }, 0);\n    \n    console.log('📊 Final calculations:', {\n      tripSharingGrossProfit,\n      tripSharingExpenses, \n      tripSharingNetProfit\n    });\n\n    // House performance calculations (using trip_sharing data)\n    const houseGrossWin = tripSharingGrossProfit;\n    const houseNetWin = houseGrossWin - totalRollingCommission;\n    const houseFinalProfit = tripSharingNetProfit;\n\n    // Performance ratios (using trip_sharing total_rolling)\n    const profitMargin = tripSharingTotalRolling > 0 ? ((houseFinalProfit / tripSharingTotalRolling) * 100) : 0;\n    const expenseRatio = tripSharingTotalRolling > 0 ? ((totalExpenses / tripSharingTotalRolling) * 100) : 0;\n    const commissionRatio = tripSharingTotalRolling > 0 ? ((totalRollingCommission / tripSharingTotalRolling) * 100) : 0;\n\n    // Recent activity metrics\n    const recentRollingRecords = rollingRecords.filter(record => \n      (Date.now() - new Date(record.datetime || record.created_at).getTime()) < 24 * 60 * 60 * 1000\n    ).length;\n\n    const recentBuyInOutRecords = buyInOutRecords.filter(record => \n      (Date.now() - new Date(record.timestamp).getTime()) < 24 * 60 * 60 * 1000\n    ).length;\n\n    return {\n      // Trip metrics\n      tripTotalRolling,\n      tripTotalWinLoss,\n      totalRollingCommission,\n      totalExpenses: tripSharingExpenses,\n      \n      // Customer metrics\n      totalCustomers,\n      activeCustomers,\n      customerTotalRolling: tripSharingTotalRolling, // Use trip_sharing total_rolling\n      customerTotalWinLoss,\n      customerTotalBuyIn,\n      customerTotalBuyOut,\n      \n      // Agent metrics\n      totalAgents,\n      activeAgents,\n      \n      // Trip counts\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      plannedTrips,\n      \n      // House performance\n      houseGrossWin,\n      houseNetWin,\n      houseFinalProfit,\n      \n      // Ratios\n      profitMargin,\n      expenseRatio,\n      commissionRatio,\n      \n      // Activity\n      recentRollingRecords,\n      recentBuyInOutRecords,\n      totalRollingRecords: rollingRecords.length,\n      totalBuyInOutRecords: buyInOutRecords.length\n    };\n  };\n\n  const metrics = calculateMetrics();\n\n  // Filter active trips and use trip_sharing data\n  const activeTrips = filteredTrips.filter(trip => \n    trip.status && trip.status.toLowerCase() === 'active'\n  ).map(trip => {\n    // Use trip_sharing data directly instead of enriching with calculations\n    const tripCustomers = filteredCustomers.filter(c => \n      trip.customers?.some(tc => tc.customerId === c.id)\n    );\n    \n    return {\n      ...trip,\n      customers: tripCustomers\n      // Keep original sharing data from trip_sharing table\n    };\n  });\n\n  const getWinLossStatus = (winLoss: number) => {\n    if (winLoss === 0) {\n      return { text: 'Break Even', icon: Target, color: 'text-gray-600' };\n    } else if (winLoss > 0) {\n      return { text: 'Junket Loss', icon: TrendingDown, color: 'text-red-600' };\n    } else {\n      return { text: 'Junket Profit', icon: Trophy, color: 'text-green-600' };\n    }\n  };\n\n  // Show loading state\n  if (loading) {\n    return (\n      <DSContainer>\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-blue-600 mx-auto\" />\n            <p className={`mt-2 ${typography.small} text-gray-600`}>Loading dashboard data...</p>\n          </div>\n        </div>\n      </DSContainer>\n    );\n  }\n\n  return (\n    <DSContainer>\n\n      {/* Key Performance Metrics - Real-time Customer Data */}\n      <div>\n        <h3 className={`${typography.h3} mb-3 sm:mb-4 px-1 sm:px-0`}>Real-time Financial Overview</h3>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\n          <Card className=\"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-blue-800\">Total Rolling Amount</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-blue-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-xl sm:text-2xl font-bold text-blue-700 break-words\">{currencySymbol}{safeFormatNumber(Math.abs(metrics.customerTotalRolling))}</div>\n              <p className=\"text-xs text-blue-600 mt-1\">\n                From {metrics.totalRollingRecords} rolling records across {metrics.totalCustomers} customers\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className={`bg-gradient-to-r ${metrics.houseGrossWin >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.houseGrossWin >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                Company Gross Profit\n              </CardTitle>\n              {metrics.houseGrossWin >= 0 ? (\n                <Trophy className=\"h-4 w-4 text-green-600\" /> \n              ) : (\n                <TrendingDown className=\"h-4 w-4 text-red-600\" />\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className={`text-xl sm:text-2xl font-bold break-words ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                {currencySymbol}{safeFormatNumber(Math.abs(metrics.houseGrossWin))}\n              </div>\n              <p className={`text-xs mt-1 ${metrics.houseGrossWin >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                From trip sharing win/loss data\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-r from-red-50 to-red-100 border-red-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-red-800\">Expenses</CardTitle>\n              <Receipt className=\"h-4 w-4 text-red-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-red-700\">{currencySymbol}{safeFormatNumber(Math.abs(metrics.totalExpenses))}</div>\n              <p className=\"text-xs text-red-600\">\n                Total operational expenses from trip sharing\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className={`bg-gradient-to-r ${metrics.houseFinalProfit >= 0 ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.houseFinalProfit >= 0 ? 'text-green-800' : 'text-red-800'}`}>\n                Company Net Profit\n              </CardTitle>\n              {metrics.houseFinalProfit >= 0 ? (\n                <Trophy className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <TrendingDown className=\"h-4 w-4 text-red-600\" />\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                {currencySymbol}{safeFormatNumber(Math.abs(metrics.houseFinalProfit))}\n              </div>\n              <p className={`text-xs ${metrics.houseFinalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                Company share from trip sharing\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Secondary Metrics - Operations Overview */}\n      <div>\n        <h3 className={`${typography.h3} mb-3 sm:mb-4 px-1 sm:px-0`}>Operations Overview</h3>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Customers</CardTitle>\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-xl sm:text-2xl font-bold\">{metrics.activeCustomers}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                of {metrics.totalCustomers} total customers\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Active Agents</CardTitle>\n              <UserCheck className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-xl sm:text-2xl font-bold\">{metrics.activeAgents}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                of {metrics.totalAgents} total agents\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Trip Summary</CardTitle>\n              <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-xl sm:text-2xl font-bold\">{metrics.totalTrips}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                {metrics.completedTrips} completed, {metrics.ongoingTrips} ongoing, {metrics.plannedTrips} planned\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Recent Activity</CardTitle>\n              <Activity className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-xl sm:text-2xl font-bold\">{metrics.recentRollingRecords + metrics.recentBuyInOutRecords}</div>\n              <p className=\"text-xs text-muted-foreground\">\n                Transactions in last 24 hours\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Active Trips */}\n      <Card className=\"h-full\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className={typography.h4}>Active Trips</CardTitle>\n          <CardDescription className=\"text-xs sm:text-sm\">\n            Current ongoing trips with real-time performance data\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          {activeTrips.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <MapPin className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-500\">No active trips found</p>\n              <p className=\"text-xs text-gray-400 mt-1\">Active trips will appear here when trips are in progress</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3 sm:space-y-4\">\n              {activeTrips\n                .slice(0, 5) // Show up to 5 trips to match customer performance section\n                .map((trip) => {\n                  // Use trip_sharing data with currency conversion\n                  const originalRolling = trip.sharing?.total_rolling || trip.sharing?.totalRolling || 0;\n                  const originalWinLoss = trip.sharing?.total_win_loss || trip.sharing?.totalWinLoss || 0;\n                  const totalRolling = convertToGlobalCurrency(originalRolling, trip.currency || 'HKD', trip);\n                  const winLoss = convertToGlobalCurrency(originalWinLoss, trip.currency || 'HKD', trip);\n                  \n                  // Calculate progress based on dates\n                  const startDate = trip.date ? new Date(trip.date) : null;\n                  const endDate = startDate ? new Date(startDate.getTime() + 7 * 24 * 60 * 60 * 1000) : null; // Assume 7 days duration\n                  const now = new Date();\n                  let progress = 0;\n                  \n                  if (startDate && endDate) {\n                    const totalDuration = endDate.getTime() - startDate.getTime();\n                    const elapsed = now.getTime() - startDate.getTime();\n                    progress = Math.max(0, Math.min(100, (elapsed / totalDuration) * 100));\n                  }\n                  \n                  return (\n                    <div key={trip.id} className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"flex-shrink-0\">\n                          <DSBadge variant=\"success\">\n                            {trip.status === 'active' ? t('active') : trip.status === 'in-progress' ? t('ongoing') : t('completed')}\n                          </DSBadge>\n                        </div>\n                        <div>\n                          <p className=\"font-medium\">{trip.name || 'Unnamed Trip'}</p>\n                          <p className=\"text-sm text-gray-500 flex items-center\">\n                            <MapPin className=\"h-3 w-3 mr-1\" />\n                            {trip.description || t('unknown_destination')} • {trip.customers?.length || 0} {t('customers')}\n                          </p>\n                          <p className=\"text-xs text-blue-600\">\n                            {t('progress')}: {Math.round(progress)}% • {trip.date ? new Date(trip.date).toLocaleDateString() : 'TBD'}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6 text-right text-xs\">\n                        <div>\n                          <div className=\"text-gray-500\">{t('rolling')}</div>\n                          <div className=\"font-medium text-blue-600\">{currencySymbol}{safeFormatNumber(Math.abs(totalRolling))}</div>\n                        </div>\n                        <div>\n                          <div className=\"text-gray-500\">{t('win_loss')}</div>\n                          <div className={`font-medium ${\n                            winLoss < 0 ? 'text-red-600' : winLoss >= 0 ? 'text-green-600' : 'text-gray-600'\n                          }`}>\n                            {currencySymbol}{safeFormatNumber(Math.abs(winLoss))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })\n              }\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Recent Customer Activity */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0\">\n            <div>\n              <CardTitle className=\"text-base sm:text-lg\">{t('customer_performance')}</CardTitle>\n              <CardDescription className=\"text-xs sm:text-sm\">\n                {t('all_customers_based_on')} {user.role === 'agent' ? 'you manage' : ''} ({filteredCustomers.length} {t('customers')})\n              </CardDescription>\n            </div>\n            <div className=\"flex items-center space-x-2 text-xs sm:text-sm\">\n              <div className=\"flex items-center space-x-1 text-xs sm:text-sm\">\n                <span className=\"text-gray-500 hidden sm:inline\">{t('sort_by')}</span>\n                <button\n                  onClick={() => setSortBy(sortBy === 'rolling' ? 'winloss' : 'rolling')}\n                  className=\"flex items-center space-x-1 px-2 py-1 rounded hover:bg-gray-100 transition-colors text-xs sm:text-sm\"\n                >\n                  <span className=\"font-medium\">\n                    {sortBy === 'rolling' ? t('rolling') : t('win_loss')}\n                  </span>\n                  <ArrowUpDown className=\"h-3 w-3\" />\n                </button>\n              </div>\n              <button\n                onClick={() => setSortOrder(sortOrder === 'desc' ? 'asc' : 'desc')}\n                className=\"flex items-center px-2 py-1 rounded hover:bg-gray-100 transition-colors\"\n                title={`Sort ${sortOrder === 'desc' ? 'ascending' : 'descending'}`}\n              >\n                {sortOrder === 'desc' ? (\n                  <ArrowDown className=\"h-4 w-4 text-gray-600\" />\n                ) : (\n                  <ArrowUp className=\"h-4 w-4 text-gray-600\" />\n                )}\n              </button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {filteredCustomers.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <Users className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\n              <p className=\"text-gray-500\">No customer data found</p>\n              <p className=\"text-xs text-gray-400 mt-1\">Customer performance will appear here once rolling records are created</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3 sm:space-y-4 max-h-96 overflow-y-auto pr-1 sm:pr-2\">\n              {getSortedCustomers().map((customer) => {\n                const indicator = getWinLossStatus(customer.totalWinLoss || 0);\n                const Icon = indicator.icon;\n                const winLoss = customer.totalWinLoss || 0;\n                \n                return (\n                  <div key={customer.id} className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 border rounded-lg hover:bg-gray-50 transition-colors space-y-2 sm:space-y-0\">\n                    <div className=\"flex items-center space-x-3 sm:space-x-4 flex-1\">\n                      <Icon className={`h-4 w-4 sm:h-5 sm:w-5 ${indicator.color} flex-shrink-0`} />\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"font-medium text-sm sm:text-base truncate\">{customer.name}</p>\n                        <p className=\"text-xs sm:text-sm text-gray-500 truncate\">\n                          {t('agent')}: {customer.agentName} • {customer.isActive ? t('active') : t('inactive')}\n                        </p>\n                        <p className=\"text-xs text-purple-600\">\n                          {t('commission_rate')}: {customer.rollingPercentage}%\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6 text-right text-xs\">\n                      <div>\n                        <div className=\"text-gray-500\">{t('rolling')}</div>\n                        <div className=\"font-medium text-blue-600\">HK${safeFormatNumber(Math.abs(customer.totalRolling || 0))}</div>\n                      </div>\n                      <div>\n                        <div className=\"text-gray-500\">{t('win_loss')}</div>\n                        <div className={`font-medium ${\n                          winLoss < 0 ? 'text-red-600' : winLoss > 0 ? 'text-green-600' : 'text-gray-600'\n                        }`}>\n                          HK${safeFormatNumber(Math.abs(winLoss))}\n                        </div>\n                        <div className={`text-xs ${\n                          winLoss < 0 ? 'text-red-500' : winLoss > 0 ? 'text-green-500' : 'text-gray-500'\n                        }`}>\n                          {winLoss < 0 ? t('company_loss') : winLoss > 0 ? t('company_win') : t('break_even')}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </DSContainer>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}