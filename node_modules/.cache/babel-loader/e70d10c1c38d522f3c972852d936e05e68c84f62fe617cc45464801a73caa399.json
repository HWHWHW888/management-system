{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/ErrorHandler.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Button } from './ui/button';\nimport { AlertTriangle, X, Database, RefreshCw } from 'lucide-react';\nimport { db } from '../utils/supabase/supabaseClients';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function ErrorHandler({\n  children\n}) {\n  _s();\n  const [error, setError] = useState('');\n  const [isRetrying, setIsRetrying] = useState(false);\n  const showError = useCallback(message => {\n    setError(message);\n    console.error('ðŸ”´ Application Error:', message);\n  }, []);\n  const clearError = useCallback(() => {\n    setError('');\n  }, []);\n  const retryConnection = async () => {\n    setIsRetrying(true);\n    try {\n      const isHealthy = await db.isHealthy();\n      if (isHealthy) {\n        clearError();\n      } else {\n        setError('Database connection is still unavailable. Please try again later.');\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setError(`Connection retry failed: ${errorMessage}`);\n    } finally {\n      setIsRetrying(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-4 right-4 left-4 md:left-auto md:max-w-md z-50\",\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        className: \"border-red-200 bg-red-50 shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"h-5 w-5 text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(AlertDescription, {\n          className: \"text-red-800 pr-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-start\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-medium mb-1\",\n                children: \"Database Error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 50,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3 flex space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  variant: \"outline\",\n                  onClick: retryConnection,\n                  disabled: isRetrying,\n                  className: \"h-7 px-2 text-xs border-red-300 text-red-700 hover:bg-red-100\",\n                  children: isRetrying ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n                      className: \"w-3 h-3 mr-1 animate-spin\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 62,\n                      columnNumber: 27\n                    }, this), \"Retrying...\"]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(Database, {\n                      className: \"w-3 h-3 mr-1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 67,\n                      columnNumber: 27\n                    }, this), \"Retry\"]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 53,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"sm\",\n                  variant: \"ghost\",\n                  onClick: clearError,\n                  className: \"h-7 px-2 text-xs text-red-700 hover:bg-red-100\",\n                  children: \"Dismiss\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 72,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"ghost\",\n              onClick: clearError,\n              className: \"h-6 w-6 p-0 text-red-500 hover:bg-red-100\",\n              children: /*#__PURE__*/_jsxDEV(X, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), children(showError, clearError)]\n  }, void 0, true);\n}\n_s(ErrorHandler, \"84Gu1sboFfP3sCdI388rwmcDvHk=\");\n_c = ErrorHandler;\nvar _c;\n$RefreshReg$(_c, \"ErrorHandler\");","map":{"version":3,"names":["React","useState","useCallback","Alert","AlertDescription","Button","AlertTriangle","X","Database","RefreshCw","db","jsxDEV","_jsxDEV","Fragment","_Fragment","ErrorHandler","children","_s","error","setError","isRetrying","setIsRetrying","showError","message","console","clearError","retryConnection","isHealthy","errorMessage","Error","className","fileName","_jsxFileName","lineNumber","columnNumber","size","variant","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/ErrorHandler.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Button } from './ui/button';\nimport { AlertTriangle, X, Database, RefreshCw } from 'lucide-react';\nimport { db } from '../utils/supabase/supabaseClients';\n\ninterface ErrorHandlerProps {\n  children: (showError: (message: string) => void, clearError: () => void) => React.ReactNode;\n}\n\nexport function ErrorHandler({ children }: ErrorHandlerProps) {\n  const [error, setError] = useState<string>('');\n  const [isRetrying, setIsRetrying] = useState(false);\n\n  const showError = useCallback((message: string) => {\n    setError(message);\n    console.error('ðŸ”´ Application Error:', message);\n  }, []);\n\n  const clearError = useCallback(() => {\n    setError('');\n  }, []);\n\n  const retryConnection = async () => {\n    setIsRetrying(true);\n    try {\n      const isHealthy = await db.isHealthy();\n      if (isHealthy) {\n        clearError();\n      } else {\n        setError('Database connection is still unavailable. Please try again later.');\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setError(`Connection retry failed: ${errorMessage}`);\n    } finally {\n      setIsRetrying(false);\n    }\n  };\n\n  return (\n    <>\n      {error && (\n        <div className=\"fixed top-4 right-4 left-4 md:left-auto md:max-w-md z-50\">\n          <Alert className=\"border-red-200 bg-red-50 shadow-lg\">\n            <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n            <AlertDescription className=\"text-red-800 pr-8\">\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <p className=\"font-medium mb-1\">Database Error</p>\n                  <p className=\"text-sm\">{error}</p>\n                  <div className=\"mt-3 flex space-x-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={retryConnection}\n                      disabled={isRetrying}\n                      className=\"h-7 px-2 text-xs border-red-300 text-red-700 hover:bg-red-100\"\n                    >\n                      {isRetrying ? (\n                        <>\n                          <RefreshCw className=\"w-3 h-3 mr-1 animate-spin\" />\n                          Retrying...\n                        </>\n                      ) : (\n                        <>\n                          <Database className=\"w-3 h-3 mr-1\" />\n                          Retry\n                        </>\n                      )}\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      onClick={clearError}\n                      className=\"h-7 px-2 text-xs text-red-700 hover:bg-red-100\"\n                    >\n                      Dismiss\n                    </Button>\n                  </div>\n                </div>\n                <Button\n                  size=\"sm\"\n                  variant=\"ghost\"\n                  onClick={clearError}\n                  className=\"h-6 w-6 p-0 text-red-500 hover:bg-red-100\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </AlertDescription>\n          </Alert>\n        </div>\n      )}\n      {children(showError, clearError)}\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}