{"ast":null,"code":"import React,{useState,useCallback}from'react';import{Alert,AlertDescription}from'./ui/alert';import{Button}from'./ui/button';import{AlertTriangle,X,Database,RefreshCw}from'lucide-react';import{db}from'../utils/supabase/supabaseClients';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export function ErrorHandler(_ref){let{children}=_ref;const[error,setError]=useState('');const[isRetrying,setIsRetrying]=useState(false);const showError=useCallback(message=>{setError(message);console.error('ðŸ”´ Application Error:',message);},[]);const clearError=useCallback(()=>{setError('');},[]);const retryConnection=async()=>{setIsRetrying(true);try{const isHealthy=await db.isHealthy();if(isHealthy){clearError();}else{setError('Database connection is still unavailable. Please try again later.');}}catch(error){const errorMessage=error instanceof Error?error.message:'Unknown error occurred';setError(\"Connection retry failed: \".concat(errorMessage));}finally{setIsRetrying(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 right-4 left-4 md:left-auto md:max-w-md z-50\",children:/*#__PURE__*/_jsxs(Alert,{className:\"border-red-200 bg-red-50 shadow-lg\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 text-red-500\"}),/*#__PURE__*/_jsx(AlertDescription,{className:\"text-red-800 pr-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium mb-1\",children:\"Database Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex space-x-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",onClick:retryConnection,disabled:isRetrying,className:\"h-7 px-2 text-xs border-red-300 text-red-700 hover:bg-red-100\",children:isRetrying?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-3 h-3 mr-1 animate-spin\"}),\"Retrying...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Database,{className:\"w-3 h-3 mr-1\"}),\"Retry\"]})}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:clearError,className:\"h-7 px-2 text-xs text-red-700 hover:bg-red-100\",children:\"Dismiss\"})]})]}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"ghost\",onClick:clearError,className:\"h-6 w-6 p-0 text-red-500 hover:bg-red-100\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]})})]})}),children(showError,clearError)]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}