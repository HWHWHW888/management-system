{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Reports.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ComposedChart, Area } from 'recharts';\nimport { TrendingDown, Users, DollarSign, Activity, RefreshCw, Download, BarChart3, AlertTriangle, Percent, Trophy, ArrowUpDown, ChevronDown, ChevronRight, ArrowUp, ArrowDown } from 'lucide-react';\nimport { tokenManager } from '../utils/auth/tokenManager';\nimport { useLanguage } from '../contexts/LanguageContext';\nimport { useCurrency } from '../contexts/CurrencyContext';\nimport { SUPPORTED_CURRENCIES, convertAmount, getCurrencySymbol } from '../utils/currency';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { Button } from './ui/button';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Badge } from './ui/badge';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Real-time refresh interval (30 seconds)\nconst REAL_TIME_REFRESH_INTERVAL = 30000;\nexport const Reports = ({\n  user\n}) => {\n  _s();\n  const {\n    t\n  } = useLanguage();\n  const {\n    globalCurrency,\n    formatGlobalCurrency,\n    convertToGlobalCurrency,\n    currencySymbol\n  } = useCurrency();\n\n  // State management\n  const [customers, setCustomers] = useState([]);\n  const [agents, setAgents] = useState([]);\n  const [trips, setTrips] = useState([]);\n  const [rollingRecords, setRollingRecords] = useState([]);\n  const [transactionRecords, setTransactionRecords] = useState([]);\n\n  // UI state\n  const [selectedAgent, setSelectedAgent] = useState('all');\n  const [dateRange, setDateRange] = useState('30');\n  const [reportType, setReportType] = useState('overview'); // overview, financial, customer, agent, operational\n\n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n  const isRealTimeEnabled = true; // Real-time updates always enabled\n  const [expandedAgents, setExpandedAgents] = useState(new Set());\n  const [hierarchySortBy, setHierarchySortBy] = useState('totalRolling');\n  const [hierarchySortOrder, setHierarchySortOrder] = useState('desc');\n\n  // Helper functions\n  const safeFormatNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n  const safeNumber = value => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Real-time data loading from backend API with trip_sharing data\n  const loadRealTimeReportsData = useCallback(async () => {\n    try {\n      setErrorMessage('');\n      console.log('📊 Loading real-time reports data from backend API...');\n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n      const token = await tokenManager.getToken();\n      console.log('🔍 API Connection Debug:', {\n        API_URL,\n        hasToken: !!token,\n        tokenLength: (token === null || token === void 0 ? void 0 : token.length) || 0\n      });\n      if (!token) {\n        throw new Error('No authentication token found. Please log in again.');\n      }\n\n      // Add cache-busting parameter to force fresh data\n      const cacheBuster = `?_t=${Date.now()}`;\n\n      // Load all required data from backend API in parallel\n      const [agentsResponse, customersResponse, tripsResponse, rollingRecordsResponse, transactionsResponse] = await Promise.all([fetch(`${API_URL}/agents${cacheBuster}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      }), fetch(`${API_URL}/customers${cacheBuster}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      }), fetch(`${API_URL}/trips${cacheBuster}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      }), fetch(`${API_URL}/rolling-records${cacheBuster}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      }), fetch(`${API_URL}/transactions${cacheBuster}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      })]);\n      if (!agentsResponse.ok || !customersResponse.ok || !tripsResponse.ok || !rollingRecordsResponse.ok || !transactionsResponse.ok) {\n        console.error('❌ API Request Failed:', {\n          agents: {\n            ok: agentsResponse.ok,\n            status: agentsResponse.status,\n            statusText: agentsResponse.statusText\n          },\n          customers: {\n            ok: customersResponse.ok,\n            status: customersResponse.status,\n            statusText: customersResponse.statusText\n          },\n          trips: {\n            ok: tripsResponse.ok,\n            status: tripsResponse.status,\n            statusText: tripsResponse.statusText\n          },\n          rollingRecords: {\n            ok: rollingRecordsResponse.ok,\n            status: rollingRecordsResponse.status,\n            statusText: rollingRecordsResponse.statusText\n          },\n          transactions: {\n            ok: transactionsResponse.ok,\n            status: transactionsResponse.status,\n            statusText: transactionsResponse.statusText\n          }\n        });\n\n        // Try to get error details\n        try {\n          const agentsError = await agentsResponse.text();\n          console.error('Agents API Error:', agentsError);\n        } catch (e) {\n          console.error('Could not read agents error response');\n        }\n        throw new Error(`Failed to fetch data from backend API. Status codes: agents=${agentsResponse.status}, customers=${customersResponse.status}, trips=${tripsResponse.status}, rolling=${rollingRecordsResponse.status}, transactions=${transactionsResponse.status}`);\n      }\n      const [agentsResult, customersResult, tripsResult, rollingRecordsResult, transactionsResult] = await Promise.all([agentsResponse.json(), customersResponse.json(), tripsResponse.json(), rollingRecordsResponse.json(), transactionsResponse.json()]);\n      console.log('🔍 API Response Debug:', {\n        agentsResponse: {\n          ok: agentsResponse.ok,\n          status: agentsResponse.status\n        },\n        customersResponse: {\n          ok: customersResponse.ok,\n          status: customersResponse.status\n        },\n        tripsResponse: {\n          ok: tripsResponse.ok,\n          status: tripsResponse.status\n        },\n        rollingRecordsResponse: {\n          ok: rollingRecordsResponse.ok,\n          status: rollingRecordsResponse.status\n        },\n        transactionsResponse: {\n          ok: transactionsResponse.ok,\n          status: transactionsResponse.status\n        }\n      });\n      console.log('🔍 API Data Debug:', {\n        agentsResult,\n        customersResult,\n        tripsResult,\n        rollingRecordsResult,\n        transactionsResult\n      });\n      const agentsData = agentsResult.data || [];\n      const customersData = customersResult.data || [];\n      const tripsData = tripsResult.data || []; // This includes trip_sharing data\n      const rollingRecordsData = rollingRecordsResult.data || [];\n      const transactionRecordsData = transactionsResult.data || [];\n      console.log('🔍 Extracted Data Counts:', {\n        agentsData: agentsData.length,\n        customersData: customersData.length,\n        tripsData: tripsData.length,\n        rollingRecordsData: rollingRecordsData.length,\n        transactionRecordsData: transactionRecordsData.length\n      });\n\n      // Debug agent data structure\n      console.log('🔍 All Agent Data:', {\n        totalAgents: agentsData.length,\n        agents: agentsData.map(a => ({\n          id: a.id,\n          name: a.name,\n          status: a.status\n        }))\n      });\n      console.log('🔍 Sample Agent Data:', {\n        agents: agentsData.slice(0, 3).map(a => ({\n          id: a.id,\n          name: a.name,\n          status: a.status\n        })),\n        customers: customersData.slice(0, 3).map(c => ({\n          id: c.id,\n          name: c.name,\n          agentId: c.agentId,\n          agent_id: c.agent_id\n        })),\n        trips: tripsData.slice(0, 2).map(t => ({\n          id: t.id,\n          name: t.name,\n          agentId: t.agentId,\n          agents: t.agents\n        }))\n      });\n      console.log('📊 Loaded transaction data:');\n      console.log('  - Rolling records:', rollingRecordsData.length);\n      console.log('  - Transaction records:', transactionRecordsData.length);\n\n      // Process customers with data from backend (already includes totals)\n      const processedCustomers = customersData.map(customer => {\n        if (customersData.indexOf(customer) < 3) {\n          // Debug first 3 customers\n          console.log('👤 Processing Customer (Full Object):', customer);\n          console.log('👤 Processing Customer (Key Fields):', {\n            id: customer.id,\n            name: customer.name,\n            totalRolling: customer.totalRolling,\n            total_rolling: customer.total_rolling,\n            totalWinLoss: customer.totalWinLoss,\n            total_win_loss: customer.total_win_loss,\n            agentId: customer.agentId,\n            agent_id: customer.agent_id\n          });\n        }\n        return {\n          ...customer,\n          agentId: customer.agentId || customer.agent_id || null,\n          totalRolling: customer.totalRolling || customer.total_rolling || 0,\n          totalWinLoss: customer.totalWinLoss || customer.total_win_loss || 0,\n          totalBuyIn: customer.totalBuyIn || customer.total_buy_in || 0,\n          totalBuyOut: customer.totalBuyOut || customer.total_buy_out || 0,\n          attachments: customer.attachments || [],\n          isAgent: customer.isAgent || customer.is_agent || false,\n          rollingPercentage: customer.rollingPercentage || customer.rolling_percentage || 1.4,\n          creditLimit: customer.creditLimit || customer.credit_limit || 0,\n          availableCredit: customer.availableCredit || customer.available_credit || 0\n        };\n      });\n\n      // Process trips with trip_sharing data from backend API\n      const processedTrips = tripsData.map(trip => {\n        if (tripsData.indexOf(trip) < 2) {\n          // Debug first 2 trips\n          console.log('🚗 Processing Trip (Full Object):', trip);\n          console.log('🚗 Processing Trip (Key Fields):', {\n            id: trip.id,\n            name: trip.name,\n            sharing: trip.sharing,\n            hasSharing: !!trip.sharing,\n            totalRolling: trip.totalRolling,\n            total_rolling: trip.total_rolling\n          });\n        }\n\n        // Use trip_sharing data from backend API (now in camelCase)\n        const sharing = trip.sharing || {\n          totalWinLoss: 0,\n          totalExpenses: 0,\n          totalRollingCommission: 0,\n          totalBuyIn: 0,\n          totalBuyOut: 0,\n          netCashFlow: 0,\n          netResult: 0,\n          totalAgentShare: 0,\n          companyShare: 0,\n          agentSharePercentage: 0,\n          companySharePercentage: 100,\n          agentBreakdown: []\n        };\n\n        // Use actual total rolling from trip_sharing data instead of reverse calculation\n        const totalRolling = (sharing === null || sharing === void 0 ? void 0 : sharing.totalRolling) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_rolling) || 0;\n        return {\n          ...trip,\n          totalRolling: totalRolling,\n          totalWinLoss: (sharing === null || sharing === void 0 ? void 0 : sharing.totalWinLoss) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_win_loss) || 0,\n          totalBuyIn: (sharing === null || sharing === void 0 ? void 0 : sharing.totalBuyIn) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_buy_in) || 0,\n          totalBuyOut: (sharing === null || sharing === void 0 ? void 0 : sharing.totalBuyOut) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_buy_out) || 0,\n          calculatedTotalRolling: (sharing === null || sharing === void 0 ? void 0 : sharing.totalRollingCommission) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_rolling_commission) || 0,\n          attachments: trip.attachments || [],\n          sharing: {\n            totalWinLoss: (sharing === null || sharing === void 0 ? void 0 : sharing.totalWinLoss) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_win_loss) || 0,\n            totalExpenses: (sharing === null || sharing === void 0 ? void 0 : sharing.totalExpenses) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_expenses) || 0,\n            totalRollingCommission: (sharing === null || sharing === void 0 ? void 0 : sharing.totalRollingCommission) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_rolling_commission) || 0,\n            totalBuyIn: (sharing === null || sharing === void 0 ? void 0 : sharing.totalBuyIn) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_buy_in) || 0,\n            totalBuyOut: (sharing === null || sharing === void 0 ? void 0 : sharing.totalBuyOut) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_buy_out) || 0,\n            netCashFlow: (sharing === null || sharing === void 0 ? void 0 : sharing.netCashFlow) || (sharing === null || sharing === void 0 ? void 0 : sharing.net_cash_flow) || 0,\n            netResult: (sharing === null || sharing === void 0 ? void 0 : sharing.netResult) || (sharing === null || sharing === void 0 ? void 0 : sharing.net_result) || 0,\n            totalAgentShare: (sharing === null || sharing === void 0 ? void 0 : sharing.totalAgentShare) || (sharing === null || sharing === void 0 ? void 0 : sharing.total_agent_share) || 0,\n            companyShare: (sharing === null || sharing === void 0 ? void 0 : sharing.companyShare) || (sharing === null || sharing === void 0 ? void 0 : sharing.company_share) || 0,\n            agentSharePercentage: (sharing === null || sharing === void 0 ? void 0 : sharing.agentSharePercentage) || (sharing === null || sharing === void 0 ? void 0 : sharing.agent_share_percentage) || 0,\n            companySharePercentage: (sharing === null || sharing === void 0 ? void 0 : sharing.companySharePercentage) || (sharing === null || sharing === void 0 ? void 0 : sharing.company_share_percentage) || 100,\n            agentBreakdown: (sharing === null || sharing === void 0 ? void 0 : sharing.agentBreakdown) || (sharing === null || sharing === void 0 ? void 0 : sharing.agent_breakdown) || []\n          }\n        };\n      });\n\n      // Set processed data\n      setAgents(agentsData);\n      setCustomers(processedCustomers);\n      setTrips(processedTrips);\n      setRollingRecords(rollingRecordsData);\n      setTransactionRecords(transactionRecordsData);\n      console.log(`✅ Real-time reports data loaded from backend API: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips with trip_sharing data`);\n    } catch (error) {\n      console.error('❌ Error loading real-time reports data:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setErrorMessage(`Failed to load reports data: ${errorMessage}`);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Real-time data sync with automatic refresh\n  useEffect(() => {\n    loadRealTimeReportsData();\n\n    // Set up real-time refresh interval\n    let refreshInterval;\n    if (isRealTimeEnabled) {\n      refreshInterval = setInterval(() => {\n        console.log('📊 Real-time reports refresh triggered');\n        loadRealTimeReportsData();\n      }, REAL_TIME_REFRESH_INTERVAL);\n    }\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, [loadRealTimeReportsData, isRealTimeEnabled]);\n\n  // Reload data when date range changes\n  useEffect(() => {\n    console.log('📅 Date range changed to:', dateRange, 'days');\n    loadRealTimeReportsData();\n  }, [dateRange, loadRealTimeReportsData]);\n\n  // Filter data based on user role and filters\n  const getFilteredData = () => {\n    console.log('🔍 Original Data Counts:', {\n      customers: customers.length,\n      trips: trips.length,\n      rollingRecords: rollingRecords.length,\n      transactionRecords: transactionRecords.length,\n      agents: agents.length,\n      userRole: user.role,\n      selectedAgent,\n      dateRange\n    });\n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n    let filteredRollingRecords = rollingRecords;\n    let filteredTransactionRecords = transactionRecords;\n\n    // Apply user role filter\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => {\n        const agentId = c.agentId || c.agent_id;\n        return agentId === user.agentId;\n      });\n      filteredTrips = trips.filter(t => t.agents && t.agents.some(agent => agent.agentId === user.agentId) || t.agentId === user.agentId);\n    } else if (user.role === 'staff' && user.staffId) {\n      // Staff can only see trips they are assigned to\n      filteredTrips = trips.filter(t => t.staffId === user.staffId);\n      // Filter customers based on trips\n      const tripCustomerIds = Array.from(new Set(filteredTrips.flatMap(t => {\n        var _t$customers;\n        return ((_t$customers = t.customers) === null || _t$customers === void 0 ? void 0 : _t$customers.map(tc => tc.customerId)) || [];\n      })));\n      filteredCustomers = customers.filter(c => tripCustomerIds.includes(c.id));\n    }\n\n    // Apply agent filter (admin only)\n    if (user.role === 'admin' && selectedAgent !== 'all') {\n      console.log('🎯 Agent Filter Applied:', {\n        selectedAgent,\n        beforeFilter: {\n          customers: filteredCustomers.length,\n          trips: filteredTrips.length,\n          rollingRecords: filteredRollingRecords.length,\n          transactionRecords: filteredTransactionRecords.length\n        }\n      });\n\n      // Debug customer filtering\n      const customersBeforeAgentFilter = filteredCustomers.length;\n      filteredCustomers = filteredCustomers.filter(c => {\n        // Try both possible field names for agent ID\n        const agentId = c.agentId || c.agent_id;\n        return agentId === selectedAgent;\n      });\n      console.log('👥 Customer Filter:', {\n        selectedAgent,\n        customersBeforeFilter: customersBeforeAgentFilter,\n        customersAfterFilter: filteredCustomers.length,\n        sampleCustomers: customers.slice(0, 3).map(c => ({\n          id: c.id,\n          name: c.name,\n          agentId: c.agentId,\n          agent_id: c.agent_id,\n          matchesSelected: (c.agentId || c.agent_id) === selectedAgent\n        }))\n      });\n\n      // Debug trip filtering\n      const tripsBeforeAgentFilter = filteredTrips.length;\n      filteredTrips = filteredTrips.filter(t => {\n        const hasAgentInAgents = t.agents && t.agents.some(agent => agent.agentId === selectedAgent);\n        const hasDirectAgentId = t.agentId === selectedAgent;\n        const shouldInclude = hasAgentInAgents || hasDirectAgentId;\n        if (filteredTrips.indexOf(t) < 3) {\n          // Debug first 3 trips\n          console.log(`🚗 Trip ${t.name || t.id}:`, {\n            agentId: t.agentId,\n            agents: t.agents,\n            hasAgentInAgents,\n            hasDirectAgentId,\n            shouldInclude\n          });\n        }\n        return shouldInclude;\n      });\n      console.log('🚗 Trip Filter:', {\n        selectedAgent,\n        tripsBeforeFilter: tripsBeforeAgentFilter,\n        tripsAfterFilter: filteredTrips.length\n      });\n      filteredRollingRecords = filteredRollingRecords.filter(r => {\n        // Try both possible field names for agent ID\n        const agentId = r.agentId || r.agent_id;\n        return agentId === selectedAgent;\n      });\n      filteredTransactionRecords = filteredTransactionRecords.filter(b => {\n        const customer = customers.find(c => c.id === b.customerId);\n        // Try both possible field names for agent ID\n        const customerAgentId = (customer === null || customer === void 0 ? void 0 : customer.agentId) || (customer === null || customer === void 0 ? void 0 : customer.agent_id);\n        return customerAgentId === selectedAgent;\n      });\n      console.log('📊 After Agent Filter:', {\n        customers: filteredCustomers.length,\n        trips: filteredTrips.length,\n        rollingRecords: filteredRollingRecords.length,\n        transactionRecords: filteredTransactionRecords.length\n      });\n    }\n\n    // Apply role-based filtering for transaction records\n    if (user.role === 'agent' && user.agentId) {\n      filteredRollingRecords = filteredRollingRecords.filter(r => {\n        const agentId = r.agentId || r.agent_id;\n        return agentId === user.agentId;\n      });\n      filteredTransactionRecords = filteredTransactionRecords.filter(b => {\n        const customer = customers.find(c => c.id === b.customerId);\n        const customerAgentId = (customer === null || customer === void 0 ? void 0 : customer.agentId) || (customer === null || customer === void 0 ? void 0 : customer.agent_id);\n        return customerAgentId === user.agentId;\n      });\n    } else if (user.role === 'staff' && user.staffId) {\n      // Staff can see records from their assigned trips\n      const staffTripIds = filteredTrips.map(t => t.id);\n      filteredRollingRecords = filteredRollingRecords.filter(r => r.tripId && staffTripIds.includes(r.tripId));\n      filteredTransactionRecords = filteredTransactionRecords.filter(b => b.tripId && staffTripIds.includes(b.tripId));\n    }\n\n    // Apply date range filter\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - parseInt(dateRange));\n    console.log('🔍 Date Filter Debug:', {\n      dateRange,\n      cutoffDate: cutoffDate.toISOString(),\n      customersBeforeFilter: filteredCustomers.length,\n      tripsBeforeFilter: filteredTrips.length,\n      rollingRecordsBeforeFilter: filteredRollingRecords.length,\n      transactionRecordsBeforeFilter: filteredTransactionRecords.length\n    });\n\n    // Filter trips by date range\n    filteredTrips = filteredTrips.filter(t => {\n      const tripDate = t.date || t.start_date || t.created_at;\n      if (!tripDate) return false;\n      const date = new Date(tripDate);\n      return !isNaN(date.getTime()) && date >= cutoffDate;\n    });\n\n    // Filter rolling records by date range\n    filteredRollingRecords = filteredRollingRecords.filter(r => {\n      const recordDate = r.date || r.created_at;\n      if (!recordDate) return false;\n      const date = new Date(recordDate);\n      return !isNaN(date.getTime()) && date >= cutoffDate;\n    });\n\n    // Filter transaction records by date range\n    filteredTransactionRecords = filteredTransactionRecords.filter(t => {\n      const transactionDate = t.date || t.created_at;\n      if (!transactionDate) return false;\n      const date = new Date(transactionDate);\n      return !isNaN(date.getTime()) && date >= cutoffDate;\n    });\n    console.log('🔍 After Date Filter:', {\n      tripsAfterFilter: filteredTrips.length,\n      rollingRecordsAfterFilter: filteredRollingRecords.length,\n      transactionRecordsAfterFilter: filteredTransactionRecords.length\n    });\n    return {\n      filteredCustomers,\n      filteredTrips,\n      filteredRollingRecords,\n      filteredTransactionRecords\n    };\n  };\n  const {\n    filteredCustomers,\n    filteredTrips,\n    filteredRollingRecords,\n    filteredTransactionRecords\n  } = getFilteredData();\n\n  // Calculate comprehensive metrics from trip_sharing data\n  const calculateMetrics = () => {\n    var _filteredTrips$, _filteredTrips$2, _filteredTrips$3;\n    console.log('💰 Calculating Metrics from Filtered Trips:', {\n      filteredTripsCount: filteredTrips.length,\n      sampleTrip: filteredTrips[0] ? {\n        id: filteredTrips[0].id,\n        name: filteredTrips[0].name,\n        totalRolling: filteredTrips[0].totalRolling,\n        total_rolling: filteredTrips[0].total_rolling,\n        totalWinLoss: filteredTrips[0].totalWinLoss,\n        total_win_loss: filteredTrips[0].total_win_loss,\n        sharing: filteredTrips[0].sharing\n      } : 'No trips available'\n    });\n\n    // Calculate aggregated metrics from filtered trips - try multiple field name formats\n    // Calculate totals from filtered records for the selected time period\n    // This ensures metrics reflect the selected date range, not all-time totals\n\n    // Calculate total rolling from trip_sharing data (aggregated and accurate)\n    // This matches the data shown in trip management and ensures consistency\n    console.log('🔍 DEBUG: Checking filteredTrips for sharing data:', {\n      filteredTripsCount: filteredTrips.length,\n      firstTripSharing: (_filteredTrips$ = filteredTrips[0]) === null || _filteredTrips$ === void 0 ? void 0 : _filteredTrips$.sharing,\n      firstTripSharingKeys: (_filteredTrips$2 = filteredTrips[0]) !== null && _filteredTrips$2 !== void 0 && _filteredTrips$2.sharing ? Object.keys(filteredTrips[0].sharing) : 'No sharing data',\n      allSharingFields: (_filteredTrips$3 = filteredTrips[0]) === null || _filteredTrips$3 === void 0 ? void 0 : _filteredTrips$3.sharing\n    });\n\n    // Helper function to convert amount from trip currency to display currency\n    const convertToDisplayCurrency = (amount, trip) => {\n      if (!amount || amount === 0) return 0;\n      const tripCurrency = trip.currency || 'HKD';\n      if (tripCurrency === displayCurrency) return amount;\n\n      // Convert using trip's exchange rates\n      return convertAmount(amount, tripCurrency, displayCurrency, trip);\n    };\n    const totalRolling = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing, _trip$sharing2, _trip$sharing3;\n      // Try direct field access first\n      let rolling = ((_trip$sharing = trip.sharing) === null || _trip$sharing === void 0 ? void 0 : _trip$sharing.totalRolling) || ((_trip$sharing2 = trip.sharing) === null || _trip$sharing2 === void 0 ? void 0 : _trip$sharing2.total_rolling) || 0;\n\n      // If still 0, try to calculate from commission (assuming 1.4% rate)\n      if (rolling === 0 && (_trip$sharing3 = trip.sharing) !== null && _trip$sharing3 !== void 0 && _trip$sharing3.totalRollingCommission) {\n        rolling = trip.sharing.totalRollingCommission / 0.014; // Reverse calculate from commission\n      }\n\n      // Last resort: search for any rolling-related field\n      if (rolling === 0 && trip.sharing) {\n        const rollingField = Object.keys(trip.sharing).find(key => key.toLowerCase().includes('rolling') && typeof trip.sharing[key] === 'number' && trip.sharing[key] > 0);\n        if (rollingField) {\n          rolling = trip.sharing[rollingField];\n        }\n      }\n\n      // Convert to display currency\n      const convertedRolling = convertToDisplayCurrency(rolling, trip);\n      console.log('🔍 Trip rolling calculation:', {\n        tripName: trip.trip_name || trip.name,\n        tripCurrency: trip.currency,\n        displayCurrency: displayCurrency,\n        originalRolling: rolling,\n        convertedRolling: convertedRolling,\n        hasSharing: !!trip.sharing,\n        sharingKeys: trip.sharing ? Object.keys(trip.sharing) : []\n      });\n      return sum + convertedRolling;\n    }, 0);\n\n    // Alternative: from individual rolling records (may be incomplete)\n    const totalRollingFromRecords = filteredRollingRecords.reduce((sum, record) => {\n      const rolling = record.rolling_amount || record.rollingAmount || 0;\n      return sum + rolling;\n    }, 0);\n    const totalBuyIn = filteredTransactionRecords.filter(t => t.transaction_type === 'buy-in' || t.transactionType === 'buy-in').reduce((sum, record) => {\n      const amount = record.amount || 0;\n      return sum + amount;\n    }, 0);\n    const totalBuyOut = filteredTransactionRecords.filter(t => t.transaction_type === 'buy-out' || t.transactionType === 'buy-out').reduce((sum, record) => {\n      const amount = record.amount || 0;\n      return sum + amount;\n    }, 0);\n\n    // Calculate win/loss from buy-in minus buy-out for the time period\n    const totalWinLoss = totalBuyIn - totalBuyOut;\n    console.log('💰 Total Rolling Data Source Comparison:', {\n      totalRollingFromTripSharing: totalRolling,\n      totalRollingFromRecords: totalRollingFromRecords,\n      difference: totalRolling - totalRollingFromRecords,\n      filteredTripsCount: filteredTrips.length,\n      filteredRollingRecordsCount: filteredRollingRecords.length,\n      dateRange: `${dateRange} days`,\n      tripSharingData: filteredTrips.map(t => {\n        var _t$sharing, _t$sharing2, _t$sharing3, _t$sharing4;\n        return {\n          trip_name: t.trip_name || t.name,\n          total_rolling: ((_t$sharing = t.sharing) === null || _t$sharing === void 0 ? void 0 : _t$sharing.totalRolling) || ((_t$sharing2 = t.sharing) === null || _t$sharing2 === void 0 ? void 0 : _t$sharing2.total_rolling),\n          start_date: t.start_date || t.startDate,\n          sharing_exists: !!t.sharing,\n          totalRolling_value: (_t$sharing3 = t.sharing) === null || _t$sharing3 === void 0 ? void 0 : _t$sharing3.totalRolling,\n          total_rolling_value: (_t$sharing4 = t.sharing) === null || _t$sharing4 === void 0 ? void 0 : _t$sharing4.total_rolling\n        };\n      })\n    });\n    console.log('💰 Calculated Totals from Filtered Data (Time Period):', {\n      totalWinLoss,\n      totalRolling,\n      totalBuyIn,\n      totalBuyOut,\n      dateRange: `${dateRange} days`,\n      filteredTransactionRecordsCount: filteredTransactionRecords.length,\n      filteredCustomersCount: filteredCustomers.length\n    });\n\n    // Calculate company profit/loss from trip_sharing data\n    const companyProfitLoss = filteredTrips.reduce((sum, trip) => {\n      var _trip$sharing4;\n      return sum + (((_trip$sharing4 = trip.sharing) === null || _trip$sharing4 === void 0 ? void 0 : _trip$sharing4.companyShare) || 0);\n    }, 0);\n    const isCompanyProfitable = companyProfitLoss > 0;\n\n    // Company totals from trip_sharing data - using correct field names\n    const companyTotalRolling = filteredTrips.reduce((sum, t) => {\n      var _t$sharing5;\n      return sum + safeNumber((_t$sharing5 = t.sharing) === null || _t$sharing5 === void 0 ? void 0 : _t$sharing5.total_rolling);\n    }, 0); // trip_sharing.total_rolling\n    const companyTotalWinLoss = filteredTrips.reduce((sum, t) => {\n      var _t$sharing6;\n      return sum + safeNumber((_t$sharing6 = t.sharing) === null || _t$sharing6 === void 0 ? void 0 : _t$sharing6.total_win_loss);\n    }, 0); // trip_sharing.total_win_loss\n    // const companyTotalBuyIn = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.totalBuyIn), 0);\n    // const companyTotalBuyOut = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.totalBuyOut), 0);\n    const companyTotalExpenses = filteredTrips.reduce((sum, t) => {\n      var _t$sharing7;\n      return sum + safeNumber((_t$sharing7 = t.sharing) === null || _t$sharing7 === void 0 ? void 0 : _t$sharing7.totalExpenses);\n    }, 0);\n    const companyNetResult = filteredTrips.reduce((sum, t) => {\n      var _t$sharing8;\n      return sum + safeNumber((_t$sharing8 = t.sharing) === null || _t$sharing8 === void 0 ? void 0 : _t$sharing8.netResult);\n    }, 0);\n    const companyShare = filteredTrips.reduce((sum, t) => {\n      var _t$sharing9;\n      return sum + safeNumber((_t$sharing9 = t.sharing) === null || _t$sharing9 === void 0 ? void 0 : _t$sharing9.companyShare);\n    }, 0); // trip_sharing.companyShare\n    // Try multiple field name formats for commission\n    const totalRollingCommission = filteredTrips.reduce((sum, t) => {\n      var _t$sharing0, _t$sharing1;\n      const commission = ((_t$sharing0 = t.sharing) === null || _t$sharing0 === void 0 ? void 0 : _t$sharing0.total_rolling_commission) || ((_t$sharing1 = t.sharing) === null || _t$sharing1 === void 0 ? void 0 : _t$sharing1.totalRollingCommission) || 0;\n      if (filteredTrips.indexOf(t) < 2) {\n        var _t$sharing10, _t$sharing11;\n        // Debug first 2 trips\n        console.log(`💰 Trip ${t.name || t.id} Commission:`, {\n          sharing: t.sharing,\n          total_rolling_commission: (_t$sharing10 = t.sharing) === null || _t$sharing10 === void 0 ? void 0 : _t$sharing10.total_rolling_commission,\n          totalRollingCommission: (_t$sharing11 = t.sharing) === null || _t$sharing11 === void 0 ? void 0 : _t$sharing11.totalRollingCommission,\n          commission\n        });\n      }\n      return sum + safeNumber(commission);\n    }, 0);\n    console.log('💰 Final Commission Total:', totalRollingCommission);\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    // Active customers = customers who have rolling amount (check multiple field names)\n    const activeCustomers = filteredCustomers.filter(c => {\n      const rolling = c.totalRolling || c.total_rolling || 0;\n      return rolling > 0;\n    }).length;\n\n    // Trip totals for display\n    const tripTotalRolling = filteredTrips.reduce((sum, t) => sum + safeNumber(t.totalRolling), 0);\n    const tripTotalWinLoss = filteredTrips.reduce((sum, t) => sum + safeNumber(t.totalWinLoss), 0);\n    const totalExpenses = companyTotalExpenses;\n\n    // House performance from company perspective (trip_sharing data)\n    // const houseGrossWin = Math.abs(companyTotalWinLoss); // Always show absolute value\n    const houseNetWin = Math.abs(companyNetResult - totalExpenses); // Company net after expenses\n    const houseFinalProfit = Math.abs(companyShare); // Final company share\n\n    // 🔍 DEBUG: Log calculated aggregated metrics\n    console.group('📊 Calculated Aggregated Metrics');\n    console.log('💰 Total Win/Loss:', totalWinLoss);\n    console.log('🎲 Total Rolling:', totalRolling);\n    console.log('💵 Total Buy-In:', totalBuyIn);\n    console.log('💸 Total Buy-Out:', totalBuyOut);\n    console.log('🏢 Company Profit/Loss:', companyProfitLoss);\n    console.log('📈 Is Company Profitable:', isCompanyProfitable);\n    console.log('🔢 Filtered Trips Count:', filteredTrips.length);\n    console.groupEnd();\n    console.log('🔍 Company Total Win/Loss (from sharing):', companyTotalWinLoss);\n    console.log('🔍 Total Rolling Commission (from sharing):', totalRollingCommission);\n    console.log('🔍 Active Customers (with rolling):', activeCustomers);\n    console.log('🔍 Total Customers:', totalCustomers);\n    console.groupEnd();\n\n    // Agent metrics\n    const totalAgents = agents.length;\n    const activeAgents = agents.filter(a => a.status === 'active').length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter(t => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter(t => t.status === 'in-progress').length;\n\n    // Performance ratios\n    const profitMargin = companyTotalRolling > 0 ? houseFinalProfit / companyTotalRolling * 100 : 0;\n    const averageRollingPercentage = filteredCustomers.length > 0 ? filteredCustomers.reduce((sum, c) => sum + c.rollingPercentage, 0) / filteredCustomers.length : 1.4;\n\n    // Add debug logging for trip_sharing commission data\n    console.log('🔍 Trip Sharing Commission Debug:');\n    filteredTrips.forEach((trip, i) => {\n      const sharing = trip.sharing || {};\n      console.log(`  Trip ${i + 1} (${trip.name || trip.id}):`, {\n        total_rolling_commission: sharing.total_rolling_commission,\n        totalRollingCommission: sharing.totalRollingCommission,\n        total_rolling: sharing.total_rolling,\n        totalRolling: sharing.totalRolling,\n        companyShare: sharing.companyShare,\n        company_share: sharing.company_share\n      });\n    });\n\n    // Add debug logging for final metrics\n    console.log('🔍 Final Metrics Debug:');\n    console.log('  - Total Rolling (trip.totalRolling):', totalRolling);\n    console.log('  - Company Total Rolling (sharing.total_rolling):', companyTotalRolling);\n    console.log('  - Total Rolling Commission (sum of trip_sharing.total_rolling_commission):', totalRollingCommission);\n    console.log('  - Company Profit/Loss (sharing.companyShare):', companyProfitLoss);\n    console.log('  - Active Customers (with rolling > 0):', activeCustomers);\n    console.log('  - Total Customers:', totalCustomers);\n\n    // Debug customer data\n    console.log('🔍 Customer Debug:');\n    console.log('  - Total Customers Found:', filteredCustomers.length);\n    filteredCustomers.slice(0, 5).forEach((c, i) => {\n      console.log(`  Customer ${i + 1}:`, {\n        name: c.name,\n        totalRolling: c.totalRolling,\n        total_rolling: c.total_rolling,\n        isActive: c.isActive,\n        hasRolling: (c.totalRolling || c.total_rolling || 0) > 0\n      });\n    });\n    return {\n      // Main metrics - use actual data sources that have values\n      customerTotalRolling: totalRolling,\n      // Use trip.totalRolling which has actual data (26,562,555)\n      customerTotalWinLoss: Math.abs(totalWinLoss),\n      // Use trip.totalWinLoss which has actual data (813,939)\n      customerTotalBuyIn: totalBuyIn,\n      // Use trip.totalBuyIn which has actual data\n      customerTotalBuyOut: totalBuyOut,\n      // Use trip.totalBuyOut which has actual data\n      tripTotalRolling,\n      tripTotalWinLoss,\n      totalRollingCommission,\n      // Sum of trip_sharing.total_rolling_commission from all trips\n      totalExpenses,\n      houseGrossWin: Math.abs(totalWinLoss),\n      // Based on trip.totalWinLoss which has actual data\n      houseNetWin,\n      houseFinalProfit,\n      totalCustomers,\n      activeCustomers,\n      // Customers with rolling > 0\n      totalAgents,\n      activeAgents,\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      profitMargin,\n      averageRollingPercentage,\n      totalRollingRecords: filteredRollingRecords.length,\n      // Number of rolling records in time period\n      totalBuyInOutRecords: filteredTransactionRecords.length,\n      // Number of transaction records in time period\n      // Company performance indicators\n      companyNetResult,\n      companyShare: companyProfitLoss,\n      // Use companyProfitLoss which has actual data (305,951.23)\n      isCompanyProfitable: companyProfitLoss > 0\n    };\n  };\n  const metrics = calculateMetrics();\n\n  // Toggle agent expansion in hierarchy view\n  const toggleAgentExpansion = agentId => {\n    const newExpanded = new Set(expandedAgents);\n    if (newExpanded.has(agentId)) {\n      newExpanded.delete(agentId);\n    } else {\n      newExpanded.add(agentId);\n    }\n    setExpandedAgents(newExpanded);\n  };\n\n  // Get hierarchical agent-customer data\n  const getAgentHierarchyData = () => {\n    // Use already filtered data instead of calling getFilteredData again\n\n    console.log('🔍 Starting getAgentHierarchyData calculation...');\n    console.log('📊 Input data counts:', {\n      filteredCustomers: filteredCustomers.length,\n      filteredTrips: filteredTrips.length,\n      agents: agents.length,\n      rollingRecords: rollingRecords.length,\n      transactionRecords: transactionRecords.length\n    });\n\n    // Debug rolling records structure\n    console.log('🎲 Sample rolling records:', rollingRecords.slice(0, 3));\n    console.log('💰 Sample transaction records:', transactionRecords.slice(0, 3));\n\n    // Group customers by agent\n    const agentCustomerMap = new Map();\n    filteredCustomers.forEach((customer, index) => {\n      // Handle both agentId and agent_id field names\n      const agentId = customer.agentId || customer.agent_id;\n      if (index < 3) {\n        // Debug first 3 customers\n        console.log(`👤 Customer ${index + 1}:`, {\n          id: customer.id,\n          name: customer.name,\n          agentId: customer.agentId,\n          agent_id: customer.agent_id,\n          resolvedAgentId: agentId,\n          fullCustomerData: customer // Show all customer fields\n        });\n      }\n      if (!agentId) {\n        if (index < 3) console.log(`❌ Customer ${customer.name} has no agentId, skipping`);\n        return;\n      }\n      if (!agentCustomerMap.has(agentId)) {\n        agentCustomerMap.set(agentId, {\n          agent: agents.find(a => a.id === agentId),\n          customers: []\n        });\n      }\n\n      // Calculate customer metrics from trips\n      let customerWinLoss = 0;\n      let customerRolling = 0;\n      let customerBuyIn = 0;\n      let customerBuyOut = 0;\n      let customerTrips = 0;\n      if (index < 3) {\n        // Debug first 3 customers\n        console.log(`🎯 Processing trips for customer: ${customer.name}`);\n        console.log(`📋 Available trips count: ${filteredTrips.length}`);\n      }\n\n      // Calculate customer metrics from filtered records for the selected time period\n      // This ensures agent performance reflects the selected date range\n\n      // Get customer's rolling records for the time period (already filtered by date)\n      const customerRollingRecords = filteredRollingRecords.filter(r => r.customer_id === customer.id);\n      customerRolling = customerRollingRecords.reduce((sum, r) => sum + (r.rolling_amount || 0), 0);\n\n      // Get customer's transaction records for the time period (already filtered by date)\n      const customerTransactionRecords = filteredTransactionRecords.filter(t => t.customer_id === customer.id);\n      customerBuyIn = customerTransactionRecords.filter(t => t.transaction_type === 'buy-in' || t.transactionType === 'buy-in').reduce((sum, t) => sum + (t.amount || 0), 0);\n      customerBuyOut = customerTransactionRecords.filter(t => t.transaction_type === 'buy-out' || t.transactionType === 'buy-out').reduce((sum, t) => sum + (t.amount || 0), 0);\n\n      // Calculate win/loss for the time period\n      customerWinLoss = customerBuyIn - customerBuyOut;\n      if (index < 3) {\n        console.log(`🔄 Calculated customer data for time period:`, {\n          id: customer.id,\n          name: customer.name,\n          customerRolling,\n          customerWinLoss,\n          customerBuyIn,\n          customerBuyOut,\n          rollingRecordsCount: customerRollingRecords.length,\n          transactionRecordsCount: customerTransactionRecords.length\n        });\n      }\n\n      // Count trips this customer participated in by checking trip_customers relationship\n      // For now, estimate based on whether customer has any activity\n      customerTrips = customerRolling > 0 || Math.abs(customerWinLoss) > 0 || customerBuyIn > 0 || customerBuyOut > 0 ? 1 : 0;\n      if (index < 3) {\n        console.log(`✅ Using customer aggregated data:`, {\n          customerRolling,\n          customerWinLoss,\n          customerBuyIn,\n          customerBuyOut,\n          customerTrips\n        });\n      }\n\n      // Debug final customer calculations\n      if (index < 3) {\n        console.log(`📊 Final calculations for ${customer.name}:`, {\n          customerWinLoss,\n          customerRolling,\n          customerBuyIn,\n          customerBuyOut,\n          customerTrips,\n          netCashFlow: customerBuyOut - customerBuyIn\n        });\n      }\n      agentCustomerMap.get(agentId).customers.push({\n        ...customer,\n        winLoss: customerWinLoss,\n        rolling: customerRolling,\n        buyIn: customerBuyIn,\n        buyOut: customerBuyOut,\n        trips: customerTrips,\n        netCashFlow: customerBuyOut - customerBuyIn\n      });\n    });\n\n    // Convert to array and calculate agent totals\n    console.log(`🏢 Processing ${agentCustomerMap.size} agents for final calculations`);\n    const result = Array.from(agentCustomerMap.entries()).map(([agentId, data], agentIndex) => {\n      const totalWinLoss = data.customers.reduce((sum, c) => sum + (c.winLoss || 0), 0);\n      const totalRolling = data.customers.reduce((sum, c) => sum + (c.rolling || 0), 0);\n      const totalBuyIn = data.customers.reduce((sum, c) => sum + (c.buyIn || 0), 0);\n      const totalBuyOut = data.customers.reduce((sum, c) => sum + (c.buyOut || 0), 0);\n      const totalTrips = data.customers.reduce((sum, c) => sum + (c.trips || 0), 0);\n      if (agentIndex < 3) {\n        var _data$agent;\n        // Debug first 3 agents\n        console.log(`🏢 Agent ${agentIndex + 1} (${((_data$agent = data.agent) === null || _data$agent === void 0 ? void 0 : _data$agent.name) || 'Unknown'}):`, {\n          agentId,\n          customersCount: data.customers.length,\n          customerData: data.customers.map(c => ({\n            name: c.name,\n            rolling: c.rolling,\n            winLoss: c.winLoss,\n            trips: c.trips\n          })),\n          totals: {\n            totalWinLoss,\n            totalRolling,\n            totalBuyIn,\n            totalBuyOut,\n            totalTrips,\n            averageRollingPerCustomer: data.customers.length > 0 ? totalRolling / data.customers.length : 0\n          }\n        });\n      }\n      return {\n        agentId,\n        agent: data.agent,\n        customers: data.customers.sort((a, b) => (b.rolling || 0) - (a.rolling || 0)),\n        // Sort by rolling desc\n        customerCount: data.customers.length,\n        totalWinLoss,\n        totalRolling,\n        totalBuyIn,\n        totalBuyOut,\n        totalTrips,\n        netCashFlow: totalBuyOut - totalBuyIn,\n        averageRollingPerCustomer: data.customers.length > 0 ? totalRolling / data.customers.length : 0\n      };\n    });\n    console.log(`✅ Final hierarchy result: ${result.length} agents processed`);\n    return result;\n  };\n\n  // Sort hierarchy data function\n  const sortHierarchyData = (data, sortBy, sortOrder) => {\n    return [...data].sort((a, b) => {\n      var _a$agent, _b$agent;\n      let aValue, bValue;\n      switch (sortBy) {\n        case 'totalRolling':\n          aValue = a.totalRolling || 0;\n          bValue = b.totalRolling || 0;\n          break;\n        case 'totalWinLoss':\n          aValue = a.totalWinLoss || 0;\n          bValue = b.totalWinLoss || 0;\n          break;\n        case 'customerCount':\n          aValue = a.customerCount || 0;\n          bValue = b.customerCount || 0;\n          break;\n        case 'averageRolling':\n          aValue = a.averageRollingPerCustomer || 0;\n          bValue = b.averageRollingPerCustomer || 0;\n          break;\n        case 'name':\n          aValue = ((_a$agent = a.agent) === null || _a$agent === void 0 ? void 0 : _a$agent.name) || '';\n          bValue = ((_b$agent = b.agent) === null || _b$agent === void 0 ? void 0 : _b$agent.name) || '';\n          return sortOrder === 'asc' ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);\n        default:\n          aValue = a.totalRolling || 0;\n          bValue = b.totalRolling || 0;\n      }\n      if (sortOrder === 'asc') {\n        return aValue - bValue;\n      } else {\n        return bValue - aValue;\n      }\n    });\n  };\n  const rawHierarchyData = getAgentHierarchyData();\n  const hierarchyData = sortHierarchyData(rawHierarchyData, hierarchySortBy, hierarchySortOrder);\n\n  // Debug logging for hierarchy data\n  console.log('🔍 Hierarchy Debug:', {\n    agentsCount: agents.length,\n    customersCount: customers.length,\n    filteredCustomersCount: filteredCustomers.length,\n    filteredTripsCount: filteredTrips.length,\n    hierarchyDataCount: hierarchyData.length,\n    userRole: user.role,\n    hierarchyData: hierarchyData.slice(0, 2),\n    // Show first 2 items for debugging\n    sampleCustomers: filteredCustomers.slice(0, 3).map(c => ({\n      id: c.id,\n      name: c.name,\n      agentId: c.agentId,\n      agent_id: c.agent_id\n    })),\n    sampleAgents: agents.slice(0, 3).map(a => ({\n      id: a.id,\n      name: a.name\n    })),\n    sampleTrips: filteredTrips.slice(0, 2).map(t => {\n      var _t$customers2;\n      return {\n        id: t.id,\n        totalRolling: t.totalRolling,\n        totalWinLoss: t.totalWinLoss,\n        customers: (_t$customers2 = t.customers) === null || _t$customers2 === void 0 ? void 0 : _t$customers2.map(tc => ({\n          customerId: tc.customerId,\n          rolling: tc.rolling,\n          winLoss: tc.winLoss,\n          totalRolling: tc.totalRolling\n        })),\n        sharing: t.sharing ? {\n          totalWinLoss: t.sharing.totalWinLoss,\n          totalRolling: t.sharing.totalRolling\n        } : null\n      };\n    })\n  });\n\n  // Add test data if no hierarchy data is available\n  const testHierarchyData = hierarchyData.length > 0 ? hierarchyData : [{\n    agentId: 'test-agent-1',\n    agent: {\n      name: 'Test Agent 1'\n    },\n    customers: [{\n      id: 'test-customer-1',\n      name: 'Test Customer 1',\n      rolling: 100000,\n      winLoss: 50000,\n      trips: 2\n    }, {\n      id: 'test-customer-2',\n      name: 'Test Customer 2',\n      rolling: 150000,\n      winLoss: -20000,\n      trips: 3\n    }],\n    customerCount: 2,\n    totalWinLoss: 30000,\n    totalRolling: 250000,\n    averageRollingPerCustomer: 125000\n  }, {\n    agentId: 'test-agent-2',\n    agent: {\n      name: 'Test Agent 2'\n    },\n    customers: [{\n      id: 'test-customer-3',\n      name: 'Test Customer 3',\n      rolling: 80000,\n      winLoss: 15000,\n      trips: 1\n    }],\n    customerCount: 1,\n    totalWinLoss: 15000,\n    totalRolling: 80000,\n    averageRollingPerCustomer: 80000\n  }];\n\n  // Prepare chart data from trip_sharing data\n  const getDailyChartData = () => {\n    const dailyData = {};\n\n    // Process trips by date using trip_sharing data\n    console.log('🔍 Processing trips for chart data:', filteredTrips.length);\n    filteredTrips.forEach((trip, i) => {\n      const tripDate = trip.date || trip.start_date || trip.created_at;\n      if (!tripDate) {\n        console.warn(`Trip ${i + 1} has no valid date:`, {\n          id: trip.id,\n          name: trip.name,\n          date: trip.date,\n          start_date: trip.start_date,\n          created_at: trip.created_at\n        });\n        return;\n      }\n      const date = tripDate.split('T')[0]; // Get date part only\n      console.log(`Trip ${i + 1} date: ${tripDate} -> ${date}`);\n      if (!dailyData[date]) {\n        dailyData[date] = {\n          date,\n          rolling: 0,\n          winLoss: 0,\n          commission: 0,\n          buyIn: 0,\n          buyOut: 0,\n          netCashFlow: 0,\n          expenses: 0,\n          companyShare: 0,\n          recordCount: 0,\n          transactions: 0\n        };\n      }\n\n      // Use actual trip data (which has values) instead of empty trip_sharing data\n      const sharing = trip.sharing || {};\n\n      // Use trip data for rolling and winLoss (which have actual values)\n      dailyData[date].rolling += safeNumber(trip.totalRolling); // Use trip.totalRolling (has data)\n      dailyData[date].winLoss += safeNumber(trip.totalWinLoss); // Use trip.totalWinLoss (has data)\n\n      // Use actual commission from trip_sharing data\n      const sharingCommission = safeNumber(sharing.total_rolling_commission) || safeNumber(sharing.totalRollingCommission);\n      dailyData[date].commission += sharingCommission;\n\n      // Use trip data for buy-in/out\n      dailyData[date].buyIn += safeNumber(trip.totalBuyIn);\n      dailyData[date].buyOut += safeNumber(trip.totalBuyOut);\n      dailyData[date].expenses += safeNumber(sharing.totalExpenses);\n      dailyData[date].companyShare += safeNumber(sharing.companyShare);\n      dailyData[date].netCashFlow += safeNumber(trip.totalBuyOut - trip.totalBuyIn);\n      dailyData[date].recordCount += 1; // Trip count\n      dailyData[date].transactions += (sharing.totalBuyIn || 0) > 0 || (sharing.totalBuyOut || 0) > 0 ? 1 : 0;\n    });\n    return Object.values(dailyData).sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n  };\n  const chartData = getDailyChartData();\n\n  // Add actual transaction records count to chart data\n  const enhancedChartData = chartData.map(dayData => {\n    // Count rolling records for this date\n    const dayRollingRecords = filteredRollingRecords.filter(record => {\n      const recordDate = record.updated_at || record.created_at || record.recordedAt || record.sessionStartTime || record.createdAt;\n      if (!recordDate) return false;\n      const recordDateOnly = recordDate.split('T')[0];\n      return recordDateOnly === dayData.date;\n    }).length;\n\n    // Count transaction records for this date  \n    const dayTransactionRecords = filteredTransactionRecords.filter(record => {\n      const recordDate = record.updated_at || record.created_at || record.createdAt;\n      if (!recordDate) return false;\n      const recordDateOnly = recordDate.split('T')[0];\n      return recordDateOnly === dayData.date;\n    }).length;\n    return {\n      ...dayData,\n      actualTransactionRecords: dayRollingRecords + dayTransactionRecords,\n      rollingRecordsCount: dayRollingRecords,\n      transactionRecordsCount: dayTransactionRecords\n    };\n  });\n\n  // Debug chart data\n  console.log('🔍 Enhanced Chart Data Debug:');\n  console.log('  - Chart data length:', enhancedChartData.length);\n  console.log('  - Total rolling records available:', filteredRollingRecords.length);\n  console.log('  - Total transaction records available:', filteredTransactionRecords.length);\n  console.log('  - Chart date range:', enhancedChartData.map(d => d.date));\n  enhancedChartData.slice(0, 3).forEach((day, i) => {\n    console.log(`  Day ${i + 1} (${day.date}):`, {\n      tripCount: day.recordCount,\n      actualTransactionRecords: day.actualTransactionRecords,\n      rollingRecords: day.rollingRecordsCount,\n      transactionRecords: day.transactionRecordsCount\n    });\n  });\n\n  // Debug sample transaction records to check date format\n  console.log('🔍 Sample Transaction Records (date fields):');\n  if (filteredTransactionRecords.length > 0) {\n    const record = filteredTransactionRecords[0];\n    console.log('  Transaction 1 date fields:', {\n      updated_at: record.updated_at,\n      created_at: record.created_at,\n      createdAt: record.createdAt,\n      extractedDate: (record.updated_at || record.created_at || record.createdAt || '').split('T')[0]\n    });\n  }\n  console.log('🔍 Sample Rolling Records (all fields):');\n  if (filteredRollingRecords.length > 0) {\n    console.log('  Rolling 1 all fields:', filteredRollingRecords[0]);\n    console.log('  Available fields:', Object.keys(filteredRollingRecords[0]));\n  }\n\n  // Agent performance data (admin only)\n  const getAgentPerformanceData = () => {\n    if (user.role !== 'admin') return [];\n    return agents.map(agent => {\n      const agentCustomers = filteredCustomers.filter(c => c.agentId === agent.id);\n      const agentRollingRecords = filteredRollingRecords.filter(r => r.agentId === agent.id);\n      const agentBuyInOutRecords = filteredTransactionRecords.filter(b => {\n        const customer = customers.find(c => c.id === b.customerId);\n        return (customer === null || customer === void 0 ? void 0 : customer.agentId) === agent.id;\n      });\n      const agentTrips = filteredTrips.filter(t => t.agents && t.agents.some(a => a.agentId === agent.id) || t.agentId === agent.id);\n      const rolling = agentRollingRecords.reduce((sum, r) => sum + safeNumber(r.rollingAmount), 0);\n      const winLoss = agentRollingRecords.reduce((sum, r) => sum + safeNumber(r.winLoss), 0);\n      const buyIn = agentBuyInOutRecords.filter(r => r.transactionType === 'buy-in').reduce((sum, r) => sum + r.amount, 0);\n      const buyOut = agentBuyInOutRecords.filter(r => r.transactionType === 'buy-out').reduce((sum, r) => sum + r.amount, 0);\n      return {\n        name: agent.name,\n        customers: agentCustomers.length,\n        activeCustomers: agentCustomers.filter(c => c.isActive).length,\n        rolling,\n        winLoss,\n        buyIn,\n        buyOut,\n        netCashFlow: buyOut - buyIn,\n        commission: agentTrips.reduce((sum, trip) => {\n          const sharing = trip.sharing || {};\n          return sum + (safeNumber(sharing.total_rolling_commission) || safeNumber(sharing.totalRollingCommission));\n        }, 0),\n        trips: agentTrips.length,\n        rollingRecords: agentRollingRecords.length,\n        transactionRecords: agentTrips.filter(t => {\n          var _t$sharing12, _t$sharing13;\n          return (((_t$sharing12 = t.sharing) === null || _t$sharing12 === void 0 ? void 0 : _t$sharing12.totalBuyIn) || 0) > 0 || (((_t$sharing13 = t.sharing) === null || _t$sharing13 === void 0 ? void 0 : _t$sharing13.totalBuyOut) || 0) > 0;\n        }).length,\n        averageRollingPercentage: agentCustomers.length > 0 ? agentCustomers.reduce((sum, c) => sum + c.rollingPercentage, 0) / agentCustomers.length : 0\n      };\n    }).filter(agent => agent.rolling > 0 || agent.customers > 0);\n  };\n  const agentPerformanceData = getAgentPerformanceData();\n\n  // Top customers data\n  const getTopCustomersData = () => {\n    return filteredCustomers.map(customer => {\n      const customerRollingRecords = filteredRollingRecords.filter(r => r.customerId === customer.id);\n      const customerBuyInOutRecords = filteredTransactionRecords.filter(b => b.customerId === customer.id);\n      const rolling = customerRollingRecords.reduce((sum, r) => sum + safeNumber(r.rollingAmount), 0);\n      const winLoss = customerRollingRecords.reduce((sum, r) => sum + safeNumber(r.winLoss), 0);\n      const buyIn = customerBuyInOutRecords.filter(r => r.transactionType === 'buy-in').reduce((sum, r) => sum + r.amount, 0);\n      const buyOut = customerBuyInOutRecords.filter(r => r.transactionType === 'buy-out').reduce((sum, r) => sum + r.amount, 0);\n      return {\n        ...customer,\n        periodRolling: rolling,\n        periodWinLoss: winLoss,\n        periodBuyIn: buyIn,\n        periodBuyOut: buyOut,\n        periodNetCashFlow: buyOut - buyIn,\n        periodCommission: rolling * (customer.rollingPercentage / 100),\n        recordCount: customerRollingRecords.length,\n        transactionCount: customerBuyInOutRecords.length\n      };\n    }).filter(customer => customer.periodRolling > 0).sort((a, b) => b.periodRolling - a.periodRolling).slice(0, 10);\n  };\n  const topCustomersData = getTopCustomersData();\n\n  // Export functionality\n  const handleExport = () => {\n    const reportData = {\n      generatedAt: new Date().toISOString(),\n      dateRange: dateRange,\n      selectedAgent: selectedAgent,\n      userRole: user.role,\n      summary: metrics,\n      dailyData: chartData,\n      topCustomers: topCustomersData,\n      agentPerformance: agentPerformanceData,\n      rawData: {\n        customers: filteredCustomers.length,\n        trips: filteredTrips.length,\n        rollingRecords: filteredRollingRecords.length,\n        transactionRecords: filteredTransactionRecords.length\n      }\n    };\n    const blob = new Blob([JSON.stringify(reportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `casino-reports-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // Show loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-gray-600\",\n          children: \"Loading real-time reports data from Supabase...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1363,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1362,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [errorMessage && /*#__PURE__*/_jsxDEV(Alert, {\n      className: \"border-red-200 bg-red-50\",\n      children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n        className: \"w-4 h-4 text-red-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1377,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AlertDescription, {\n        className: \"text-red-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Reports Error:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1379,\n          columnNumber: 13\n        }, this), \" \", errorMessage, /*#__PURE__*/_jsxDEV(Button, {\n          onClick: loadRealTimeReportsData,\n          size: \"sm\",\n          variant: \"outline\",\n          className: \"ml-3 text-red-800 border-red-300 hover:bg-red-100\",\n          children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: \"w-3 h-3 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1386,\n            columnNumber: 15\n          }, this), \"Retry\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1380,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1378,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1376,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: t('reports_title')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: [user.role === 'agent' ? t('agent_performance') : user.role === 'staff' ? t('reports') : t('reports_subtitle'), \" \\u2022 Live data from Supabase\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1397,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500 mt-1\",\n          children: [\"Showing data for last \", dateRange, \" days \\u2022 \", metrics.totalRollingRecords, \" rolling records \\u2022 \", metrics.totalBuyInOutRecords, \" buy-in/out transactions\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1402,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          value: dateRange,\n          onValueChange: setDateRange,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-32\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"Date range\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1409,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"1\",\n              children: \"Last 1 day\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1412,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"7\",\n              children: \"Last 7 days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"30\",\n              children: \"Last 30 days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"90\",\n              children: \"Last 90 days\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1415,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"365\",\n              children: \"Last year\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1416,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1411,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: displayCurrency,\n          onValueChange: setDisplayCurrency,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-32\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"Currency\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1422,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: SUPPORTED_CURRENCIES.map(currency => /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: currency.value,\n              children: currency.symbol\n            }, currency.value, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1426,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1424,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1420,\n          columnNumber: 11\n        }, this), user.role === 'admin' && /*#__PURE__*/_jsxDEV(Select, {\n          value: selectedAgent,\n          onValueChange: setSelectedAgent,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-40\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"All agents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1436,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1435,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"all\",\n              children: \"All Agents\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1439,\n              columnNumber: 17\n            }, this), agents.map(agent => /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: agent.id,\n              children: agent.name\n            }, agent.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1441,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1438,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: reportType,\n          onValueChange: setReportType,\n          children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n            className: \"w-36\",\n            children: /*#__PURE__*/_jsxDEV(SelectValue, {\n              placeholder: \"Report type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1451,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1450,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n            children: [/*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"overview\",\n              children: t('overview_metrics')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1454,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"financial\",\n              children: t('financial_summary')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1455,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"customer\",\n              children: t('customer_metrics')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1456,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectItem, {\n              value: \"operational\",\n              children: t('operational_metrics')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1457,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1453,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outline\",\n          onClick: handleExport,\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1462,\n            columnNumber: 13\n          }, this), t('export_data')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1461,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1406,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1394,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium mb-4\",\n        children: t('overview_metrics')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1470,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.customerTotalWinLoss > 0 ? 'from-red-50 to-red-100 border-red-200' : 'from-green-50 to-green-100 border-green-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.customerTotalWinLoss > 0 ? 'text-red-800' : 'text-green-800'}`,\n              children: t('win_loss')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ArrowUpDown, {\n              className: `h-4 w-4 ${metrics.customerTotalWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1476,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1474,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold ${metrics.customerTotalWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`,\n              children: [\"HK$\", safeFormatNumber(metrics.customerTotalWinLoss)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1479,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs ${metrics.customerTotalWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`,\n              children: metrics.customerTotalWinLoss > 0 ? 'Customer Win (Company Loss)' : 'Customer Loss (Company Win)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1482,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1473,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-blue-800\",\n              children: t('reports_total_rolling')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1491,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DollarSign, {\n              className: \"h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1492,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1490,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-blue-700\",\n              children: [getCurrencySymbol(displayCurrency), safeFormatNumber(metrics.customerTotalRolling)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1495,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-600\",\n              children: [metrics.totalRollingRecords, \" rolling records \\u2022 Last \", dateRange, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1496,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: \"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium text-purple-800\",\n              children: \"Rolling Commission\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1505,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Percent, {\n              className: \"h-4 w-4 text-purple-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1506,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1504,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-purple-700\",\n              children: [\"HK$\", safeFormatNumber(metrics.totalRollingCommission)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1509,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-purple-600\",\n              children: \"From trip_sharing data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1510,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1508,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          className: `bg-gradient-to-r ${metrics.isCompanyProfitable ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: `text-sm font-medium ${metrics.isCompanyProfitable ? 'text-green-800' : 'text-red-800'}`,\n              children: t('profit_loss')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1519,\n              columnNumber: 15\n            }, this), metrics.isCompanyProfitable ? /*#__PURE__*/_jsxDEV(Trophy, {\n              className: \"h-4 w-4 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1521,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n              className: \"h-4 w-4 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1523,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1518,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-2xl font-bold ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`,\n              children: [\"HK$\", safeFormatNumber(Math.abs(metrics.companyShare))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1527,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-xs ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`,\n              children: metrics.isCompanyProfitable ? 'Company Profit (Customer Loss)' : 'Company Loss (Customer Win)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1530,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1526,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1517,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            className: \"flex flex-row items-center justify-between space-y-0 pb-2\",\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"text-sm font-medium\",\n              children: t('overview_active_customers')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1539,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Users, {\n              className: \"h-4 w-4 text-muted-foreground\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1540,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1538,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold\",\n              children: metrics.activeCustomers\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1543,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-muted-foreground\",\n              children: [t('of_total_customers'), \" \", metrics.totalCustomers]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1544,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1542,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1537,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1469,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"pb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                className: \"text-xl font-bold text-gray-800 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n                  className: \"w-5 h-5 text-blue-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1560,\n                  columnNumber: 19\n                }, this), \"Daily Business Overview\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1559,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n                className: \"text-gray-600 mt-1\",\n                children: \"Cash flow analysis - Buy-in and Buy-out transactions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1563,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1558,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 rounded-full bg-green-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1569,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: t('buy_in')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1570,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1568,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 rounded-full bg-orange-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1573,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: t('buy_out')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1574,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1572,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1567,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1557,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1556,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"pt-0\",\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 350,\n            children: /*#__PURE__*/_jsxDEV(ComposedChart, {\n              data: chartData,\n              margin: {\n                top: 20,\n                right: 30,\n                left: 20,\n                bottom: 5\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                children: [/*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                  id: \"buyInGradient\",\n                  x1: \"0\",\n                  y1: \"0\",\n                  x2: \"0\",\n                  y2: \"1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"5%\",\n                    stopColor: \"#10B981\",\n                    stopOpacity: 0.8\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1587,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"95%\",\n                    stopColor: \"#10B981\",\n                    stopOpacity: 0.3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1588,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1586,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                  id: \"buyOutGradient\",\n                  x1: \"0\",\n                  y1: \"0\",\n                  x2: \"0\",\n                  y2: \"1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"5%\",\n                    stopColor: \"#F97316\",\n                    stopOpacity: 0.8\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1591,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"95%\",\n                    stopColor: \"#F97316\",\n                    stopOpacity: 0.3\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1592,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1590,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1585,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CartesianGrid, {\n                strokeDasharray: \"3 3\",\n                stroke: \"#E5E7EB\",\n                opacity: 0.5\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1595,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                dataKey: \"date\",\n                axisLine: false,\n                tickLine: false,\n                tick: {\n                  fontSize: 12,\n                  fill: '#6B7280'\n                },\n                tickFormatter: value => {\n                  const date = new Date(value);\n                  return `${date.getMonth() + 1}/${date.getDate()}`;\n                },\n                label: {\n                  value: t('date'),\n                  position: 'insideBottom',\n                  offset: -5,\n                  style: {\n                    textAnchor: 'middle',\n                    fontSize: '12px',\n                    fill: '#6B7280'\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1596,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                axisLine: false,\n                tickLine: false,\n                tick: {\n                  fontSize: 12,\n                  fill: '#6B7280'\n                },\n                tickFormatter: value => {\n                  if (value >= 1000000) return `${(value / 1000000).toFixed(1)}M`;\n                  if (value >= 1000) return `${(value / 1000).toFixed(0)}K`;\n                  return value.toString();\n                },\n                label: {\n                  value: t('amount_hkd'),\n                  angle: -90,\n                  position: 'insideLeft',\n                  style: {\n                    textAnchor: 'middle',\n                    fontSize: '12px',\n                    fill: '#6B7280'\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1607,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                contentStyle: {\n                  backgroundColor: 'white',\n                  border: 'none',\n                  borderRadius: '12px',\n                  boxShadow: '0 10px 25px rgba(0,0,0,0.1)',\n                  padding: '12px'\n                },\n                formatter: (value, name) => [`HK$${Number(value).toLocaleString()}`, name === 'buyIn' ? '💰 Buy-in' : name === 'buyOut' ? '💸 Buy-out' : '📊 Data'],\n                labelFormatter: label => {\n                  const date = new Date(label);\n                  return `📅 ${date.toLocaleDateString('en-US', {\n                    weekday: 'short',\n                    month: 'short',\n                    day: 'numeric'\n                  })}`;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1618,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                dataKey: \"buyIn\",\n                fill: \"url(#buyInGradient)\",\n                name: \"buyIn\",\n                radius: [4, 4, 0, 0],\n                maxBarSize: 50\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1641,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Bar, {\n                dataKey: \"buyOut\",\n                fill: \"url(#buyOutGradient)\",\n                name: \"buyOut\",\n                radius: [4, 4, 0, 0],\n                maxBarSize: 50\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1648,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1581,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1580,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1579,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1555,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"pb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                className: \"text-xl font-bold text-gray-800 flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Activity, {\n                  className: \"w-5 h-5 text-purple-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1666,\n                  columnNumber: 19\n                }, this), t('financial_summary')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1665,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n                className: \"text-gray-600 mt-1\",\n                children: \"Operating expenses and rolling commission trends\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1669,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1664,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 rounded-full bg-red-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1675,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: t('overview_expenses')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1676,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1674,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-3 h-3 rounded-full bg-green-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1679,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-600\",\n                  children: t('overview_commission_rate')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1680,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1678,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1673,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1663,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1662,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"pt-0\",\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 350,\n            children: /*#__PURE__*/_jsxDEV(ComposedChart, {\n              data: chartData,\n              margin: {\n                top: 20,\n                right: 30,\n                left: 20,\n                bottom: 5\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                children: [/*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                  id: \"expensesGradient\",\n                  x1: \"0\",\n                  y1: \"0\",\n                  x2: \"0\",\n                  y2: \"1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"5%\",\n                    stopColor: \"#EF4444\",\n                    stopOpacity: 0.8\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1693,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"95%\",\n                    stopColor: \"#EF4444\",\n                    stopOpacity: 0.2\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1694,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1692,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n                  id: \"commissionAreaGradient\",\n                  x1: \"0\",\n                  y1: \"0\",\n                  x2: \"0\",\n                  y2: \"1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"5%\",\n                    stopColor: \"#10B981\",\n                    stopOpacity: 0.8\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1697,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n                    offset: \"95%\",\n                    stopColor: \"#10B981\",\n                    stopOpacity: 0.2\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1698,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1696,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1691,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CartesianGrid, {\n                strokeDasharray: \"3 3\",\n                stroke: \"#E5E7EB\",\n                opacity: 0.5\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1701,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                dataKey: \"date\",\n                axisLine: false,\n                tickLine: false,\n                tick: {\n                  fontSize: 12,\n                  fill: '#6B7280'\n                },\n                tickFormatter: value => {\n                  const date = new Date(value);\n                  return `${date.getMonth() + 1}/${date.getDate()}`;\n                },\n                label: {\n                  value: t('date'),\n                  position: 'insideBottom',\n                  offset: -5,\n                  style: {\n                    textAnchor: 'middle',\n                    fontSize: '12px',\n                    fill: '#6B7280'\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1702,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n                axisLine: false,\n                tickLine: false,\n                tick: {\n                  fontSize: 12,\n                  fill: '#6B7280'\n                },\n                tickFormatter: value => {\n                  if (value >= 1000000) return `${(value / 1000000).toFixed(1)}M`;\n                  if (value >= 1000) return `${(value / 1000).toFixed(0)}K`;\n                  return value.toString();\n                },\n                label: {\n                  value: t('amount_hkd'),\n                  angle: -90,\n                  position: 'insideLeft',\n                  style: {\n                    textAnchor: 'middle',\n                    fontSize: '12px',\n                    fill: '#6B7280'\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1713,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                contentStyle: {\n                  backgroundColor: 'white',\n                  border: 'none',\n                  borderRadius: '12px',\n                  boxShadow: '0 10px 25px rgba(0,0,0,0.1)',\n                  padding: '12px'\n                },\n                formatter: (value, name) => [`HK$${Number(value).toLocaleString()}`, name === 'expenses' ? `💸 ${t('overview_expenses')}` : name === 'commission' ? `💰 ${t('overview_commission_rate')}` : '📊 Data'],\n                labelFormatter: label => {\n                  const date = new Date(label);\n                  return `📅 ${date.toLocaleDateString('en-US', {\n                    weekday: 'short',\n                    month: 'short',\n                    day: 'numeric'\n                  })}`;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1724,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Area, {\n                type: \"monotone\",\n                dataKey: \"expenses\",\n                stroke: \"#EF4444\",\n                fill: \"url(#expensesGradient)\",\n                name: \"expenses\",\n                strokeWidth: 2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1747,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Area, {\n                type: \"monotone\",\n                dataKey: \"commission\",\n                stroke: \"#10B981\",\n                fill: \"url(#commissionAreaGradient)\",\n                name: \"commission\",\n                strokeWidth: 2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1755,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1687,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1686,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1685,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1661,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1553,\n      columnNumber: 7\n    }, this), topCustomersData.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          children: \"Top Performing Customers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1774,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          children: \"Highest rolling volume customers for the selected period \\u2022 Sorted by rolling amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1775,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1773,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: topCustomersData.map((customer, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-8 h-8 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-medium\",\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1784,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: customer.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1788,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: [\"Agent: \", customer.agentName, \" \\u2022 \", customer.rollingPercentage, \"% rolling rate\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1789,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-400\",\n                  children: [customer.recordCount, \" records \\u2022 \", customer.transactionCount, \" transactions\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1792,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1787,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1783,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-4 gap-4 text-right text-xs\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-500\",\n                  children: \"Rolling\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1799,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium text-blue-600\",\n                  children: [\"HK$\", safeFormatNumber(customer.periodRolling)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1800,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1798,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-500\",\n                  children: \"Win/Loss\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1803,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `font-medium ${customer.periodWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`,\n                  children: [\"HK$\", safeFormatNumber(Math.abs(customer.periodWinLoss))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1804,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `text-xs ${customer.periodWinLoss > 0 ? 'text-red-500' : 'text-green-500'}`,\n                  children: customer.periodWinLoss > 0 ? 'Customer Win' : 'Company Win'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1809,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1802,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-500\",\n                  children: \"Commission\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1816,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium text-purple-600\",\n                  children: [\"HK$\", safeFormatNumber(customer.periodCommission)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1817,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1815,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-500\",\n                  children: \"Cash Flow\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1820,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `font-medium ${customer.periodNetCashFlow >= 0 ? 'text-green-600' : 'text-red-600'}`,\n                  children: [\"HK$\", safeFormatNumber(customer.periodNetCashFlow)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1821,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1819,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1797,\n              columnNumber: 19\n            }, this)]\n          }, customer.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1782,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1780,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1779,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1772,\n      columnNumber: 9\n    }, this), user.role === 'admin' && agentPerformanceData.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n          children: \"Agent Performance Analysis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1839,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n          children: \"Comprehensive performance metrics by agent for the selected period\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1840,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1838,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overflow-x-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-50\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Agent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1849,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Customers\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1852,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Rolling Volume\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1855,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Commission\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1858,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Win/Loss\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1861,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Cash Flow\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1864,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                  children: \"Activity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1867,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1848,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1847,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200\",\n              children: agentPerformanceData.map(agent => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: \"hover:bg-gray-50\",\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm font-medium text-gray-900\",\n                      children: agent.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1877,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-500\",\n                      children: [agent.averageRollingPercentage.toFixed(1), \"% avg rate\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1878,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1876,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1875,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [agent.activeCustomers, \"/\", agent.customers]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1882,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-400\",\n                    children: \"active/total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1883,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1881,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium\",\n                    children: [\"HK$\", safeFormatNumber(agent.rolling)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1886,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-blue-600\",\n                    children: [agent.trips, \" trips\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1887,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1885,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-purple-600 font-medium\",\n                  children: [\"HK$\", safeFormatNumber(agent.commission)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1889,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: agent.winLoss > 0 ? 'text-red-600' : 'text-green-600',\n                    children: [\"HK$\", safeFormatNumber(Math.abs(agent.winLoss))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1893,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `text-xs ${agent.winLoss > 0 ? 'text-red-500' : 'text-green-500'}`,\n                    children: agent.winLoss > 0 ? 'Customer Win' : 'Company Win'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1896,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1892,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `font-medium ${agent.netCashFlow >= 0 ? 'text-green-600' : 'text-red-600'}`,\n                    children: [\"HK$\", safeFormatNumber(agent.netCashFlow)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1903,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-400\",\n                    children: [\"In: HK$\", safeFormatNumber(agent.buyIn), \" \\u2022 Out: HK$\", safeFormatNumber(agent.buyOut)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1906,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1902,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [agent.rollingRecords, \" rolling\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1911,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-gray-400\",\n                    children: [agent.transactionRecords, \" buy-in/out\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1912,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1910,\n                  columnNumber: 23\n                }, this)]\n              }, agent.name, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1874,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1872,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1846,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1845,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1844,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1837,\n      columnNumber: 9\n    }, this), (user.role === 'admin' || user.role === 'boss') && /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1930,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: t('agent_hierarchy')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1931,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                variant: \"secondary\",\n                children: [testHierarchyData.length, \" \", t('agents')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1932,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1929,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardDescription, {\n              children: t('agent_hierarchy_desc')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1934,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1928,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-sm font-medium text-gray-700\",\n                children: t('sort_by')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1942,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: hierarchySortBy,\n                onChange: e => setHierarchySortBy(e.target.value),\n                className: \"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"totalRolling\",\n                  children: t('reports_total_rolling')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1948,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"totalWinLoss\",\n                  children: t('win_loss')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1949,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"customerCount\",\n                  children: t('customer_count')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1950,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"averageRolling\",\n                  children: t('average_rolling')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1951,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"name\",\n                  children: t('agent_name')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1952,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1943,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1941,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setHierarchySortOrder(hierarchySortOrder === 'asc' ? 'desc' : 'asc'),\n              className: \"p-1 hover:bg-gray-100 rounded-md transition-colors\",\n              title: `Sort ${hierarchySortOrder === 'asc' ? 'Descending' : 'Ascending'}`,\n              children: hierarchySortOrder === 'asc' ? /*#__PURE__*/_jsxDEV(ArrowUp, {\n                className: \"w-4 h-4 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1962,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(ArrowDown, {\n                className: \"w-4 h-4 text-gray-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1964,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1956,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1940,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1927,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1926,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: testHierarchyData.map(agentData => {\n            var _agentData$agent;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors\",\n                onClick: () => toggleAgentExpansion(agentData.agentId),\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3\",\n                    children: [expandedAgents.has(agentData.agentId) ? /*#__PURE__*/_jsxDEV(ChevronDown, {\n                      className: \"w-4 h-4 text-gray-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1982,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(ChevronRight, {\n                      className: \"w-4 h-4 text-gray-500\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1984,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-semibold text-gray-900\",\n                        children: ((_agentData$agent = agentData.agent) === null || _agentData$agent === void 0 ? void 0 : _agentData$agent.name) || 'Unknown Agent'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1987,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-sm text-gray-500\",\n                        children: [agentData.customerCount, \" \", t('customers')]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1990,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1986,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1980,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex space-x-8 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-medium text-blue-600\",\n                        children: [\"HK$\", safeFormatNumber(agentData.totalRolling)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1997,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500\",\n                        children: t('reports_total_rolling')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2000,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1996,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: `font-medium ${agentData.totalWinLoss >= 0 ? 'text-green-600' : 'text-red-600'}`,\n                        children: [\"HK$\", safeFormatNumber(Math.abs(agentData.totalWinLoss))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2003,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500\",\n                        children: agentData.totalWinLoss >= 0 ? t('individual_win') : t('win_loss')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2008,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2002,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-medium text-gray-700\",\n                        children: agentData.customerCount\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2013,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500\",\n                        children: t('customer_count')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2016,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2012,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-medium text-purple-600\",\n                        children: [\"HK$\", safeFormatNumber(agentData.averageRollingPerCustomer)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2019,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-gray-500\",\n                        children: t('average_rolling')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2022,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2018,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1995,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1979,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1975,\n                columnNumber: 19\n              }, this), expandedAgents.has(agentData.agentId) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-t\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-4 bg-white\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid gap-3\",\n                    children: agentData.customers.map(customer => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center space-x-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-2 h-2 bg-blue-400 rounded-full\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2039,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"font-medium text-gray-900\",\n                            children: customer.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2041,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-sm text-gray-500\",\n                            children: [customer.trips, \" \", t('trips')]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2044,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2040,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2038,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex space-x-8 text-sm\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"font-medium text-blue-600\",\n                            children: [\"HK$\", safeFormatNumber(customer.rolling)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2051,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-xs text-gray-500\",\n                            children: t('individual_rolling')\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2054,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2050,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: `font-medium ${customer.winLoss >= 0 ? 'text-green-600' : 'text-red-600'}`,\n                            children: [\"HK$\", safeFormatNumber(Math.abs(customer.winLoss))]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2057,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-xs text-gray-500\",\n                            children: customer.winLoss >= 0 ? t('individual_win') : t('win_loss')\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2062,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2056,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center\",\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"font-medium text-gray-700\",\n                            children: customer.trips\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2067,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"text-xs text-gray-500\",\n                            children: t('trip_count')\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2070,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2066,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2049,\n                        columnNumber: 31\n                      }, this)]\n                    }, customer.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2034,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2032,\n                    columnNumber: 25\n                  }, this), agentData.customers.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-center py-8 text-gray-500\",\n                    children: [/*#__PURE__*/_jsxDEV(Users, {\n                      className: \"w-8 h-8 mx-auto mb-2 opacity-50\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2079,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: t('no_data')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2080,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2078,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2031,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2030,\n                columnNumber: 21\n              }, this)]\n            }, agentData.agentId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1973,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1971,\n          columnNumber: 13\n        }, this), testHierarchyData.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12 text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"w-12 h-12 mx-auto mb-4 opacity-50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2092,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-lg font-medium mb-2\",\n            children: \"No Agent Data Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2093,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"No agents with customers found in the selected date range\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2094,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2091,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1970,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1925,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1372,\n    columnNumber: 5\n  }, this);\n};\n_s(Reports, \"wtltpBzxC/z1sIDTxknSGy0V1Gg=\", false, function () {\n  return [useLanguage, useCurrency];\n});\n_c = Reports;\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","ComposedChart","Area","TrendingDown","Users","DollarSign","Activity","RefreshCw","Download","BarChart3","AlertTriangle","Percent","Trophy","ArrowUpDown","ChevronDown","ChevronRight","ArrowUp","ArrowDown","tokenManager","useLanguage","useCurrency","SUPPORTED_CURRENCIES","convertAmount","getCurrencySymbol","Card","CardContent","CardDescription","CardHeader","CardTitle","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","Button","Alert","AlertDescription","Badge","jsxDEV","_jsxDEV","REAL_TIME_REFRESH_INTERVAL","Reports","user","_s","t","globalCurrency","formatGlobalCurrency","convertToGlobalCurrency","currencySymbol","customers","setCustomers","agents","setAgents","trips","setTrips","rollingRecords","setRollingRecords","transactionRecords","setTransactionRecords","selectedAgent","setSelectedAgent","dateRange","setDateRange","reportType","setReportType","loading","setLoading","errorMessage","setErrorMessage","isRealTimeEnabled","expandedAgents","setExpandedAgents","Set","hierarchySortBy","setHierarchySortBy","hierarchySortOrder","setHierarchySortOrder","safeFormatNumber","value","undefined","isNaN","toLocaleString","safeNumber","loadRealTimeReportsData","console","log","API_URL","process","env","REACT_APP_API_URL","token","getToken","hasToken","tokenLength","length","Error","cacheBuster","Date","now","agentsResponse","customersResponse","tripsResponse","rollingRecordsResponse","transactionsResponse","Promise","all","fetch","headers","ok","error","status","statusText","transactions","agentsError","text","e","agentsResult","customersResult","tripsResult","rollingRecordsResult","transactionsResult","json","agentsData","data","customersData","tripsData","rollingRecordsData","transactionRecordsData","totalAgents","map","a","id","name","slice","c","agentId","agent_id","processedCustomers","customer","indexOf","totalRolling","total_rolling","totalWinLoss","total_win_loss","totalBuyIn","total_buy_in","totalBuyOut","total_buy_out","attachments","isAgent","is_agent","rollingPercentage","rolling_percentage","creditLimit","credit_limit","availableCredit","available_credit","processedTrips","trip","sharing","hasSharing","totalExpenses","totalRollingCommission","netCashFlow","netResult","totalAgentShare","companyShare","agentSharePercentage","companySharePercentage","agentBreakdown","calculatedTotalRolling","total_rolling_commission","total_expenses","net_cash_flow","net_result","total_agent_share","company_share","agent_share_percentage","company_share_percentage","agent_breakdown","message","refreshInterval","setInterval","clearInterval","getFilteredData","userRole","role","filteredCustomers","filteredTrips","filteredRollingRecords","filteredTransactionRecords","filter","some","agent","staffId","tripCustomerIds","Array","from","flatMap","_t$customers","tc","customerId","includes","beforeFilter","customersBeforeAgentFilter","customersBeforeFilter","customersAfterFilter","sampleCustomers","matchesSelected","tripsBeforeAgentFilter","hasAgentInAgents","hasDirectAgentId","shouldInclude","tripsBeforeFilter","tripsAfterFilter","r","b","find","customerAgentId","staffTripIds","tripId","cutoffDate","setDate","getDate","parseInt","toISOString","rollingRecordsBeforeFilter","transactionRecordsBeforeFilter","tripDate","date","start_date","created_at","getTime","recordDate","transactionDate","rollingRecordsAfterFilter","transactionRecordsAfterFilter","calculateMetrics","_filteredTrips$","_filteredTrips$2","_filteredTrips$3","filteredTripsCount","sampleTrip","firstTripSharing","firstTripSharingKeys","Object","keys","allSharingFields","convertToDisplayCurrency","amount","tripCurrency","currency","displayCurrency","reduce","sum","_trip$sharing","_trip$sharing2","_trip$sharing3","rolling","rollingField","key","toLowerCase","convertedRolling","tripName","trip_name","originalRolling","sharingKeys","totalRollingFromRecords","record","rolling_amount","rollingAmount","transaction_type","transactionType","totalRollingFromTripSharing","difference","filteredRollingRecordsCount","tripSharingData","_t$sharing","_t$sharing2","_t$sharing3","_t$sharing4","startDate","sharing_exists","totalRolling_value","total_rolling_value","filteredTransactionRecordsCount","filteredCustomersCount","companyProfitLoss","_trip$sharing4","isCompanyProfitable","companyTotalRolling","_t$sharing5","companyTotalWinLoss","_t$sharing6","companyTotalExpenses","_t$sharing7","companyNetResult","_t$sharing8","_t$sharing9","_t$sharing0","_t$sharing1","commission","_t$sharing10","_t$sharing11","totalCustomers","activeCustomers","tripTotalRolling","tripTotalWinLoss","houseNetWin","Math","abs","houseFinalProfit","group","groupEnd","activeAgents","totalTrips","completedTrips","ongoingTrips","profitMargin","averageRollingPercentage","forEach","i","isActive","hasRolling","customerTotalRolling","customerTotalWinLoss","customerTotalBuyIn","customerTotalBuyOut","houseGrossWin","totalRollingRecords","totalBuyInOutRecords","metrics","toggleAgentExpansion","newExpanded","has","delete","add","getAgentHierarchyData","agentCustomerMap","Map","index","resolvedAgentId","fullCustomerData","set","customerWinLoss","customerRolling","customerBuyIn","customerBuyOut","customerTrips","customerRollingRecords","customer_id","customerTransactionRecords","rollingRecordsCount","transactionRecordsCount","get","push","winLoss","buyIn","buyOut","size","result","entries","agentIndex","_data$agent","customersCount","customerData","totals","averageRollingPerCustomer","sort","customerCount","sortHierarchyData","sortBy","sortOrder","_a$agent","_b$agent","aValue","bValue","localeCompare","rawHierarchyData","hierarchyData","agentsCount","hierarchyDataCount","sampleAgents","sampleTrips","_t$customers2","testHierarchyData","getDailyChartData","dailyData","warn","split","expenses","recordCount","sharingCommission","values","chartData","enhancedChartData","dayData","dayRollingRecords","updated_at","recordedAt","sessionStartTime","createdAt","recordDateOnly","dayTransactionRecords","actualTransactionRecords","d","day","tripCount","extractedDate","getAgentPerformanceData","agentCustomers","agentRollingRecords","agentBuyInOutRecords","agentTrips","_t$sharing12","_t$sharing13","agentPerformanceData","getTopCustomersData","customerBuyInOutRecords","periodRolling","periodWinLoss","periodBuyIn","periodBuyOut","periodNetCashFlow","periodCommission","transactionCount","topCustomersData","handleExport","reportData","generatedAt","summary","topCustomers","agentPerformance","rawData","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","variant","onValueChange","placeholder","setDisplayCurrency","symbol","width","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","strokeDasharray","stroke","opacity","dataKey","axisLine","tickLine","tick","fontSize","fill","tickFormatter","getMonth","label","position","style","textAnchor","toFixed","toString","angle","contentStyle","backgroundColor","border","borderRadius","boxShadow","padding","formatter","Number","labelFormatter","toLocaleDateString","weekday","month","radius","maxBarSize","strokeWidth","agentName","onChange","target","title","agentData","_agentData$agent","_c","$RefreshReg$"],"sources":["/Users/user/Desktop/Cursor New Management System/management-system-1/Junket Management System Source Code/src/components/Reports.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ComposedChart, Area } from 'recharts';\nimport { TrendingDown, Users, DollarSign, Activity, RefreshCw, Download, BarChart3, AlertTriangle, Percent, Trophy, ArrowUpDown, ChevronDown, ChevronRight, ArrowUp, ArrowDown } from 'lucide-react';\nimport { tokenManager } from '../utils/auth/tokenManager';\nimport { useLanguage } from '../contexts/LanguageContext';\nimport { useCurrency } from '../contexts/CurrencyContext';\nimport { \n  SUPPORTED_CURRENCIES, \n  formatCurrency, \n  convertAmount,\n  getCurrencySymbol \n} from '../utils/currency';\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from './ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from './ui/select';\nimport { Button } from './ui/button';\nimport { Alert, AlertDescription } from './ui/alert';\nimport { Badge } from './ui/badge';\nimport { User, Agent, Customer, Trip, RollingRecord } from '../types';\n\n// Real-time refresh interval (30 seconds)\nconst REAL_TIME_REFRESH_INTERVAL = 30000;\n\n\nexport const Reports: React.FC<{ user: User }> = ({ user }) => {\n  const { t } = useLanguage();\n  const { globalCurrency, formatGlobalCurrency, convertToGlobalCurrency, currencySymbol } = useCurrency();\n  \n  // State management\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [agents, setAgents] = useState<Agent[]>([]);\n  const [trips, setTrips] = useState<Trip[]>([]);\n  const [rollingRecords, setRollingRecords] = useState<RollingRecord[]>([]);\n  const [transactionRecords, setTransactionRecords] = useState<any[]>([]);\n  \n  // UI state\n  const [selectedAgent, setSelectedAgent] = useState('all');\n  const [dateRange, setDateRange] = useState('30');\n  const [reportType, setReportType] = useState('overview'); // overview, financial, customer, agent, operational\n  \n  // Loading and sync states\n  const [loading, setLoading] = useState(true);\n  const [errorMessage, setErrorMessage] = useState('');\n  const isRealTimeEnabled = true; // Real-time updates always enabled\n  const [expandedAgents, setExpandedAgents] = useState<Set<string>>(new Set());\n  const [hierarchySortBy, setHierarchySortBy] = useState<'totalRolling' | 'totalWinLoss' | 'customerCount' | 'averageRolling' | 'name'>('totalRolling');\n  const [hierarchySortOrder, setHierarchySortOrder] = useState<'asc' | 'desc'>('desc');\n\n  // Helper functions\n  const safeFormatNumber = (value: number | undefined | null): string => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return '0';\n    }\n    return value.toLocaleString();\n  };\n\n  const safeNumber = (value: number | undefined | null): number => {\n    if (value === undefined || value === null || isNaN(value)) {\n      return 0;\n    }\n    return value;\n  };\n\n  // Real-time data loading from backend API with trip_sharing data\n  const loadRealTimeReportsData = useCallback(async () => {\n    try {\n      setErrorMessage('');\n      \n      console.log('📊 Loading real-time reports data from backend API...');\n      \n      const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n      const token = await tokenManager.getToken();\n      \n      console.log('🔍 API Connection Debug:', {\n        API_URL,\n        hasToken: !!token,\n        tokenLength: token?.length || 0\n      });\n      \n      if (!token) {\n        throw new Error('No authentication token found. Please log in again.');\n      }\n      \n      // Add cache-busting parameter to force fresh data\n      const cacheBuster = `?_t=${Date.now()}`;\n      \n      // Load all required data from backend API in parallel\n      const [agentsResponse, customersResponse, tripsResponse, rollingRecordsResponse, transactionsResponse] = await Promise.all([\n        fetch(`${API_URL}/agents${cacheBuster}`, {\n          headers: { \n            'Authorization': `Bearer ${token}`,\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        }),\n        fetch(`${API_URL}/customers${cacheBuster}`, {\n          headers: { \n            'Authorization': `Bearer ${token}`,\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        }),\n        fetch(`${API_URL}/trips${cacheBuster}`, {\n          headers: { \n            'Authorization': `Bearer ${token}`,\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        }),\n        fetch(`${API_URL}/rolling-records${cacheBuster}`, {\n          headers: { \n            'Authorization': `Bearer ${token}`,\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        }),\n        fetch(`${API_URL}/transactions${cacheBuster}`, {\n          headers: { \n            'Authorization': `Bearer ${token}`,\n            'Cache-Control': 'no-cache',\n            'Pragma': 'no-cache'\n          }\n        })\n      ]);\n      \n      if (!agentsResponse.ok || !customersResponse.ok || !tripsResponse.ok || !rollingRecordsResponse.ok || !transactionsResponse.ok) {\n        console.error('❌ API Request Failed:', {\n          agents: { ok: agentsResponse.ok, status: agentsResponse.status, statusText: agentsResponse.statusText },\n          customers: { ok: customersResponse.ok, status: customersResponse.status, statusText: customersResponse.statusText },\n          trips: { ok: tripsResponse.ok, status: tripsResponse.status, statusText: tripsResponse.statusText },\n          rollingRecords: { ok: rollingRecordsResponse.ok, status: rollingRecordsResponse.status, statusText: rollingRecordsResponse.statusText },\n          transactions: { ok: transactionsResponse.ok, status: transactionsResponse.status, statusText: transactionsResponse.statusText }\n        });\n        \n        // Try to get error details\n        try {\n          const agentsError = await agentsResponse.text();\n          console.error('Agents API Error:', agentsError);\n        } catch (e) {\n          console.error('Could not read agents error response');\n        }\n        \n        throw new Error(`Failed to fetch data from backend API. Status codes: agents=${agentsResponse.status}, customers=${customersResponse.status}, trips=${tripsResponse.status}, rolling=${rollingRecordsResponse.status}, transactions=${transactionsResponse.status}`);\n      }\n      \n      const [agentsResult, customersResult, tripsResult, rollingRecordsResult, transactionsResult] = await Promise.all([\n        agentsResponse.json(),\n        customersResponse.json(),\n        tripsResponse.json(),\n        rollingRecordsResponse.json(),\n        transactionsResponse.json()\n      ]);\n      \n      console.log('🔍 API Response Debug:', {\n        agentsResponse: { ok: agentsResponse.ok, status: agentsResponse.status },\n        customersResponse: { ok: customersResponse.ok, status: customersResponse.status },\n        tripsResponse: { ok: tripsResponse.ok, status: tripsResponse.status },\n        rollingRecordsResponse: { ok: rollingRecordsResponse.ok, status: rollingRecordsResponse.status },\n        transactionsResponse: { ok: transactionsResponse.ok, status: transactionsResponse.status }\n      });\n      \n      console.log('🔍 API Data Debug:', {\n        agentsResult,\n        customersResult,\n        tripsResult,\n        rollingRecordsResult,\n        transactionsResult\n      });\n      \n      const agentsData = agentsResult.data || [];\n      const customersData = customersResult.data || [];\n      const tripsData = tripsResult.data || []; // This includes trip_sharing data\n      const rollingRecordsData = rollingRecordsResult.data || [];\n      const transactionRecordsData = transactionsResult.data || [];\n      \n      console.log('🔍 Extracted Data Counts:', {\n        agentsData: agentsData.length,\n        customersData: customersData.length,\n        tripsData: tripsData.length,\n        rollingRecordsData: rollingRecordsData.length,\n        transactionRecordsData: transactionRecordsData.length\n      });\n\n      // Debug agent data structure\n      console.log('🔍 All Agent Data:', {\n        totalAgents: agentsData.length,\n        agents: agentsData.map((a: any) => ({\n          id: a.id,\n          name: a.name,\n          status: a.status\n        }))\n      });\n      console.log('🔍 Sample Agent Data:', {\n        agents: agentsData.slice(0, 3).map((a: any) => ({\n          id: a.id,\n          name: a.name,\n          status: a.status\n        })),\n        customers: customersData.slice(0, 3).map((c: any) => ({\n          id: c.id,\n          name: c.name,\n          agentId: c.agentId,\n          agent_id: c.agent_id\n        })),\n        trips: tripsData.slice(0, 2).map((t: any) => ({\n          id: t.id,\n          name: t.name,\n          agentId: t.agentId,\n          agents: t.agents\n        }))\n      });\n      \n      console.log('📊 Loaded transaction data:');\n      console.log('  - Rolling records:', rollingRecordsData.length);\n      console.log('  - Transaction records:', transactionRecordsData.length);\n\n\n      // Process customers with data from backend (already includes totals)\n      const processedCustomers = customersData.map((customer: Customer) => {\n        if (customersData.indexOf(customer) < 3) { // Debug first 3 customers\n          console.log('👤 Processing Customer (Full Object):', customer);\n          console.log('👤 Processing Customer (Key Fields):', {\n            id: customer.id,\n            name: customer.name,\n            totalRolling: customer.totalRolling,\n            total_rolling: (customer as any).total_rolling,\n            totalWinLoss: customer.totalWinLoss,\n            total_win_loss: (customer as any).total_win_loss,\n            agentId: customer.agentId,\n            agent_id: (customer as any).agent_id\n          });\n        }\n\n        return {\n          ...customer,\n          agentId: customer.agentId || (customer as any).agent_id || null,\n          totalRolling: customer.totalRolling || (customer as any).total_rolling || 0,\n          totalWinLoss: customer.totalWinLoss || (customer as any).total_win_loss || 0,\n          totalBuyIn: customer.totalBuyIn || (customer as any).total_buy_in || 0,\n          totalBuyOut: customer.totalBuyOut || (customer as any).total_buy_out || 0,\n          attachments: customer.attachments || [],\n          isAgent: customer.isAgent || (customer as any).is_agent || false,\n          rollingPercentage: customer.rollingPercentage || (customer as any).rolling_percentage || 1.4,\n          creditLimit: customer.creditLimit || (customer as any).credit_limit || 0,\n          availableCredit: customer.availableCredit || (customer as any).available_credit || 0\n        };\n      });\n\n      // Process trips with trip_sharing data from backend API\n      const processedTrips = tripsData.map((trip: Trip) => {\n        if (tripsData.indexOf(trip) < 2) { // Debug first 2 trips\n          console.log('🚗 Processing Trip (Full Object):', trip);\n          console.log('🚗 Processing Trip (Key Fields):', {\n            id: trip.id,\n            name: trip.name,\n            sharing: trip.sharing,\n            hasSharing: !!trip.sharing,\n            totalRolling: trip.totalRolling,\n            total_rolling: (trip as any).total_rolling\n          });\n        }\n\n        // Use trip_sharing data from backend API (now in camelCase)\n        const sharing = trip.sharing || {\n          totalWinLoss: 0,\n          totalExpenses: 0,\n          totalRollingCommission: 0,\n          totalBuyIn: 0,\n          totalBuyOut: 0,\n          netCashFlow: 0,\n          netResult: 0,\n          totalAgentShare: 0,\n          companyShare: 0,\n          agentSharePercentage: 0,\n          companySharePercentage: 100,\n          agentBreakdown: []\n        };\n\n        // Use actual total rolling from trip_sharing data instead of reverse calculation\n        const totalRolling = sharing?.totalRolling || sharing?.total_rolling || 0;\n\n\n        return {\n          ...trip,\n          totalRolling: totalRolling,\n          totalWinLoss: sharing?.totalWinLoss || sharing?.total_win_loss || 0,\n          totalBuyIn: sharing?.totalBuyIn || sharing?.total_buy_in || 0,\n          totalBuyOut: sharing?.totalBuyOut || sharing?.total_buy_out || 0,\n          calculatedTotalRolling: sharing?.totalRollingCommission || sharing?.total_rolling_commission || 0,\n          attachments: trip.attachments || [],\n          sharing: {\n            totalWinLoss: sharing?.totalWinLoss || sharing?.total_win_loss || 0,\n            totalExpenses: sharing?.totalExpenses || sharing?.total_expenses || 0,\n            totalRollingCommission: sharing?.totalRollingCommission || sharing?.total_rolling_commission || 0,\n            totalBuyIn: sharing?.totalBuyIn || sharing?.total_buy_in || 0,\n            totalBuyOut: sharing?.totalBuyOut || sharing?.total_buy_out || 0,\n            netCashFlow: sharing?.netCashFlow || sharing?.net_cash_flow || 0,\n            netResult: sharing?.netResult || sharing?.net_result || 0,\n            totalAgentShare: sharing?.totalAgentShare || sharing?.total_agent_share || 0,\n            companyShare: sharing?.companyShare || sharing?.company_share || 0,\n            agentSharePercentage: sharing?.agentSharePercentage || sharing?.agent_share_percentage || 0,\n            companySharePercentage: sharing?.companySharePercentage || sharing?.company_share_percentage || 100,\n            agentBreakdown: sharing?.agentBreakdown || sharing?.agent_breakdown || []\n          }\n        };\n      });\n\n      // Set processed data\n      setAgents(agentsData);\n      setCustomers(processedCustomers);\n      setTrips(processedTrips);\n      setRollingRecords(rollingRecordsData);\n      setTransactionRecords(transactionRecordsData);\n      \n      console.log(`✅ Real-time reports data loaded from backend API: ${processedCustomers.length} customers, ${agentsData.length} agents, ${processedTrips.length} trips with trip_sharing data`);\n      \n    } catch (error) {\n      console.error('❌ Error loading real-time reports data:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      setErrorMessage(`Failed to load reports data: ${errorMessage}`);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Real-time data sync with automatic refresh\n  useEffect(() => {\n    loadRealTimeReportsData();\n    \n    // Set up real-time refresh interval\n    let refreshInterval: NodeJS.Timeout;\n    if (isRealTimeEnabled) {\n      refreshInterval = setInterval(() => {\n        console.log('📊 Real-time reports refresh triggered');\n        loadRealTimeReportsData();\n      }, REAL_TIME_REFRESH_INTERVAL);\n    }\n\n    return () => {\n      if (refreshInterval) {\n        clearInterval(refreshInterval);\n      }\n    };\n  }, [loadRealTimeReportsData, isRealTimeEnabled]);\n\n  // Reload data when date range changes\n  useEffect(() => {\n    console.log('📅 Date range changed to:', dateRange, 'days');\n    loadRealTimeReportsData();\n  }, [dateRange, loadRealTimeReportsData]);\n\n\n  // Filter data based on user role and filters\n  const getFilteredData = () => {\n    console.log('🔍 Original Data Counts:', {\n      customers: customers.length,\n      trips: trips.length,\n      rollingRecords: rollingRecords.length,\n      transactionRecords: transactionRecords.length,\n      agents: agents.length,\n      userRole: user.role,\n      selectedAgent,\n      dateRange\n    });\n    \n    let filteredCustomers = customers;\n    let filteredTrips = trips;\n    let filteredRollingRecords = rollingRecords;\n    let filteredTransactionRecords = transactionRecords;\n\n    // Apply user role filter\n    if (user.role === 'agent' && user.agentId) {\n      filteredCustomers = customers.filter(c => {\n        const agentId = c.agentId || (c as any).agent_id;\n        return agentId === user.agentId;\n      });\n      filteredTrips = trips.filter(t => \n        (t.agents && t.agents.some(agent => agent.agentId === user.agentId)) ||\n        t.agentId === user.agentId\n      );\n    } else if (user.role === 'staff' && user.staffId) {\n      // Staff can only see trips they are assigned to\n      filteredTrips = trips.filter(t => (t as any).staffId === user.staffId);\n      // Filter customers based on trips\n      const tripCustomerIds = Array.from(new Set(\n        filteredTrips.flatMap(t => t.customers?.map(tc => tc.customerId) || [])\n      ));\n      filteredCustomers = customers.filter(c => tripCustomerIds.includes(c.id));\n    }\n\n    // Apply agent filter (admin only)\n    if (user.role === 'admin' && selectedAgent !== 'all') {\n      console.log('🎯 Agent Filter Applied:', {\n        selectedAgent,\n        beforeFilter: {\n          customers: filteredCustomers.length,\n          trips: filteredTrips.length,\n          rollingRecords: filteredRollingRecords.length,\n          transactionRecords: filteredTransactionRecords.length\n        }\n      });\n\n      // Debug customer filtering\n      const customersBeforeAgentFilter = filteredCustomers.length;\n      filteredCustomers = filteredCustomers.filter(c => {\n        // Try both possible field names for agent ID\n        const agentId = c.agentId || (c as any).agent_id;\n        return agentId === selectedAgent;\n      });\n      console.log('👥 Customer Filter:', {\n        selectedAgent,\n        customersBeforeFilter: customersBeforeAgentFilter,\n        customersAfterFilter: filteredCustomers.length,\n        sampleCustomers: customers.slice(0, 3).map(c => ({\n          id: c.id,\n          name: c.name,\n          agentId: c.agentId,\n          agent_id: (c as any).agent_id,\n          matchesSelected: (c.agentId || (c as any).agent_id) === selectedAgent\n        }))\n      });\n\n      // Debug trip filtering\n      const tripsBeforeAgentFilter = filteredTrips.length;\n      filteredTrips = filteredTrips.filter(t => {\n        const hasAgentInAgents = t.agents && t.agents.some(agent => agent.agentId === selectedAgent);\n        const hasDirectAgentId = t.agentId === selectedAgent;\n        const shouldInclude = hasAgentInAgents || hasDirectAgentId;\n        \n        if (filteredTrips.indexOf(t) < 3) { // Debug first 3 trips\n          console.log(`🚗 Trip ${t.name || t.id}:`, {\n            agentId: t.agentId,\n            agents: t.agents,\n            hasAgentInAgents,\n            hasDirectAgentId,\n            shouldInclude\n          });\n        }\n        \n        return shouldInclude;\n      });\n      console.log('🚗 Trip Filter:', {\n        selectedAgent,\n        tripsBeforeFilter: tripsBeforeAgentFilter,\n        tripsAfterFilter: filteredTrips.length\n      });\n\n      filteredRollingRecords = filteredRollingRecords.filter(r => {\n        // Try both possible field names for agent ID\n        const agentId = r.agentId || (r as any).agent_id;\n        return agentId === selectedAgent;\n      });\n      filteredTransactionRecords = filteredTransactionRecords.filter(b => {\n        const customer = customers.find(c => c.id === b.customerId);\n        // Try both possible field names for agent ID\n        const customerAgentId = customer?.agentId || (customer as any)?.agent_id;\n        return customerAgentId === selectedAgent;\n      });\n\n      console.log('📊 After Agent Filter:', {\n        customers: filteredCustomers.length,\n        trips: filteredTrips.length,\n        rollingRecords: filteredRollingRecords.length,\n        transactionRecords: filteredTransactionRecords.length\n      });\n    }\n    \n    // Apply role-based filtering for transaction records\n    if (user.role === 'agent' && user.agentId) {\n      filteredRollingRecords = filteredRollingRecords.filter(r => {\n        const agentId = r.agentId || (r as any).agent_id;\n        return agentId === user.agentId;\n      });\n      filteredTransactionRecords = filteredTransactionRecords.filter(b => {\n        const customer = customers.find(c => c.id === b.customerId);\n        const customerAgentId = customer?.agentId || (customer as any)?.agent_id;\n        return customerAgentId === user.agentId;\n      });\n    } else if (user.role === 'staff' && user.staffId) {\n      // Staff can see records from their assigned trips\n      const staffTripIds = filteredTrips.map(t => t.id);\n      filteredRollingRecords = filteredRollingRecords.filter(r => r.tripId && staffTripIds.includes(r.tripId));\n      filteredTransactionRecords = filteredTransactionRecords.filter(b => b.tripId && staffTripIds.includes(b.tripId));\n    }\n\n  // Apply date range filter\n  const cutoffDate = new Date();\n  cutoffDate.setDate(cutoffDate.getDate() - parseInt(dateRange));\n  \n  console.log('🔍 Date Filter Debug:', {\n    dateRange,\n    cutoffDate: cutoffDate.toISOString(),\n    customersBeforeFilter: filteredCustomers.length,\n    tripsBeforeFilter: filteredTrips.length,\n    rollingRecordsBeforeFilter: filteredRollingRecords.length,\n    transactionRecordsBeforeFilter: filteredTransactionRecords.length\n  });\n  \n  // Filter trips by date range\n  filteredTrips = filteredTrips.filter(t => {\n    const tripDate = t.date || (t as any).start_date || (t as any).created_at;\n    if (!tripDate) return false;\n    const date = new Date(tripDate);\n    return !isNaN(date.getTime()) && date >= cutoffDate;\n  });\n\n  // Filter rolling records by date range\n  filteredRollingRecords = filteredRollingRecords.filter(r => {\n    const recordDate = (r as any).date || (r as any).created_at;\n    if (!recordDate) return false;\n    const date = new Date(recordDate);\n    return !isNaN(date.getTime()) && date >= cutoffDate;\n  });\n\n  // Filter transaction records by date range\n  filteredTransactionRecords = filteredTransactionRecords.filter(t => {\n    const transactionDate = (t as any).date || (t as any).created_at;\n    if (!transactionDate) return false;\n    const date = new Date(transactionDate);\n    return !isNaN(date.getTime()) && date >= cutoffDate;\n  });\n  \n  console.log('🔍 After Date Filter:', {\n    tripsAfterFilter: filteredTrips.length,\n    rollingRecordsAfterFilter: filteredRollingRecords.length,\n    transactionRecordsAfterFilter: filteredTransactionRecords.length\n  });\n\n    return { filteredCustomers, filteredTrips, filteredRollingRecords, filteredTransactionRecords };\n  };\n\n  const { filteredCustomers, filteredTrips, filteredRollingRecords, filteredTransactionRecords } = getFilteredData();\n\n  // Calculate comprehensive metrics from trip_sharing data\n  const calculateMetrics = () => {\n    console.log('💰 Calculating Metrics from Filtered Trips:', {\n      filteredTripsCount: filteredTrips.length,\n      sampleTrip: filteredTrips[0] ? {\n        id: filteredTrips[0].id,\n        name: filteredTrips[0].name,\n        totalRolling: filteredTrips[0].totalRolling,\n        total_rolling: (filteredTrips[0] as any).total_rolling,\n        totalWinLoss: filteredTrips[0].totalWinLoss,\n        total_win_loss: (filteredTrips[0] as any).total_win_loss,\n        sharing: filteredTrips[0].sharing\n      } : 'No trips available'\n    });\n\n    // Calculate aggregated metrics from filtered trips - try multiple field name formats\n    // Calculate totals from filtered records for the selected time period\n    // This ensures metrics reflect the selected date range, not all-time totals\n    \n    // Calculate total rolling from trip_sharing data (aggregated and accurate)\n    // This matches the data shown in trip management and ensures consistency\n    console.log('🔍 DEBUG: Checking filteredTrips for sharing data:', {\n      filteredTripsCount: filteredTrips.length,\n      firstTripSharing: filteredTrips[0]?.sharing,\n      firstTripSharingKeys: filteredTrips[0]?.sharing ? Object.keys(filteredTrips[0].sharing) : 'No sharing data',\n      allSharingFields: filteredTrips[0]?.sharing\n    });\n    \n    // Helper function to convert amount from trip currency to display currency\n    const convertToDisplayCurrency = (amount: number, trip: any): number => {\n      if (!amount || amount === 0) return 0;\n      \n      const tripCurrency = trip.currency || 'HKD';\n      if (tripCurrency === displayCurrency) return amount;\n      \n      // Convert using trip's exchange rates\n      return convertAmount(amount, tripCurrency, displayCurrency, trip);\n    };\n\n    const totalRolling = filteredTrips.reduce((sum: number, trip: any) => {\n      // Try direct field access first\n      let rolling = trip.sharing?.totalRolling || trip.sharing?.total_rolling || 0;\n      \n      // If still 0, try to calculate from commission (assuming 1.4% rate)\n      if (rolling === 0 && trip.sharing?.totalRollingCommission) {\n        rolling = trip.sharing.totalRollingCommission / 0.014; // Reverse calculate from commission\n      }\n      \n      // Last resort: search for any rolling-related field\n      if (rolling === 0 && trip.sharing) {\n        const rollingField = Object.keys(trip.sharing).find(key => \n          key.toLowerCase().includes('rolling') && \n          typeof trip.sharing[key] === 'number' &&\n          trip.sharing[key] > 0\n        );\n        if (rollingField) {\n          rolling = trip.sharing[rollingField];\n        }\n      }\n      \n      // Convert to display currency\n      const convertedRolling = convertToDisplayCurrency(rolling, trip);\n      console.log('🔍 Trip rolling calculation:', {\n        tripName: trip.trip_name || trip.name,\n        tripCurrency: trip.currency,\n        displayCurrency: displayCurrency,\n        originalRolling: rolling,\n        convertedRolling: convertedRolling,\n        hasSharing: !!trip.sharing,\n        sharingKeys: trip.sharing ? Object.keys(trip.sharing) : []\n      });\n      return sum + convertedRolling;\n    }, 0);\n    \n    // Alternative: from individual rolling records (may be incomplete)\n    const totalRollingFromRecords = filteredRollingRecords.reduce((sum: number, record: any) => {\n      const rolling = record.rolling_amount || record.rollingAmount || 0;\n      return sum + rolling;\n    }, 0);\n    \n    const totalBuyIn = filteredTransactionRecords\n      .filter(t => (t as any).transaction_type === 'buy-in' || (t as any).transactionType === 'buy-in')\n      .reduce((sum: number, record: any) => {\n        const amount = record.amount || 0;\n        return sum + amount;\n      }, 0);\n    \n    const totalBuyOut = filteredTransactionRecords\n      .filter(t => (t as any).transaction_type === 'buy-out' || (t as any).transactionType === 'buy-out')\n      .reduce((sum: number, record: any) => {\n        const amount = record.amount || 0;\n        return sum + amount;\n      }, 0);\n    \n    // Calculate win/loss from buy-in minus buy-out for the time period\n    const totalWinLoss = totalBuyIn - totalBuyOut;\n\n    console.log('💰 Total Rolling Data Source Comparison:', {\n      totalRollingFromTripSharing: totalRolling,\n      totalRollingFromRecords: totalRollingFromRecords,\n      difference: totalRolling - totalRollingFromRecords,\n      filteredTripsCount: filteredTrips.length,\n      filteredRollingRecordsCount: filteredRollingRecords.length,\n      dateRange: `${dateRange} days`,\n      tripSharingData: filteredTrips.map((t: any) => ({\n        trip_name: t.trip_name || t.name,\n        total_rolling: t.sharing?.totalRolling || t.sharing?.total_rolling,\n        start_date: t.start_date || t.startDate,\n        sharing_exists: !!t.sharing,\n        totalRolling_value: t.sharing?.totalRolling,\n        total_rolling_value: t.sharing?.total_rolling\n      }))\n    });\n    \n    console.log('💰 Calculated Totals from Filtered Data (Time Period):', {\n      totalWinLoss,\n      totalRolling,\n      totalBuyIn,\n      totalBuyOut,\n      dateRange: `${dateRange} days`,\n      filteredTransactionRecordsCount: filteredTransactionRecords.length,\n      filteredCustomersCount: filteredCustomers.length\n    });\n    \n    // Calculate company profit/loss from trip_sharing data\n    const companyProfitLoss = filteredTrips.reduce((sum: number, trip: any) => {\n      return sum + (trip.sharing?.companyShare || 0);\n    }, 0);\n    \n    const isCompanyProfitable = companyProfitLoss > 0;\n\n    // Company totals from trip_sharing data - using correct field names\n    const companyTotalRolling = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.total_rolling), 0); // trip_sharing.total_rolling\n    const companyTotalWinLoss = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.total_win_loss), 0); // trip_sharing.total_win_loss\n    // const companyTotalBuyIn = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.totalBuyIn), 0);\n    // const companyTotalBuyOut = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.totalBuyOut), 0);\n    const companyTotalExpenses = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.totalExpenses), 0);\n    const companyNetResult = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.netResult), 0);\n    const companyShare = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.sharing?.companyShare), 0); // trip_sharing.companyShare\n    // Try multiple field name formats for commission\n    const totalRollingCommission = filteredTrips.reduce((sum: number, t: any) => {\n      const commission = t.sharing?.total_rolling_commission || t.sharing?.totalRollingCommission || 0;\n      if (filteredTrips.indexOf(t) < 2) { // Debug first 2 trips\n        console.log(`💰 Trip ${t.name || t.id} Commission:`, {\n          sharing: t.sharing,\n          total_rolling_commission: t.sharing?.total_rolling_commission,\n          totalRollingCommission: t.sharing?.totalRollingCommission,\n          commission\n        });\n      }\n      return sum + safeNumber(commission);\n    }, 0);\n\n    console.log('💰 Final Commission Total:', totalRollingCommission);\n\n    // Customer metrics\n    const totalCustomers = filteredCustomers.length;\n    // Active customers = customers who have rolling amount (check multiple field names)\n    const activeCustomers = filteredCustomers.filter((c: any) => {\n      const rolling = c.totalRolling || c.total_rolling || 0;\n      return rolling > 0;\n    }).length;\n\n    // Trip totals for display\n    const tripTotalRolling = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.totalRolling), 0);\n    const tripTotalWinLoss = filteredTrips.reduce((sum: number, t: any) => sum + safeNumber(t.totalWinLoss), 0);\n    const totalExpenses = companyTotalExpenses;\n\n    // House performance from company perspective (trip_sharing data)\n    // const houseGrossWin = Math.abs(companyTotalWinLoss); // Always show absolute value\n    const houseNetWin = Math.abs(companyNetResult - totalExpenses); // Company net after expenses\n    const houseFinalProfit = Math.abs(companyShare); // Final company share\n\n    // 🔍 DEBUG: Log calculated aggregated metrics\n    console.group('📊 Calculated Aggregated Metrics');\n    console.log('💰 Total Win/Loss:', totalWinLoss);\n    console.log('🎲 Total Rolling:', totalRolling);\n    console.log('💵 Total Buy-In:', totalBuyIn);\n    console.log('💸 Total Buy-Out:', totalBuyOut);\n    console.log('🏢 Company Profit/Loss:', companyProfitLoss);\n    console.log('📈 Is Company Profitable:', isCompanyProfitable);\n    console.log('🔢 Filtered Trips Count:', filteredTrips.length);\n    console.groupEnd();\n    console.log('🔍 Company Total Win/Loss (from sharing):', companyTotalWinLoss);\n    console.log('🔍 Total Rolling Commission (from sharing):', totalRollingCommission);\n    console.log('🔍 Active Customers (with rolling):', activeCustomers);\n    console.log('🔍 Total Customers:', totalCustomers);\n    console.groupEnd();\n\n    // Agent metrics\n    const totalAgents = agents.length;\n    const activeAgents = agents.filter((a: any) => a.status === 'active').length;\n\n    // Trip metrics\n    const totalTrips = filteredTrips.length;\n    const completedTrips = filteredTrips.filter((t: any) => t.status === 'completed').length;\n    const ongoingTrips = filteredTrips.filter((t: any) => t.status === 'in-progress').length;\n\n    // Performance ratios\n    const profitMargin = companyTotalRolling > 0 ? ((houseFinalProfit / companyTotalRolling) * 100) : 0;\n    const averageRollingPercentage = filteredCustomers.length > 0 \n      ? filteredCustomers.reduce((sum: number, c: any) => sum + c.rollingPercentage, 0) / filteredCustomers.length\n      : 1.4;\n\n    // Add debug logging for trip_sharing commission data\n    console.log('🔍 Trip Sharing Commission Debug:');\n    filteredTrips.forEach((trip, i) => {\n      const sharing = trip.sharing || {};\n      console.log(`  Trip ${i+1} (${trip.name || trip.id}):`, {\n        total_rolling_commission: sharing.total_rolling_commission,\n        totalRollingCommission: sharing.totalRollingCommission,\n        total_rolling: sharing.total_rolling,\n        totalRolling: sharing.totalRolling,\n        companyShare: sharing.companyShare,\n        company_share: sharing.company_share\n      });\n    });\n    \n    // Add debug logging for final metrics\n    console.log('🔍 Final Metrics Debug:');\n    console.log('  - Total Rolling (trip.totalRolling):', totalRolling);\n    console.log('  - Company Total Rolling (sharing.total_rolling):', companyTotalRolling);\n    console.log('  - Total Rolling Commission (sum of trip_sharing.total_rolling_commission):', totalRollingCommission);\n    console.log('  - Company Profit/Loss (sharing.companyShare):', companyProfitLoss);\n    console.log('  - Active Customers (with rolling > 0):', activeCustomers);\n    console.log('  - Total Customers:', totalCustomers);\n    \n    // Debug customer data\n    console.log('🔍 Customer Debug:');\n    console.log('  - Total Customers Found:', filteredCustomers.length);\n    filteredCustomers.slice(0, 5).forEach((c, i) => {\n      console.log(`  Customer ${i+1}:`, {\n        name: c.name,\n        totalRolling: c.totalRolling,\n        total_rolling: c.total_rolling,\n        isActive: c.isActive,\n        hasRolling: (c.totalRolling || c.total_rolling || 0) > 0\n      });\n    });\n\n    return {\n      // Main metrics - use actual data sources that have values\n      customerTotalRolling: totalRolling, // Use trip.totalRolling which has actual data (26,562,555)\n      customerTotalWinLoss: Math.abs(totalWinLoss), // Use trip.totalWinLoss which has actual data (813,939)\n      customerTotalBuyIn: totalBuyIn, // Use trip.totalBuyIn which has actual data\n      customerTotalBuyOut: totalBuyOut, // Use trip.totalBuyOut which has actual data\n      tripTotalRolling,\n      tripTotalWinLoss,\n      totalRollingCommission, // Sum of trip_sharing.total_rolling_commission from all trips\n      totalExpenses,\n      houseGrossWin: Math.abs(totalWinLoss), // Based on trip.totalWinLoss which has actual data\n      houseNetWin,\n      houseFinalProfit,\n      totalCustomers,\n      activeCustomers, // Customers with rolling > 0\n      totalAgents,\n      activeAgents,\n      totalTrips,\n      completedTrips,\n      ongoingTrips,\n      profitMargin,\n      averageRollingPercentage,\n      totalRollingRecords: filteredRollingRecords.length, // Number of rolling records in time period\n      totalBuyInOutRecords: filteredTransactionRecords.length, // Number of transaction records in time period\n      // Company performance indicators\n      companyNetResult,\n      companyShare: companyProfitLoss, // Use companyProfitLoss which has actual data (305,951.23)\n      isCompanyProfitable: companyProfitLoss > 0\n    };\n  };\n\n  const metrics = calculateMetrics();\n\n  // Toggle agent expansion in hierarchy view\n  const toggleAgentExpansion = (agentId: string) => {\n    const newExpanded = new Set(expandedAgents);\n    if (newExpanded.has(agentId)) {\n      newExpanded.delete(agentId);\n    } else {\n      newExpanded.add(agentId);\n    }\n    setExpandedAgents(newExpanded);\n  };\n\n  // Get hierarchical agent-customer data\n  const getAgentHierarchyData = () => {\n    // Use already filtered data instead of calling getFilteredData again\n    \n    console.log('🔍 Starting getAgentHierarchyData calculation...');\n    console.log('📊 Input data counts:', {\n      filteredCustomers: filteredCustomers.length,\n      filteredTrips: filteredTrips.length,\n      agents: agents.length,\n      rollingRecords: rollingRecords.length,\n      transactionRecords: transactionRecords.length\n    });\n    \n    // Debug rolling records structure\n    console.log('🎲 Sample rolling records:', rollingRecords.slice(0, 3));\n    console.log('💰 Sample transaction records:', transactionRecords.slice(0, 3));\n    \n    // Group customers by agent\n    const agentCustomerMap = new Map();\n    \n    filteredCustomers.forEach((customer, index) => {\n      // Handle both agentId and agent_id field names\n      const agentId = customer.agentId || (customer as any).agent_id;\n      \n      if (index < 3) { // Debug first 3 customers\n        console.log(`👤 Customer ${index + 1}:`, {\n          id: customer.id,\n          name: customer.name,\n          agentId: customer.agentId,\n          agent_id: (customer as any).agent_id,\n          resolvedAgentId: agentId,\n          fullCustomerData: customer // Show all customer fields\n        });\n      }\n      \n      if (!agentId) {\n        if (index < 3) console.log(`❌ Customer ${customer.name} has no agentId, skipping`);\n        return;\n      }\n      \n      if (!agentCustomerMap.has(agentId)) {\n        agentCustomerMap.set(agentId, {\n          agent: agents.find(a => a.id === agentId),\n          customers: []\n        });\n      }\n      \n      // Calculate customer metrics from trips\n      let customerWinLoss = 0;\n      let customerRolling = 0;\n      let customerBuyIn = 0;\n      let customerBuyOut = 0;\n      let customerTrips = 0;\n      \n      if (index < 3) { // Debug first 3 customers\n        console.log(`🎯 Processing trips for customer: ${customer.name}`);\n        console.log(`📋 Available trips count: ${filteredTrips.length}`);\n      }\n      \n      // Calculate customer metrics from filtered records for the selected time period\n      // This ensures agent performance reflects the selected date range\n      \n      // Get customer's rolling records for the time period (already filtered by date)\n      const customerRollingRecords = filteredRollingRecords.filter(r => (r as any).customer_id === customer.id);\n      customerRolling = customerRollingRecords.reduce((sum, r) => sum + ((r as any).rolling_amount || 0), 0);\n      \n      // Get customer's transaction records for the time period (already filtered by date)\n      const customerTransactionRecords = filteredTransactionRecords.filter(t => (t as any).customer_id === customer.id);\n      customerBuyIn = customerTransactionRecords\n        .filter(t => (t as any).transaction_type === 'buy-in' || (t as any).transactionType === 'buy-in')\n        .reduce((sum, t) => sum + ((t as any).amount || 0), 0);\n      customerBuyOut = customerTransactionRecords\n        .filter(t => (t as any).transaction_type === 'buy-out' || (t as any).transactionType === 'buy-out')\n        .reduce((sum, t) => sum + ((t as any).amount || 0), 0);\n      \n      // Calculate win/loss for the time period\n      customerWinLoss = customerBuyIn - customerBuyOut;\n      \n      if (index < 3) {\n        console.log(`🔄 Calculated customer data for time period:`, {\n          id: customer.id,\n          name: customer.name,\n          customerRolling,\n          customerWinLoss,\n          customerBuyIn,\n          customerBuyOut,\n          rollingRecordsCount: customerRollingRecords.length,\n          transactionRecordsCount: customerTransactionRecords.length\n        });\n      }\n      \n      // Count trips this customer participated in by checking trip_customers relationship\n      // For now, estimate based on whether customer has any activity\n      customerTrips = (customerRolling > 0 || Math.abs(customerWinLoss) > 0 || customerBuyIn > 0 || customerBuyOut > 0) ? 1 : 0;\n      \n      if (index < 3) {\n        console.log(`✅ Using customer aggregated data:`, {\n          customerRolling,\n          customerWinLoss,\n          customerBuyIn,\n          customerBuyOut,\n          customerTrips\n        });\n      }\n      \n      // Debug final customer calculations\n      if (index < 3) {\n        console.log(`📊 Final calculations for ${customer.name}:`, {\n          customerWinLoss,\n          customerRolling,\n          customerBuyIn,\n          customerBuyOut,\n          customerTrips,\n          netCashFlow: customerBuyOut - customerBuyIn\n        });\n      }\n      \n      agentCustomerMap.get(agentId).customers.push({\n        ...customer,\n        winLoss: customerWinLoss,\n        rolling: customerRolling,\n        buyIn: customerBuyIn,\n        buyOut: customerBuyOut,\n        trips: customerTrips,\n        netCashFlow: customerBuyOut - customerBuyIn\n      });\n    });\n    \n    // Convert to array and calculate agent totals\n    console.log(`🏢 Processing ${agentCustomerMap.size} agents for final calculations`);\n    \n    const result = Array.from(agentCustomerMap.entries()).map(([agentId, data], agentIndex) => {\n      const totalWinLoss = data.customers.reduce((sum: number, c: any) => sum + (c.winLoss || 0), 0);\n      const totalRolling = data.customers.reduce((sum: number, c: any) => sum + (c.rolling || 0), 0);\n      const totalBuyIn = data.customers.reduce((sum: number, c: any) => sum + (c.buyIn || 0), 0);\n      const totalBuyOut = data.customers.reduce((sum: number, c: any) => sum + (c.buyOut || 0), 0);\n      const totalTrips = data.customers.reduce((sum: number, c: any) => sum + (c.trips || 0), 0);\n      \n      if (agentIndex < 3) { // Debug first 3 agents\n        console.log(`🏢 Agent ${agentIndex + 1} (${data.agent?.name || 'Unknown'}):`, {\n          agentId,\n          customersCount: data.customers.length,\n          customerData: data.customers.map((c: any) => ({\n            name: c.name,\n            rolling: c.rolling,\n            winLoss: c.winLoss,\n            trips: c.trips\n          })),\n          totals: {\n            totalWinLoss,\n            totalRolling,\n            totalBuyIn,\n            totalBuyOut,\n            totalTrips,\n            averageRollingPerCustomer: data.customers.length > 0 ? totalRolling / data.customers.length : 0\n          }\n        });\n      }\n      \n      return {\n        agentId,\n        agent: data.agent,\n        customers: data.customers.sort((a: any, b: any) => (b.rolling || 0) - (a.rolling || 0)), // Sort by rolling desc\n        customerCount: data.customers.length,\n        totalWinLoss,\n        totalRolling,\n        totalBuyIn,\n        totalBuyOut,\n        totalTrips,\n        netCashFlow: totalBuyOut - totalBuyIn,\n        averageRollingPerCustomer: data.customers.length > 0 ? totalRolling / data.customers.length : 0\n      };\n    });\n    \n    console.log(`✅ Final hierarchy result: ${result.length} agents processed`);\n    return result;\n  };\n\n  // Sort hierarchy data function\n  const sortHierarchyData = (data: any[], sortBy: string, sortOrder: 'asc' | 'desc') => {\n    return [...data].sort((a, b) => {\n      let aValue: any, bValue: any;\n      \n      switch (sortBy) {\n        case 'totalRolling':\n          aValue = a.totalRolling || 0;\n          bValue = b.totalRolling || 0;\n          break;\n        case 'totalWinLoss':\n          aValue = a.totalWinLoss || 0;\n          bValue = b.totalWinLoss || 0;\n          break;\n        case 'customerCount':\n          aValue = a.customerCount || 0;\n          bValue = b.customerCount || 0;\n          break;\n        case 'averageRolling':\n          aValue = a.averageRollingPerCustomer || 0;\n          bValue = b.averageRollingPerCustomer || 0;\n          break;\n        case 'name':\n          aValue = a.agent?.name || '';\n          bValue = b.agent?.name || '';\n          return sortOrder === 'asc' \n            ? aValue.localeCompare(bValue)\n            : bValue.localeCompare(aValue);\n        default:\n          aValue = a.totalRolling || 0;\n          bValue = b.totalRolling || 0;\n      }\n      \n      if (sortOrder === 'asc') {\n        return aValue - bValue;\n      } else {\n        return bValue - aValue;\n      }\n    });\n  };\n\n  const rawHierarchyData = getAgentHierarchyData();\n  const hierarchyData = sortHierarchyData(rawHierarchyData, hierarchySortBy, hierarchySortOrder);\n  \n  // Debug logging for hierarchy data\n  console.log('🔍 Hierarchy Debug:', {\n    agentsCount: agents.length,\n    customersCount: customers.length,\n    filteredCustomersCount: filteredCustomers.length,\n    filteredTripsCount: filteredTrips.length,\n    hierarchyDataCount: hierarchyData.length,\n    userRole: user.role,\n    hierarchyData: hierarchyData.slice(0, 2), // Show first 2 items for debugging\n    sampleCustomers: filteredCustomers.slice(0, 3).map(c => ({\n      id: c.id,\n      name: c.name,\n      agentId: c.agentId,\n      agent_id: (c as any).agent_id\n    })),\n    sampleAgents: agents.slice(0, 3).map(a => ({\n      id: a.id,\n      name: a.name\n    })),\n    sampleTrips: filteredTrips.slice(0, 2).map(t => ({\n      id: t.id,\n      totalRolling: t.totalRolling,\n      totalWinLoss: t.totalWinLoss,\n      customers: t.customers?.map(tc => ({\n        customerId: tc.customerId,\n        rolling: (tc as any).rolling,\n        winLoss: (tc as any).winLoss,\n        totalRolling: (tc as any).totalRolling\n      })),\n      sharing: t.sharing ? {\n        totalWinLoss: t.sharing.totalWinLoss,\n        totalRolling: t.sharing.totalRolling\n      } : null\n    }))\n  });\n\n  // Add test data if no hierarchy data is available\n  const testHierarchyData = hierarchyData.length > 0 ? hierarchyData : [\n    {\n      agentId: 'test-agent-1',\n      agent: { name: 'Test Agent 1' },\n      customers: [\n        {\n          id: 'test-customer-1',\n          name: 'Test Customer 1',\n          rolling: 100000,\n          winLoss: 50000,\n          trips: 2\n        },\n        {\n          id: 'test-customer-2',\n          name: 'Test Customer 2',\n          rolling: 150000,\n          winLoss: -20000,\n          trips: 3\n        }\n      ],\n      customerCount: 2,\n      totalWinLoss: 30000,\n      totalRolling: 250000,\n      averageRollingPerCustomer: 125000\n    },\n    {\n      agentId: 'test-agent-2',\n      agent: { name: 'Test Agent 2' },\n      customers: [\n        {\n          id: 'test-customer-3',\n          name: 'Test Customer 3',\n          rolling: 80000,\n          winLoss: 15000,\n          trips: 1\n        }\n      ],\n      customerCount: 1,\n      totalWinLoss: 15000,\n      totalRolling: 80000,\n      averageRollingPerCustomer: 80000\n    }\n  ];\n\n  // Prepare chart data from trip_sharing data\n  const getDailyChartData = () => {\n    const dailyData: {[key: string]: any} = {};\n\n    // Process trips by date using trip_sharing data\n    console.log('🔍 Processing trips for chart data:', filteredTrips.length);\n    filteredTrips.forEach((trip, i) => {\n      const tripDate = trip.date || (trip as any).start_date || (trip as any).created_at;\n      if (!tripDate) {\n        console.warn(`Trip ${i+1} has no valid date:`, {\n          id: trip.id,\n          name: trip.name,\n          date: trip.date,\n          start_date: (trip as any).start_date,\n          created_at: (trip as any).created_at\n        });\n        return;\n      }\n      const date = tripDate.split('T')[0]; // Get date part only\n      console.log(`Trip ${i+1} date: ${tripDate} -> ${date}`);\n      if (!dailyData[date]) {\n        dailyData[date] = { \n          date, \n          rolling: 0, \n          winLoss: 0, \n          commission: 0, \n          buyIn: 0, \n          buyOut: 0, \n          netCashFlow: 0,\n          expenses: 0,\n          companyShare: 0,\n          recordCount: 0,\n          transactions: 0\n        };\n      }\n      \n      // Use actual trip data (which has values) instead of empty trip_sharing data\n      const sharing = trip.sharing || {};\n      \n      // Use trip data for rolling and winLoss (which have actual values)\n      dailyData[date].rolling += safeNumber(trip.totalRolling); // Use trip.totalRolling (has data)\n      dailyData[date].winLoss += safeNumber(trip.totalWinLoss); // Use trip.totalWinLoss (has data)\n      \n      // Use actual commission from trip_sharing data\n      const sharingCommission = safeNumber(sharing.total_rolling_commission) || safeNumber(sharing.totalRollingCommission);\n      dailyData[date].commission += sharingCommission;\n      \n      // Use trip data for buy-in/out\n      dailyData[date].buyIn += safeNumber(trip.totalBuyIn);\n      dailyData[date].buyOut += safeNumber(trip.totalBuyOut);\n      dailyData[date].expenses += safeNumber(sharing.totalExpenses);\n      dailyData[date].companyShare += safeNumber(sharing.companyShare);\n      dailyData[date].netCashFlow += safeNumber(trip.totalBuyOut - trip.totalBuyIn);\n      dailyData[date].recordCount += 1; // Trip count\n      dailyData[date].transactions += (((sharing.totalBuyIn || 0) > 0) || ((sharing.totalBuyOut || 0) > 0)) ? 1 : 0;\n    });\n\n    return Object.values(dailyData).sort((a: any, b: any) => \n      new Date(a.date).getTime() - new Date(b.date).getTime()\n    );\n  };\n\n  const chartData = getDailyChartData();\n  \n  // Add actual transaction records count to chart data\n  const enhancedChartData = chartData.map((dayData: any) => {\n    // Count rolling records for this date\n    const dayRollingRecords = filteredRollingRecords.filter((record: any) => {\n      const recordDate = record.updated_at || record.created_at || record.recordedAt || record.sessionStartTime || record.createdAt;\n      if (!recordDate) return false;\n      const recordDateOnly = recordDate.split('T')[0];\n      return recordDateOnly === dayData.date;\n    }).length;\n    \n    // Count transaction records for this date  \n    const dayTransactionRecords = filteredTransactionRecords.filter((record: any) => {\n      const recordDate = record.updated_at || record.created_at || record.createdAt;\n      if (!recordDate) return false;\n      const recordDateOnly = recordDate.split('T')[0];\n      return recordDateOnly === dayData.date;\n    }).length;\n    \n    return {\n      ...dayData,\n      actualTransactionRecords: dayRollingRecords + dayTransactionRecords,\n      rollingRecordsCount: dayRollingRecords,\n      transactionRecordsCount: dayTransactionRecords\n    };\n  });\n  \n  // Debug chart data\n  console.log('🔍 Enhanced Chart Data Debug:');\n  console.log('  - Chart data length:', enhancedChartData.length);\n  console.log('  - Total rolling records available:', filteredRollingRecords.length);\n  console.log('  - Total transaction records available:', filteredTransactionRecords.length);\n  console.log('  - Chart date range:', enhancedChartData.map(d => d.date));\n  enhancedChartData.slice(0, 3).forEach((day: any, i) => {\n    console.log(`  Day ${i+1} (${day.date}):`, {\n      tripCount: day.recordCount,\n      actualTransactionRecords: day.actualTransactionRecords,\n      rollingRecords: day.rollingRecordsCount,\n      transactionRecords: day.transactionRecordsCount\n    });\n  });\n  \n  // Debug sample transaction records to check date format\n  console.log('🔍 Sample Transaction Records (date fields):');\n  if (filteredTransactionRecords.length > 0) {\n    const record = filteredTransactionRecords[0];\n    console.log('  Transaction 1 date fields:', {\n      updated_at: record.updated_at,\n      created_at: record.created_at,\n      createdAt: record.createdAt,\n      extractedDate: (record.updated_at || record.created_at || record.createdAt || '').split('T')[0]\n    });\n  }\n  \n  console.log('🔍 Sample Rolling Records (all fields):');\n  if (filteredRollingRecords.length > 0) {\n    console.log('  Rolling 1 all fields:', filteredRollingRecords[0]);\n    console.log('  Available fields:', Object.keys(filteredRollingRecords[0]));\n  }\n\n  // Agent performance data (admin only)\n  const getAgentPerformanceData = () => {\n    if (user.role !== 'admin') return [];\n\n    return agents.map(agent => {\n      const agentCustomers = filteredCustomers.filter(c => c.agentId === agent.id);\n      const agentRollingRecords = filteredRollingRecords.filter(r => r.agentId === agent.id);\n      const agentBuyInOutRecords = filteredTransactionRecords.filter(b => {\n        const customer = customers.find(c => c.id === b.customerId);\n        return customer?.agentId === agent.id;\n      });\n      const agentTrips = filteredTrips.filter(t => \n        (t.agents && t.agents.some(a => a.agentId === agent.id)) ||\n        t.agentId === agent.id\n      );\n      \n      const rolling = agentRollingRecords.reduce((sum, r) => sum + safeNumber(r.rollingAmount), 0);\n      const winLoss = agentRollingRecords.reduce((sum, r) => sum + safeNumber(r.winLoss), 0);\n      const buyIn = agentBuyInOutRecords\n        .filter(r => r.transactionType === 'buy-in')\n        .reduce((sum, r) => sum + r.amount, 0);\n      const buyOut = agentBuyInOutRecords\n        .filter(r => r.transactionType === 'buy-out')\n        .reduce((sum, r) => sum + r.amount, 0);\n      \n      return {\n        name: agent.name,\n        customers: agentCustomers.length,\n        activeCustomers: agentCustomers.filter(c => c.isActive).length,\n        rolling,\n        winLoss,\n        buyIn,\n        buyOut,\n        netCashFlow: buyOut - buyIn,\n        commission: agentTrips.reduce((sum, trip) => {\n          const sharing = trip.sharing || {};\n          return sum + (safeNumber(sharing.total_rolling_commission) || safeNumber(sharing.totalRollingCommission));\n        }, 0),\n        trips: agentTrips.length,\n        rollingRecords: agentRollingRecords.length,\n        transactionRecords: agentTrips.filter(t => ((t.sharing?.totalBuyIn || 0) > 0) || ((t.sharing?.totalBuyOut || 0) > 0)).length,\n        averageRollingPercentage: agentCustomers.length > 0 \n          ? agentCustomers.reduce((sum, c) => sum + c.rollingPercentage, 0) / agentCustomers.length\n          : 0\n      };\n    }).filter(agent => agent.rolling > 0 || agent.customers > 0);\n  };\n\n  const agentPerformanceData = getAgentPerformanceData();\n\n  // Top customers data\n  const getTopCustomersData = () => {\n    return filteredCustomers\n      .map(customer => {\n        const customerRollingRecords = filteredRollingRecords.filter(r => r.customerId === customer.id);\n        const customerBuyInOutRecords = filteredTransactionRecords.filter(b => b.customerId === customer.id);\n        \n        const rolling = customerRollingRecords.reduce((sum, r) => sum + safeNumber(r.rollingAmount), 0);\n        const winLoss = customerRollingRecords.reduce((sum, r) => sum + safeNumber(r.winLoss), 0);\n        const buyIn = customerBuyInOutRecords\n          .filter(r => r.transactionType === 'buy-in')\n          .reduce((sum, r) => sum + r.amount, 0);\n        const buyOut = customerBuyInOutRecords\n          .filter(r => r.transactionType === 'buy-out')\n          .reduce((sum, r) => sum + r.amount, 0);\n\n        return {\n          ...customer,\n          periodRolling: rolling,\n          periodWinLoss: winLoss,\n          periodBuyIn: buyIn,\n          periodBuyOut: buyOut,\n          periodNetCashFlow: buyOut - buyIn,\n          periodCommission: rolling * (customer.rollingPercentage / 100),\n          recordCount: customerRollingRecords.length,\n          transactionCount: customerBuyInOutRecords.length\n        };\n      })\n      .filter(customer => customer.periodRolling > 0)\n      .sort((a, b) => b.periodRolling - a.periodRolling)\n      .slice(0, 10);\n  };\n\n  const topCustomersData = getTopCustomersData();\n\n  // Export functionality\n  const handleExport = () => {\n    const reportData = {\n      generatedAt: new Date().toISOString(),\n      dateRange: dateRange,\n      selectedAgent: selectedAgent,\n      userRole: user.role,\n      summary: metrics,\n      dailyData: chartData,\n      topCustomers: topCustomersData,\n      agentPerformance: agentPerformanceData,\n      rawData: {\n        customers: filteredCustomers.length,\n        trips: filteredTrips.length,\n        rollingRecords: filteredRollingRecords.length,\n        transactionRecords: filteredTransactionRecords.length\n      }\n    };\n\n    const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `casino-reports-${new Date().toISOString().split('T')[0]}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // Show loading state\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-2 text-sm text-gray-600\">Loading real-time reports data from Supabase...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n\n      {/* Error Alert */}\n      {errorMessage && (\n        <Alert className=\"border-red-200 bg-red-50\">\n          <AlertTriangle className=\"w-4 h-4 text-red-600\" />\n          <AlertDescription className=\"text-red-800\">\n            <strong>Reports Error:</strong> {errorMessage}\n            <Button\n              onClick={loadRealTimeReportsData}\n              size=\"sm\"\n              variant=\"outline\"\n              className=\"ml-3 text-red-800 border-red-300 hover:bg-red-100\"\n            >\n              <RefreshCw className=\"w-3 h-3 mr-1\" />\n              Retry\n            </Button>\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Header and Filters */}\n      <div className=\"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">{t('reports_title')}</h2>\n          <p className=\"text-gray-600\">\n            {user.role === 'agent' ? t('agent_performance') : \n             user.role === 'staff' ? t('reports') :\n             t('reports_subtitle')} • Live data from Supabase\n          </p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Showing data for last {dateRange} days • {metrics.totalRollingRecords} rolling records • {metrics.totalBuyInOutRecords} buy-in/out transactions\n          </p>\n        </div>\n        <div className=\"flex flex-wrap gap-2\">\n          <Select value={dateRange} onValueChange={setDateRange}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue placeholder=\"Date range\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"1\">Last 1 day</SelectItem>\n              <SelectItem value=\"7\">Last 7 days</SelectItem>\n              <SelectItem value=\"30\">Last 30 days</SelectItem>\n              <SelectItem value=\"90\">Last 90 days</SelectItem>\n              <SelectItem value=\"365\">Last year</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          <Select value={displayCurrency} onValueChange={setDisplayCurrency}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue placeholder=\"Currency\" />\n            </SelectTrigger>\n            <SelectContent>\n              {SUPPORTED_CURRENCIES.map((currency) => (\n                <SelectItem key={currency.value} value={currency.value}>\n                  {currency.symbol}\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          \n          {user.role === 'admin' && (\n            <Select value={selectedAgent} onValueChange={setSelectedAgent}>\n              <SelectTrigger className=\"w-40\">\n                <SelectValue placeholder=\"All agents\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Agents</SelectItem>\n                {agents.map((agent) => (\n                  <SelectItem key={agent.id} value={agent.id}>\n                    {agent.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          )}\n\n          <Select value={reportType} onValueChange={setReportType}>\n            <SelectTrigger className=\"w-36\">\n              <SelectValue placeholder=\"Report type\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"overview\">{t('overview_metrics')}</SelectItem>\n              <SelectItem value=\"financial\">{t('financial_summary')}</SelectItem>\n              <SelectItem value=\"customer\">{t('customer_metrics')}</SelectItem>\n              <SelectItem value=\"operational\">{t('operational_metrics')}</SelectItem>\n            </SelectContent>\n          </Select>\n          \n          <Button variant=\"outline\" onClick={handleExport}>\n            <Download className=\"w-4 h-4 mr-2\" />\n{t('export_data')}\n          </Button>\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div>\n        <h3 className=\"text-lg font-medium mb-4\">{t('overview_metrics')}</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\">\n          {/* 1. Total Win/Loss */}\n          <Card className={`bg-gradient-to-r ${metrics.customerTotalWinLoss > 0 ? 'from-red-50 to-red-100 border-red-200' : 'from-green-50 to-green-100 border-green-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.customerTotalWinLoss > 0 ? 'text-red-800' : 'text-green-800'}`}>{t('win_loss')}</CardTitle>\n              <ArrowUpDown className={`h-4 w-4 ${metrics.customerTotalWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`} />\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${metrics.customerTotalWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                HK${safeFormatNumber(metrics.customerTotalWinLoss)}\n              </div>\n              <p className={`text-xs ${metrics.customerTotalWinLoss > 0 ? 'text-red-600' : 'text-green-600'}`}>\n                {metrics.customerTotalWinLoss > 0 ? 'Customer Win (Company Loss)' : 'Customer Loss (Company Win)'}\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* 2. Total Rolling */}\n          <Card className=\"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-blue-800\">{t('reports_total_rolling')}</CardTitle>\n              <DollarSign className=\"h-4 w-4 text-blue-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-blue-700\">{getCurrencySymbol(displayCurrency)}{safeFormatNumber(metrics.customerTotalRolling)}</div>\n              <p className=\"text-xs text-blue-600\">\n                {metrics.totalRollingRecords} rolling records • Last {dateRange} days\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* 3. Rolling Commission */}\n          <Card className=\"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-purple-800\">Rolling Commission</CardTitle>\n              <Percent className=\"h-4 w-4 text-purple-600\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-purple-700\">HK${safeFormatNumber(metrics.totalRollingCommission)}</div>\n              <p className=\"text-xs text-purple-600\">\n                From trip_sharing data\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* 4. House P&L */}\n          <Card className={`bg-gradient-to-r ${metrics.isCompanyProfitable ? 'from-green-50 to-green-100 border-green-200' : 'from-red-50 to-red-100 border-red-200'}`}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className={`text-sm font-medium ${metrics.isCompanyProfitable ? 'text-green-800' : 'text-red-800'}`}>{t('profit_loss')}</CardTitle>\n              {metrics.isCompanyProfitable ? (\n                <Trophy className=\"h-4 w-4 text-green-600\" />\n              ) : (\n                <TrendingDown className=\"h-4 w-4 text-red-600\" />\n              )}\n            </CardHeader>\n            <CardContent>\n              <div className={`text-2xl font-bold ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`}>\n                HK${safeFormatNumber(Math.abs(metrics.companyShare))}\n              </div>\n              <p className={`text-xs ${metrics.isCompanyProfitable ? 'text-green-600' : 'text-red-600'}`}>\n                {metrics.isCompanyProfitable ? 'Company Profit (Customer Loss)' : 'Company Loss (Customer Win)'}\n              </p>\n            </CardContent>\n          </Card>\n\n          {/* 5. Active Customers */}\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">{t('overview_active_customers')}</CardTitle>\n              <Users className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\">{metrics.activeCustomers}</div>\n              <p className=\"text-xs text-muted-foreground\">\n{t('of_total_customers')} {metrics.totalCustomers}\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Charts Section */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Daily Rolling Volume & Commission */}\n        <Card className=\"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50\">\n          <CardHeader className=\"pb-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"text-xl font-bold text-gray-800 flex items-center gap-2\">\n                  <BarChart3 className=\"w-5 h-5 text-blue-600\" />\n                  Daily Business Overview\n                </CardTitle>\n                <CardDescription className=\"text-gray-600 mt-1\">\n                  Cash flow analysis - Buy-in and Buy-out transactions\n                </CardDescription>\n              </div>\n              <div className=\"flex items-center gap-4 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-green-500\"></div>\n                  <span className=\"text-gray-600\">{t('buy_in')}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-orange-500\"></div>\n                  <span className=\"text-gray-600\">{t('buy_out')}</span>\n                </div>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            <ResponsiveContainer width=\"100%\" height={350}>\n              <ComposedChart \n                data={chartData}\n                margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\n              >\n                <defs>\n                  <linearGradient id=\"buyInGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0.3}/>\n                  </linearGradient>\n                  <linearGradient id=\"buyOutGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#F97316\" stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor=\"#F97316\" stopOpacity={0.3}/>\n                  </linearGradient>\n                </defs>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E5E7EB\" opacity={0.5} />\n                <XAxis \n                  dataKey=\"date\" \n                  axisLine={false}\n                  tickLine={false}\n                  tick={{ fontSize: 12, fill: '#6B7280' }}\n                  tickFormatter={(value) => {\n                    const date = new Date(value);\n                    return `${date.getMonth() + 1}/${date.getDate()}`;\n                  }}\n                  label={{ value: t('date'), position: 'insideBottom', offset: -5, style: { textAnchor: 'middle', fontSize: '12px', fill: '#6B7280' } }}\n                />\n                <YAxis \n                  axisLine={false}\n                  tickLine={false}\n                  tick={{ fontSize: 12, fill: '#6B7280' }}\n                  tickFormatter={(value) => {\n                    if (value >= 1000000) return `${(value / 1000000).toFixed(1)}M`;\n                    if (value >= 1000) return `${(value / 1000).toFixed(0)}K`;\n                    return value.toString();\n                  }}\n                  label={{ value: t('amount_hkd'), angle: -90, position: 'insideLeft', style: { textAnchor: 'middle', fontSize: '12px', fill: '#6B7280' } }}\n                />\n                <Tooltip \n                  contentStyle={{\n                    backgroundColor: 'white',\n                    border: 'none',\n                    borderRadius: '12px',\n                    boxShadow: '0 10px 25px rgba(0,0,0,0.1)',\n                    padding: '12px'\n                  }}\n                  formatter={(value, name) => [\n                    `HK$${Number(value).toLocaleString()}`, \n                    name === 'buyIn' ? '💰 Buy-in' : \n                    name === 'buyOut' ? '💸 Buy-out' :\n                    '📊 Data'\n                  ]}\n                  labelFormatter={(label) => {\n                    const date = new Date(label);\n                    return `📅 ${date.toLocaleDateString('en-US', { \n                      weekday: 'short', \n                      month: 'short', \n                      day: 'numeric' \n                    })}`;\n                  }}\n                />\n                <Bar \n                  dataKey=\"buyIn\" \n                  fill=\"url(#buyInGradient)\" \n                  name=\"buyIn\"\n                  radius={[4, 4, 0, 0]}\n                  maxBarSize={50}\n                />\n                <Bar \n                  dataKey=\"buyOut\" \n                  fill=\"url(#buyOutGradient)\" \n                  name=\"buyOut\"\n                  radius={[4, 4, 0, 0]}\n                  maxBarSize={50}\n                />\n              </ComposedChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* {t('overview_expenses')} & Commission Analysis */}\n        <Card className=\"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50\">\n          <CardHeader className=\"pb-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"text-xl font-bold text-gray-800 flex items-center gap-2\">\n                  <Activity className=\"w-5 h-5 text-purple-600\" />\n{t('financial_summary')}\n                </CardTitle>\n                <CardDescription className=\"text-gray-600 mt-1\">\n                  Operating expenses and rolling commission trends\n                </CardDescription>\n              </div>\n              <div className=\"flex items-center gap-4 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-red-500\"></div>\n                  <span className=\"text-gray-600\">{t('overview_expenses')}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full bg-green-500\"></div>\n                  <span className=\"text-gray-600\">{t('overview_commission_rate')}</span>\n                </div>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent className=\"pt-0\">\n            <ResponsiveContainer width=\"100%\" height={350}>\n              <ComposedChart \n                data={chartData}\n                margin={{ top: 20, right: 30, left: 20, bottom: 5 }}\n              >\n                <defs>\n                  <linearGradient id=\"expensesGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#EF4444\" stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor=\"#EF4444\" stopOpacity={0.2}/>\n                  </linearGradient>\n                  <linearGradient id=\"commissionAreaGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0.2}/>\n                  </linearGradient>\n                </defs>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#E5E7EB\" opacity={0.5} />\n                <XAxis \n                  dataKey=\"date\" \n                  axisLine={false}\n                  tickLine={false}\n                  tick={{ fontSize: 12, fill: '#6B7280' }}\n                  tickFormatter={(value) => {\n                    const date = new Date(value);\n                    return `${date.getMonth() + 1}/${date.getDate()}`;\n                  }}\n                  label={{ value: t('date'), position: 'insideBottom', offset: -5, style: { textAnchor: 'middle', fontSize: '12px', fill: '#6B7280' } }}\n                />\n                <YAxis \n                  axisLine={false}\n                  tickLine={false}\n                  tick={{ fontSize: 12, fill: '#6B7280' }}\n                  tickFormatter={(value) => {\n                    if (value >= 1000000) return `${(value / 1000000).toFixed(1)}M`;\n                    if (value >= 1000) return `${(value / 1000).toFixed(0)}K`;\n                    return value.toString();\n                  }}\n                  label={{ value: t('amount_hkd'), angle: -90, position: 'insideLeft', style: { textAnchor: 'middle', fontSize: '12px', fill: '#6B7280' } }}\n                />\n                <Tooltip \n                  contentStyle={{\n                    backgroundColor: 'white',\n                    border: 'none',\n                    borderRadius: '12px',\n                    boxShadow: '0 10px 25px rgba(0,0,0,0.1)',\n                    padding: '12px'\n                  }}\n                  formatter={(value, name) => [\n                    `HK$${Number(value).toLocaleString()}`, \n                    name === 'expenses' ? `💸 ${t('overview_expenses')}` : \n                    name === 'commission' ? `💰 ${t('overview_commission_rate')}` :\n                    '📊 Data'\n                  ]}\n                  labelFormatter={(label) => {\n                    const date = new Date(label);\n                    return `📅 ${date.toLocaleDateString('en-US', { \n                      weekday: 'short', \n                      month: 'short', \n                      day: 'numeric' \n                    })}`;\n                  }}\n                />\n                <Area \n                  type=\"monotone\" \n                  dataKey=\"expenses\" \n                  stroke=\"#EF4444\" \n                  fill=\"url(#expensesGradient)\" \n                  name=\"expenses\"\n                  strokeWidth={2}\n                />\n                <Area \n                  type=\"monotone\" \n                  dataKey=\"commission\" \n                  stroke=\"#10B981\" \n                  fill=\"url(#commissionAreaGradient)\" \n                  name=\"commission\"\n                  strokeWidth={2}\n                />\n              </ComposedChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n\n\n      {/* Top Customers */}\n      {topCustomersData.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Top Performing Customers</CardTitle>\n            <CardDescription>\n              Highest rolling volume customers for the selected period • Sorted by rolling amount\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {topCustomersData.map((customer, index) => (\n                <div key={customer.id} className=\"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-8 h-8 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-medium\">\n                      {index + 1}\n                    </div>\n                    <div>\n                      <p className=\"font-medium\">{customer.name}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        Agent: {customer.agentName} • {customer.rollingPercentage}% rolling rate\n                      </p>\n                      <p className=\"text-xs text-gray-400\">\n                        {customer.recordCount} records • {customer.transactionCount} transactions\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"grid grid-cols-4 gap-4 text-right text-xs\">\n                    <div>\n                      <div className=\"text-gray-500\">Rolling</div>\n                      <div className=\"font-medium text-blue-600\">HK${safeFormatNumber(customer.periodRolling)}</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-500\">Win/Loss</div>\n                      <div className={`font-medium ${\n                        customer.periodWinLoss > 0 ? 'text-red-600' : 'text-green-600'\n                      }`}>\n                        HK${safeFormatNumber(Math.abs(customer.periodWinLoss))}\n                      </div>\n                      <div className={`text-xs ${\n                        customer.periodWinLoss > 0 ? 'text-red-500' : 'text-green-500'\n                      }`}>\n                        {customer.periodWinLoss > 0 ? 'Customer Win' : 'Company Win'}\n                      </div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-500\">Commission</div>\n                      <div className=\"font-medium text-purple-600\">HK${safeFormatNumber(customer.periodCommission)}</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-500\">Cash Flow</div>\n                      <div className={`font-medium ${\n                        customer.periodNetCashFlow >= 0 ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        HK${safeFormatNumber(customer.periodNetCashFlow)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Agent Performance (Admin Only) */}\n      {user.role === 'admin' && agentPerformanceData.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Agent Performance Analysis</CardTitle>\n            <CardDescription>\n              Comprehensive performance metrics by agent for the selected period\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Agent\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Customers\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Rolling Volume\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Commission\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Win/Loss\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Cash Flow\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Activity\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {agentPerformanceData.map((agent) => (\n                    <tr key={agent.name} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div>\n                          <div className=\"text-sm font-medium text-gray-900\">{agent.name}</div>\n                          <div className=\"text-xs text-gray-500\">{agent.averageRollingPercentage.toFixed(1)}% avg rate</div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        <div>{agent.activeCustomers}/{agent.customers}</div>\n                        <div className=\"text-xs text-gray-400\">active/total</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        <div className=\"font-medium\">HK${safeFormatNumber(agent.rolling)}</div>\n                        <div className=\"text-xs text-blue-600\">{agent.trips} trips</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-purple-600 font-medium\">\n                        HK${safeFormatNumber(agent.commission)}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <div className={agent.winLoss > 0 ? 'text-red-600' : 'text-green-600'}>\n                          HK${safeFormatNumber(Math.abs(agent.winLoss))}\n                        </div>\n                        <div className={`text-xs ${\n                          agent.winLoss > 0 ? 'text-red-500' : 'text-green-500'\n                        }`}>\n                          {agent.winLoss > 0 ? 'Customer Win' : 'Company Win'}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <div className={`font-medium ${agent.netCashFlow >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                          HK${safeFormatNumber(agent.netCashFlow)}\n                        </div>\n                        <div className=\"text-xs text-gray-400\">\n                          In: HK${safeFormatNumber(agent.buyIn)} • Out: HK${safeFormatNumber(agent.buyOut)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        <div>{agent.rollingRecords} rolling</div>\n                        <div className=\"text-xs text-gray-400\">{agent.transactionRecords} buy-in/out</div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Agent-Customer Hierarchy View (Admin and Boss) */}\n      {(user.role === 'admin' || user.role === 'boss') && (\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Users className=\"w-5 h-5\" />\n                  <span>{t('agent_hierarchy')}</span>\n                  <Badge variant=\"secondary\">{testHierarchyData.length} {t('agents')}</Badge>\n                </CardTitle>\n                <CardDescription>\n                  {t('agent_hierarchy_desc')}\n                </CardDescription>\n              </div>\n              \n              {/* Sort Controls */}\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"flex items-center space-x-2\">\n                  <label className=\"text-sm font-medium text-gray-700\">{t('sort_by')}</label>\n                  <select\n                    value={hierarchySortBy}\n                    onChange={(e) => setHierarchySortBy(e.target.value as any)}\n                    className=\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"totalRolling\">{t('reports_total_rolling')}</option>\n                    <option value=\"totalWinLoss\">{t('win_loss')}</option>\n                    <option value=\"customerCount\">{t('customer_count')}</option>\n                    <option value=\"averageRolling\">{t('average_rolling')}</option>\n                    <option value=\"name\">{t('agent_name')}</option>\n                  </select>\n                </div>\n                \n                <button\n                  onClick={() => setHierarchySortOrder(hierarchySortOrder === 'asc' ? 'desc' : 'asc')}\n                  className=\"p-1 hover:bg-gray-100 rounded-md transition-colors\"\n                  title={`Sort ${hierarchySortOrder === 'asc' ? 'Descending' : 'Ascending'}`}\n                >\n                  {hierarchySortOrder === 'asc' ? (\n                    <ArrowUp className=\"w-4 h-4 text-gray-600\" />\n                  ) : (\n                    <ArrowDown className=\"w-4 h-4 text-gray-600\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              {testHierarchyData.map((agentData) => (\n                <div key={agentData.agentId} className=\"border rounded-lg\">\n                  {/* Agent Header */}\n                  <div \n                    className=\"p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors\"\n                    onClick={() => toggleAgentExpansion(agentData.agentId)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-3\">\n                        {expandedAgents.has(agentData.agentId) ? (\n                          <ChevronDown className=\"w-4 h-4 text-gray-500\" />\n                        ) : (\n                          <ChevronRight className=\"w-4 h-4 text-gray-500\" />\n                        )}\n                        <div>\n                          <div className=\"font-semibold text-gray-900\">\n                            {agentData.agent?.name || 'Unknown Agent'}\n                          </div>\n                          <div className=\"text-sm text-gray-500\">\n                            {agentData.customerCount} {t('customers')}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-8 text-sm\">\n                        <div className=\"text-center\">\n                          <div className=\"font-medium text-blue-600\">\n                            HK${safeFormatNumber(agentData.totalRolling)}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">{t('reports_total_rolling')}</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className={`font-medium ${\n                            agentData.totalWinLoss >= 0 ? 'text-green-600' : 'text-red-600'\n                          }`}>\n                            HK${safeFormatNumber(Math.abs(agentData.totalWinLoss))}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">\n                            {agentData.totalWinLoss >= 0 ? t('individual_win') : t('win_loss')}\n                          </div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"font-medium text-gray-700\">\n                            {agentData.customerCount}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">{t('customer_count')}</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"font-medium text-purple-600\">\n                            HK${safeFormatNumber(agentData.averageRollingPerCustomer)}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">{t('average_rolling')}</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Customer Details (Expandable) */}\n                  {expandedAgents.has(agentData.agentId) && (\n                    <div className=\"border-t\">\n                      <div className=\"p-4 bg-white\">\n                        <div className=\"grid gap-3\">\n                          {agentData.customers.map((customer: any) => (\n                            <div \n                              key={customer.id} \n                              className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n                            >\n                              <div className=\"flex items-center space-x-3\">\n                                <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n                                <div>\n                                  <div className=\"font-medium text-gray-900\">\n                                    {customer.name}\n                                  </div>\n                                  <div className=\"text-sm text-gray-500\">\n                                    {customer.trips} {t('trips')}\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"flex space-x-8 text-sm\">\n                                <div className=\"text-center\">\n                                  <div className=\"font-medium text-blue-600\">\n                                    HK${safeFormatNumber(customer.rolling)}\n                                  </div>\n                                  <div className=\"text-xs text-gray-500\">{t('individual_rolling')}</div>\n                                </div>\n                                <div className=\"text-center\">\n                                  <div className={`font-medium ${\n                                    customer.winLoss >= 0 ? 'text-green-600' : 'text-red-600'\n                                  }`}>\n                                    HK${safeFormatNumber(Math.abs(customer.winLoss))}\n                                  </div>\n                                  <div className=\"text-xs text-gray-500\">\n                                    {customer.winLoss >= 0 ? t('individual_win') : t('win_loss')}\n                                  </div>\n                                </div>\n                                <div className=\"text-center\">\n                                  <div className=\"font-medium text-gray-700\">\n                                    {customer.trips}\n                                  </div>\n                                  <div className=\"text-xs text-gray-500\">{t('trip_count')}</div>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                        \n                        {agentData.customers.length === 0 && (\n                          <div className=\"text-center py-8 text-gray-500\">\n                            <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                            <div>{t('no_data')}</div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n            \n            {testHierarchyData.length === 0 && (\n              <div className=\"text-center py-12 text-gray-500\">\n                <Users className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                <div className=\"text-lg font-medium mb-2\">No Agent Data Available</div>\n                <div>No agents with customers found in the selected date range</div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,GAAG,EAAEC,KAAK,EAAEC,KAAK,EAAEC,aAAa,EAAEC,OAAO,EAAEC,mBAAmB,EAAEC,aAAa,EAAEC,IAAI,QAAQ,UAAU;AAC9G,SAASC,YAAY,EAAEC,KAAK,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,EAAEC,OAAO,EAAEC,MAAM,EAAEC,WAAW,EAAEC,WAAW,EAAEC,YAAY,EAAEC,OAAO,EAAEC,SAAS,QAAQ,cAAc;AACpM,SAASC,YAAY,QAAQ,4BAA4B;AACzD,SAASC,WAAW,QAAQ,6BAA6B;AACzD,SAASC,WAAW,QAAQ,6BAA6B;AACzD,SACEC,oBAAoB,EAEpBC,aAAa,EACbC,iBAAiB,QACZ,mBAAmB;AAE1B,SAASC,IAAI,EAAEC,WAAW,EAAEC,eAAe,EAAEC,UAAU,EAAEC,SAAS,QAAQ,WAAW;AACrF,SAASC,MAAM,EAAEC,aAAa,EAAEC,UAAU,EAAEC,aAAa,EAAEC,WAAW,QAAQ,aAAa;AAC3F,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,KAAK,EAAEC,gBAAgB,QAAQ,YAAY;AACpD,SAASC,KAAK,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGnC;AACA,MAAMC,0BAA0B,GAAG,KAAK;AAGxC,OAAO,MAAMC,OAAiC,GAAGA,CAAC;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC7D,MAAM;IAAEC;EAAE,CAAC,GAAGzB,WAAW,CAAC,CAAC;EAC3B,MAAM;IAAE0B,cAAc;IAAEC,oBAAoB;IAAEC,uBAAuB;IAAEC;EAAe,CAAC,GAAG5B,WAAW,CAAC,CAAC;;EAEvG;EACA,MAAM,CAAC6B,SAAS,EAAEC,YAAY,CAAC,GAAG1D,QAAQ,CAAa,EAAE,CAAC;EAC1D,MAAM,CAAC2D,MAAM,EAAEC,SAAS,CAAC,GAAG5D,QAAQ,CAAU,EAAE,CAAC;EACjD,MAAM,CAAC6D,KAAK,EAAEC,QAAQ,CAAC,GAAG9D,QAAQ,CAAS,EAAE,CAAC;EAC9C,MAAM,CAAC+D,cAAc,EAAEC,iBAAiB,CAAC,GAAGhE,QAAQ,CAAkB,EAAE,CAAC;EACzE,MAAM,CAACiE,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGlE,QAAQ,CAAQ,EAAE,CAAC;;EAEvE;EACA,MAAM,CAACmE,aAAa,EAAEC,gBAAgB,CAAC,GAAGpE,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACqE,SAAS,EAAEC,YAAY,CAAC,GAAGtE,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACuE,UAAU,EAAEC,aAAa,CAAC,GAAGxE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;;EAE1D;EACA,MAAM,CAACyE,OAAO,EAAEC,UAAU,CAAC,GAAG1E,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC2E,YAAY,EAAEC,eAAe,CAAC,GAAG5E,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM6E,iBAAiB,GAAG,IAAI,CAAC,CAAC;EAChC,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAG/E,QAAQ,CAAc,IAAIgF,GAAG,CAAC,CAAC,CAAC;EAC5E,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGlF,QAAQ,CAAgF,cAAc,CAAC;EACrJ,MAAM,CAACmF,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGpF,QAAQ,CAAiB,MAAM,CAAC;;EAEpF;EACA,MAAMqF,gBAAgB,GAAIC,KAAgC,IAAa;IACrE,IAAIA,KAAK,KAAKC,SAAS,IAAID,KAAK,KAAK,IAAI,IAAIE,KAAK,CAACF,KAAK,CAAC,EAAE;MACzD,OAAO,GAAG;IACZ;IACA,OAAOA,KAAK,CAACG,cAAc,CAAC,CAAC;EAC/B,CAAC;EAED,MAAMC,UAAU,GAAIJ,KAAgC,IAAa;IAC/D,IAAIA,KAAK,KAAKC,SAAS,IAAID,KAAK,KAAK,IAAI,IAAIE,KAAK,CAACF,KAAK,CAAC,EAAE;MACzD,OAAO,CAAC;IACV;IACA,OAAOA,KAAK;EACd,CAAC;;EAED;EACA,MAAMK,uBAAuB,GAAGzF,WAAW,CAAC,YAAY;IACtD,IAAI;MACF0E,eAAe,CAAC,EAAE,CAAC;MAEnBgB,OAAO,CAACC,GAAG,CAAC,uDAAuD,CAAC;MAEpE,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;MAC5E,MAAMC,KAAK,GAAG,MAAMxE,YAAY,CAACyE,QAAQ,CAAC,CAAC;MAE3CP,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE;QACtCC,OAAO;QACPM,QAAQ,EAAE,CAAC,CAACF,KAAK;QACjBG,WAAW,EAAE,CAAAH,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEI,MAAM,KAAI;MAChC,CAAC,CAAC;MAEF,IAAI,CAACJ,KAAK,EAAE;QACV,MAAM,IAAIK,KAAK,CAAC,qDAAqD,CAAC;MACxE;;MAEA;MACA,MAAMC,WAAW,GAAG,OAAOC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;;MAEvC;MACA,MAAM,CAACC,cAAc,EAAEC,iBAAiB,EAAEC,aAAa,EAAEC,sBAAsB,EAAEC,oBAAoB,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACzHC,KAAK,CAAC,GAAGpB,OAAO,UAAUU,WAAW,EAAE,EAAE;QACvCW,OAAO,EAAE;UACP,eAAe,EAAE,UAAUjB,KAAK,EAAE;UAClC,eAAe,EAAE,UAAU;UAC3B,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC,EACFgB,KAAK,CAAC,GAAGpB,OAAO,aAAaU,WAAW,EAAE,EAAE;QAC1CW,OAAO,EAAE;UACP,eAAe,EAAE,UAAUjB,KAAK,EAAE;UAClC,eAAe,EAAE,UAAU;UAC3B,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC,EACFgB,KAAK,CAAC,GAAGpB,OAAO,SAASU,WAAW,EAAE,EAAE;QACtCW,OAAO,EAAE;UACP,eAAe,EAAE,UAAUjB,KAAK,EAAE;UAClC,eAAe,EAAE,UAAU;UAC3B,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC,EACFgB,KAAK,CAAC,GAAGpB,OAAO,mBAAmBU,WAAW,EAAE,EAAE;QAChDW,OAAO,EAAE;UACP,eAAe,EAAE,UAAUjB,KAAK,EAAE;UAClC,eAAe,EAAE,UAAU;UAC3B,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC,EACFgB,KAAK,CAAC,GAAGpB,OAAO,gBAAgBU,WAAW,EAAE,EAAE;QAC7CW,OAAO,EAAE;UACP,eAAe,EAAE,UAAUjB,KAAK,EAAE;UAClC,eAAe,EAAE,UAAU;UAC3B,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC,CACH,CAAC;MAEF,IAAI,CAACS,cAAc,CAACS,EAAE,IAAI,CAACR,iBAAiB,CAACQ,EAAE,IAAI,CAACP,aAAa,CAACO,EAAE,IAAI,CAACN,sBAAsB,CAACM,EAAE,IAAI,CAACL,oBAAoB,CAACK,EAAE,EAAE;QAC9HxB,OAAO,CAACyB,KAAK,CAAC,uBAAuB,EAAE;UACrC1D,MAAM,EAAE;YAAEyD,EAAE,EAAET,cAAc,CAACS,EAAE;YAAEE,MAAM,EAAEX,cAAc,CAACW,MAAM;YAAEC,UAAU,EAAEZ,cAAc,CAACY;UAAW,CAAC;UACvG9D,SAAS,EAAE;YAAE2D,EAAE,EAAER,iBAAiB,CAACQ,EAAE;YAAEE,MAAM,EAAEV,iBAAiB,CAACU,MAAM;YAAEC,UAAU,EAAEX,iBAAiB,CAACW;UAAW,CAAC;UACnH1D,KAAK,EAAE;YAAEuD,EAAE,EAAEP,aAAa,CAACO,EAAE;YAAEE,MAAM,EAAET,aAAa,CAACS,MAAM;YAAEC,UAAU,EAAEV,aAAa,CAACU;UAAW,CAAC;UACnGxD,cAAc,EAAE;YAAEqD,EAAE,EAAEN,sBAAsB,CAACM,EAAE;YAAEE,MAAM,EAAER,sBAAsB,CAACQ,MAAM;YAAEC,UAAU,EAAET,sBAAsB,CAACS;UAAW,CAAC;UACvIC,YAAY,EAAE;YAAEJ,EAAE,EAAEL,oBAAoB,CAACK,EAAE;YAAEE,MAAM,EAAEP,oBAAoB,CAACO,MAAM;YAAEC,UAAU,EAAER,oBAAoB,CAACQ;UAAW;QAChI,CAAC,CAAC;;QAEF;QACA,IAAI;UACF,MAAME,WAAW,GAAG,MAAMd,cAAc,CAACe,IAAI,CAAC,CAAC;UAC/C9B,OAAO,CAACyB,KAAK,CAAC,mBAAmB,EAAEI,WAAW,CAAC;QACjD,CAAC,CAAC,OAAOE,CAAC,EAAE;UACV/B,OAAO,CAACyB,KAAK,CAAC,sCAAsC,CAAC;QACvD;QAEA,MAAM,IAAId,KAAK,CAAC,+DAA+DI,cAAc,CAACW,MAAM,eAAeV,iBAAiB,CAACU,MAAM,WAAWT,aAAa,CAACS,MAAM,aAAaR,sBAAsB,CAACQ,MAAM,kBAAkBP,oBAAoB,CAACO,MAAM,EAAE,CAAC;MACtQ;MAEA,MAAM,CAACM,YAAY,EAAEC,eAAe,EAAEC,WAAW,EAAEC,oBAAoB,EAAEC,kBAAkB,CAAC,GAAG,MAAMhB,OAAO,CAACC,GAAG,CAAC,CAC/GN,cAAc,CAACsB,IAAI,CAAC,CAAC,EACrBrB,iBAAiB,CAACqB,IAAI,CAAC,CAAC,EACxBpB,aAAa,CAACoB,IAAI,CAAC,CAAC,EACpBnB,sBAAsB,CAACmB,IAAI,CAAC,CAAC,EAC7BlB,oBAAoB,CAACkB,IAAI,CAAC,CAAC,CAC5B,CAAC;MAEFrC,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE;QACpCc,cAAc,EAAE;UAAES,EAAE,EAAET,cAAc,CAACS,EAAE;UAAEE,MAAM,EAAEX,cAAc,CAACW;QAAO,CAAC;QACxEV,iBAAiB,EAAE;UAAEQ,EAAE,EAAER,iBAAiB,CAACQ,EAAE;UAAEE,MAAM,EAAEV,iBAAiB,CAACU;QAAO,CAAC;QACjFT,aAAa,EAAE;UAAEO,EAAE,EAAEP,aAAa,CAACO,EAAE;UAAEE,MAAM,EAAET,aAAa,CAACS;QAAO,CAAC;QACrER,sBAAsB,EAAE;UAAEM,EAAE,EAAEN,sBAAsB,CAACM,EAAE;UAAEE,MAAM,EAAER,sBAAsB,CAACQ;QAAO,CAAC;QAChGP,oBAAoB,EAAE;UAAEK,EAAE,EAAEL,oBAAoB,CAACK,EAAE;UAAEE,MAAM,EAAEP,oBAAoB,CAACO;QAAO;MAC3F,CAAC,CAAC;MAEF1B,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE;QAChC+B,YAAY;QACZC,eAAe;QACfC,WAAW;QACXC,oBAAoB;QACpBC;MACF,CAAC,CAAC;MAEF,MAAME,UAAU,GAAGN,YAAY,CAACO,IAAI,IAAI,EAAE;MAC1C,MAAMC,aAAa,GAAGP,eAAe,CAACM,IAAI,IAAI,EAAE;MAChD,MAAME,SAAS,GAAGP,WAAW,CAACK,IAAI,IAAI,EAAE,CAAC,CAAC;MAC1C,MAAMG,kBAAkB,GAAGP,oBAAoB,CAACI,IAAI,IAAI,EAAE;MAC1D,MAAMI,sBAAsB,GAAGP,kBAAkB,CAACG,IAAI,IAAI,EAAE;MAE5DvC,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE;QACvCqC,UAAU,EAAEA,UAAU,CAAC5B,MAAM;QAC7B8B,aAAa,EAAEA,aAAa,CAAC9B,MAAM;QACnC+B,SAAS,EAAEA,SAAS,CAAC/B,MAAM;QAC3BgC,kBAAkB,EAAEA,kBAAkB,CAAChC,MAAM;QAC7CiC,sBAAsB,EAAEA,sBAAsB,CAACjC;MACjD,CAAC,CAAC;;MAEF;MACAV,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE;QAChC2C,WAAW,EAAEN,UAAU,CAAC5B,MAAM;QAC9B3C,MAAM,EAAEuE,UAAU,CAACO,GAAG,CAAEC,CAAM,KAAM;UAClCC,EAAE,EAAED,CAAC,CAACC,EAAE;UACRC,IAAI,EAAEF,CAAC,CAACE,IAAI;UACZtB,MAAM,EAAEoB,CAAC,CAACpB;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;MACF1B,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE;QACnClC,MAAM,EAAEuE,UAAU,CAACW,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAAEC,CAAM,KAAM;UAC9CC,EAAE,EAAED,CAAC,CAACC,EAAE;UACRC,IAAI,EAAEF,CAAC,CAACE,IAAI;UACZtB,MAAM,EAAEoB,CAAC,CAACpB;QACZ,CAAC,CAAC,CAAC;QACH7D,SAAS,EAAE2E,aAAa,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAAEK,CAAM,KAAM;UACpDH,EAAE,EAAEG,CAAC,CAACH,EAAE;UACRC,IAAI,EAAEE,CAAC,CAACF,IAAI;UACZG,OAAO,EAAED,CAAC,CAACC,OAAO;UAClBC,QAAQ,EAAEF,CAAC,CAACE;QACd,CAAC,CAAC,CAAC;QACHnF,KAAK,EAAEwE,SAAS,CAACQ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAAErF,CAAM,KAAM;UAC5CuF,EAAE,EAAEvF,CAAC,CAACuF,EAAE;UACRC,IAAI,EAAExF,CAAC,CAACwF,IAAI;UACZG,OAAO,EAAE3F,CAAC,CAAC2F,OAAO;UAClBpF,MAAM,EAAEP,CAAC,CAACO;QACZ,CAAC,CAAC;MACJ,CAAC,CAAC;MAEFiC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC1CD,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEyC,kBAAkB,CAAChC,MAAM,CAAC;MAC9DV,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE0C,sBAAsB,CAACjC,MAAM,CAAC;;MAGtE;MACA,MAAM2C,kBAAkB,GAAGb,aAAa,CAACK,GAAG,CAAES,QAAkB,IAAK;QACnE,IAAId,aAAa,CAACe,OAAO,CAACD,QAAQ,CAAC,GAAG,CAAC,EAAE;UAAE;UACzCtD,OAAO,CAACC,GAAG,CAAC,uCAAuC,EAAEqD,QAAQ,CAAC;UAC9DtD,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAE;YAClD8C,EAAE,EAAEO,QAAQ,CAACP,EAAE;YACfC,IAAI,EAAEM,QAAQ,CAACN,IAAI;YACnBQ,YAAY,EAAEF,QAAQ,CAACE,YAAY;YACnCC,aAAa,EAAGH,QAAQ,CAASG,aAAa;YAC9CC,YAAY,EAAEJ,QAAQ,CAACI,YAAY;YACnCC,cAAc,EAAGL,QAAQ,CAASK,cAAc;YAChDR,OAAO,EAAEG,QAAQ,CAACH,OAAO;YACzBC,QAAQ,EAAGE,QAAQ,CAASF;UAC9B,CAAC,CAAC;QACJ;QAEA,OAAO;UACL,GAAGE,QAAQ;UACXH,OAAO,EAAEG,QAAQ,CAACH,OAAO,IAAKG,QAAQ,CAASF,QAAQ,IAAI,IAAI;UAC/DI,YAAY,EAAEF,QAAQ,CAACE,YAAY,IAAKF,QAAQ,CAASG,aAAa,IAAI,CAAC;UAC3EC,YAAY,EAAEJ,QAAQ,CAACI,YAAY,IAAKJ,QAAQ,CAASK,cAAc,IAAI,CAAC;UAC5EC,UAAU,EAAEN,QAAQ,CAACM,UAAU,IAAKN,QAAQ,CAASO,YAAY,IAAI,CAAC;UACtEC,WAAW,EAAER,QAAQ,CAACQ,WAAW,IAAKR,QAAQ,CAASS,aAAa,IAAI,CAAC;UACzEC,WAAW,EAAEV,QAAQ,CAACU,WAAW,IAAI,EAAE;UACvCC,OAAO,EAAEX,QAAQ,CAACW,OAAO,IAAKX,QAAQ,CAASY,QAAQ,IAAI,KAAK;UAChEC,iBAAiB,EAAEb,QAAQ,CAACa,iBAAiB,IAAKb,QAAQ,CAASc,kBAAkB,IAAI,GAAG;UAC5FC,WAAW,EAAEf,QAAQ,CAACe,WAAW,IAAKf,QAAQ,CAASgB,YAAY,IAAI,CAAC;UACxEC,eAAe,EAAEjB,QAAQ,CAACiB,eAAe,IAAKjB,QAAQ,CAASkB,gBAAgB,IAAI;QACrF,CAAC;MACH,CAAC,CAAC;;MAEF;MACA,MAAMC,cAAc,GAAGhC,SAAS,CAACI,GAAG,CAAE6B,IAAU,IAAK;QACnD,IAAIjC,SAAS,CAACc,OAAO,CAACmB,IAAI,CAAC,GAAG,CAAC,EAAE;UAAE;UACjC1E,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEyE,IAAI,CAAC;UACtD1E,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE;YAC9C8C,EAAE,EAAE2B,IAAI,CAAC3B,EAAE;YACXC,IAAI,EAAE0B,IAAI,CAAC1B,IAAI;YACf2B,OAAO,EAAED,IAAI,CAACC,OAAO;YACrBC,UAAU,EAAE,CAAC,CAACF,IAAI,CAACC,OAAO;YAC1BnB,YAAY,EAAEkB,IAAI,CAAClB,YAAY;YAC/BC,aAAa,EAAGiB,IAAI,CAASjB;UAC/B,CAAC,CAAC;QACJ;;QAEA;QACA,MAAMkB,OAAO,GAAGD,IAAI,CAACC,OAAO,IAAI;UAC9BjB,YAAY,EAAE,CAAC;UACfmB,aAAa,EAAE,CAAC;UAChBC,sBAAsB,EAAE,CAAC;UACzBlB,UAAU,EAAE,CAAC;UACbE,WAAW,EAAE,CAAC;UACdiB,WAAW,EAAE,CAAC;UACdC,SAAS,EAAE,CAAC;UACZC,eAAe,EAAE,CAAC;UAClBC,YAAY,EAAE,CAAC;UACfC,oBAAoB,EAAE,CAAC;UACvBC,sBAAsB,EAAE,GAAG;UAC3BC,cAAc,EAAE;QAClB,CAAC;;QAED;QACA,MAAM7B,YAAY,GAAG,CAAAmB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEnB,YAAY,MAAImB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAElB,aAAa,KAAI,CAAC;QAGzE,OAAO;UACL,GAAGiB,IAAI;UACPlB,YAAY,EAAEA,YAAY;UAC1BE,YAAY,EAAE,CAAAiB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEjB,YAAY,MAAIiB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEhB,cAAc,KAAI,CAAC;UACnEC,UAAU,EAAE,CAAAe,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEf,UAAU,MAAIe,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEd,YAAY,KAAI,CAAC;UAC7DC,WAAW,EAAE,CAAAa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEb,WAAW,MAAIa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,aAAa,KAAI,CAAC;UAChEuB,sBAAsB,EAAE,CAAAX,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,sBAAsB,MAAIH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,wBAAwB,KAAI,CAAC;UACjGvB,WAAW,EAAEU,IAAI,CAACV,WAAW,IAAI,EAAE;UACnCW,OAAO,EAAE;YACPjB,YAAY,EAAE,CAAAiB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEjB,YAAY,MAAIiB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEhB,cAAc,KAAI,CAAC;YACnEkB,aAAa,EAAE,CAAAF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,aAAa,MAAIF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEa,cAAc,KAAI,CAAC;YACrEV,sBAAsB,EAAE,CAAAH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,sBAAsB,MAAIH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,wBAAwB,KAAI,CAAC;YACjG3B,UAAU,EAAE,CAAAe,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEf,UAAU,MAAIe,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEd,YAAY,KAAI,CAAC;YAC7DC,WAAW,EAAE,CAAAa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEb,WAAW,MAAIa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEZ,aAAa,KAAI,CAAC;YAChEgB,WAAW,EAAE,CAAAJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,WAAW,MAAIJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEc,aAAa,KAAI,CAAC;YAChET,SAAS,EAAE,CAAAL,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEK,SAAS,MAAIL,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEe,UAAU,KAAI,CAAC;YACzDT,eAAe,EAAE,CAAAN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEM,eAAe,MAAIN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEgB,iBAAiB,KAAI,CAAC;YAC5ET,YAAY,EAAE,CAAAP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEO,YAAY,MAAIP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEiB,aAAa,KAAI,CAAC;YAClET,oBAAoB,EAAE,CAAAR,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEQ,oBAAoB,MAAIR,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEkB,sBAAsB,KAAI,CAAC;YAC3FT,sBAAsB,EAAE,CAAAT,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAES,sBAAsB,MAAIT,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEmB,wBAAwB,KAAI,GAAG;YACnGT,cAAc,EAAE,CAAAV,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEU,cAAc,MAAIV,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEoB,eAAe,KAAI;UACzE;QACF,CAAC;MACH,CAAC,CAAC;;MAEF;MACA/H,SAAS,CAACsE,UAAU,CAAC;MACrBxE,YAAY,CAACuF,kBAAkB,CAAC;MAChCnF,QAAQ,CAACuG,cAAc,CAAC;MACxBrG,iBAAiB,CAACsE,kBAAkB,CAAC;MACrCpE,qBAAqB,CAACqE,sBAAsB,CAAC;MAE7C3C,OAAO,CAACC,GAAG,CAAC,qDAAqDoD,kBAAkB,CAAC3C,MAAM,eAAe4B,UAAU,CAAC5B,MAAM,YAAY+D,cAAc,CAAC/D,MAAM,+BAA+B,CAAC;IAE7L,CAAC,CAAC,OAAOe,KAAK,EAAE;MACdzB,OAAO,CAACyB,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;MAC/D,MAAM1C,YAAY,GAAG0C,KAAK,YAAYd,KAAK,GAAGc,KAAK,CAACuE,OAAO,GAAG,wBAAwB;MACtFhH,eAAe,CAAC,gCAAgCD,YAAY,EAAE,CAAC;IACjE,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAzE,SAAS,CAAC,MAAM;IACd0F,uBAAuB,CAAC,CAAC;;IAEzB;IACA,IAAIkG,eAA+B;IACnC,IAAIhH,iBAAiB,EAAE;MACrBgH,eAAe,GAAGC,WAAW,CAAC,MAAM;QAClClG,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;QACrDF,uBAAuB,CAAC,CAAC;MAC3B,CAAC,EAAE3C,0BAA0B,CAAC;IAChC;IAEA,OAAO,MAAM;MACX,IAAI6I,eAAe,EAAE;QACnBE,aAAa,CAACF,eAAe,CAAC;MAChC;IACF,CAAC;EACH,CAAC,EAAE,CAAClG,uBAAuB,EAAEd,iBAAiB,CAAC,CAAC;;EAEhD;EACA5E,SAAS,CAAC,MAAM;IACd2F,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAExB,SAAS,EAAE,MAAM,CAAC;IAC3DsB,uBAAuB,CAAC,CAAC;EAC3B,CAAC,EAAE,CAACtB,SAAS,EAAEsB,uBAAuB,CAAC,CAAC;;EAGxC;EACA,MAAMqG,eAAe,GAAGA,CAAA,KAAM;IAC5BpG,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE;MACtCpC,SAAS,EAAEA,SAAS,CAAC6C,MAAM;MAC3BzC,KAAK,EAAEA,KAAK,CAACyC,MAAM;MACnBvC,cAAc,EAAEA,cAAc,CAACuC,MAAM;MACrCrC,kBAAkB,EAAEA,kBAAkB,CAACqC,MAAM;MAC7C3C,MAAM,EAAEA,MAAM,CAAC2C,MAAM;MACrB2F,QAAQ,EAAE/I,IAAI,CAACgJ,IAAI;MACnB/H,aAAa;MACbE;IACF,CAAC,CAAC;IAEF,IAAI8H,iBAAiB,GAAG1I,SAAS;IACjC,IAAI2I,aAAa,GAAGvI,KAAK;IACzB,IAAIwI,sBAAsB,GAAGtI,cAAc;IAC3C,IAAIuI,0BAA0B,GAAGrI,kBAAkB;;IAEnD;IACA,IAAIf,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAIhJ,IAAI,CAAC6F,OAAO,EAAE;MACzCoD,iBAAiB,GAAG1I,SAAS,CAAC8I,MAAM,CAACzD,CAAC,IAAI;QACxC,MAAMC,OAAO,GAAGD,CAAC,CAACC,OAAO,IAAKD,CAAC,CAASE,QAAQ;QAChD,OAAOD,OAAO,KAAK7F,IAAI,CAAC6F,OAAO;MACjC,CAAC,CAAC;MACFqD,aAAa,GAAGvI,KAAK,CAAC0I,MAAM,CAACnJ,CAAC,IAC3BA,CAAC,CAACO,MAAM,IAAIP,CAAC,CAACO,MAAM,CAAC6I,IAAI,CAACC,KAAK,IAAIA,KAAK,CAAC1D,OAAO,KAAK7F,IAAI,CAAC6F,OAAO,CAAC,IACnE3F,CAAC,CAAC2F,OAAO,KAAK7F,IAAI,CAAC6F,OACrB,CAAC;IACH,CAAC,MAAM,IAAI7F,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAIhJ,IAAI,CAACwJ,OAAO,EAAE;MAChD;MACAN,aAAa,GAAGvI,KAAK,CAAC0I,MAAM,CAACnJ,CAAC,IAAKA,CAAC,CAASsJ,OAAO,KAAKxJ,IAAI,CAACwJ,OAAO,CAAC;MACtE;MACA,MAAMC,eAAe,GAAGC,KAAK,CAACC,IAAI,CAAC,IAAI7H,GAAG,CACxCoH,aAAa,CAACU,OAAO,CAAC1J,CAAC;QAAA,IAAA2J,YAAA;QAAA,OAAI,EAAAA,YAAA,GAAA3J,CAAC,CAACK,SAAS,cAAAsJ,YAAA,uBAAXA,YAAA,CAAatE,GAAG,CAACuE,EAAE,IAAIA,EAAE,CAACC,UAAU,CAAC,KAAI,EAAE;MAAA,EACxE,CAAC,CAAC;MACFd,iBAAiB,GAAG1I,SAAS,CAAC8I,MAAM,CAACzD,CAAC,IAAI6D,eAAe,CAACO,QAAQ,CAACpE,CAAC,CAACH,EAAE,CAAC,CAAC;IAC3E;;IAEA;IACA,IAAIzF,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAI/H,aAAa,KAAK,KAAK,EAAE;MACpDyB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE;QACtC1B,aAAa;QACbgJ,YAAY,EAAE;UACZ1J,SAAS,EAAE0I,iBAAiB,CAAC7F,MAAM;UACnCzC,KAAK,EAAEuI,aAAa,CAAC9F,MAAM;UAC3BvC,cAAc,EAAEsI,sBAAsB,CAAC/F,MAAM;UAC7CrC,kBAAkB,EAAEqI,0BAA0B,CAAChG;QACjD;MACF,CAAC,CAAC;;MAEF;MACA,MAAM8G,0BAA0B,GAAGjB,iBAAiB,CAAC7F,MAAM;MAC3D6F,iBAAiB,GAAGA,iBAAiB,CAACI,MAAM,CAACzD,CAAC,IAAI;QAChD;QACA,MAAMC,OAAO,GAAGD,CAAC,CAACC,OAAO,IAAKD,CAAC,CAASE,QAAQ;QAChD,OAAOD,OAAO,KAAK5E,aAAa;MAClC,CAAC,CAAC;MACFyB,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE;QACjC1B,aAAa;QACbkJ,qBAAqB,EAAED,0BAA0B;QACjDE,oBAAoB,EAAEnB,iBAAiB,CAAC7F,MAAM;QAC9CiH,eAAe,EAAE9J,SAAS,CAACoF,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAACK,CAAC,KAAK;UAC/CH,EAAE,EAAEG,CAAC,CAACH,EAAE;UACRC,IAAI,EAAEE,CAAC,CAACF,IAAI;UACZG,OAAO,EAAED,CAAC,CAACC,OAAO;UAClBC,QAAQ,EAAGF,CAAC,CAASE,QAAQ;UAC7BwE,eAAe,EAAE,CAAC1E,CAAC,CAACC,OAAO,IAAKD,CAAC,CAASE,QAAQ,MAAM7E;QAC1D,CAAC,CAAC;MACJ,CAAC,CAAC;;MAEF;MACA,MAAMsJ,sBAAsB,GAAGrB,aAAa,CAAC9F,MAAM;MACnD8F,aAAa,GAAGA,aAAa,CAACG,MAAM,CAACnJ,CAAC,IAAI;QACxC,MAAMsK,gBAAgB,GAAGtK,CAAC,CAACO,MAAM,IAAIP,CAAC,CAACO,MAAM,CAAC6I,IAAI,CAACC,KAAK,IAAIA,KAAK,CAAC1D,OAAO,KAAK5E,aAAa,CAAC;QAC5F,MAAMwJ,gBAAgB,GAAGvK,CAAC,CAAC2F,OAAO,KAAK5E,aAAa;QACpD,MAAMyJ,aAAa,GAAGF,gBAAgB,IAAIC,gBAAgB;QAE1D,IAAIvB,aAAa,CAACjD,OAAO,CAAC/F,CAAC,CAAC,GAAG,CAAC,EAAE;UAAE;UAClCwC,OAAO,CAACC,GAAG,CAAC,WAAWzC,CAAC,CAACwF,IAAI,IAAIxF,CAAC,CAACuF,EAAE,GAAG,EAAE;YACxCI,OAAO,EAAE3F,CAAC,CAAC2F,OAAO;YAClBpF,MAAM,EAAEP,CAAC,CAACO,MAAM;YAChB+J,gBAAgB;YAChBC,gBAAgB;YAChBC;UACF,CAAC,CAAC;QACJ;QAEA,OAAOA,aAAa;MACtB,CAAC,CAAC;MACFhI,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE;QAC7B1B,aAAa;QACb0J,iBAAiB,EAAEJ,sBAAsB;QACzCK,gBAAgB,EAAE1B,aAAa,CAAC9F;MAClC,CAAC,CAAC;MAEF+F,sBAAsB,GAAGA,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAI;QAC1D;QACA,MAAMhF,OAAO,GAAGgF,CAAC,CAAChF,OAAO,IAAKgF,CAAC,CAAS/E,QAAQ;QAChD,OAAOD,OAAO,KAAK5E,aAAa;MAClC,CAAC,CAAC;MACFmI,0BAA0B,GAAGA,0BAA0B,CAACC,MAAM,CAACyB,CAAC,IAAI;QAClE,MAAM9E,QAAQ,GAAGzF,SAAS,CAACwK,IAAI,CAACnF,CAAC,IAAIA,CAAC,CAACH,EAAE,KAAKqF,CAAC,CAACf,UAAU,CAAC;QAC3D;QACA,MAAMiB,eAAe,GAAG,CAAAhF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEH,OAAO,MAAKG,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAUF,QAAQ;QACxE,OAAOkF,eAAe,KAAK/J,aAAa;MAC1C,CAAC,CAAC;MAEFyB,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE;QACpCpC,SAAS,EAAE0I,iBAAiB,CAAC7F,MAAM;QACnCzC,KAAK,EAAEuI,aAAa,CAAC9F,MAAM;QAC3BvC,cAAc,EAAEsI,sBAAsB,CAAC/F,MAAM;QAC7CrC,kBAAkB,EAAEqI,0BAA0B,CAAChG;MACjD,CAAC,CAAC;IACJ;;IAEA;IACA,IAAIpD,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAIhJ,IAAI,CAAC6F,OAAO,EAAE;MACzCsD,sBAAsB,GAAGA,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAI;QAC1D,MAAMhF,OAAO,GAAGgF,CAAC,CAAChF,OAAO,IAAKgF,CAAC,CAAS/E,QAAQ;QAChD,OAAOD,OAAO,KAAK7F,IAAI,CAAC6F,OAAO;MACjC,CAAC,CAAC;MACFuD,0BAA0B,GAAGA,0BAA0B,CAACC,MAAM,CAACyB,CAAC,IAAI;QAClE,MAAM9E,QAAQ,GAAGzF,SAAS,CAACwK,IAAI,CAACnF,CAAC,IAAIA,CAAC,CAACH,EAAE,KAAKqF,CAAC,CAACf,UAAU,CAAC;QAC3D,MAAMiB,eAAe,GAAG,CAAAhF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEH,OAAO,MAAKG,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAUF,QAAQ;QACxE,OAAOkF,eAAe,KAAKhL,IAAI,CAAC6F,OAAO;MACzC,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI7F,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAIhJ,IAAI,CAACwJ,OAAO,EAAE;MAChD;MACA,MAAMyB,YAAY,GAAG/B,aAAa,CAAC3D,GAAG,CAACrF,CAAC,IAAIA,CAAC,CAACuF,EAAE,CAAC;MACjD0D,sBAAsB,GAAGA,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAACK,MAAM,IAAID,YAAY,CAACjB,QAAQ,CAACa,CAAC,CAACK,MAAM,CAAC,CAAC;MACxG9B,0BAA0B,GAAGA,0BAA0B,CAACC,MAAM,CAACyB,CAAC,IAAIA,CAAC,CAACI,MAAM,IAAID,YAAY,CAACjB,QAAQ,CAACc,CAAC,CAACI,MAAM,CAAC,CAAC;IAClH;;IAEF;IACA,MAAMC,UAAU,GAAG,IAAI5H,IAAI,CAAC,CAAC;IAC7B4H,UAAU,CAACC,OAAO,CAACD,UAAU,CAACE,OAAO,CAAC,CAAC,GAAGC,QAAQ,CAACnK,SAAS,CAAC,CAAC;IAE9DuB,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE;MACnCxB,SAAS;MACTgK,UAAU,EAAEA,UAAU,CAACI,WAAW,CAAC,CAAC;MACpCpB,qBAAqB,EAAElB,iBAAiB,CAAC7F,MAAM;MAC/CuH,iBAAiB,EAAEzB,aAAa,CAAC9F,MAAM;MACvCoI,0BAA0B,EAAErC,sBAAsB,CAAC/F,MAAM;MACzDqI,8BAA8B,EAAErC,0BAA0B,CAAChG;IAC7D,CAAC,CAAC;;IAEF;IACA8F,aAAa,GAAGA,aAAa,CAACG,MAAM,CAACnJ,CAAC,IAAI;MACxC,MAAMwL,QAAQ,GAAGxL,CAAC,CAACyL,IAAI,IAAKzL,CAAC,CAAS0L,UAAU,IAAK1L,CAAC,CAAS2L,UAAU;MACzE,IAAI,CAACH,QAAQ,EAAE,OAAO,KAAK;MAC3B,MAAMC,IAAI,GAAG,IAAIpI,IAAI,CAACmI,QAAQ,CAAC;MAC/B,OAAO,CAACpJ,KAAK,CAACqJ,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,IAAIH,IAAI,IAAIR,UAAU;IACrD,CAAC,CAAC;;IAEF;IACAhC,sBAAsB,GAAGA,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAI;MAC1D,MAAMkB,UAAU,GAAIlB,CAAC,CAASc,IAAI,IAAKd,CAAC,CAASgB,UAAU;MAC3D,IAAI,CAACE,UAAU,EAAE,OAAO,KAAK;MAC7B,MAAMJ,IAAI,GAAG,IAAIpI,IAAI,CAACwI,UAAU,CAAC;MACjC,OAAO,CAACzJ,KAAK,CAACqJ,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,IAAIH,IAAI,IAAIR,UAAU;IACrD,CAAC,CAAC;;IAEF;IACA/B,0BAA0B,GAAGA,0BAA0B,CAACC,MAAM,CAACnJ,CAAC,IAAI;MAClE,MAAM8L,eAAe,GAAI9L,CAAC,CAASyL,IAAI,IAAKzL,CAAC,CAAS2L,UAAU;MAChE,IAAI,CAACG,eAAe,EAAE,OAAO,KAAK;MAClC,MAAML,IAAI,GAAG,IAAIpI,IAAI,CAACyI,eAAe,CAAC;MACtC,OAAO,CAAC1J,KAAK,CAACqJ,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,IAAIH,IAAI,IAAIR,UAAU;IACrD,CAAC,CAAC;IAEFzI,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE;MACnCiI,gBAAgB,EAAE1B,aAAa,CAAC9F,MAAM;MACtC6I,yBAAyB,EAAE9C,sBAAsB,CAAC/F,MAAM;MACxD8I,6BAA6B,EAAE9C,0BAA0B,CAAChG;IAC5D,CAAC,CAAC;IAEA,OAAO;MAAE6F,iBAAiB;MAAEC,aAAa;MAAEC,sBAAsB;MAAEC;IAA2B,CAAC;EACjG,CAAC;EAED,MAAM;IAAEH,iBAAiB;IAAEC,aAAa;IAAEC,sBAAsB;IAAEC;EAA2B,CAAC,GAAGN,eAAe,CAAC,CAAC;;EAElH;EACA,MAAMqD,gBAAgB,GAAGA,CAAA,KAAM;IAAA,IAAAC,eAAA,EAAAC,gBAAA,EAAAC,gBAAA;IAC7B5J,OAAO,CAACC,GAAG,CAAC,6CAA6C,EAAE;MACzD4J,kBAAkB,EAAErD,aAAa,CAAC9F,MAAM;MACxCoJ,UAAU,EAAEtD,aAAa,CAAC,CAAC,CAAC,GAAG;QAC7BzD,EAAE,EAAEyD,aAAa,CAAC,CAAC,CAAC,CAACzD,EAAE;QACvBC,IAAI,EAAEwD,aAAa,CAAC,CAAC,CAAC,CAACxD,IAAI;QAC3BQ,YAAY,EAAEgD,aAAa,CAAC,CAAC,CAAC,CAAChD,YAAY;QAC3CC,aAAa,EAAG+C,aAAa,CAAC,CAAC,CAAC,CAAS/C,aAAa;QACtDC,YAAY,EAAE8C,aAAa,CAAC,CAAC,CAAC,CAAC9C,YAAY;QAC3CC,cAAc,EAAG6C,aAAa,CAAC,CAAC,CAAC,CAAS7C,cAAc;QACxDgB,OAAO,EAAE6B,aAAa,CAAC,CAAC,CAAC,CAAC7B;MAC5B,CAAC,GAAG;IACN,CAAC,CAAC;;IAEF;IACA;IACA;;IAEA;IACA;IACA3E,OAAO,CAACC,GAAG,CAAC,oDAAoD,EAAE;MAChE4J,kBAAkB,EAAErD,aAAa,CAAC9F,MAAM;MACxCqJ,gBAAgB,GAAAL,eAAA,GAAElD,aAAa,CAAC,CAAC,CAAC,cAAAkD,eAAA,uBAAhBA,eAAA,CAAkB/E,OAAO;MAC3CqF,oBAAoB,EAAE,CAAAL,gBAAA,GAAAnD,aAAa,CAAC,CAAC,CAAC,cAAAmD,gBAAA,eAAhBA,gBAAA,CAAkBhF,OAAO,GAAGsF,MAAM,CAACC,IAAI,CAAC1D,aAAa,CAAC,CAAC,CAAC,CAAC7B,OAAO,CAAC,GAAG,iBAAiB;MAC3GwF,gBAAgB,GAAAP,gBAAA,GAAEpD,aAAa,CAAC,CAAC,CAAC,cAAAoD,gBAAA,uBAAhBA,gBAAA,CAAkBjF;IACtC,CAAC,CAAC;;IAEF;IACA,MAAMyF,wBAAwB,GAAGA,CAACC,MAAc,EAAE3F,IAAS,KAAa;MACtE,IAAI,CAAC2F,MAAM,IAAIA,MAAM,KAAK,CAAC,EAAE,OAAO,CAAC;MAErC,MAAMC,YAAY,GAAG5F,IAAI,CAAC6F,QAAQ,IAAI,KAAK;MAC3C,IAAID,YAAY,KAAKE,eAAe,EAAE,OAAOH,MAAM;;MAEnD;MACA,OAAOnO,aAAa,CAACmO,MAAM,EAAEC,YAAY,EAAEE,eAAe,EAAE9F,IAAI,CAAC;IACnE,CAAC;IAED,MAAMlB,YAAY,GAAGgD,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAEhG,IAAS,KAAK;MAAA,IAAAiG,aAAA,EAAAC,cAAA,EAAAC,cAAA;MACpE;MACA,IAAIC,OAAO,GAAG,EAAAH,aAAA,GAAAjG,IAAI,CAACC,OAAO,cAAAgG,aAAA,uBAAZA,aAAA,CAAcnH,YAAY,OAAAoH,cAAA,GAAIlG,IAAI,CAACC,OAAO,cAAAiG,cAAA,uBAAZA,cAAA,CAAcnH,aAAa,KAAI,CAAC;;MAE5E;MACA,IAAIqH,OAAO,KAAK,CAAC,KAAAD,cAAA,GAAInG,IAAI,CAACC,OAAO,cAAAkG,cAAA,eAAZA,cAAA,CAAc/F,sBAAsB,EAAE;QACzDgG,OAAO,GAAGpG,IAAI,CAACC,OAAO,CAACG,sBAAsB,GAAG,KAAK,CAAC,CAAC;MACzD;;MAEA;MACA,IAAIgG,OAAO,KAAK,CAAC,IAAIpG,IAAI,CAACC,OAAO,EAAE;QACjC,MAAMoG,YAAY,GAAGd,MAAM,CAACC,IAAI,CAACxF,IAAI,CAACC,OAAO,CAAC,CAAC0D,IAAI,CAAC2C,GAAG,IACrDA,GAAG,CAACC,WAAW,CAAC,CAAC,CAAC3D,QAAQ,CAAC,SAAS,CAAC,IACrC,OAAO5C,IAAI,CAACC,OAAO,CAACqG,GAAG,CAAC,KAAK,QAAQ,IACrCtG,IAAI,CAACC,OAAO,CAACqG,GAAG,CAAC,GAAG,CACtB,CAAC;QACD,IAAID,YAAY,EAAE;UAChBD,OAAO,GAAGpG,IAAI,CAACC,OAAO,CAACoG,YAAY,CAAC;QACtC;MACF;;MAEA;MACA,MAAMG,gBAAgB,GAAGd,wBAAwB,CAACU,OAAO,EAAEpG,IAAI,CAAC;MAChE1E,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAE;QAC1CkL,QAAQ,EAAEzG,IAAI,CAAC0G,SAAS,IAAI1G,IAAI,CAAC1B,IAAI;QACrCsH,YAAY,EAAE5F,IAAI,CAAC6F,QAAQ;QAC3BC,eAAe,EAAEA,eAAe;QAChCa,eAAe,EAAEP,OAAO;QACxBI,gBAAgB,EAAEA,gBAAgB;QAClCtG,UAAU,EAAE,CAAC,CAACF,IAAI,CAACC,OAAO;QAC1B2G,WAAW,EAAE5G,IAAI,CAACC,OAAO,GAAGsF,MAAM,CAACC,IAAI,CAACxF,IAAI,CAACC,OAAO,CAAC,GAAG;MAC1D,CAAC,CAAC;MACF,OAAO+F,GAAG,GAAGQ,gBAAgB;IAC/B,CAAC,EAAE,CAAC,CAAC;;IAEL;IACA,MAAMK,uBAAuB,GAAG9E,sBAAsB,CAACgE,MAAM,CAAC,CAACC,GAAW,EAAEc,MAAW,KAAK;MAC1F,MAAMV,OAAO,GAAGU,MAAM,CAACC,cAAc,IAAID,MAAM,CAACE,aAAa,IAAI,CAAC;MAClE,OAAOhB,GAAG,GAAGI,OAAO;IACtB,CAAC,EAAE,CAAC,CAAC;IAEL,MAAMlH,UAAU,GAAG8C,0BAA0B,CAC1CC,MAAM,CAACnJ,CAAC,IAAKA,CAAC,CAASmO,gBAAgB,KAAK,QAAQ,IAAKnO,CAAC,CAASoO,eAAe,KAAK,QAAQ,CAAC,CAChGnB,MAAM,CAAC,CAACC,GAAW,EAAEc,MAAW,KAAK;MACpC,MAAMnB,MAAM,GAAGmB,MAAM,CAACnB,MAAM,IAAI,CAAC;MACjC,OAAOK,GAAG,GAAGL,MAAM;IACrB,CAAC,EAAE,CAAC,CAAC;IAEP,MAAMvG,WAAW,GAAG4C,0BAA0B,CAC3CC,MAAM,CAACnJ,CAAC,IAAKA,CAAC,CAASmO,gBAAgB,KAAK,SAAS,IAAKnO,CAAC,CAASoO,eAAe,KAAK,SAAS,CAAC,CAClGnB,MAAM,CAAC,CAACC,GAAW,EAAEc,MAAW,KAAK;MACpC,MAAMnB,MAAM,GAAGmB,MAAM,CAACnB,MAAM,IAAI,CAAC;MACjC,OAAOK,GAAG,GAAGL,MAAM;IACrB,CAAC,EAAE,CAAC,CAAC;;IAEP;IACA,MAAM3G,YAAY,GAAGE,UAAU,GAAGE,WAAW;IAE7C9D,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAE;MACtD4L,2BAA2B,EAAErI,YAAY;MACzC+H,uBAAuB,EAAEA,uBAAuB;MAChDO,UAAU,EAAEtI,YAAY,GAAG+H,uBAAuB;MAClD1B,kBAAkB,EAAErD,aAAa,CAAC9F,MAAM;MACxCqL,2BAA2B,EAAEtF,sBAAsB,CAAC/F,MAAM;MAC1DjC,SAAS,EAAE,GAAGA,SAAS,OAAO;MAC9BuN,eAAe,EAAExF,aAAa,CAAC3D,GAAG,CAAErF,CAAM;QAAA,IAAAyO,UAAA,EAAAC,WAAA,EAAAC,WAAA,EAAAC,WAAA;QAAA,OAAM;UAC9ChB,SAAS,EAAE5N,CAAC,CAAC4N,SAAS,IAAI5N,CAAC,CAACwF,IAAI;UAChCS,aAAa,EAAE,EAAAwI,UAAA,GAAAzO,CAAC,CAACmH,OAAO,cAAAsH,UAAA,uBAATA,UAAA,CAAWzI,YAAY,OAAA0I,WAAA,GAAI1O,CAAC,CAACmH,OAAO,cAAAuH,WAAA,uBAATA,WAAA,CAAWzI,aAAa;UAClEyF,UAAU,EAAE1L,CAAC,CAAC0L,UAAU,IAAI1L,CAAC,CAAC6O,SAAS;UACvCC,cAAc,EAAE,CAAC,CAAC9O,CAAC,CAACmH,OAAO;UAC3B4H,kBAAkB,GAAAJ,WAAA,GAAE3O,CAAC,CAACmH,OAAO,cAAAwH,WAAA,uBAATA,WAAA,CAAW3I,YAAY;UAC3CgJ,mBAAmB,GAAAJ,WAAA,GAAE5O,CAAC,CAACmH,OAAO,cAAAyH,WAAA,uBAATA,WAAA,CAAW3I;QAClC,CAAC;MAAA,CAAC;IACJ,CAAC,CAAC;IAEFzD,OAAO,CAACC,GAAG,CAAC,wDAAwD,EAAE;MACpEyD,YAAY;MACZF,YAAY;MACZI,UAAU;MACVE,WAAW;MACXrF,SAAS,EAAE,GAAGA,SAAS,OAAO;MAC9BgO,+BAA+B,EAAE/F,0BAA0B,CAAChG,MAAM;MAClEgM,sBAAsB,EAAEnG,iBAAiB,CAAC7F;IAC5C,CAAC,CAAC;;IAEF;IACA,MAAMiM,iBAAiB,GAAGnG,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAEhG,IAAS,KAAK;MAAA,IAAAkI,cAAA;MACzE,OAAOlC,GAAG,IAAI,EAAAkC,cAAA,GAAAlI,IAAI,CAACC,OAAO,cAAAiI,cAAA,uBAAZA,cAAA,CAAc1H,YAAY,KAAI,CAAC,CAAC;IAChD,CAAC,EAAE,CAAC,CAAC;IAEL,MAAM2H,mBAAmB,GAAGF,iBAAiB,GAAG,CAAC;;IAEjD;IACA,MAAMG,mBAAmB,GAAGtG,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM;MAAA,IAAAuP,WAAA;MAAA,OAAKrC,GAAG,GAAG5K,UAAU,EAAAiN,WAAA,GAACvP,CAAC,CAACmH,OAAO,cAAAoI,WAAA,uBAATA,WAAA,CAAWtJ,aAAa,CAAC;IAAA,GAAE,CAAC,CAAC,CAAC,CAAC;IAC1H,MAAMuJ,mBAAmB,GAAGxG,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM;MAAA,IAAAyP,WAAA;MAAA,OAAKvC,GAAG,GAAG5K,UAAU,EAAAmN,WAAA,GAACzP,CAAC,CAACmH,OAAO,cAAAsI,WAAA,uBAATA,WAAA,CAAWtJ,cAAc,CAAC;IAAA,GAAE,CAAC,CAAC,CAAC,CAAC;IAC3H;IACA;IACA,MAAMuJ,oBAAoB,GAAG1G,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM;MAAA,IAAA2P,WAAA;MAAA,OAAKzC,GAAG,GAAG5K,UAAU,EAAAqN,WAAA,GAAC3P,CAAC,CAACmH,OAAO,cAAAwI,WAAA,uBAATA,WAAA,CAAWtI,aAAa,CAAC;IAAA,GAAE,CAAC,CAAC;IACzH,MAAMuI,gBAAgB,GAAG5G,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM;MAAA,IAAA6P,WAAA;MAAA,OAAK3C,GAAG,GAAG5K,UAAU,EAAAuN,WAAA,GAAC7P,CAAC,CAACmH,OAAO,cAAA0I,WAAA,uBAATA,WAAA,CAAWrI,SAAS,CAAC;IAAA,GAAE,CAAC,CAAC;IACjH,MAAME,YAAY,GAAGsB,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM;MAAA,IAAA8P,WAAA;MAAA,OAAK5C,GAAG,GAAG5K,UAAU,EAAAwN,WAAA,GAAC9P,CAAC,CAACmH,OAAO,cAAA2I,WAAA,uBAATA,WAAA,CAAWpI,YAAY,CAAC;IAAA,GAAE,CAAC,CAAC,CAAC,CAAC;IAClH;IACA,MAAMJ,sBAAsB,GAAG0B,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM,KAAK;MAAA,IAAA+P,WAAA,EAAAC,WAAA;MAC3E,MAAMC,UAAU,GAAG,EAAAF,WAAA,GAAA/P,CAAC,CAACmH,OAAO,cAAA4I,WAAA,uBAATA,WAAA,CAAWhI,wBAAwB,OAAAiI,WAAA,GAAIhQ,CAAC,CAACmH,OAAO,cAAA6I,WAAA,uBAATA,WAAA,CAAW1I,sBAAsB,KAAI,CAAC;MAChG,IAAI0B,aAAa,CAACjD,OAAO,CAAC/F,CAAC,CAAC,GAAG,CAAC,EAAE;QAAA,IAAAkQ,YAAA,EAAAC,YAAA;QAAE;QAClC3N,OAAO,CAACC,GAAG,CAAC,WAAWzC,CAAC,CAACwF,IAAI,IAAIxF,CAAC,CAACuF,EAAE,cAAc,EAAE;UACnD4B,OAAO,EAAEnH,CAAC,CAACmH,OAAO;UAClBY,wBAAwB,GAAAmI,YAAA,GAAElQ,CAAC,CAACmH,OAAO,cAAA+I,YAAA,uBAATA,YAAA,CAAWnI,wBAAwB;UAC7DT,sBAAsB,GAAA6I,YAAA,GAAEnQ,CAAC,CAACmH,OAAO,cAAAgJ,YAAA,uBAATA,YAAA,CAAW7I,sBAAsB;UACzD2I;QACF,CAAC,CAAC;MACJ;MACA,OAAO/C,GAAG,GAAG5K,UAAU,CAAC2N,UAAU,CAAC;IACrC,CAAC,EAAE,CAAC,CAAC;IAELzN,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE6E,sBAAsB,CAAC;;IAEjE;IACA,MAAM8I,cAAc,GAAGrH,iBAAiB,CAAC7F,MAAM;IAC/C;IACA,MAAMmN,eAAe,GAAGtH,iBAAiB,CAACI,MAAM,CAAEzD,CAAM,IAAK;MAC3D,MAAM4H,OAAO,GAAG5H,CAAC,CAACM,YAAY,IAAIN,CAAC,CAACO,aAAa,IAAI,CAAC;MACtD,OAAOqH,OAAO,GAAG,CAAC;IACpB,CAAC,CAAC,CAACpK,MAAM;;IAET;IACA,MAAMoN,gBAAgB,GAAGtH,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM,KAAKkN,GAAG,GAAG5K,UAAU,CAACtC,CAAC,CAACgG,YAAY,CAAC,EAAE,CAAC,CAAC;IAC3G,MAAMuK,gBAAgB,GAAGvH,aAAa,CAACiE,MAAM,CAAC,CAACC,GAAW,EAAElN,CAAM,KAAKkN,GAAG,GAAG5K,UAAU,CAACtC,CAAC,CAACkG,YAAY,CAAC,EAAE,CAAC,CAAC;IAC3G,MAAMmB,aAAa,GAAGqI,oBAAoB;;IAE1C;IACA;IACA,MAAMc,WAAW,GAAGC,IAAI,CAACC,GAAG,CAACd,gBAAgB,GAAGvI,aAAa,CAAC,CAAC,CAAC;IAChE,MAAMsJ,gBAAgB,GAAGF,IAAI,CAACC,GAAG,CAAChJ,YAAY,CAAC,CAAC,CAAC;;IAEjD;IACAlF,OAAO,CAACoO,KAAK,CAAC,kCAAkC,CAAC;IACjDpO,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEyD,YAAY,CAAC;IAC/C1D,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEuD,YAAY,CAAC;IAC9CxD,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE2D,UAAU,CAAC;IAC3C5D,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAE6D,WAAW,CAAC;IAC7C9D,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE0M,iBAAiB,CAAC;IACzD3M,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE4M,mBAAmB,CAAC;IAC7D7M,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEuG,aAAa,CAAC9F,MAAM,CAAC;IAC7DV,OAAO,CAACqO,QAAQ,CAAC,CAAC;IAClBrO,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAAE+M,mBAAmB,CAAC;IAC7EhN,OAAO,CAACC,GAAG,CAAC,6CAA6C,EAAE6E,sBAAsB,CAAC;IAClF9E,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAE4N,eAAe,CAAC;IACnE7N,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE2N,cAAc,CAAC;IAClD5N,OAAO,CAACqO,QAAQ,CAAC,CAAC;;IAElB;IACA,MAAMzL,WAAW,GAAG7E,MAAM,CAAC2C,MAAM;IACjC,MAAM4N,YAAY,GAAGvQ,MAAM,CAAC4I,MAAM,CAAE7D,CAAM,IAAKA,CAAC,CAACpB,MAAM,KAAK,QAAQ,CAAC,CAAChB,MAAM;;IAE5E;IACA,MAAM6N,UAAU,GAAG/H,aAAa,CAAC9F,MAAM;IACvC,MAAM8N,cAAc,GAAGhI,aAAa,CAACG,MAAM,CAAEnJ,CAAM,IAAKA,CAAC,CAACkE,MAAM,KAAK,WAAW,CAAC,CAAChB,MAAM;IACxF,MAAM+N,YAAY,GAAGjI,aAAa,CAACG,MAAM,CAAEnJ,CAAM,IAAKA,CAAC,CAACkE,MAAM,KAAK,aAAa,CAAC,CAAChB,MAAM;;IAExF;IACA,MAAMgO,YAAY,GAAG5B,mBAAmB,GAAG,CAAC,GAAKqB,gBAAgB,GAAGrB,mBAAmB,GAAI,GAAG,GAAI,CAAC;IACnG,MAAM6B,wBAAwB,GAAGpI,iBAAiB,CAAC7F,MAAM,GAAG,CAAC,GACzD6F,iBAAiB,CAACkE,MAAM,CAAC,CAACC,GAAW,EAAExH,CAAM,KAAKwH,GAAG,GAAGxH,CAAC,CAACiB,iBAAiB,EAAE,CAAC,CAAC,GAAGoC,iBAAiB,CAAC7F,MAAM,GAC1G,GAAG;;IAEP;IACAV,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;IAChDuG,aAAa,CAACoI,OAAO,CAAC,CAAClK,IAAI,EAAEmK,CAAC,KAAK;MACjC,MAAMlK,OAAO,GAAGD,IAAI,CAACC,OAAO,IAAI,CAAC,CAAC;MAClC3E,OAAO,CAACC,GAAG,CAAC,UAAU4O,CAAC,GAAC,CAAC,KAAKnK,IAAI,CAAC1B,IAAI,IAAI0B,IAAI,CAAC3B,EAAE,IAAI,EAAE;QACtDwC,wBAAwB,EAAEZ,OAAO,CAACY,wBAAwB;QAC1DT,sBAAsB,EAAEH,OAAO,CAACG,sBAAsB;QACtDrB,aAAa,EAAEkB,OAAO,CAAClB,aAAa;QACpCD,YAAY,EAAEmB,OAAO,CAACnB,YAAY;QAClC0B,YAAY,EAAEP,OAAO,CAACO,YAAY;QAClCU,aAAa,EAAEjB,OAAO,CAACiB;MACzB,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA5F,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtCD,OAAO,CAACC,GAAG,CAAC,wCAAwC,EAAEuD,YAAY,CAAC;IACnExD,OAAO,CAACC,GAAG,CAAC,oDAAoD,EAAE6M,mBAAmB,CAAC;IACtF9M,OAAO,CAACC,GAAG,CAAC,8EAA8E,EAAE6E,sBAAsB,CAAC;IACnH9E,OAAO,CAACC,GAAG,CAAC,iDAAiD,EAAE0M,iBAAiB,CAAC;IACjF3M,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAE4N,eAAe,CAAC;IACxE7N,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE2N,cAAc,CAAC;;IAEnD;IACA5N,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;IACjCD,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEsG,iBAAiB,CAAC7F,MAAM,CAAC;IACnE6F,iBAAiB,CAACtD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC2L,OAAO,CAAC,CAAC1L,CAAC,EAAE2L,CAAC,KAAK;MAC9C7O,OAAO,CAACC,GAAG,CAAC,cAAc4O,CAAC,GAAC,CAAC,GAAG,EAAE;QAChC7L,IAAI,EAAEE,CAAC,CAACF,IAAI;QACZQ,YAAY,EAAEN,CAAC,CAACM,YAAY;QAC5BC,aAAa,EAAEP,CAAC,CAACO,aAAa;QAC9BqL,QAAQ,EAAE5L,CAAC,CAAC4L,QAAQ;QACpBC,UAAU,EAAE,CAAC7L,CAAC,CAACM,YAAY,IAAIN,CAAC,CAACO,aAAa,IAAI,CAAC,IAAI;MACzD,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO;MACL;MACAuL,oBAAoB,EAAExL,YAAY;MAAE;MACpCyL,oBAAoB,EAAEhB,IAAI,CAACC,GAAG,CAACxK,YAAY,CAAC;MAAE;MAC9CwL,kBAAkB,EAAEtL,UAAU;MAAE;MAChCuL,mBAAmB,EAAErL,WAAW;MAAE;MAClCgK,gBAAgB;MAChBC,gBAAgB;MAChBjJ,sBAAsB;MAAE;MACxBD,aAAa;MACbuK,aAAa,EAAEnB,IAAI,CAACC,GAAG,CAACxK,YAAY,CAAC;MAAE;MACvCsK,WAAW;MACXG,gBAAgB;MAChBP,cAAc;MACdC,eAAe;MAAE;MACjBjL,WAAW;MACX0L,YAAY;MACZC,UAAU;MACVC,cAAc;MACdC,YAAY;MACZC,YAAY;MACZC,wBAAwB;MACxBU,mBAAmB,EAAE5I,sBAAsB,CAAC/F,MAAM;MAAE;MACpD4O,oBAAoB,EAAE5I,0BAA0B,CAAChG,MAAM;MAAE;MACzD;MACA0M,gBAAgB;MAChBlI,YAAY,EAAEyH,iBAAiB;MAAE;MACjCE,mBAAmB,EAAEF,iBAAiB,GAAG;IAC3C,CAAC;EACH,CAAC;EAED,MAAM4C,OAAO,GAAG9F,gBAAgB,CAAC,CAAC;;EAElC;EACA,MAAM+F,oBAAoB,GAAIrM,OAAe,IAAK;IAChD,MAAMsM,WAAW,GAAG,IAAIrQ,GAAG,CAACF,cAAc,CAAC;IAC3C,IAAIuQ,WAAW,CAACC,GAAG,CAACvM,OAAO,CAAC,EAAE;MAC5BsM,WAAW,CAACE,MAAM,CAACxM,OAAO,CAAC;IAC7B,CAAC,MAAM;MACLsM,WAAW,CAACG,GAAG,CAACzM,OAAO,CAAC;IAC1B;IACAhE,iBAAiB,CAACsQ,WAAW,CAAC;EAChC,CAAC;;EAED;EACA,MAAMI,qBAAqB,GAAGA,CAAA,KAAM;IAClC;;IAEA7P,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;IAC/DD,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE;MACnCsG,iBAAiB,EAAEA,iBAAiB,CAAC7F,MAAM;MAC3C8F,aAAa,EAAEA,aAAa,CAAC9F,MAAM;MACnC3C,MAAM,EAAEA,MAAM,CAAC2C,MAAM;MACrBvC,cAAc,EAAEA,cAAc,CAACuC,MAAM;MACrCrC,kBAAkB,EAAEA,kBAAkB,CAACqC;IACzC,CAAC,CAAC;;IAEF;IACAV,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE9B,cAAc,CAAC8E,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACrEjD,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE5B,kBAAkB,CAAC4E,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;IAE7E;IACA,MAAM6M,gBAAgB,GAAG,IAAIC,GAAG,CAAC,CAAC;IAElCxJ,iBAAiB,CAACqI,OAAO,CAAC,CAACtL,QAAQ,EAAE0M,KAAK,KAAK;MAC7C;MACA,MAAM7M,OAAO,GAAGG,QAAQ,CAACH,OAAO,IAAKG,QAAQ,CAASF,QAAQ;MAE9D,IAAI4M,KAAK,GAAG,CAAC,EAAE;QAAE;QACfhQ,OAAO,CAACC,GAAG,CAAC,eAAe+P,KAAK,GAAG,CAAC,GAAG,EAAE;UACvCjN,EAAE,EAAEO,QAAQ,CAACP,EAAE;UACfC,IAAI,EAAEM,QAAQ,CAACN,IAAI;UACnBG,OAAO,EAAEG,QAAQ,CAACH,OAAO;UACzBC,QAAQ,EAAGE,QAAQ,CAASF,QAAQ;UACpC6M,eAAe,EAAE9M,OAAO;UACxB+M,gBAAgB,EAAE5M,QAAQ,CAAC;QAC7B,CAAC,CAAC;MACJ;MAEA,IAAI,CAACH,OAAO,EAAE;QACZ,IAAI6M,KAAK,GAAG,CAAC,EAAEhQ,OAAO,CAACC,GAAG,CAAC,cAAcqD,QAAQ,CAACN,IAAI,2BAA2B,CAAC;QAClF;MACF;MAEA,IAAI,CAAC8M,gBAAgB,CAACJ,GAAG,CAACvM,OAAO,CAAC,EAAE;QAClC2M,gBAAgB,CAACK,GAAG,CAAChN,OAAO,EAAE;UAC5B0D,KAAK,EAAE9I,MAAM,CAACsK,IAAI,CAACvF,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKI,OAAO,CAAC;UACzCtF,SAAS,EAAE;QACb,CAAC,CAAC;MACJ;;MAEA;MACA,IAAIuS,eAAe,GAAG,CAAC;MACvB,IAAIC,eAAe,GAAG,CAAC;MACvB,IAAIC,aAAa,GAAG,CAAC;MACrB,IAAIC,cAAc,GAAG,CAAC;MACtB,IAAIC,aAAa,GAAG,CAAC;MAErB,IAAIR,KAAK,GAAG,CAAC,EAAE;QAAE;QACfhQ,OAAO,CAACC,GAAG,CAAC,qCAAqCqD,QAAQ,CAACN,IAAI,EAAE,CAAC;QACjEhD,OAAO,CAACC,GAAG,CAAC,6BAA6BuG,aAAa,CAAC9F,MAAM,EAAE,CAAC;MAClE;;MAEA;MACA;;MAEA;MACA,MAAM+P,sBAAsB,GAAGhK,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAKA,CAAC,CAASuI,WAAW,KAAKpN,QAAQ,CAACP,EAAE,CAAC;MACzGsN,eAAe,GAAGI,sBAAsB,CAAChG,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,IAAKvC,CAAC,CAASsD,cAAc,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;;MAEtG;MACA,MAAMkF,0BAA0B,GAAGjK,0BAA0B,CAACC,MAAM,CAACnJ,CAAC,IAAKA,CAAC,CAASkT,WAAW,KAAKpN,QAAQ,CAACP,EAAE,CAAC;MACjHuN,aAAa,GAAGK,0BAA0B,CACvChK,MAAM,CAACnJ,CAAC,IAAKA,CAAC,CAASmO,gBAAgB,KAAK,QAAQ,IAAKnO,CAAC,CAASoO,eAAe,KAAK,QAAQ,CAAC,CAChGnB,MAAM,CAAC,CAACC,GAAG,EAAElN,CAAC,KAAKkN,GAAG,IAAKlN,CAAC,CAAS6M,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MACxDkG,cAAc,GAAGI,0BAA0B,CACxChK,MAAM,CAACnJ,CAAC,IAAKA,CAAC,CAASmO,gBAAgB,KAAK,SAAS,IAAKnO,CAAC,CAASoO,eAAe,KAAK,SAAS,CAAC,CAClGnB,MAAM,CAAC,CAACC,GAAG,EAAElN,CAAC,KAAKkN,GAAG,IAAKlN,CAAC,CAAS6M,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;;MAExD;MACA+F,eAAe,GAAGE,aAAa,GAAGC,cAAc;MAEhD,IAAIP,KAAK,GAAG,CAAC,EAAE;QACbhQ,OAAO,CAACC,GAAG,CAAC,8CAA8C,EAAE;UAC1D8C,EAAE,EAAEO,QAAQ,CAACP,EAAE;UACfC,IAAI,EAAEM,QAAQ,CAACN,IAAI;UACnBqN,eAAe;UACfD,eAAe;UACfE,aAAa;UACbC,cAAc;UACdK,mBAAmB,EAAEH,sBAAsB,CAAC/P,MAAM;UAClDmQ,uBAAuB,EAAEF,0BAA0B,CAACjQ;QACtD,CAAC,CAAC;MACJ;;MAEA;MACA;MACA8P,aAAa,GAAIH,eAAe,GAAG,CAAC,IAAIpC,IAAI,CAACC,GAAG,CAACkC,eAAe,CAAC,GAAG,CAAC,IAAIE,aAAa,GAAG,CAAC,IAAIC,cAAc,GAAG,CAAC,GAAI,CAAC,GAAG,CAAC;MAEzH,IAAIP,KAAK,GAAG,CAAC,EAAE;QACbhQ,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAE;UAC/CoQ,eAAe;UACfD,eAAe;UACfE,aAAa;UACbC,cAAc;UACdC;QACF,CAAC,CAAC;MACJ;;MAEA;MACA,IAAIR,KAAK,GAAG,CAAC,EAAE;QACbhQ,OAAO,CAACC,GAAG,CAAC,6BAA6BqD,QAAQ,CAACN,IAAI,GAAG,EAAE;UACzDoN,eAAe;UACfC,eAAe;UACfC,aAAa;UACbC,cAAc;UACdC,aAAa;UACbzL,WAAW,EAAEwL,cAAc,GAAGD;QAChC,CAAC,CAAC;MACJ;MAEAR,gBAAgB,CAACgB,GAAG,CAAC3N,OAAO,CAAC,CAACtF,SAAS,CAACkT,IAAI,CAAC;QAC3C,GAAGzN,QAAQ;QACX0N,OAAO,EAAEZ,eAAe;QACxBtF,OAAO,EAAEuF,eAAe;QACxBY,KAAK,EAAEX,aAAa;QACpBY,MAAM,EAAEX,cAAc;QACtBtS,KAAK,EAAEuS,aAAa;QACpBzL,WAAW,EAAEwL,cAAc,GAAGD;MAChC,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACAtQ,OAAO,CAACC,GAAG,CAAC,iBAAiB6P,gBAAgB,CAACqB,IAAI,gCAAgC,CAAC;IAEnF,MAAMC,MAAM,GAAGpK,KAAK,CAACC,IAAI,CAAC6I,gBAAgB,CAACuB,OAAO,CAAC,CAAC,CAAC,CAACxO,GAAG,CAAC,CAAC,CAACM,OAAO,EAAEZ,IAAI,CAAC,EAAE+O,UAAU,KAAK;MACzF,MAAM5N,YAAY,GAAGnB,IAAI,CAAC1E,SAAS,CAAC4M,MAAM,CAAC,CAACC,GAAW,EAAExH,CAAM,KAAKwH,GAAG,IAAIxH,CAAC,CAAC8N,OAAO,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MAC9F,MAAMxN,YAAY,GAAGjB,IAAI,CAAC1E,SAAS,CAAC4M,MAAM,CAAC,CAACC,GAAW,EAAExH,CAAM,KAAKwH,GAAG,IAAIxH,CAAC,CAAC4H,OAAO,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MAC9F,MAAMlH,UAAU,GAAGrB,IAAI,CAAC1E,SAAS,CAAC4M,MAAM,CAAC,CAACC,GAAW,EAAExH,CAAM,KAAKwH,GAAG,IAAIxH,CAAC,CAAC+N,KAAK,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MAC1F,MAAMnN,WAAW,GAAGvB,IAAI,CAAC1E,SAAS,CAAC4M,MAAM,CAAC,CAACC,GAAW,EAAExH,CAAM,KAAKwH,GAAG,IAAIxH,CAAC,CAACgO,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MAC5F,MAAM3C,UAAU,GAAGhM,IAAI,CAAC1E,SAAS,CAAC4M,MAAM,CAAC,CAACC,GAAW,EAAExH,CAAM,KAAKwH,GAAG,IAAIxH,CAAC,CAACjF,KAAK,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MAE1F,IAAIqT,UAAU,GAAG,CAAC,EAAE;QAAA,IAAAC,WAAA;QAAE;QACpBvR,OAAO,CAACC,GAAG,CAAC,YAAYqR,UAAU,GAAG,CAAC,KAAK,EAAAC,WAAA,GAAAhP,IAAI,CAACsE,KAAK,cAAA0K,WAAA,uBAAVA,WAAA,CAAYvO,IAAI,KAAI,SAAS,IAAI,EAAE;UAC5EG,OAAO;UACPqO,cAAc,EAAEjP,IAAI,CAAC1E,SAAS,CAAC6C,MAAM;UACrC+Q,YAAY,EAAElP,IAAI,CAAC1E,SAAS,CAACgF,GAAG,CAAEK,CAAM,KAAM;YAC5CF,IAAI,EAAEE,CAAC,CAACF,IAAI;YACZ8H,OAAO,EAAE5H,CAAC,CAAC4H,OAAO;YAClBkG,OAAO,EAAE9N,CAAC,CAAC8N,OAAO;YAClB/S,KAAK,EAAEiF,CAAC,CAACjF;UACX,CAAC,CAAC,CAAC;UACHyT,MAAM,EAAE;YACNhO,YAAY;YACZF,YAAY;YACZI,UAAU;YACVE,WAAW;YACXyK,UAAU;YACVoD,yBAAyB,EAAEpP,IAAI,CAAC1E,SAAS,CAAC6C,MAAM,GAAG,CAAC,GAAG8C,YAAY,GAAGjB,IAAI,CAAC1E,SAAS,CAAC6C,MAAM,GAAG;UAChG;QACF,CAAC,CAAC;MACJ;MAEA,OAAO;QACLyC,OAAO;QACP0D,KAAK,EAAEtE,IAAI,CAACsE,KAAK;QACjBhJ,SAAS,EAAE0E,IAAI,CAAC1E,SAAS,CAAC+T,IAAI,CAAC,CAAC9O,CAAM,EAAEsF,CAAM,KAAK,CAACA,CAAC,CAAC0C,OAAO,IAAI,CAAC,KAAKhI,CAAC,CAACgI,OAAO,IAAI,CAAC,CAAC,CAAC;QAAE;QACzF+G,aAAa,EAAEtP,IAAI,CAAC1E,SAAS,CAAC6C,MAAM;QACpCgD,YAAY;QACZF,YAAY;QACZI,UAAU;QACVE,WAAW;QACXyK,UAAU;QACVxJ,WAAW,EAAEjB,WAAW,GAAGF,UAAU;QACrC+N,yBAAyB,EAAEpP,IAAI,CAAC1E,SAAS,CAAC6C,MAAM,GAAG,CAAC,GAAG8C,YAAY,GAAGjB,IAAI,CAAC1E,SAAS,CAAC6C,MAAM,GAAG;MAChG,CAAC;IACH,CAAC,CAAC;IAEFV,OAAO,CAACC,GAAG,CAAC,6BAA6BmR,MAAM,CAAC1Q,MAAM,mBAAmB,CAAC;IAC1E,OAAO0Q,MAAM;EACf,CAAC;;EAED;EACA,MAAMU,iBAAiB,GAAGA,CAACvP,IAAW,EAAEwP,MAAc,EAAEC,SAAyB,KAAK;IACpF,OAAO,CAAC,GAAGzP,IAAI,CAAC,CAACqP,IAAI,CAAC,CAAC9O,CAAC,EAAEsF,CAAC,KAAK;MAAA,IAAA6J,QAAA,EAAAC,QAAA;MAC9B,IAAIC,MAAW,EAAEC,MAAW;MAE5B,QAAQL,MAAM;QACZ,KAAK,cAAc;UACjBI,MAAM,GAAGrP,CAAC,CAACU,YAAY,IAAI,CAAC;UAC5B4O,MAAM,GAAGhK,CAAC,CAAC5E,YAAY,IAAI,CAAC;UAC5B;QACF,KAAK,cAAc;UACjB2O,MAAM,GAAGrP,CAAC,CAACY,YAAY,IAAI,CAAC;UAC5B0O,MAAM,GAAGhK,CAAC,CAAC1E,YAAY,IAAI,CAAC;UAC5B;QACF,KAAK,eAAe;UAClByO,MAAM,GAAGrP,CAAC,CAAC+O,aAAa,IAAI,CAAC;UAC7BO,MAAM,GAAGhK,CAAC,CAACyJ,aAAa,IAAI,CAAC;UAC7B;QACF,KAAK,gBAAgB;UACnBM,MAAM,GAAGrP,CAAC,CAAC6O,yBAAyB,IAAI,CAAC;UACzCS,MAAM,GAAGhK,CAAC,CAACuJ,yBAAyB,IAAI,CAAC;UACzC;QACF,KAAK,MAAM;UACTQ,MAAM,GAAG,EAAAF,QAAA,GAAAnP,CAAC,CAAC+D,KAAK,cAAAoL,QAAA,uBAAPA,QAAA,CAASjP,IAAI,KAAI,EAAE;UAC5BoP,MAAM,GAAG,EAAAF,QAAA,GAAA9J,CAAC,CAACvB,KAAK,cAAAqL,QAAA,uBAAPA,QAAA,CAASlP,IAAI,KAAI,EAAE;UAC5B,OAAOgP,SAAS,KAAK,KAAK,GACtBG,MAAM,CAACE,aAAa,CAACD,MAAM,CAAC,GAC5BA,MAAM,CAACC,aAAa,CAACF,MAAM,CAAC;QAClC;UACEA,MAAM,GAAGrP,CAAC,CAACU,YAAY,IAAI,CAAC;UAC5B4O,MAAM,GAAGhK,CAAC,CAAC5E,YAAY,IAAI,CAAC;MAChC;MAEA,IAAIwO,SAAS,KAAK,KAAK,EAAE;QACvB,OAAOG,MAAM,GAAGC,MAAM;MACxB,CAAC,MAAM;QACL,OAAOA,MAAM,GAAGD,MAAM;MACxB;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMG,gBAAgB,GAAGzC,qBAAqB,CAAC,CAAC;EAChD,MAAM0C,aAAa,GAAGT,iBAAiB,CAACQ,gBAAgB,EAAEjT,eAAe,EAAEE,kBAAkB,CAAC;;EAE9F;EACAS,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE;IACjCuS,WAAW,EAAEzU,MAAM,CAAC2C,MAAM;IAC1B8Q,cAAc,EAAE3T,SAAS,CAAC6C,MAAM;IAChCgM,sBAAsB,EAAEnG,iBAAiB,CAAC7F,MAAM;IAChDmJ,kBAAkB,EAAErD,aAAa,CAAC9F,MAAM;IACxC+R,kBAAkB,EAAEF,aAAa,CAAC7R,MAAM;IACxC2F,QAAQ,EAAE/I,IAAI,CAACgJ,IAAI;IACnBiM,aAAa,EAAEA,aAAa,CAACtP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAAE;IAC1C0E,eAAe,EAAEpB,iBAAiB,CAACtD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAACK,CAAC,KAAK;MACvDH,EAAE,EAAEG,CAAC,CAACH,EAAE;MACRC,IAAI,EAAEE,CAAC,CAACF,IAAI;MACZG,OAAO,EAAED,CAAC,CAACC,OAAO;MAClBC,QAAQ,EAAGF,CAAC,CAASE;IACvB,CAAC,CAAC,CAAC;IACHsP,YAAY,EAAE3U,MAAM,CAACkF,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAACC,CAAC,KAAK;MACzCC,EAAE,EAAED,CAAC,CAACC,EAAE;MACRC,IAAI,EAAEF,CAAC,CAACE;IACV,CAAC,CAAC,CAAC;IACH2P,WAAW,EAAEnM,aAAa,CAACvD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACJ,GAAG,CAACrF,CAAC;MAAA,IAAAoV,aAAA;MAAA,OAAK;QAC/C7P,EAAE,EAAEvF,CAAC,CAACuF,EAAE;QACRS,YAAY,EAAEhG,CAAC,CAACgG,YAAY;QAC5BE,YAAY,EAAElG,CAAC,CAACkG,YAAY;QAC5B7F,SAAS,GAAA+U,aAAA,GAAEpV,CAAC,CAACK,SAAS,cAAA+U,aAAA,uBAAXA,aAAA,CAAa/P,GAAG,CAACuE,EAAE,KAAK;UACjCC,UAAU,EAAED,EAAE,CAACC,UAAU;UACzByD,OAAO,EAAG1D,EAAE,CAAS0D,OAAO;UAC5BkG,OAAO,EAAG5J,EAAE,CAAS4J,OAAO;UAC5BxN,YAAY,EAAG4D,EAAE,CAAS5D;QAC5B,CAAC,CAAC,CAAC;QACHmB,OAAO,EAAEnH,CAAC,CAACmH,OAAO,GAAG;UACnBjB,YAAY,EAAElG,CAAC,CAACmH,OAAO,CAACjB,YAAY;UACpCF,YAAY,EAAEhG,CAAC,CAACmH,OAAO,CAACnB;QAC1B,CAAC,GAAG;MACN,CAAC;IAAA,CAAC;EACJ,CAAC,CAAC;;EAEF;EACA,MAAMqP,iBAAiB,GAAGN,aAAa,CAAC7R,MAAM,GAAG,CAAC,GAAG6R,aAAa,GAAG,CACnE;IACEpP,OAAO,EAAE,cAAc;IACvB0D,KAAK,EAAE;MAAE7D,IAAI,EAAE;IAAe,CAAC;IAC/BnF,SAAS,EAAE,CACT;MACEkF,EAAE,EAAE,iBAAiB;MACrBC,IAAI,EAAE,iBAAiB;MACvB8H,OAAO,EAAE,MAAM;MACfkG,OAAO,EAAE,KAAK;MACd/S,KAAK,EAAE;IACT,CAAC,EACD;MACE8E,EAAE,EAAE,iBAAiB;MACrBC,IAAI,EAAE,iBAAiB;MACvB8H,OAAO,EAAE,MAAM;MACfkG,OAAO,EAAE,CAAC,KAAK;MACf/S,KAAK,EAAE;IACT,CAAC,CACF;IACD4T,aAAa,EAAE,CAAC;IAChBnO,YAAY,EAAE,KAAK;IACnBF,YAAY,EAAE,MAAM;IACpBmO,yBAAyB,EAAE;EAC7B,CAAC,EACD;IACExO,OAAO,EAAE,cAAc;IACvB0D,KAAK,EAAE;MAAE7D,IAAI,EAAE;IAAe,CAAC;IAC/BnF,SAAS,EAAE,CACT;MACEkF,EAAE,EAAE,iBAAiB;MACrBC,IAAI,EAAE,iBAAiB;MACvB8H,OAAO,EAAE,KAAK;MACdkG,OAAO,EAAE,KAAK;MACd/S,KAAK,EAAE;IACT,CAAC,CACF;IACD4T,aAAa,EAAE,CAAC;IAChBnO,YAAY,EAAE,KAAK;IACnBF,YAAY,EAAE,KAAK;IACnBmO,yBAAyB,EAAE;EAC7B,CAAC,CACF;;EAED;EACA,MAAMmB,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,MAAMC,SAA+B,GAAG,CAAC,CAAC;;IAE1C;IACA/S,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEuG,aAAa,CAAC9F,MAAM,CAAC;IACxE8F,aAAa,CAACoI,OAAO,CAAC,CAAClK,IAAI,EAAEmK,CAAC,KAAK;MACjC,MAAM7F,QAAQ,GAAGtE,IAAI,CAACuE,IAAI,IAAKvE,IAAI,CAASwE,UAAU,IAAKxE,IAAI,CAASyE,UAAU;MAClF,IAAI,CAACH,QAAQ,EAAE;QACbhJ,OAAO,CAACgT,IAAI,CAAC,QAAQnE,CAAC,GAAC,CAAC,qBAAqB,EAAE;UAC7C9L,EAAE,EAAE2B,IAAI,CAAC3B,EAAE;UACXC,IAAI,EAAE0B,IAAI,CAAC1B,IAAI;UACfiG,IAAI,EAAEvE,IAAI,CAACuE,IAAI;UACfC,UAAU,EAAGxE,IAAI,CAASwE,UAAU;UACpCC,UAAU,EAAGzE,IAAI,CAASyE;QAC5B,CAAC,CAAC;QACF;MACF;MACA,MAAMF,IAAI,GAAGD,QAAQ,CAACiK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrCjT,OAAO,CAACC,GAAG,CAAC,QAAQ4O,CAAC,GAAC,CAAC,UAAU7F,QAAQ,OAAOC,IAAI,EAAE,CAAC;MACvD,IAAI,CAAC8J,SAAS,CAAC9J,IAAI,CAAC,EAAE;QACpB8J,SAAS,CAAC9J,IAAI,CAAC,GAAG;UAChBA,IAAI;UACJ6B,OAAO,EAAE,CAAC;UACVkG,OAAO,EAAE,CAAC;UACVvD,UAAU,EAAE,CAAC;UACbwD,KAAK,EAAE,CAAC;UACRC,MAAM,EAAE,CAAC;UACTnM,WAAW,EAAE,CAAC;UACdmO,QAAQ,EAAE,CAAC;UACXhO,YAAY,EAAE,CAAC;UACfiO,WAAW,EAAE,CAAC;UACdvR,YAAY,EAAE;QAChB,CAAC;MACH;;MAEA;MACA,MAAM+C,OAAO,GAAGD,IAAI,CAACC,OAAO,IAAI,CAAC,CAAC;;MAElC;MACAoO,SAAS,CAAC9J,IAAI,CAAC,CAAC6B,OAAO,IAAIhL,UAAU,CAAC4E,IAAI,CAAClB,YAAY,CAAC,CAAC,CAAC;MAC1DuP,SAAS,CAAC9J,IAAI,CAAC,CAAC+H,OAAO,IAAIlR,UAAU,CAAC4E,IAAI,CAAChB,YAAY,CAAC,CAAC,CAAC;;MAE1D;MACA,MAAM0P,iBAAiB,GAAGtT,UAAU,CAAC6E,OAAO,CAACY,wBAAwB,CAAC,IAAIzF,UAAU,CAAC6E,OAAO,CAACG,sBAAsB,CAAC;MACpHiO,SAAS,CAAC9J,IAAI,CAAC,CAACwE,UAAU,IAAI2F,iBAAiB;;MAE/C;MACAL,SAAS,CAAC9J,IAAI,CAAC,CAACgI,KAAK,IAAInR,UAAU,CAAC4E,IAAI,CAACd,UAAU,CAAC;MACpDmP,SAAS,CAAC9J,IAAI,CAAC,CAACiI,MAAM,IAAIpR,UAAU,CAAC4E,IAAI,CAACZ,WAAW,CAAC;MACtDiP,SAAS,CAAC9J,IAAI,CAAC,CAACiK,QAAQ,IAAIpT,UAAU,CAAC6E,OAAO,CAACE,aAAa,CAAC;MAC7DkO,SAAS,CAAC9J,IAAI,CAAC,CAAC/D,YAAY,IAAIpF,UAAU,CAAC6E,OAAO,CAACO,YAAY,CAAC;MAChE6N,SAAS,CAAC9J,IAAI,CAAC,CAAClE,WAAW,IAAIjF,UAAU,CAAC4E,IAAI,CAACZ,WAAW,GAAGY,IAAI,CAACd,UAAU,CAAC;MAC7EmP,SAAS,CAAC9J,IAAI,CAAC,CAACkK,WAAW,IAAI,CAAC,CAAC,CAAC;MAClCJ,SAAS,CAAC9J,IAAI,CAAC,CAACrH,YAAY,IAAM,CAAC+C,OAAO,CAACf,UAAU,IAAI,CAAC,IAAI,CAAC,IAAM,CAACe,OAAO,CAACb,WAAW,IAAI,CAAC,IAAI,CAAE,GAAI,CAAC,GAAG,CAAC;IAC/G,CAAC,CAAC;IAEF,OAAOmG,MAAM,CAACoJ,MAAM,CAACN,SAAS,CAAC,CAACnB,IAAI,CAAC,CAAC9O,CAAM,EAAEsF,CAAM,KAClD,IAAIvH,IAAI,CAACiC,CAAC,CAACmG,IAAI,CAAC,CAACG,OAAO,CAAC,CAAC,GAAG,IAAIvI,IAAI,CAACuH,CAAC,CAACa,IAAI,CAAC,CAACG,OAAO,CAAC,CACxD,CAAC;EACH,CAAC;EAED,MAAMkK,SAAS,GAAGR,iBAAiB,CAAC,CAAC;;EAErC;EACA,MAAMS,iBAAiB,GAAGD,SAAS,CAACzQ,GAAG,CAAE2Q,OAAY,IAAK;IACxD;IACA,MAAMC,iBAAiB,GAAGhN,sBAAsB,CAACE,MAAM,CAAE6E,MAAW,IAAK;MACvE,MAAMnC,UAAU,GAAGmC,MAAM,CAACkI,UAAU,IAAIlI,MAAM,CAACrC,UAAU,IAAIqC,MAAM,CAACmI,UAAU,IAAInI,MAAM,CAACoI,gBAAgB,IAAIpI,MAAM,CAACqI,SAAS;MAC7H,IAAI,CAACxK,UAAU,EAAE,OAAO,KAAK;MAC7B,MAAMyK,cAAc,GAAGzK,UAAU,CAAC4J,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC/C,OAAOa,cAAc,KAAKN,OAAO,CAACvK,IAAI;IACxC,CAAC,CAAC,CAACvI,MAAM;;IAET;IACA,MAAMqT,qBAAqB,GAAGrN,0BAA0B,CAACC,MAAM,CAAE6E,MAAW,IAAK;MAC/E,MAAMnC,UAAU,GAAGmC,MAAM,CAACkI,UAAU,IAAIlI,MAAM,CAACrC,UAAU,IAAIqC,MAAM,CAACqI,SAAS;MAC7E,IAAI,CAACxK,UAAU,EAAE,OAAO,KAAK;MAC7B,MAAMyK,cAAc,GAAGzK,UAAU,CAAC4J,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC/C,OAAOa,cAAc,KAAKN,OAAO,CAACvK,IAAI;IACxC,CAAC,CAAC,CAACvI,MAAM;IAET,OAAO;MACL,GAAG8S,OAAO;MACVQ,wBAAwB,EAAEP,iBAAiB,GAAGM,qBAAqB;MACnEnD,mBAAmB,EAAE6C,iBAAiB;MACtC5C,uBAAuB,EAAEkD;IAC3B,CAAC;EACH,CAAC,CAAC;;EAEF;EACA/T,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;EAC5CD,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEsT,iBAAiB,CAAC7S,MAAM,CAAC;EAC/DV,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEwG,sBAAsB,CAAC/F,MAAM,CAAC;EAClFV,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAEyG,0BAA0B,CAAChG,MAAM,CAAC;EAC1FV,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEsT,iBAAiB,CAAC1Q,GAAG,CAACoR,CAAC,IAAIA,CAAC,CAAChL,IAAI,CAAC,CAAC;EACxEsK,iBAAiB,CAACtQ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC2L,OAAO,CAAC,CAACsF,GAAQ,EAAErF,CAAC,KAAK;IACrD7O,OAAO,CAACC,GAAG,CAAC,SAAS4O,CAAC,GAAC,CAAC,KAAKqF,GAAG,CAACjL,IAAI,IAAI,EAAE;MACzCkL,SAAS,EAAED,GAAG,CAACf,WAAW;MAC1Ba,wBAAwB,EAAEE,GAAG,CAACF,wBAAwB;MACtD7V,cAAc,EAAE+V,GAAG,CAACtD,mBAAmB;MACvCvS,kBAAkB,EAAE6V,GAAG,CAACrD;IAC1B,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACA7Q,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;EAC3D,IAAIyG,0BAA0B,CAAChG,MAAM,GAAG,CAAC,EAAE;IACzC,MAAM8K,MAAM,GAAG9E,0BAA0B,CAAC,CAAC,CAAC;IAC5C1G,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAE;MAC1CyT,UAAU,EAAElI,MAAM,CAACkI,UAAU;MAC7BvK,UAAU,EAAEqC,MAAM,CAACrC,UAAU;MAC7B0K,SAAS,EAAErI,MAAM,CAACqI,SAAS;MAC3BO,aAAa,EAAE,CAAC5I,MAAM,CAACkI,UAAU,IAAIlI,MAAM,CAACrC,UAAU,IAAIqC,MAAM,CAACqI,SAAS,IAAI,EAAE,EAAEZ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAChG,CAAC,CAAC;EACJ;EAEAjT,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;EACtD,IAAIwG,sBAAsB,CAAC/F,MAAM,GAAG,CAAC,EAAE;IACrCV,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEwG,sBAAsB,CAAC,CAAC,CAAC,CAAC;IACjEzG,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEgK,MAAM,CAACC,IAAI,CAACzD,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC;EAC5E;;EAEA;EACA,MAAM4N,uBAAuB,GAAGA,CAAA,KAAM;IACpC,IAAI/W,IAAI,CAACgJ,IAAI,KAAK,OAAO,EAAE,OAAO,EAAE;IAEpC,OAAOvI,MAAM,CAAC8E,GAAG,CAACgE,KAAK,IAAI;MACzB,MAAMyN,cAAc,GAAG/N,iBAAiB,CAACI,MAAM,CAACzD,CAAC,IAAIA,CAAC,CAACC,OAAO,KAAK0D,KAAK,CAAC9D,EAAE,CAAC;MAC5E,MAAMwR,mBAAmB,GAAG9N,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAAChF,OAAO,KAAK0D,KAAK,CAAC9D,EAAE,CAAC;MACtF,MAAMyR,oBAAoB,GAAG9N,0BAA0B,CAACC,MAAM,CAACyB,CAAC,IAAI;QAClE,MAAM9E,QAAQ,GAAGzF,SAAS,CAACwK,IAAI,CAACnF,CAAC,IAAIA,CAAC,CAACH,EAAE,KAAKqF,CAAC,CAACf,UAAU,CAAC;QAC3D,OAAO,CAAA/D,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEH,OAAO,MAAK0D,KAAK,CAAC9D,EAAE;MACvC,CAAC,CAAC;MACF,MAAM0R,UAAU,GAAGjO,aAAa,CAACG,MAAM,CAACnJ,CAAC,IACtCA,CAAC,CAACO,MAAM,IAAIP,CAAC,CAACO,MAAM,CAAC6I,IAAI,CAAC9D,CAAC,IAAIA,CAAC,CAACK,OAAO,KAAK0D,KAAK,CAAC9D,EAAE,CAAC,IACvDvF,CAAC,CAAC2F,OAAO,KAAK0D,KAAK,CAAC9D,EACtB,CAAC;MAED,MAAM+H,OAAO,GAAGyJ,mBAAmB,CAAC9J,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAG5K,UAAU,CAACqI,CAAC,CAACuD,aAAa,CAAC,EAAE,CAAC,CAAC;MAC5F,MAAMsF,OAAO,GAAGuD,mBAAmB,CAAC9J,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAG5K,UAAU,CAACqI,CAAC,CAAC6I,OAAO,CAAC,EAAE,CAAC,CAAC;MACtF,MAAMC,KAAK,GAAGuD,oBAAoB,CAC/B7N,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAACyD,eAAe,KAAK,QAAQ,CAAC,CAC3CnB,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAGvC,CAAC,CAACkC,MAAM,EAAE,CAAC,CAAC;MACxC,MAAM6G,MAAM,GAAGsD,oBAAoB,CAChC7N,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAACyD,eAAe,KAAK,SAAS,CAAC,CAC5CnB,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAGvC,CAAC,CAACkC,MAAM,EAAE,CAAC,CAAC;MAExC,OAAO;QACLrH,IAAI,EAAE6D,KAAK,CAAC7D,IAAI;QAChBnF,SAAS,EAAEyW,cAAc,CAAC5T,MAAM;QAChCmN,eAAe,EAAEyG,cAAc,CAAC3N,MAAM,CAACzD,CAAC,IAAIA,CAAC,CAAC4L,QAAQ,CAAC,CAACpO,MAAM;QAC9DoK,OAAO;QACPkG,OAAO;QACPC,KAAK;QACLC,MAAM;QACNnM,WAAW,EAAEmM,MAAM,GAAGD,KAAK;QAC3BxD,UAAU,EAAEgH,UAAU,CAAChK,MAAM,CAAC,CAACC,GAAG,EAAEhG,IAAI,KAAK;UAC3C,MAAMC,OAAO,GAAGD,IAAI,CAACC,OAAO,IAAI,CAAC,CAAC;UAClC,OAAO+F,GAAG,IAAI5K,UAAU,CAAC6E,OAAO,CAACY,wBAAwB,CAAC,IAAIzF,UAAU,CAAC6E,OAAO,CAACG,sBAAsB,CAAC,CAAC;QAC3G,CAAC,EAAE,CAAC,CAAC;QACL7G,KAAK,EAAEwW,UAAU,CAAC/T,MAAM;QACxBvC,cAAc,EAAEoW,mBAAmB,CAAC7T,MAAM;QAC1CrC,kBAAkB,EAAEoW,UAAU,CAAC9N,MAAM,CAACnJ,CAAC;UAAA,IAAAkX,YAAA,EAAAC,YAAA;UAAA,OAAK,CAAC,EAAAD,YAAA,GAAAlX,CAAC,CAACmH,OAAO,cAAA+P,YAAA,uBAATA,YAAA,CAAW9Q,UAAU,KAAI,CAAC,IAAI,CAAC,IAAM,CAAC,EAAA+Q,YAAA,GAAAnX,CAAC,CAACmH,OAAO,cAAAgQ,YAAA,uBAATA,YAAA,CAAW7Q,WAAW,KAAI,CAAC,IAAI,CAAE;QAAA,EAAC,CAACpD,MAAM;QAC5HiO,wBAAwB,EAAE2F,cAAc,CAAC5T,MAAM,GAAG,CAAC,GAC/C4T,cAAc,CAAC7J,MAAM,CAAC,CAACC,GAAG,EAAExH,CAAC,KAAKwH,GAAG,GAAGxH,CAAC,CAACiB,iBAAiB,EAAE,CAAC,CAAC,GAAGmQ,cAAc,CAAC5T,MAAM,GACvF;MACN,CAAC;IACH,CAAC,CAAC,CAACiG,MAAM,CAACE,KAAK,IAAIA,KAAK,CAACiE,OAAO,GAAG,CAAC,IAAIjE,KAAK,CAAChJ,SAAS,GAAG,CAAC,CAAC;EAC9D,CAAC;EAED,MAAM+W,oBAAoB,GAAGP,uBAAuB,CAAC,CAAC;;EAEtD;EACA,MAAMQ,mBAAmB,GAAGA,CAAA,KAAM;IAChC,OAAOtO,iBAAiB,CACrB1D,GAAG,CAACS,QAAQ,IAAI;MACf,MAAMmN,sBAAsB,GAAGhK,sBAAsB,CAACE,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAACd,UAAU,KAAK/D,QAAQ,CAACP,EAAE,CAAC;MAC/F,MAAM+R,uBAAuB,GAAGpO,0BAA0B,CAACC,MAAM,CAACyB,CAAC,IAAIA,CAAC,CAACf,UAAU,KAAK/D,QAAQ,CAACP,EAAE,CAAC;MAEpG,MAAM+H,OAAO,GAAG2F,sBAAsB,CAAChG,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAG5K,UAAU,CAACqI,CAAC,CAACuD,aAAa,CAAC,EAAE,CAAC,CAAC;MAC/F,MAAMsF,OAAO,GAAGP,sBAAsB,CAAChG,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAG5K,UAAU,CAACqI,CAAC,CAAC6I,OAAO,CAAC,EAAE,CAAC,CAAC;MACzF,MAAMC,KAAK,GAAG6D,uBAAuB,CAClCnO,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAACyD,eAAe,KAAK,QAAQ,CAAC,CAC3CnB,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAGvC,CAAC,CAACkC,MAAM,EAAE,CAAC,CAAC;MACxC,MAAM6G,MAAM,GAAG4D,uBAAuB,CACnCnO,MAAM,CAACwB,CAAC,IAAIA,CAAC,CAACyD,eAAe,KAAK,SAAS,CAAC,CAC5CnB,MAAM,CAAC,CAACC,GAAG,EAAEvC,CAAC,KAAKuC,GAAG,GAAGvC,CAAC,CAACkC,MAAM,EAAE,CAAC,CAAC;MAExC,OAAO;QACL,GAAG/G,QAAQ;QACXyR,aAAa,EAAEjK,OAAO;QACtBkK,aAAa,EAAEhE,OAAO;QACtBiE,WAAW,EAAEhE,KAAK;QAClBiE,YAAY,EAAEhE,MAAM;QACpBiE,iBAAiB,EAAEjE,MAAM,GAAGD,KAAK;QACjCmE,gBAAgB,EAAEtK,OAAO,IAAIxH,QAAQ,CAACa,iBAAiB,GAAG,GAAG,CAAC;QAC9DgP,WAAW,EAAE1C,sBAAsB,CAAC/P,MAAM;QAC1C2U,gBAAgB,EAAEP,uBAAuB,CAACpU;MAC5C,CAAC;IACH,CAAC,CAAC,CACDiG,MAAM,CAACrD,QAAQ,IAAIA,QAAQ,CAACyR,aAAa,GAAG,CAAC,CAAC,CAC9CnD,IAAI,CAAC,CAAC9O,CAAC,EAAEsF,CAAC,KAAKA,CAAC,CAAC2M,aAAa,GAAGjS,CAAC,CAACiS,aAAa,CAAC,CACjD9R,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;EACjB,CAAC;EAED,MAAMqS,gBAAgB,GAAGT,mBAAmB,CAAC,CAAC;;EAE9C;EACA,MAAMU,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,UAAU,GAAG;MACjBC,WAAW,EAAE,IAAI5U,IAAI,CAAC,CAAC,CAACgI,WAAW,CAAC,CAAC;MACrCpK,SAAS,EAAEA,SAAS;MACpBF,aAAa,EAAEA,aAAa;MAC5B8H,QAAQ,EAAE/I,IAAI,CAACgJ,IAAI;MACnBoP,OAAO,EAAEnG,OAAO;MAChBwD,SAAS,EAAEO,SAAS;MACpBqC,YAAY,EAAEL,gBAAgB;MAC9BM,gBAAgB,EAAEhB,oBAAoB;MACtCiB,OAAO,EAAE;QACPhY,SAAS,EAAE0I,iBAAiB,CAAC7F,MAAM;QACnCzC,KAAK,EAAEuI,aAAa,CAAC9F,MAAM;QAC3BvC,cAAc,EAAEsI,sBAAsB,CAAC/F,MAAM;QAC7CrC,kBAAkB,EAAEqI,0BAA0B,CAAChG;MACjD;IACF,CAAC;IAED,MAAMoV,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACC,IAAI,CAACC,SAAS,CAACT,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE;MAAEU,IAAI,EAAE;IAAmB,CAAC,CAAC;IAC1F,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC;IACrC,MAAMhT,CAAC,GAAGwT,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACrCzT,CAAC,CAAC0T,IAAI,GAAGL,GAAG;IACZrT,CAAC,CAAC2T,QAAQ,GAAG,kBAAkB,IAAI5V,IAAI,CAAC,CAAC,CAACgI,WAAW,CAAC,CAAC,CAACoK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO;IAC5EqD,QAAQ,CAACI,IAAI,CAACC,WAAW,CAAC7T,CAAC,CAAC;IAC5BA,CAAC,CAAC8T,KAAK,CAAC,CAAC;IACTN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAAC/T,CAAC,CAAC;IAC5BsT,GAAG,CAACU,eAAe,CAACX,GAAG,CAAC;EAC1B,CAAC;;EAED;EACA,IAAItX,OAAO,EAAE;IACX,oBACE1B,OAAA;MAAK4Z,SAAS,EAAC,wCAAwC;MAAAC,QAAA,eACrD7Z,OAAA;QAAK4Z,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1B7Z,OAAA;UAAK4Z,SAAS,EAAC;QAAsE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC5Fja,OAAA;UAAG4Z,SAAS,EAAC,4BAA4B;UAAAC,QAAA,EAAC;QAA+C;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1F;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,oBACEja,OAAA;IAAK4Z,SAAS,EAAC,WAAW;IAAAC,QAAA,GAGvBjY,YAAY,iBACX5B,OAAA,CAACJ,KAAK;MAACga,SAAS,EAAC,0BAA0B;MAAAC,QAAA,gBACzC7Z,OAAA,CAAC7B,aAAa;QAACyb,SAAS,EAAC;MAAsB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAClDja,OAAA,CAACH,gBAAgB;QAAC+Z,SAAS,EAAC,cAAc;QAAAC,QAAA,gBACxC7Z,OAAA;UAAA6Z,QAAA,EAAQ;QAAc;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,KAAC,EAACrY,YAAY,eAC7C5B,OAAA,CAACL,MAAM;UACLua,OAAO,EAAEtX,uBAAwB;UACjCoR,IAAI,EAAC,IAAI;UACTmG,OAAO,EAAC,SAAS;UACjBP,SAAS,EAAC,mDAAmD;UAAAC,QAAA,gBAE7D7Z,OAAA,CAAChC,SAAS;YAAC4b,SAAS,EAAC;UAAc;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,SAExC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CACR,eAGDja,OAAA;MAAK4Z,SAAS,EAAC,6EAA6E;MAAAC,QAAA,gBAC1F7Z,OAAA;QAAA6Z,QAAA,gBACE7Z,OAAA;UAAI4Z,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAExZ,CAAC,CAAC,eAAe;QAAC;UAAAyZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC5Dja,OAAA;UAAG4Z,SAAS,EAAC,eAAe;UAAAC,QAAA,GACzB1Z,IAAI,CAACgJ,IAAI,KAAK,OAAO,GAAG9I,CAAC,CAAC,mBAAmB,CAAC,GAC9CF,IAAI,CAACgJ,IAAI,KAAK,OAAO,GAAG9I,CAAC,CAAC,SAAS,CAAC,GACpCA,CAAC,CAAC,kBAAkB,CAAC,EAAC,iCACzB;QAAA;UAAAyZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACJja,OAAA;UAAG4Z,SAAS,EAAC,4BAA4B;UAAAC,QAAA,GAAC,wBAClB,EAACvY,SAAS,EAAC,eAAQ,EAAC8Q,OAAO,CAACF,mBAAmB,EAAC,0BAAmB,EAACE,OAAO,CAACD,oBAAoB,EAAC,0BACzH;QAAA;UAAA2H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACNja,OAAA;QAAK4Z,SAAS,EAAC,sBAAsB;QAAAC,QAAA,gBACnC7Z,OAAA,CAACV,MAAM;UAACiD,KAAK,EAAEjB,SAAU;UAAC8Y,aAAa,EAAE7Y,YAAa;UAAAsY,QAAA,gBACpD7Z,OAAA,CAACP,aAAa;YAACma,SAAS,EAAC,MAAM;YAAAC,QAAA,eAC7B7Z,OAAA,CAACN,WAAW;cAAC2a,WAAW,EAAC;YAAY;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,eAChBja,OAAA,CAACT,aAAa;YAAAsa,QAAA,gBACZ7Z,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,GAAG;cAAAsX,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAC7Cja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,GAAG;cAAAsX,QAAA,EAAC;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAC9Cja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,IAAI;cAAAsX,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAChDja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,IAAI;cAAAsX,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAChDja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,KAAK;cAAAsX,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAETja,OAAA,CAACV,MAAM;UAACiD,KAAK,EAAE8K,eAAgB;UAAC+M,aAAa,EAAEE,kBAAmB;UAAAT,QAAA,gBAChE7Z,OAAA,CAACP,aAAa;YAACma,SAAS,EAAC,MAAM;YAAAC,QAAA,eAC7B7Z,OAAA,CAACN,WAAW;cAAC2a,WAAW,EAAC;YAAU;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB,CAAC,eAChBja,OAAA,CAACT,aAAa;YAAAsa,QAAA,EACX/a,oBAAoB,CAAC4G,GAAG,CAAE0H,QAAQ,iBACjCpN,OAAA,CAACR,UAAU;cAAsB+C,KAAK,EAAE6K,QAAQ,CAAC7K,KAAM;cAAAsX,QAAA,EACpDzM,QAAQ,CAACmN;YAAM,GADDnN,QAAQ,CAAC7K,KAAK;cAAAuX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEnB,CACb;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACW,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,EAER9Z,IAAI,CAACgJ,IAAI,KAAK,OAAO,iBACpBnJ,OAAA,CAACV,MAAM;UAACiD,KAAK,EAAEnB,aAAc;UAACgZ,aAAa,EAAE/Y,gBAAiB;UAAAwY,QAAA,gBAC5D7Z,OAAA,CAACP,aAAa;YAACma,SAAS,EAAC,MAAM;YAAAC,QAAA,eAC7B7Z,OAAA,CAACN,WAAW;cAAC2a,WAAW,EAAC;YAAY;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,eAChBja,OAAA,CAACT,aAAa;YAAAsa,QAAA,gBACZ7Z,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,KAAK;cAAAsX,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,EAC9CrZ,MAAM,CAAC8E,GAAG,CAAEgE,KAAK,iBAChB1J,OAAA,CAACR,UAAU;cAAgB+C,KAAK,EAAEmH,KAAK,CAAC9D,EAAG;cAAAiU,QAAA,EACxCnQ,KAAK,CAAC7D;YAAI,GADI6D,KAAK,CAAC9D,EAAE;cAAAkU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEb,CACb,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACW,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CACT,eAEDja,OAAA,CAACV,MAAM;UAACiD,KAAK,EAAEf,UAAW;UAAC4Y,aAAa,EAAE3Y,aAAc;UAAAoY,QAAA,gBACtD7Z,OAAA,CAACP,aAAa;YAACma,SAAS,EAAC,MAAM;YAAAC,QAAA,eAC7B7Z,OAAA,CAACN,WAAW;cAAC2a,WAAW,EAAC;YAAa;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,eAChBja,OAAA,CAACT,aAAa;YAAAsa,QAAA,gBACZ7Z,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,UAAU;cAAAsX,QAAA,EAAExZ,CAAC,CAAC,kBAAkB;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAa,CAAC,eACjEja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,WAAW;cAAAsX,QAAA,EAAExZ,CAAC,CAAC,mBAAmB;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAa,CAAC,eACnEja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,UAAU;cAAAsX,QAAA,EAAExZ,CAAC,CAAC,kBAAkB;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAa,CAAC,eACjEja,OAAA,CAACR,UAAU;cAAC+C,KAAK,EAAC,aAAa;cAAAsX,QAAA,EAAExZ,CAAC,CAAC,qBAAqB;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAa,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAETja,OAAA,CAACL,MAAM;UAACwa,OAAO,EAAC,SAAS;UAACD,OAAO,EAAE9B,YAAa;UAAAyB,QAAA,gBAC9C7Z,OAAA,CAAC/B,QAAQ;YAAC2b,SAAS,EAAC;UAAc;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAChD5Z,CAAC,CAAC,aAAa,CAAC;QAAA;UAAAyZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNja,OAAA;MAAA6Z,QAAA,gBACE7Z,OAAA;QAAI4Z,SAAS,EAAC,0BAA0B;QAAAC,QAAA,EAAExZ,CAAC,CAAC,kBAAkB;MAAC;QAAAyZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACrEja,OAAA;QAAK4Z,SAAS,EAAC,sDAAsD;QAAAC,QAAA,gBAEnE7Z,OAAA,CAACf,IAAI;UAAC2a,SAAS,EAAE,oBAAoBxH,OAAO,CAACN,oBAAoB,GAAG,CAAC,GAAG,uCAAuC,GAAG,6CAA6C,EAAG;UAAA+H,QAAA,gBAChK7Z,OAAA,CAACZ,UAAU;YAACwa,SAAS,EAAC,2DAA2D;YAAAC,QAAA,gBAC/E7Z,OAAA,CAACX,SAAS;cAACua,SAAS,EAAE,uBAAuBxH,OAAO,CAACN,oBAAoB,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EAAG;cAAA+H,QAAA,EAAExZ,CAAC,CAAC,UAAU;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAChJja,OAAA,CAAC1B,WAAW;cAACsb,SAAS,EAAE,WAAWxH,OAAO,CAACN,oBAAoB,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB;YAAG;cAAAgI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnG,CAAC,eACbja,OAAA,CAACd,WAAW;YAAA2a,QAAA,gBACV7Z,OAAA;cAAK4Z,SAAS,EAAE,sBAAsBxH,OAAO,CAACN,oBAAoB,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EAAG;cAAA+H,QAAA,GAAC,KACzG,EAACvX,gBAAgB,CAAC8P,OAAO,CAACN,oBAAoB,CAAC;YAAA;cAAAgI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/C,CAAC,eACNja,OAAA;cAAG4Z,SAAS,EAAE,WAAWxH,OAAO,CAACN,oBAAoB,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EAAG;cAAA+H,QAAA,EAC7FzH,OAAO,CAACN,oBAAoB,GAAG,CAAC,GAAG,6BAA6B,GAAG;YAA6B;cAAAgI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAGPja,OAAA,CAACf,IAAI;UAAC2a,SAAS,EAAC,2DAA2D;UAAAC,QAAA,gBACzE7Z,OAAA,CAACZ,UAAU;YAACwa,SAAS,EAAC,2DAA2D;YAAAC,QAAA,gBAC/E7Z,OAAA,CAACX,SAAS;cAACua,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EAAExZ,CAAC,CAAC,uBAAuB;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACjGja,OAAA,CAAClC,UAAU;cAAC8b,SAAS,EAAC;YAAuB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtC,CAAC,eACbja,OAAA,CAACd,WAAW;YAAA2a,QAAA,gBACV7Z,OAAA;cAAK4Z,SAAS,EAAC,kCAAkC;cAAAC,QAAA,GAAE7a,iBAAiB,CAACqO,eAAe,CAAC,EAAE/K,gBAAgB,CAAC8P,OAAO,CAACP,oBAAoB,CAAC;YAAA;cAAAiI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC5Ija,OAAA;cAAG4Z,SAAS,EAAC,uBAAuB;cAAAC,QAAA,GACjCzH,OAAO,CAACF,mBAAmB,EAAC,+BAAwB,EAAC5Q,SAAS,EAAC,OAClE;YAAA;cAAAwY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAGPja,OAAA,CAACf,IAAI;UAAC2a,SAAS,EAAC,iEAAiE;UAAAC,QAAA,gBAC/E7Z,OAAA,CAACZ,UAAU;YAACwa,SAAS,EAAC,2DAA2D;YAAAC,QAAA,gBAC/E7Z,OAAA,CAACX,SAAS;cAACua,SAAS,EAAC,qCAAqC;cAAAC,QAAA,EAAC;YAAkB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAW,CAAC,eACzFja,OAAA,CAAC5B,OAAO;cAACwb,SAAS,EAAC;YAAyB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC,eACbja,OAAA,CAACd,WAAW;YAAA2a,QAAA,gBACV7Z,OAAA;cAAK4Z,SAAS,EAAC,oCAAoC;cAAAC,QAAA,GAAC,KAAG,EAACvX,gBAAgB,CAAC8P,OAAO,CAACzK,sBAAsB,CAAC;YAAA;cAAAmS,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC/Gja,OAAA;cAAG4Z,SAAS,EAAC,yBAAyB;cAAAC,QAAA,EAAC;YAEvC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAGPja,OAAA,CAACf,IAAI;UAAC2a,SAAS,EAAE,oBAAoBxH,OAAO,CAAC1C,mBAAmB,GAAG,6CAA6C,GAAG,uCAAuC,EAAG;UAAAmK,QAAA,gBAC3J7Z,OAAA,CAACZ,UAAU;YAACwa,SAAS,EAAC,2DAA2D;YAAAC,QAAA,gBAC/E7Z,OAAA,CAACX,SAAS;cAACua,SAAS,EAAE,uBAAuBxH,OAAO,CAAC1C,mBAAmB,GAAG,gBAAgB,GAAG,cAAc,EAAG;cAAAmK,QAAA,EAAExZ,CAAC,CAAC,aAAa;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,EAC7I7H,OAAO,CAAC1C,mBAAmB,gBAC1B1P,OAAA,CAAC3B,MAAM;cAACub,SAAS,EAAC;YAAwB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,gBAE7Cja,OAAA,CAACpC,YAAY;cAACgc,SAAS,EAAC;YAAsB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CACjD;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACS,CAAC,eACbja,OAAA,CAACd,WAAW;YAAA2a,QAAA,gBACV7Z,OAAA;cAAK4Z,SAAS,EAAE,sBAAsBxH,OAAO,CAAC1C,mBAAmB,GAAG,gBAAgB,GAAG,cAAc,EAAG;cAAAmK,QAAA,GAAC,KACpG,EAACvX,gBAAgB,CAACwO,IAAI,CAACC,GAAG,CAACqB,OAAO,CAACrK,YAAY,CAAC,CAAC;YAAA;cAAA+R,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjD,CAAC,eACNja,OAAA;cAAG4Z,SAAS,EAAE,WAAWxH,OAAO,CAAC1C,mBAAmB,GAAG,gBAAgB,GAAG,cAAc,EAAG;cAAAmK,QAAA,EACxFzH,OAAO,CAAC1C,mBAAmB,GAAG,gCAAgC,GAAG;YAA6B;cAAAoK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC9F,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eAGPja,OAAA,CAACf,IAAI;UAAA4a,QAAA,gBACH7Z,OAAA,CAACZ,UAAU;YAACwa,SAAS,EAAC,2DAA2D;YAAAC,QAAA,gBAC/E7Z,OAAA,CAACX,SAAS;cAACua,SAAS,EAAC,qBAAqB;cAAAC,QAAA,EAAExZ,CAAC,CAAC,2BAA2B;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACvFja,OAAA,CAACnC,KAAK;cAAC+b,SAAS,EAAC;YAA+B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzC,CAAC,eACbja,OAAA,CAACd,WAAW;YAAA2a,QAAA,gBACV7Z,OAAA;cAAK4Z,SAAS,EAAC,oBAAoB;cAAAC,QAAA,EAAEzH,OAAO,CAAC1B;YAAe;cAAAoJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACnEja,OAAA;cAAG4Z,SAAS,EAAC,+BAA+B;cAAAC,QAAA,GACzDxZ,CAAC,CAAC,oBAAoB,CAAC,EAAC,GAAC,EAAC+R,OAAO,CAAC3B,cAAc;YAAA;cAAAqJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNja,OAAA;MAAK4Z,SAAS,EAAC,uCAAuC;MAAAC,QAAA,gBAEpD7Z,OAAA,CAACf,IAAI;QAAC2a,SAAS,EAAC,4DAA4D;QAAAC,QAAA,gBAC1E7Z,OAAA,CAACZ,UAAU;UAACwa,SAAS,EAAC,MAAM;UAAAC,QAAA,eAC1B7Z,OAAA;YAAK4Z,SAAS,EAAC,mCAAmC;YAAAC,QAAA,gBAChD7Z,OAAA;cAAA6Z,QAAA,gBACE7Z,OAAA,CAACX,SAAS;gBAACua,SAAS,EAAC,yDAAyD;gBAAAC,QAAA,gBAC5E7Z,OAAA,CAAC9B,SAAS;kBAAC0b,SAAS,EAAC;gBAAuB;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,2BAEjD;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACZja,OAAA,CAACb,eAAe;gBAACya,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAAC;cAEhD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAiB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,eACNja,OAAA;cAAK4Z,SAAS,EAAC,iCAAiC;cAAAC,QAAA,gBAC9C7Z,OAAA;gBAAK4Z,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBACtC7Z,OAAA;kBAAK4Z,SAAS,EAAC;gBAAmC;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzDja,OAAA;kBAAM4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAExZ,CAAC,CAAC,QAAQ;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjD,CAAC,eACNja,OAAA;gBAAK4Z,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBACtC7Z,OAAA;kBAAK4Z,SAAS,EAAC;gBAAoC;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAC1Dja,OAAA;kBAAM4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAExZ,CAAC,CAAC,SAAS;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI,CAAC,eACbja,OAAA,CAACd,WAAW;UAAC0a,SAAS,EAAC,MAAM;UAAAC,QAAA,eAC3B7Z,OAAA,CAACvC,mBAAmB;YAAC+c,KAAK,EAAC,MAAM;YAACC,MAAM,EAAE,GAAI;YAAAZ,QAAA,eAC5C7Z,OAAA,CAACtC,aAAa;cACZ0H,IAAI,EAAE+Q,SAAU;cAChBuE,MAAM,EAAE;gBAAEC,GAAG,EAAE,EAAE;gBAAEC,KAAK,EAAE,EAAE;gBAAEC,IAAI,EAAE,EAAE;gBAAEC,MAAM,EAAE;cAAE,CAAE;cAAAjB,QAAA,gBAEpD7Z,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAgB4F,EAAE,EAAC,eAAe;kBAACmV,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAAArB,QAAA,gBAC5D7Z,OAAA;oBAAMmb,MAAM,EAAC,IAAI;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC,eACzDja,OAAA;oBAAMmb,MAAM,EAAC,KAAK;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5C,CAAC,eACjBja,OAAA;kBAAgB4F,EAAE,EAAC,gBAAgB;kBAACmV,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAAArB,QAAA,gBAC7D7Z,OAAA;oBAAMmb,MAAM,EAAC,IAAI;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC,eACzDja,OAAA;oBAAMmb,MAAM,EAAC,KAAK;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACb,CAAC,eACPja,OAAA,CAACzC,aAAa;gBAAC+d,eAAe,EAAC,KAAK;gBAACC,MAAM,EAAC,SAAS;gBAACC,OAAO,EAAE;cAAI;gBAAA1B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACtEja,OAAA,CAAC3C,KAAK;gBACJoe,OAAO,EAAC,MAAM;gBACdC,QAAQ,EAAE,KAAM;gBAChBC,QAAQ,EAAE,KAAM;gBAChBC,IAAI,EAAE;kBAAEC,QAAQ,EAAE,EAAE;kBAAEC,IAAI,EAAE;gBAAU,CAAE;gBACxCC,aAAa,EAAGxZ,KAAK,IAAK;kBACxB,MAAMuJ,IAAI,GAAG,IAAIpI,IAAI,CAACnB,KAAK,CAAC;kBAC5B,OAAO,GAAGuJ,IAAI,CAACkQ,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAIlQ,IAAI,CAACN,OAAO,CAAC,CAAC,EAAE;gBACnD,CAAE;gBACFyQ,KAAK,EAAE;kBAAE1Z,KAAK,EAAElC,CAAC,CAAC,MAAM,CAAC;kBAAE6b,QAAQ,EAAE,cAAc;kBAAEf,MAAM,EAAE,CAAC,CAAC;kBAAEgB,KAAK,EAAE;oBAAEC,UAAU,EAAE,QAAQ;oBAAEP,QAAQ,EAAE,MAAM;oBAAEC,IAAI,EAAE;kBAAU;gBAAE;cAAE;gBAAAhC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvI,CAAC,eACFja,OAAA,CAAC1C,KAAK;gBACJoe,QAAQ,EAAE,KAAM;gBAChBC,QAAQ,EAAE,KAAM;gBAChBC,IAAI,EAAE;kBAAEC,QAAQ,EAAE,EAAE;kBAAEC,IAAI,EAAE;gBAAU,CAAE;gBACxCC,aAAa,EAAGxZ,KAAK,IAAK;kBACxB,IAAIA,KAAK,IAAI,OAAO,EAAE,OAAO,GAAG,CAACA,KAAK,GAAG,OAAO,EAAE8Z,OAAO,CAAC,CAAC,CAAC,GAAG;kBAC/D,IAAI9Z,KAAK,IAAI,IAAI,EAAE,OAAO,GAAG,CAACA,KAAK,GAAG,IAAI,EAAE8Z,OAAO,CAAC,CAAC,CAAC,GAAG;kBACzD,OAAO9Z,KAAK,CAAC+Z,QAAQ,CAAC,CAAC;gBACzB,CAAE;gBACFL,KAAK,EAAE;kBAAE1Z,KAAK,EAAElC,CAAC,CAAC,YAAY,CAAC;kBAAEkc,KAAK,EAAE,CAAC,EAAE;kBAAEL,QAAQ,EAAE,YAAY;kBAAEC,KAAK,EAAE;oBAAEC,UAAU,EAAE,QAAQ;oBAAEP,QAAQ,EAAE,MAAM;oBAAEC,IAAI,EAAE;kBAAU;gBAAE;cAAE;gBAAAhC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3I,CAAC,eACFja,OAAA,CAACxC,OAAO;gBACNgf,YAAY,EAAE;kBACZC,eAAe,EAAE,OAAO;kBACxBC,MAAM,EAAE,MAAM;kBACdC,YAAY,EAAE,MAAM;kBACpBC,SAAS,EAAE,6BAA6B;kBACxCC,OAAO,EAAE;gBACX,CAAE;gBACFC,SAAS,EAAEA,CAACva,KAAK,EAAEsD,IAAI,KAAK,CAC1B,MAAMkX,MAAM,CAACxa,KAAK,CAAC,CAACG,cAAc,CAAC,CAAC,EAAE,EACtCmD,IAAI,KAAK,OAAO,GAAG,WAAW,GAC9BA,IAAI,KAAK,QAAQ,GAAG,YAAY,GAChC,SAAS,CACT;gBACFmX,cAAc,EAAGf,KAAK,IAAK;kBACzB,MAAMnQ,IAAI,GAAG,IAAIpI,IAAI,CAACuY,KAAK,CAAC;kBAC5B,OAAO,MAAMnQ,IAAI,CAACmR,kBAAkB,CAAC,OAAO,EAAE;oBAC5CC,OAAO,EAAE,OAAO;oBAChBC,KAAK,EAAE,OAAO;oBACdpG,GAAG,EAAE;kBACP,CAAC,CAAC,EAAE;gBACN;cAAE;gBAAA+C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACFja,OAAA,CAAC5C,GAAG;gBACFqe,OAAO,EAAC,OAAO;gBACfK,IAAI,EAAC,qBAAqB;gBAC1BjW,IAAI,EAAC,OAAO;gBACZuX,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;gBACrBC,UAAU,EAAE;cAAG;gBAAAvD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC,eACFja,OAAA,CAAC5C,GAAG;gBACFqe,OAAO,EAAC,QAAQ;gBAChBK,IAAI,EAAC,sBAAsB;gBAC3BjW,IAAI,EAAC,QAAQ;gBACbuX,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE;gBACrBC,UAAU,EAAE;cAAG;gBAAAvD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACW;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eAGPja,OAAA,CAACf,IAAI;QAAC2a,SAAS,EAAC,4DAA4D;QAAAC,QAAA,gBAC1E7Z,OAAA,CAACZ,UAAU;UAACwa,SAAS,EAAC,MAAM;UAAAC,QAAA,eAC1B7Z,OAAA;YAAK4Z,SAAS,EAAC,mCAAmC;YAAAC,QAAA,gBAChD7Z,OAAA;cAAA6Z,QAAA,gBACE7Z,OAAA,CAACX,SAAS;gBAACua,SAAS,EAAC,yDAAyD;gBAAAC,QAAA,gBAC5E7Z,OAAA,CAACjC,QAAQ;kBAAC6b,SAAS,EAAC;gBAAyB;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,EACjE5Z,CAAC,CAAC,mBAAmB,CAAC;cAAA;gBAAAyZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC,eACZja,OAAA,CAACb,eAAe;gBAACya,SAAS,EAAC,oBAAoB;gBAAAC,QAAA,EAAC;cAEhD;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAiB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,eACNja,OAAA;cAAK4Z,SAAS,EAAC,iCAAiC;cAAAC,QAAA,gBAC9C7Z,OAAA;gBAAK4Z,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBACtC7Z,OAAA;kBAAK4Z,SAAS,EAAC;gBAAiC;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACvDja,OAAA;kBAAM4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAExZ,CAAC,CAAC,mBAAmB;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5D,CAAC,eACNja,OAAA;gBAAK4Z,SAAS,EAAC,yBAAyB;gBAAAC,QAAA,gBACtC7Z,OAAA;kBAAK4Z,SAAS,EAAC;gBAAmC;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eACzDja,OAAA;kBAAM4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAExZ,CAAC,CAAC,0BAA0B;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI,CAAC,eACbja,OAAA,CAACd,WAAW;UAAC0a,SAAS,EAAC,MAAM;UAAAC,QAAA,eAC3B7Z,OAAA,CAACvC,mBAAmB;YAAC+c,KAAK,EAAC,MAAM;YAACC,MAAM,EAAE,GAAI;YAAAZ,QAAA,eAC5C7Z,OAAA,CAACtC,aAAa;cACZ0H,IAAI,EAAE+Q,SAAU;cAChBuE,MAAM,EAAE;gBAAEC,GAAG,EAAE,EAAE;gBAAEC,KAAK,EAAE,EAAE;gBAAEC,IAAI,EAAE,EAAE;gBAAEC,MAAM,EAAE;cAAE,CAAE;cAAAjB,QAAA,gBAEpD7Z,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAgB4F,EAAE,EAAC,kBAAkB;kBAACmV,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAAArB,QAAA,gBAC/D7Z,OAAA;oBAAMmb,MAAM,EAAC,IAAI;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC,eACzDja,OAAA;oBAAMmb,MAAM,EAAC,KAAK;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5C,CAAC,eACjBja,OAAA;kBAAgB4F,EAAE,EAAC,wBAAwB;kBAACmV,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAACC,EAAE,EAAC,GAAG;kBAAArB,QAAA,gBACrE7Z,OAAA;oBAAMmb,MAAM,EAAC,IAAI;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC,eACzDja,OAAA;oBAAMmb,MAAM,EAAC,KAAK;oBAACC,SAAS,EAAC,SAAS;oBAACC,WAAW,EAAE;kBAAI;oBAAAvB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACb,CAAC,eACPja,OAAA,CAACzC,aAAa;gBAAC+d,eAAe,EAAC,KAAK;gBAACC,MAAM,EAAC,SAAS;gBAACC,OAAO,EAAE;cAAI;gBAAA1B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eACtEja,OAAA,CAAC3C,KAAK;gBACJoe,OAAO,EAAC,MAAM;gBACdC,QAAQ,EAAE,KAAM;gBAChBC,QAAQ,EAAE,KAAM;gBAChBC,IAAI,EAAE;kBAAEC,QAAQ,EAAE,EAAE;kBAAEC,IAAI,EAAE;gBAAU,CAAE;gBACxCC,aAAa,EAAGxZ,KAAK,IAAK;kBACxB,MAAMuJ,IAAI,GAAG,IAAIpI,IAAI,CAACnB,KAAK,CAAC;kBAC5B,OAAO,GAAGuJ,IAAI,CAACkQ,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAIlQ,IAAI,CAACN,OAAO,CAAC,CAAC,EAAE;gBACnD,CAAE;gBACFyQ,KAAK,EAAE;kBAAE1Z,KAAK,EAAElC,CAAC,CAAC,MAAM,CAAC;kBAAE6b,QAAQ,EAAE,cAAc;kBAAEf,MAAM,EAAE,CAAC,CAAC;kBAAEgB,KAAK,EAAE;oBAAEC,UAAU,EAAE,QAAQ;oBAAEP,QAAQ,EAAE,MAAM;oBAAEC,IAAI,EAAE;kBAAU;gBAAE;cAAE;gBAAAhC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvI,CAAC,eACFja,OAAA,CAAC1C,KAAK;gBACJoe,QAAQ,EAAE,KAAM;gBAChBC,QAAQ,EAAE,KAAM;gBAChBC,IAAI,EAAE;kBAAEC,QAAQ,EAAE,EAAE;kBAAEC,IAAI,EAAE;gBAAU,CAAE;gBACxCC,aAAa,EAAGxZ,KAAK,IAAK;kBACxB,IAAIA,KAAK,IAAI,OAAO,EAAE,OAAO,GAAG,CAACA,KAAK,GAAG,OAAO,EAAE8Z,OAAO,CAAC,CAAC,CAAC,GAAG;kBAC/D,IAAI9Z,KAAK,IAAI,IAAI,EAAE,OAAO,GAAG,CAACA,KAAK,GAAG,IAAI,EAAE8Z,OAAO,CAAC,CAAC,CAAC,GAAG;kBACzD,OAAO9Z,KAAK,CAAC+Z,QAAQ,CAAC,CAAC;gBACzB,CAAE;gBACFL,KAAK,EAAE;kBAAE1Z,KAAK,EAAElC,CAAC,CAAC,YAAY,CAAC;kBAAEkc,KAAK,EAAE,CAAC,EAAE;kBAAEL,QAAQ,EAAE,YAAY;kBAAEC,KAAK,EAAE;oBAAEC,UAAU,EAAE,QAAQ;oBAAEP,QAAQ,EAAE,MAAM;oBAAEC,IAAI,EAAE;kBAAU;gBAAE;cAAE;gBAAAhC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3I,CAAC,eACFja,OAAA,CAACxC,OAAO;gBACNgf,YAAY,EAAE;kBACZC,eAAe,EAAE,OAAO;kBACxBC,MAAM,EAAE,MAAM;kBACdC,YAAY,EAAE,MAAM;kBACpBC,SAAS,EAAE,6BAA6B;kBACxCC,OAAO,EAAE;gBACX,CAAE;gBACFC,SAAS,EAAEA,CAACva,KAAK,EAAEsD,IAAI,KAAK,CAC1B,MAAMkX,MAAM,CAACxa,KAAK,CAAC,CAACG,cAAc,CAAC,CAAC,EAAE,EACtCmD,IAAI,KAAK,UAAU,GAAG,MAAMxF,CAAC,CAAC,mBAAmB,CAAC,EAAE,GACpDwF,IAAI,KAAK,YAAY,GAAG,MAAMxF,CAAC,CAAC,0BAA0B,CAAC,EAAE,GAC7D,SAAS,CACT;gBACF2c,cAAc,EAAGf,KAAK,IAAK;kBACzB,MAAMnQ,IAAI,GAAG,IAAIpI,IAAI,CAACuY,KAAK,CAAC;kBAC5B,OAAO,MAAMnQ,IAAI,CAACmR,kBAAkB,CAAC,OAAO,EAAE;oBAC5CC,OAAO,EAAE,OAAO;oBAChBC,KAAK,EAAE,OAAO;oBACdpG,GAAG,EAAE;kBACP,CAAC,CAAC,EAAE;gBACN;cAAE;gBAAA+C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACFja,OAAA,CAACrC,IAAI;gBACHob,IAAI,EAAC,UAAU;gBACf0C,OAAO,EAAC,UAAU;gBAClBF,MAAM,EAAC,SAAS;gBAChBO,IAAI,EAAC,wBAAwB;gBAC7BjW,IAAI,EAAC,UAAU;gBACfyX,WAAW,EAAE;cAAE;gBAAAxD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC,eACFja,OAAA,CAACrC,IAAI;gBACHob,IAAI,EAAC,UAAU;gBACf0C,OAAO,EAAC,YAAY;gBACpBF,MAAM,EAAC,SAAS;gBAChBO,IAAI,EAAC,8BAA8B;gBACnCjW,IAAI,EAAC,YAAY;gBACjByX,WAAW,EAAE;cAAE;gBAAAxD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChB,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACW;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACX,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EAIL9B,gBAAgB,CAAC5U,MAAM,GAAG,CAAC,iBAC1BvD,OAAA,CAACf,IAAI;MAAA4a,QAAA,gBACH7Z,OAAA,CAACZ,UAAU;QAAAya,QAAA,gBACT7Z,OAAA,CAACX,SAAS;UAAAwa,QAAA,EAAC;QAAwB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAW,CAAC,eAC/Cja,OAAA,CAACb,eAAe;UAAA0a,QAAA,EAAC;QAEjB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAiB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eACbja,OAAA,CAACd,WAAW;QAAA2a,QAAA,eACV7Z,OAAA;UAAK4Z,SAAS,EAAC,WAAW;UAAAC,QAAA,EACvB1B,gBAAgB,CAACzS,GAAG,CAAC,CAACS,QAAQ,EAAE0M,KAAK,kBACpC7S,OAAA;YAAuB4Z,SAAS,EAAC,4FAA4F;YAAAC,QAAA,gBAC3H7Z,OAAA;cAAK4Z,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1C7Z,OAAA;gBAAK4Z,SAAS,EAAC,sIAAsI;gBAAAC,QAAA,EAClJhH,KAAK,GAAG;cAAC;gBAAAiH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACP,CAAC,eACNja,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAG4Z,SAAS,EAAC,aAAa;kBAAAC,QAAA,EAAE1T,QAAQ,CAACN;gBAAI;kBAAAiU,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eAC9Cja,OAAA;kBAAG4Z,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,GAAC,SAC5B,EAAC1T,QAAQ,CAACoX,SAAS,EAAC,UAAG,EAACpX,QAAQ,CAACa,iBAAiB,EAAC,gBAC5D;gBAAA;kBAAA8S,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC,eACJja,OAAA;kBAAG4Z,SAAS,EAAC,uBAAuB;kBAAAC,QAAA,GACjC1T,QAAQ,CAAC6P,WAAW,EAAC,kBAAW,EAAC7P,QAAQ,CAAC+R,gBAAgB,EAAC,eAC9D;gBAAA;kBAAA4B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNja,OAAA;cAAK4Z,SAAS,EAAC,2CAA2C;cAAAC,QAAA,gBACxD7Z,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAK4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAO;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC5Cja,OAAA;kBAAK4Z,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,GAAC,KAAG,EAACvX,gBAAgB,CAAC6D,QAAQ,CAACyR,aAAa,CAAC;gBAAA;kBAAAkC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3F,CAAC,eACNja,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAK4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC7Cja,OAAA;kBAAK4Z,SAAS,EAAE,eACdzT,QAAQ,CAAC0R,aAAa,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EAC7D;kBAAAgC,QAAA,GAAC,KACC,EAACvX,gBAAgB,CAACwO,IAAI,CAACC,GAAG,CAAC5K,QAAQ,CAAC0R,aAAa,CAAC,CAAC;gBAAA;kBAAAiC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnD,CAAC,eACNja,OAAA;kBAAK4Z,SAAS,EAAE,WACdzT,QAAQ,CAAC0R,aAAa,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EAC7D;kBAAAgC,QAAA,EACA1T,QAAQ,CAAC0R,aAAa,GAAG,CAAC,GAAG,cAAc,GAAG;gBAAa;kBAAAiC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNja,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAK4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC/Cja,OAAA;kBAAK4Z,SAAS,EAAC,6BAA6B;kBAAAC,QAAA,GAAC,KAAG,EAACvX,gBAAgB,CAAC6D,QAAQ,CAAC8R,gBAAgB,CAAC;gBAAA;kBAAA6B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChG,CAAC,eACNja,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAK4Z,SAAS,EAAC,eAAe;kBAAAC,QAAA,EAAC;gBAAS;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eAC9Cja,OAAA;kBAAK4Z,SAAS,EAAE,eACdzT,QAAQ,CAAC6R,iBAAiB,IAAI,CAAC,GAAG,gBAAgB,GAAG,cAAc,EAClE;kBAAA6B,QAAA,GAAC,KACC,EAACvX,gBAAgB,CAAC6D,QAAQ,CAAC6R,iBAAiB,CAAC;gBAAA;kBAAA8B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7C,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA,GA7CE9T,QAAQ,CAACP,EAAE;YAAAkU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OA8ChB,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACP,EAGA9Z,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAIsO,oBAAoB,CAAClU,MAAM,GAAG,CAAC,iBACvDvD,OAAA,CAACf,IAAI;MAAA4a,QAAA,gBACH7Z,OAAA,CAACZ,UAAU;QAAAya,QAAA,gBACT7Z,OAAA,CAACX,SAAS;UAAAwa,QAAA,EAAC;QAA0B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAW,CAAC,eACjDja,OAAA,CAACb,eAAe;UAAA0a,QAAA,EAAC;QAEjB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAiB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eACbja,OAAA,CAACd,WAAW;QAAA2a,QAAA,eACV7Z,OAAA;UAAK4Z,SAAS,EAAC,iBAAiB;UAAAC,QAAA,eAC9B7Z,OAAA;YAAO4Z,SAAS,EAAC,qCAAqC;YAAAC,QAAA,gBACpD7Z,OAAA;cAAO4Z,SAAS,EAAC,YAAY;cAAAC,QAAA,eAC3B7Z,OAAA;gBAAA6Z,QAAA,gBACE7Z,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,gFAAgF;kBAAAC,QAAA,EAAC;gBAE/F;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACRja,OAAA;cAAO4Z,SAAS,EAAC,mCAAmC;cAAAC,QAAA,EACjDpC,oBAAoB,CAAC/R,GAAG,CAAEgE,KAAK,iBAC9B1J,OAAA;gBAAqB4Z,SAAS,EAAC,kBAAkB;gBAAAC,QAAA,gBAC/C7Z,OAAA;kBAAI4Z,SAAS,EAAC,6BAA6B;kBAAAC,QAAA,eACzC7Z,OAAA;oBAAA6Z,QAAA,gBACE7Z,OAAA;sBAAK4Z,SAAS,EAAC,mCAAmC;sBAAAC,QAAA,EAAEnQ,KAAK,CAAC7D;oBAAI;sBAAAiU,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC,eACrEja,OAAA;sBAAK4Z,SAAS,EAAC,uBAAuB;sBAAAC,QAAA,GAAEnQ,KAAK,CAAC8H,wBAAwB,CAAC6K,OAAO,CAAC,CAAC,CAAC,EAAC,YAAU;oBAAA;sBAAAvC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAK,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC/F;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,mDAAmD;kBAAAC,QAAA,gBAC/D7Z,OAAA;oBAAA6Z,QAAA,GAAMnQ,KAAK,CAACgH,eAAe,EAAC,GAAC,EAAChH,KAAK,CAAChJ,SAAS;kBAAA;oBAAAoZ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACpDja,OAAA;oBAAK4Z,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,EAAC;kBAAY;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvD,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,mDAAmD;kBAAAC,QAAA,gBAC/D7Z,OAAA;oBAAK4Z,SAAS,EAAC,aAAa;oBAAAC,QAAA,GAAC,KAAG,EAACvX,gBAAgB,CAACoH,KAAK,CAACiE,OAAO,CAAC;kBAAA;oBAAAmM,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eACvEja,OAAA;oBAAK4Z,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,GAAEnQ,KAAK,CAAC5I,KAAK,EAAC,QAAM;kBAAA;oBAAAgZ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC9D,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,iEAAiE;kBAAAC,QAAA,GAAC,KAC3E,EAACvX,gBAAgB,CAACoH,KAAK,CAAC4G,UAAU,CAAC;gBAAA;kBAAAwJ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpC,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,qCAAqC;kBAAAC,QAAA,gBACjD7Z,OAAA;oBAAK4Z,SAAS,EAAElQ,KAAK,CAACmK,OAAO,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAiB;oBAAAgG,QAAA,GAAC,KAClE,EAACvX,gBAAgB,CAACwO,IAAI,CAACC,GAAG,CAACrH,KAAK,CAACmK,OAAO,CAAC,CAAC;kBAAA;oBAAAiG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1C,CAAC,eACNja,OAAA;oBAAK4Z,SAAS,EAAE,WACdlQ,KAAK,CAACmK,OAAO,GAAG,CAAC,GAAG,cAAc,GAAG,gBAAgB,EACpD;oBAAAgG,QAAA,EACAnQ,KAAK,CAACmK,OAAO,GAAG,CAAC,GAAG,cAAc,GAAG;kBAAa;oBAAAiG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChD,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,qCAAqC;kBAAAC,QAAA,gBACjD7Z,OAAA;oBAAK4Z,SAAS,EAAE,eAAelQ,KAAK,CAAC9B,WAAW,IAAI,CAAC,GAAG,gBAAgB,GAAG,cAAc,EAAG;oBAAAiS,QAAA,GAAC,KACxF,EAACvX,gBAAgB,CAACoH,KAAK,CAAC9B,WAAW,CAAC;kBAAA;oBAAAkS,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpC,CAAC,eACNja,OAAA;oBAAK4Z,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,GAAC,SAC9B,EAACvX,gBAAgB,CAACoH,KAAK,CAACoK,KAAK,CAAC,EAAC,kBAAW,EAACxR,gBAAgB,CAACoH,KAAK,CAACqK,MAAM,CAAC;kBAAA;oBAAA+F,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC7E,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLja,OAAA;kBAAI4Z,SAAS,EAAC,mDAAmD;kBAAAC,QAAA,gBAC/D7Z,OAAA;oBAAA6Z,QAAA,GAAMnQ,KAAK,CAAC1I,cAAc,EAAC,UAAQ;kBAAA;oBAAA8Y,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACzCja,OAAA;oBAAK4Z,SAAS,EAAC,uBAAuB;oBAAAC,QAAA,GAAEnQ,KAAK,CAACxI,kBAAkB,EAAC,aAAW;kBAAA;oBAAA4Y,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChF,CAAC;cAAA,GAvCEvQ,KAAK,CAAC7D,IAAI;gBAAAiU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAwCf,CACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACP,EAGA,CAAC9Z,IAAI,CAACgJ,IAAI,KAAK,OAAO,IAAIhJ,IAAI,CAACgJ,IAAI,KAAK,MAAM,kBAC7CnJ,OAAA,CAACf,IAAI;MAAA4a,QAAA,gBACH7Z,OAAA,CAACZ,UAAU;QAAAya,QAAA,eACT7Z,OAAA;UAAK4Z,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChD7Z,OAAA;YAAA6Z,QAAA,gBACE7Z,OAAA,CAACX,SAAS;cAACua,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAChD7Z,OAAA,CAACnC,KAAK;gBAAC+b,SAAS,EAAC;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAC7Bja,OAAA;gBAAA6Z,QAAA,EAAOxZ,CAAC,CAAC,iBAAiB;cAAC;gBAAAyZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACnCja,OAAA,CAACF,KAAK;gBAACqa,OAAO,EAAC,WAAW;gBAAAN,QAAA,GAAEnE,iBAAiB,CAACnS,MAAM,EAAC,GAAC,EAAClD,CAAC,CAAC,QAAQ,CAAC;cAAA;gBAAAyZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClE,CAAC,eACZja,OAAA,CAACb,eAAe;cAAA0a,QAAA,EACbxZ,CAAC,CAAC,sBAAsB;YAAC;cAAAyZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACX,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf,CAAC,eAGNja,OAAA;YAAK4Z,SAAS,EAAC,6BAA6B;YAAAC,QAAA,gBAC1C7Z,OAAA;cAAK4Z,SAAS,EAAC,6BAA6B;cAAAC,QAAA,gBAC1C7Z,OAAA;gBAAO4Z,SAAS,EAAC,mCAAmC;gBAAAC,QAAA,EAAExZ,CAAC,CAAC,SAAS;cAAC;gBAAAyZ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC3Eja,OAAA;gBACEuC,KAAK,EAAEL,eAAgB;gBACvBsb,QAAQ,EAAG5Y,CAAC,IAAKzC,kBAAkB,CAACyC,CAAC,CAAC6Y,MAAM,CAAClb,KAAY,CAAE;gBAC3DqX,SAAS,EAAC,yGAAyG;gBAAAC,QAAA,gBAEnH7Z,OAAA;kBAAQuC,KAAK,EAAC,cAAc;kBAAAsX,QAAA,EAAExZ,CAAC,CAAC,uBAAuB;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC,eAClEja,OAAA;kBAAQuC,KAAK,EAAC,cAAc;kBAAAsX,QAAA,EAAExZ,CAAC,CAAC,UAAU;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC,eACrDja,OAAA;kBAAQuC,KAAK,EAAC,eAAe;kBAAAsX,QAAA,EAAExZ,CAAC,CAAC,gBAAgB;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC,eAC5Dja,OAAA;kBAAQuC,KAAK,EAAC,gBAAgB;kBAAAsX,QAAA,EAAExZ,CAAC,CAAC,iBAAiB;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC,eAC9Dja,OAAA;kBAAQuC,KAAK,EAAC,MAAM;kBAAAsX,QAAA,EAAExZ,CAAC,CAAC,YAAY;gBAAC;kBAAAyZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAS,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eAENja,OAAA;cACEka,OAAO,EAAEA,CAAA,KAAM7X,qBAAqB,CAACD,kBAAkB,KAAK,KAAK,GAAG,MAAM,GAAG,KAAK,CAAE;cACpFwX,SAAS,EAAC,oDAAoD;cAC9D8D,KAAK,EAAE,QAAQtb,kBAAkB,KAAK,KAAK,GAAG,YAAY,GAAG,WAAW,EAAG;cAAAyX,QAAA,EAE1EzX,kBAAkB,KAAK,KAAK,gBAC3BpC,OAAA,CAACvB,OAAO;gBAACmb,SAAS,EAAC;cAAuB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAE7Cja,OAAA,CAACtB,SAAS;gBAACkb,SAAS,EAAC;cAAuB;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAC/C;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC,eACbja,OAAA,CAACd,WAAW;QAAA2a,QAAA,gBACV7Z,OAAA;UAAK4Z,SAAS,EAAC,WAAW;UAAAC,QAAA,EACvBnE,iBAAiB,CAAChQ,GAAG,CAAEiY,SAAS;YAAA,IAAAC,gBAAA;YAAA,oBAC/B5d,OAAA;cAA6B4Z,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAExD7Z,OAAA;gBACE4Z,SAAS,EAAC,mEAAmE;gBAC7EM,OAAO,EAAEA,CAAA,KAAM7H,oBAAoB,CAACsL,SAAS,CAAC3X,OAAO,CAAE;gBAAA6T,QAAA,eAEvD7Z,OAAA;kBAAK4Z,SAAS,EAAC,mCAAmC;kBAAAC,QAAA,gBAChD7Z,OAAA;oBAAK4Z,SAAS,EAAC,6BAA6B;oBAAAC,QAAA,GACzC9X,cAAc,CAACwQ,GAAG,CAACoL,SAAS,CAAC3X,OAAO,CAAC,gBACpChG,OAAA,CAACzB,WAAW;sBAACqb,SAAS,EAAC;oBAAuB;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,gBAEjDja,OAAA,CAACxB,YAAY;sBAACob,SAAS,EAAC;oBAAuB;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAClD,eACDja,OAAA;sBAAA6Z,QAAA,gBACE7Z,OAAA;wBAAK4Z,SAAS,EAAC,6BAA6B;wBAAAC,QAAA,EACzC,EAAA+D,gBAAA,GAAAD,SAAS,CAACjU,KAAK,cAAAkU,gBAAA,uBAAfA,gBAAA,CAAiB/X,IAAI,KAAI;sBAAe;wBAAAiU,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtC,CAAC,eACNja,OAAA;wBAAK4Z,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,GACnC8D,SAAS,CAACjJ,aAAa,EAAC,GAAC,EAACrU,CAAC,CAAC,WAAW,CAAC;sBAAA;wBAAAyZ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtC,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CAAC,eACNja,OAAA;oBAAK4Z,SAAS,EAAC,wBAAwB;oBAAAC,QAAA,gBACrC7Z,OAAA;sBAAK4Z,SAAS,EAAC,aAAa;sBAAAC,QAAA,gBAC1B7Z,OAAA;wBAAK4Z,SAAS,EAAC,2BAA2B;wBAAAC,QAAA,GAAC,KACtC,EAACvX,gBAAgB,CAACqb,SAAS,CAACtX,YAAY,CAAC;sBAAA;wBAAAyT,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACzC,CAAC,eACNja,OAAA;wBAAK4Z,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,EAAExZ,CAAC,CAAC,uBAAuB;sBAAC;wBAAAyZ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACtE,CAAC,eACNja,OAAA;sBAAK4Z,SAAS,EAAC,aAAa;sBAAAC,QAAA,gBAC1B7Z,OAAA;wBAAK4Z,SAAS,EAAE,eACd+D,SAAS,CAACpX,YAAY,IAAI,CAAC,GAAG,gBAAgB,GAAG,cAAc,EAC9D;wBAAAsT,QAAA,GAAC,KACC,EAACvX,gBAAgB,CAACwO,IAAI,CAACC,GAAG,CAAC4M,SAAS,CAACpX,YAAY,CAAC,CAAC;sBAAA;wBAAAuT,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACnD,CAAC,eACNja,OAAA;wBAAK4Z,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,EACnC8D,SAAS,CAACpX,YAAY,IAAI,CAAC,GAAGlG,CAAC,CAAC,gBAAgB,CAAC,GAAGA,CAAC,CAAC,UAAU;sBAAC;wBAAAyZ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAC/D,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACH,CAAC,eACNja,OAAA;sBAAK4Z,SAAS,EAAC,aAAa;sBAAAC,QAAA,gBAC1B7Z,OAAA;wBAAK4Z,SAAS,EAAC,2BAA2B;wBAAAC,QAAA,EACvC8D,SAAS,CAACjJ;sBAAa;wBAAAoF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACrB,CAAC,eACNja,OAAA;wBAAK4Z,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,EAAExZ,CAAC,CAAC,gBAAgB;sBAAC;wBAAAyZ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAC/D,CAAC,eACNja,OAAA;sBAAK4Z,SAAS,EAAC,aAAa;sBAAAC,QAAA,gBAC1B7Z,OAAA;wBAAK4Z,SAAS,EAAC,6BAA6B;wBAAAC,QAAA,GAAC,KACxC,EAACvX,gBAAgB,CAACqb,SAAS,CAACnJ,yBAAyB,CAAC;sBAAA;wBAAAsF,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACtD,CAAC,eACNja,OAAA;wBAAK4Z,SAAS,EAAC,uBAAuB;wBAAAC,QAAA,EAAExZ,CAAC,CAAC,iBAAiB;sBAAC;wBAAAyZ,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChE,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,EAGLlY,cAAc,CAACwQ,GAAG,CAACoL,SAAS,CAAC3X,OAAO,CAAC,iBACpChG,OAAA;gBAAK4Z,SAAS,EAAC,UAAU;gBAAAC,QAAA,eACvB7Z,OAAA;kBAAK4Z,SAAS,EAAC,cAAc;kBAAAC,QAAA,gBAC3B7Z,OAAA;oBAAK4Z,SAAS,EAAC,YAAY;oBAAAC,QAAA,EACxB8D,SAAS,CAACjd,SAAS,CAACgF,GAAG,CAAES,QAAa,iBACrCnG,OAAA;sBAEE4Z,SAAS,EAAC,iGAAiG;sBAAAC,QAAA,gBAE3G7Z,OAAA;wBAAK4Z,SAAS,EAAC,6BAA6B;wBAAAC,QAAA,gBAC1C7Z,OAAA;0BAAK4Z,SAAS,EAAC;wBAAkC;0BAAAE,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAM,CAAC,eACxDja,OAAA;0BAAA6Z,QAAA,gBACE7Z,OAAA;4BAAK4Z,SAAS,EAAC,2BAA2B;4BAAAC,QAAA,EACvC1T,QAAQ,CAACN;0BAAI;4BAAAiU,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACX,CAAC,eACNja,OAAA;4BAAK4Z,SAAS,EAAC,uBAAuB;4BAAAC,QAAA,GACnC1T,QAAQ,CAACrF,KAAK,EAAC,GAAC,EAACT,CAAC,CAAC,OAAO,CAAC;0BAAA;4BAAAyZ,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACzB,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACH,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACH,CAAC,eACNja,OAAA;wBAAK4Z,SAAS,EAAC,wBAAwB;wBAAAC,QAAA,gBACrC7Z,OAAA;0BAAK4Z,SAAS,EAAC,aAAa;0BAAAC,QAAA,gBAC1B7Z,OAAA;4BAAK4Z,SAAS,EAAC,2BAA2B;4BAAAC,QAAA,GAAC,KACtC,EAACvX,gBAAgB,CAAC6D,QAAQ,CAACwH,OAAO,CAAC;0BAAA;4BAAAmM,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACnC,CAAC,eACNja,OAAA;4BAAK4Z,SAAS,EAAC,uBAAuB;4BAAAC,QAAA,EAAExZ,CAAC,CAAC,oBAAoB;0BAAC;4BAAAyZ,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAM,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACnE,CAAC,eACNja,OAAA;0BAAK4Z,SAAS,EAAC,aAAa;0BAAAC,QAAA,gBAC1B7Z,OAAA;4BAAK4Z,SAAS,EAAE,eACdzT,QAAQ,CAAC0N,OAAO,IAAI,CAAC,GAAG,gBAAgB,GAAG,cAAc,EACxD;4BAAAgG,QAAA,GAAC,KACC,EAACvX,gBAAgB,CAACwO,IAAI,CAACC,GAAG,CAAC5K,QAAQ,CAAC0N,OAAO,CAAC,CAAC;0BAAA;4BAAAiG,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAC7C,CAAC,eACNja,OAAA;4BAAK4Z,SAAS,EAAC,uBAAuB;4BAAAC,QAAA,EACnC1T,QAAQ,CAAC0N,OAAO,IAAI,CAAC,GAAGxT,CAAC,CAAC,gBAAgB,CAAC,GAAGA,CAAC,CAAC,UAAU;0BAAC;4BAAAyZ,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACzD,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OACH,CAAC,eACNja,OAAA;0BAAK4Z,SAAS,EAAC,aAAa;0BAAAC,QAAA,gBAC1B7Z,OAAA;4BAAK4Z,SAAS,EAAC,2BAA2B;4BAAAC,QAAA,EACvC1T,QAAQ,CAACrF;0BAAK;4BAAAgZ,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OACZ,CAAC,eACNja,OAAA;4BAAK4Z,SAAS,EAAC,uBAAuB;4BAAAC,QAAA,EAAExZ,CAAC,CAAC,YAAY;0BAAC;4BAAAyZ,QAAA,EAAAC,YAAA;4BAAAC,UAAA;4BAAAC,YAAA;0BAAA,OAAM,CAAC;wBAAA;0BAAAH,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAC3D,CAAC;sBAAA;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACH,CAAC;oBAAA,GArCD9T,QAAQ,CAACP,EAAE;sBAAAkU,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAsCb,CACN;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC,EAEL0D,SAAS,CAACjd,SAAS,CAAC6C,MAAM,KAAK,CAAC,iBAC/BvD,OAAA;oBAAK4Z,SAAS,EAAC,gCAAgC;oBAAAC,QAAA,gBAC7C7Z,OAAA,CAACnC,KAAK;sBAAC+b,SAAS,EAAC;oBAAiC;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,eACrDja,OAAA;sBAAA6Z,QAAA,EAAMxZ,CAAC,CAAC,SAAS;oBAAC;sBAAAyZ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACtB,CACN;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CACN;YAAA,GAhHO0D,SAAS,CAAC3X,OAAO;cAAA8T,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAiHtB,CAAC;UAAA,CACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,EAELvE,iBAAiB,CAACnS,MAAM,KAAK,CAAC,iBAC7BvD,OAAA;UAAK4Z,SAAS,EAAC,iCAAiC;UAAAC,QAAA,gBAC9C7Z,OAAA,CAACnC,KAAK;YAAC+b,SAAS,EAAC;UAAmC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACvDja,OAAA;YAAK4Z,SAAS,EAAC,0BAA0B;YAAAC,QAAA,EAAC;UAAuB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACvEja,OAAA;YAAA6Z,QAAA,EAAK;UAAyD;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjE,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACU,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACP;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAA7Z,EAAA,CA7hEYF,OAAiC;EAAA,QAC9BtB,WAAW,EACiEC,WAAW;AAAA;AAAAgf,EAAA,GAF1F3d,OAAiC;AAAA,IAAA2d,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}