/*! For license information please see main.0bccec1b.js.LICENSE.txt */
(()=>{var e={47:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(4011));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:a}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let o=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer","count=".concat(n)),new a.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer","count=".concat(r)),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new a.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new a.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new a.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},52:(e,t,n)=>{var r=n(6463),a=n(2535);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},53:(e,t,n)=>{var r=n(220)(n(4759),"DataView");e.exports=r},78:(e,t,n)=>{var r=n(9508),a=n(1536),o=n(9892);e.exports=function(e){return a(e)?o(e):r(e)}},150:(e,t,n)=>{var r=n(5099),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},184:(e,t,n)=>{var r=n(2022),a=n(9248);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},202:(e,t,n)=>{var r=n(220)(n(4759),"Promise");e.exports=r},220:(e,t,n)=>{var r=n(7949),a=n(8166);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},231:(e,t,n)=>{var r=n(3616),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},314:(e,t,n)=>{var r=n(2588),a=1/0;e.exports=function(e){return e?(e=r(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},366:(e,t,n)=>{var r=n(8925);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},423:(e,t,n)=>{var r=n(3031),a=n(5724);e.exports=function(e,t){return e&&r(e,t,a)}},475:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).has(e)}},492:(e,t,n)=>{var r=n(5491),a=n(4567);e.exports=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:o,maxWait:t,trailing:i})}},516:(e,t,n)=>{var r=n(9002),a=n(4295),o=n(1043);e.exports=function(e,t){return o(a(e,t,r),e+"")}},564:(e,t,n)=>{var r=n(6669),a=n(3107),o=n(3259),i=n(3445),s=n(3739),l=n(6557);e.exports=function(e,t,n){var c=-1,u=a,d=e.length,h=!0,f=[],p=f;if(n)h=!1,u=o;else if(d>=200){var m=t?null:s(e);if(m)return l(m);h=!1,u=i,p=new r}else p=t?[]:f;e:for(;++c<d;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,h&&v===v){for(var y=p.length;y--;)if(p[y]===v)continue e;t&&p.push(v),f.push(g)}else u(p,v,n)||(p!==f&&p.push(v),f.push(g))}return f}},656:(e,t,n)=>{var r=n(184);e.exports=function(e,t){if(e!==t){var n=void 0!==e,a=null===e,o=e===e,i=r(e),s=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!i&&e>t||i&&s&&c&&!l&&!u||a&&s&&c||!n&&c||!o)return 1;if(!a&&!i&&!u&&e<t||u&&n&&o&&!a&&!i||l&&n&&o||!s&&o||!c)return-1}return 0}},708:(e,t,n)=>{var r=n(7101);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},738:(e,t,n)=>{var r=n(1111),a=n(5661),o=n(1465);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},799:e=>{e.exports=function(e){return this.__data__.has(e)}},821:e=>{e.exports=function(e){return null==e}},927:(e,t,n)=>{var r=n(423),a=n(3267)(r);e.exports=a},943:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},964:(e,t,n)=>{var r=n(6463),a=n(4578),o=n(2279),i=n(7059),s=n(5776),l=n(2535);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&i(h,u)&&(o(e)||a(e))}},1032:(e,t,n)=>{var r=n(6010),a=n(5127),o=n(8258),i=n(2279),s=n(9042);e.exports=function(e,t,n){var l=i(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,a(t,3))}},1043:(e,t,n)=>{var r=n(5148),a=n(2929)(r);e.exports=a},1049:(e,t,n)=>{var r=n(6993),a=n(5381),o=n(7825);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,a,n)}},1053:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const a=r(n(5071));t.PostgrestClient=a.default;const o=r(n(47));t.PostgrestQueryBuilder=o.default;const i=r(n(4011));t.PostgrestFilterBuilder=i.default;const s=r(n(7427));t.PostgrestTransformBuilder=s.default;const l=r(n(6569));t.PostgrestBuilder=l.default;const c=r(n(5732));t.PostgrestError=c.default,t.default={PostgrestClient:a.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:c.default}},1099:(e,t,n)=>{var r=n(9853);e.exports=function(e){return r(e)&&e!=+e}},1111:(e,t,n)=>{var r=n(6958),a=n(1176),o=n(1787),i=n(231),s=n(7455);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},1176:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},1261:(e,t,n)=>{var r=n(6810),a=n(8245),o=n(516),i=n(9042),s=o(function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,r(t,1),[])});e.exports=s},1352:(e,t,n)=>{"use strict";var r=n(7119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1404:(e,t,n)=>{var r=n(2130),a=n(9248);e.exports=function e(t,n,o,i,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,o,i,e,s))}},1416:(e,t,n)=>{var r=n(4635),a=n(8246),o=n(4206),i=n(9757),s=n(943),l=n(6557),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=i(f(e),f(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},1465:(e,t,n)=>{var r=n(220)(n(4759),"Map");e.exports=r},1515:e=>{e.exports=function(){return[]}},1536:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},1570:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},1581:(e,t,n)=>{var r=n(4635),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var a=i.call(e);return r&&(t?e[s]=n:delete e[s]),a}},1582:(e,t,n)=>{var r=n(4635),a=n(1570),o=n(2279),i=n(184),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(i(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1641:(e,t,n)=>{var r=n(8183),a=n(5639),o=n(2479),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<a&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(j);else{var t=r(u);null!==t&&I(w,t.startTime-e)}}function j(e,n){m=!1,g&&(g=!1,y(S),S=-1),p=!0;var o=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var s=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&a(c),b(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&I(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,k=null,S=-1,A=5,O=-1;function C(){return!(t.unstable_now()-O<A)}function P(){if(null!==k){var e=t.unstable_now();O=e;var n=!0;try{n=k(!0,e)}finally{n?_():(N=!1,k=null)}}else N=!1}if("function"===typeof x)_=function(){x(P)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,T=E.port2;E.port1.onmessage=P,_=function(){T.postMessage(null)}}else _=function(){v(P,0)};function D(e){k=e,N||(N=!0,_())}function I(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,I(w,o-i))):(e.sortIndex=s,n(c,e),m||p||(m=!0,D(j))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},1787:(e,t,n)=>{var r=n(3616),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},1942:(e,t,n)=>{e.exports=n(3488)()},2022:(e,t,n)=>{var r=n(4635),a=n(1581),o=n(5336),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},2033:e=>{e.exports=function(e,t){return e>t}},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,a)&&!N.hasOwnProperty(a)&&(o[a]=t[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+O(l,0):o,w(i)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),C(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+O(s=e[c],c);l+=C(s,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=C(s=s.value,t,a,u=o+O(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",function(e){return t.call(n,e,a++)}),r}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},D={transition:null},I={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:D,ReactCurrentOwner:_};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=x,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},2057:(e,t,n)=>{var r=n(184);e.exports=function(e,t,n){for(var a=-1,o=e.length;++a<o;){var i=e[a],s=t(i);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,c=i}return c}},2130:(e,t,n)=>{var r=n(5535),a=n(9757),o=n(1416),i=n(6195),s=n(5531),l=n(2279),c=n(6794),u=n(1641),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),x=l(t),b=y?h:s(e),w=x?h:s(t),j=(b=b==d?f:b)==f,_=(w=w==d?f:w)==f,N=b==w;if(N&&c(e)){if(!c(t))return!1;y=!0,j=!1}if(N&&!j)return v||(v=new r),y||u(e)?a(e,t,n,m,g,v):o(e,t,b,n,m,g,v);if(!(1&n)){var k=j&&p.call(e,"__wrapped__"),S=_&&p.call(t,"__wrapped__");if(k||S){var A=k?e.value():e,O=S?t.value():t;return v||(v=new r),g(A,O,n,m,v)}}return!!N&&(v||(v=new r),i(e,t,n,m,g,v))}},2138:e=>{e.exports=function(e){return this.__data__.has(e)}},2161:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},2253:(e,t,n)=>{var r=n(2621)(Object.getPrototypeOf,Object);e.exports=r},2274:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2279:e=>{var t=Array.isArray;e.exports=t},2434:(e,t,n)=>{var r=n(4467);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(a.Cache||r),n}a.Cache=r,e.exports=a},2479:(e,t,n)=>{e=n.nmd(e);var r=n(6658),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=s},2535:(e,t,n)=>{var r=n(184);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},2555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},2588:(e,t,n)=>{var r=n(6914),a=n(4567),o=n(184),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}},2621:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},2654:(e,t,n)=>{"use strict";var r=n(9950),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},2780:(e,t,n)=>{var r=n(2057),a=n(2033),o=n(9002);e.exports=function(e){return e&&e.length?r(e,o,a):void 0}},2791:(e,t,n)=>{var r=n(5661),a=n(1465),o=n(4467);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(i)}return n.set(e,t),this.size=n.size,this}},2929:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var a=t(),o=16-(a-r);if(r=a,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},3008:(e,t,n)=>{var r=n(2022),a=n(4567);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},3012:(e,t,n)=>{var r=n(2022),a=n(9248);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},3031:(e,t,n)=>{var r=n(5211)();e.exports=r},3077:(e,t,n)=>{var r=n(5099);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},3107:(e,t,n)=>{var r=n(1049);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},3259:e=>{e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},3267:(e,t,n)=>{var r=n(7840);e.exports=function(e,t){return function(n,a){if(null==n)return n;if(!r(n))return e(n,a);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!1!==a(s[i],i,s););return n}}},3306:(e,t,n)=>{var r=n(4123),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},3334:(e,t,n)=>{var r=n(9794),a=n(5724);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},3414:(e,t,n)=>{var r=n(6689)("toUpperCase");e.exports=r},3445:e=>{e.exports=function(e,t){return e.has(t)}},3488:(e,t,n)=>{"use strict";var r=n(3959);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},3616:(e,t,n)=>{var r=n(220)(Object,"create");e.exports=r},3660:(e,t,n)=>{var r=n(4761),a=n(8194),o=n(5724);e.exports=function(e){return r(e,o,a)}},3721:e=>{e.exports=function(){return!1}},3734:(e,t,n)=>{var r=n(2434);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},3739:(e,t,n)=>{var r=n(7887),a=n(9208),o=n(6557),i=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:a;e.exports=i},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4008:(e,t,n)=>{var r=n(1582);e.exports=function(e){return null==e?"":r(e)}},4011:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(7427));class o extends a.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(a,"fts").concat(o,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=o},4102:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},4104:(e,t,n)=>{var r=n(1404),a=n(7946),o=n(5321),i=n(5916),s=n(9794),l=n(4243),c=n(2535);e.exports=function(e,t){return i(e)&&s(t)?l(c(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?o(n,e):r(t,i,3)}}},4123:(e,t,n)=>{var r=n(4759)["__core-js_shared__"];e.exports=r},4181:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,a,o){for(var i=-1,s=n(t((r-e)/(a||1)),0),l=Array(s);s--;)l[o?s:++i]=e,e+=a;return l}},4206:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},4243:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},4295:(e,t,n)=>{var r=n(5507),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=a(o.length-t,0),l=Array(s);++i<s;)l[i]=o[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=o[i];return c[t]=n(l),r(e,this,c)}}},4349:(e,t,n)=>{var r=n(5099);e.exports=function(e){return r(this.__data__,e)>-1}},4378:(e,t,n)=>{var r=n(4759);e.exports=function(){return r.Date.now()}},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},4441:function(e,t,n){var r;!function(){"use strict";var a,o=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,m=9007199254740991,g=d(1286742750677284.5),v={};function y(e,t){var n,r,a,o,i,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),s?O(t,h):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),o=i-a){for(o<0?(r=c,o=-o,l=u.length):(r=u,a=i,l=c.length),o>(l=(i=Math.ceil(h/7))>l?i+1:l+1)&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((l=c.length)-(o=u.length)<0&&(o=l,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/p|0,c[o]%=p;for(n&&(c.unshift(n),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,s?O(t,h):t}function x(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,a=e.length-1,o="",i=e[0];if(a>0){for(o+=i,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(o+=k(n)),o+=r;(n=7-(r=(i=e[t])+"").length)&&(o+=k(n))}else if(0===i)return"0";for(;i%10===0;)i/=10;return o+i}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,n,r,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(a=e.d.length)?r:a;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===a?0:r>a^o.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},v.dividedBy=v.div=function(e){return w(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return O(w(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return _(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,n=this,r=n.constructor,o=r.precision,i=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(a))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(a)?new r(0):(s=!1,t=w(S(n,i),S(e,i),i),s=!0,O(t,o))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?C(t,e):y(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=w(n,e,0,1).times(e),s=!0,n.minus(t)):O(new r(n),a)},v.naturalExponential=v.exp=function(){return j(this)},v.naturalLogarithm=v.ln=function(){return S(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):C(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,n,r,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=_(a)+1,n=7*(r=a.d.length-1)+1,r=a.d[r]){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},v.squareRoot=v.sqrt=function(){var e,t,n,r,a,o,i,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=_(c),s=!1,0==(a=Math.sqrt(+c))||a==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(a.toString()),a=i=(n=u.precision)+3;;)if(r=(o=r).plus(w(c,o,i+2)).times(.5),b(o.d).slice(0,i)===(t=b(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(O(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if("9999"!=t)break;i+=4}return s=!0,O(r,n)},v.times=v.mul=function(e){var t,n,r,a,o,i,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=f.length)<(u=m.length)&&(o=f,f=m,m=o,i=c,c=u,u=i),o=[],r=i=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=o[a]+m[r]*f[a-r-1]+t,o[a--]=l%p|0,t=l/p|0;o[a]=(o[a]+t)%p|0}for(;!o[--i];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?O(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(x(e,0,o),void 0===t?t=r.rounding:x(t,0,8),O(n,e+_(n)+1,t))},v.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=P(r,!0):(x(e,0,o),void 0===t?t=a.rounding:x(t,0,8),n=P(r=O(new a(r),e+1,t),!0,e+1)),n},v.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?P(a):(x(e,0,o),void 0===t?t=i.rounding:x(t,0,8),n=P((r=O(new i(a),e+_(a)+1,t)).abs(),!1,e+_(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return O(new t(e),_(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,n,r,o,i,c,u=this,h=u.constructor,f=+(e=new h(e));if(!e.s)return new h(a);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(a))return u;if(r=h.precision,e.eq(a))return O(u,r);if(c=(t=e.e)>=(n=e.d.length-1),i=u.s,c){if((n=f<0?-f:f)<=m){for(o=new h(a),t=Math.ceil(r/7+4),s=!1;n%2&&E((o=o.times(u)).d,t),0!==(n=d(n/2));)E((u=u.times(u)).d,t);return s=!0,e.s<0?new h(a).div(o):O(o,r)}}else if(i<0)throw Error(l+"NaN");return i=i<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,s=!1,o=e.times(S(u,r+12)),s=!0,(o=j(o)).s=i,o},v.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return void 0===e?r=P(a,(n=_(a))<=i.toExpNeg||n>=i.toExpPos):(x(e,1,o),void 0===t?t=i.rounding:x(t,0,8),r=P(a=O(new i(a),e,t),e<=(n=_(a))||n<=i.toExpNeg,e)),r},v.toSignificantDigits=v.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(x(e,1,o),void 0===t?t=n.rounding:x(t,0,8)),O(new n(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=_(e),n=e.constructor;return P(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%p|0,r=n/p|0;return r&&e.unshift(r),e}function t(e,t,n,r){var a,o;if(n!=r)o=n>r?1:-1;else for(a=o=0;a<n;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*p+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,o,i){var s,c,u,d,h,f,m,g,v,y,x,b,w,j,N,k,S,A,C=r.constructor,P=r.s==a.s?1:-1,E=r.d,T=a.d;if(!r.s)return new C(r);if(!a.s)throw Error(l+"Division by zero");for(c=r.e-a.e,S=T.length,N=E.length,g=(m=new C(P)).d=[],u=0;T[u]==(E[u]||0);)++u;if(T[u]>(E[u]||0)&&--c,(b=null==o?o=C.precision:i?o+(_(r)-_(a))+1:o)<0)return new C(0);if(b=b/7+2|0,u=0,1==S)for(d=0,T=T[0],b++;(u<N||d)&&b--;u++)w=d*p+(E[u]||0),g[u]=w/T|0,d=w%T|0;else{for((d=p/(T[0]+1)|0)>1&&(T=e(T,d),E=e(E,d),S=T.length,N=E.length),j=S,y=(v=E.slice(0,S)).length;y<S;)v[y++]=0;(A=T.slice()).unshift(0),k=T[0],T[1]>=p/2&&++k;do{d=0,(s=t(T,v,S,y))<0?(x=v[0],S!=y&&(x=x*p+(v[1]||0)),(d=x/k|0)>1?(d>=p&&(d=p-1),1==(s=t(h=e(T,d),v,f=h.length,y=v.length))&&(d--,n(h,S<f?A:T,f))):(0==d&&(s=d=1),h=T.slice()),(f=h.length)<y&&h.unshift(0),n(v,h,y),-1==s&&(s=t(T,v,S,y=v.length))<1&&(d++,n(v,S<y?A:T,y)),y=v.length):0===s&&(d++,v=[0]),g[u++]=d,s&&v[0]?v[y++]=E[j]||0:(v=[E[j]],y=1)}while((j++<N||void 0!==v[0])&&b--)}return g[0]||g.shift(),m.e=c,O(m,i?o+_(m)+1:o)}}();function j(e,t){var n,r,o,i,l,c=0,d=0,f=e.constructor,p=f.precision;if(_(e)>16)throw Error(u+_(e));if(!e.s)return new f(a);for(null==t?(s=!1,l=p):l=t,i=new f(.03125);e.abs().gte(.1);)e=e.times(i),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=o=new f(a),f.precision=l;;){if(r=O(r.times(e),l),n=n.times(++c),b((i=o.plus(w(r,n,l))).d).slice(0,l)===b(o.d).slice(0,l)){for(;d--;)o=O(o.times(o),l);return f.precision=p,null==t?(s=!0,O(o,p)):o}o=i}}function _(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function N(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return O(new e(e.LN10),t)}function k(e){for(var t="";e--;)t+="0";return t}function S(e,t){var n,r,o,i,c,u,d,h,f,p=1,m=e,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(a))return new v(0);if(null==t?(s=!1,h=y):h=t,m.eq(10))return null==t&&(s=!0),N(v,h);if(h+=10,v.precision=h,r=(n=b(g)).charAt(0),i=_(m),!(Math.abs(i)<15e14))return d=N(v,h+2,y).times(i+""),m=S(new v(r+"."+n.slice(1)),h-10).plus(d),v.precision=y,null==t?(s=!0,O(m,y)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((m=m.times(e)).d)).charAt(0),p++;for(i=_(m),r>1?(m=new v("0."+n),i++):m=new v(r+"."+n.slice(1)),u=c=m=w(m.minus(a),m.plus(a),h),f=O(m.times(m),h),o=3;;){if(c=O(c.times(f),h),b((d=u.plus(w(c,new v(o),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==i&&(u=u.plus(N(v,h+2,y).times(i+""))),u=w(u,new v(p),h),v.precision=y,null==t?(s=!0,O(u,y)):u;u=d,o+=2}}function A(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(r,a)){if(a-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function O(e,t,n){var r,a,o,i,l,c,f,m,v=e.d;for(i=1,o=v[0];o>=10;o/=10)i++;if((r=t-i)<0)r+=7,a=t,f=v[m=0];else{if((m=Math.ceil((r+1)/7))>=(o=v.length))return e;for(f=o=v[m],i=1;o>=10;o/=10)i++;a=(r%=7)-7+i}if(void 0!==n&&(l=f/(o=h(10,i-a-1))%10|0,c=t<0||void 0!==v[m+1]||f%o,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?a>0?f/h(10,i-a):0:v[m-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return c?(o=_(e),v.length=1,t=t-o-1,v[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==r?(v.length=m,o=1,m--):(v.length=m+1,o=h(10,7-r),v[m]=a>0?(f/h(10,i-a)%h(10,a)|0)*o:0),c)for(;;){if(0==m){(v[0]+=o)==p&&(v[0]=1,++e.e);break}if(v[m]+=o,v[m]!=p)break;v[m--]=0,o=1}for(r=v.length;0===v[--r];)v.pop();if(s&&(e.e>g||e.e<-g))throw Error(u+_(e));return e}function C(e,t){var n,r,a,o,i,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),s?O(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),i=u-r){for((d=i<0)?(n=c,i=-i,l=h.length):(n=h,r=u,l=c.length),i>(a=Math.max(Math.ceil(m/7),l)+2)&&(i=a,n.length=1),n.reverse(),a=i;a--;)n.push(0);n.reverse()}else{for((d=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}i=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>i;){if(c[--a]<h[a]){for(o=a;o&&0===c[--o];)c[o]=p-1;--c[o],c[a]+=p}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,s?O(t,m):t):new f(0)}function P(e,t,n){var r,a=_(e),o=b(e.d),i=o.length;return t?(n&&(r=n-i)>0?o=o.charAt(0)+"."+o.slice(1)+k(r):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+k(-a-1)+o,n&&(r=n-i)>0&&(o+=k(r))):a>=i?(o+=k(a+1-i),n&&(r=n-a-1)>0&&(o=o+"."+k(r))):((r=a+1)<i&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-i)>0&&(a+1===i&&(o+="."),o+=k(r))),e.s<0?"-"+o:o}function E(e,t){if(e.length>t)return e.length=t,!0}function T(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,a=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(r=e[n=a[t]])){if(!(d(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}i=function e(t){var n,r,a;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);A(t,e)}if(o.prototype=v,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=T,void 0===t&&(t={}),t)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<a.length;)t.hasOwnProperty(r=a[n++])||(t[r]=this[r]);return o.config(t),o}(i),i.default=i.Decimal=i,a=new i(1),void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},4467:(e,t,n)=>{var r=n(738),a=n(708),o=n(6823),i=n(475),s=n(7859);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},4489:(e,t,n)=>{var r=n(5535),a=n(1404);e.exports=function(e,t,n,o){var i=n.length,s=i,l=!o;if(null==e)return!s;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){var u=(c=n[i])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var f=new r;if(o)var p=o(d,h,u,e,t,f);if(!(void 0===p?a(h,d,3,o,f):p))return!1}}return!0}},4567:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},4578:(e,t,n)=>{var r=n(3012),a=n(9248),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},4591:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},4621:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>i,Request:()=>s,Response:()=>l,default:()=>o,fetch:()=>a});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const a=r.fetch,o=r.fetch.bind(r),i=r.Headers,s=r.Request,l=r.Response},4635:(e,t,n)=>{var r=n(4759).Symbol;e.exports=r},4672:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4710:(e,t,n)=>{var r=n(5661);e.exports=function(){this.__data__=new r,this.size=0}},4753:(e,t,n)=>{var r=n(52);e.exports=function(e){return function(t){return r(t,e)}}},4759:(e,t,n)=>{var r=n(6658),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},4761:(e,t,n)=>{var r=n(7518),a=n(2279);e.exports=function(e,t,n){var o=t(e);return a(e)?o:r(o,n(e))}},4801:(e,t,n)=>{var r=n(220)(n(4759),"WeakMap");e.exports=r},4978:e=>{e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}},5071:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(47)),o=r(n(4011));class i{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new a.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let s;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||r?(s=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(s="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer","count=".concat(a)),new o.default({method:s,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},5088:e=>{e.exports=function(){this.__data__=[],this.size=0}},5099:(e,t,n)=>{var r=n(4206);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},5112:(e,t,n)=>{var r=n(2621)(Object.keys,Object);e.exports=r},5127:(e,t,n)=>{var r=n(9769),a=n(4104),o=n(9002),i=n(2279),s=n(8857);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):s(e)}},5148:(e,t,n)=>{var r=n(6800),a=n(8925),o=n(9002),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},5171:(e,t,n)=>{var r=n(314);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},5211:e=>{e.exports=function(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var l=i[e?s:++a];if(!1===n(o[l],l,o))break}return t}}},5321:(e,t,n)=>{var r=n(4591),a=n(964);e.exports=function(e,t){return null!=e&&a(e,t,r)}},5336:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},5381:e=>{e.exports=function(e){return e!==e}},5410:(e,t,n)=>{var r=n(2022),a=n(9248);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==r(e)}},5420:(e,t,n)=>{var r=n(5127),a=n(564);e.exports=function(e,t){return e&&e.length?a(e,r(t,2)):[]}},5438:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new a(r,o||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,o=r.length,i=new Array(o);a<o;a++)i[a]=r[a].fn;return i},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,a,o,i){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,a),!0;case 5:return u.fn.call(u.context,t,r,a,o),!0;case 6:return u.fn.call(u.context,t,r,a,o,i),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,a){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||a&&!s.once||r&&s.context!==r||i(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||a&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},5461:(e,t,n)=>{var r=n(2022),a=n(2253),o=n(9248),i=Function.prototype,s=Object.prototype,l=i.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=a(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},5491:(e,t,n)=>{var r=n(4567),a=n(4378),o=n(2588),i=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,d,h,f,p=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,p=t,d=e.apply(r,n)}function x(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=u}function b(){var e=a();if(x(e))return w(e);h=setTimeout(b,function(e){var n=t-(e-f);return g?s(n,u-(e-p)):n}(e))}function w(e){return h=void 0,v&&l?y(e):(l=c=void 0,d)}function j(){var e=a(),n=x(e);if(l=arguments,c=this,f=e,n){if(void 0===h)return function(e){return p=e,h=setTimeout(b,t),m?y(e):d}(f);if(g)return clearTimeout(h),h=setTimeout(b,t),y(f)}return void 0===h&&(h=setTimeout(b,t)),d}return t=o(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?i(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),j.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=c=h=void 0},j.flush=function(){return void 0===h?d:w(a())},j}},5507:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},5531:(e,t,n)=>{var r=n(53),a=n(1465),o=n(202),i=n(7887),s=n(4801),l=n(2022),c=n(9131),u="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(a),v=c(o),y=c(i),x=c(s),b=l;(r&&b(new r(new ArrayBuffer(1)))!=p||a&&b(new a)!=u||o&&b(o.resolve())!=d||i&&b(new i)!=h||s&&b(new s)!=f)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case v:return d;case y:return h;case x:return f}return t}),e.exports=b},5535:(e,t,n)=>{var r=n(5661),a=n(4710),o=n(8384),i=n(7379),s=n(799),l=n(2791);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=l,e.exports=c},5639:e=>{e.exports=function(e){return function(t){return e(t)}}},5661:(e,t,n)=>{var r=n(5088),a=n(150),o=n(7889),i=n(4349),s=n(3077);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},5695:(e,t,n)=>{var r=n(6993),a=n(5127),o=n(5171),i=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=i(s+l,0)),r(e,a(t,3),l)}},5724:(e,t,n)=>{var r=n(7405),a=n(7462),o=n(7840);e.exports=function(e){return o(e)?r(e):a(e)}},5732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},5776:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5876:(e,t,n)=>{var r=n(1570),a=n(5127),o=n(6602),i=n(2279);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},5915:(e,t,n)=>{var r=n(7372)(n(5695));e.exports=r},5916:(e,t,n)=>{var r=n(2279),a=n(184),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||(i.test(e)||!o.test(e)||null!=t&&e in Object(t))}},6010:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},6195:(e,t,n)=>{var r=n(3660),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,i,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:a.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<u;){var v=e[h=c[d]],y=t[h];if(o)var x=l?o(y,v,h,t,e,s):o(v,y,h,e,t,s);if(!(void 0===x?v===y||i(v,y,n,o,s):x)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},6212:(e,t,n)=>{var r=n(4978);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},6429:(e,t,n)=>{"use strict";e.exports=n(8577)},6463:(e,t,n)=>{var r=n(2279),a=n(5916),o=n(7044),i=n(4008);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:o(i(e))}},6557:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},6569:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(4621)),o=r(n(5732));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=a.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,a;let i=null,s=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(s="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const a=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),o=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&o&&o.length>1&&(l=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:"Results contain ".concat(s.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,c=406,u="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(a=null===i||void 0===i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new o.default(i)}return{error:i,data:s,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},6602:(e,t,n)=>{var r=n(927),a=n(7840);e.exports=function(e,t){var n=-1,o=a(e)?Array(e.length):[];return r(e,function(e,r,a){o[++n]=t(e,r,a)}),o}},6638:(e,t,n)=>{var r=n(366),a=n(423),o=n(5127);e.exports=function(e,t){var n={};return t=o(t,3),a(e,function(e,a,o){r(n,a,t(e,a,o))}),n}},6658:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},6669:(e,t,n)=>{var r=n(4467),a=n(2274),o=n(2138);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},6675:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},6689:(e,t,n)=>{var r=n(6212),a=n(1536),o=n(78),i=n(4008);e.exports=function(e){return function(t){t=i(t);var n=a(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},6794:(e,t,n)=>{e=n.nmd(e);var r=n(4759),a=n(3721),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||a;e.exports=l},6800:e=>{e.exports=function(e){return function(){return e}}},6801:(e,t,n)=>{var r=n(2022),a=n(2279),o=n(9248);e.exports=function(e){return"string"==typeof e||!a(e)&&o(e)&&"[object String]"==r(e)}},6810:(e,t,n)=>{var r=n(7518),a=n(7989);e.exports=function e(t,n,o,i,s){var l=-1,c=t.length;for(o||(o=a),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,i,s):r(s,u):i||(s[s.length]=u)}return s}},6823:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).get(e)}},6860:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}},6914:(e,t,n)=>{var r=n(8798),a=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,""):e}},6958:(e,t,n)=>{var r=n(3616);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},6993:e=>{e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},7026:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(9424);class a{constructor(){this.token=void 0,this.refreshPromise=null,this.initializeToken()}static getInstance(){return a.instance||(a.instance=new a),a.instance}async initializeToken(){await this.getToken()}async getToken(){if(console.log("\ud83d\udd0d TokenManager: Getting token..."),this.token)return console.log("\ud83d\udd11 TokenManager: Returning cached token"),this.token;const e=localStorage.getItem("casinoUser");if(console.log("\ud83d\udd0d TokenManager: localStorage data:",e),e)try{const t=JSON.parse(e);console.log("\ud83d\udd0d TokenManager: Parsed user data:",t),console.log("\ud83d\udd0d TokenManager: userData keys:",Object.keys(t));const n=["token","access_token","jwt","authToken"];for(const e of n)if(t[e])return this.token=t[e],console.log("\ud83d\udd11 TokenManager: Found token in localStorage field '".concat(e,"':"),t[e].substring(0,20)+"..."),t[e];console.log("\u274c TokenManager: No token field found in localStorage data"),console.log("\u274c TokenManager: Available fields:",Object.keys(t))}catch(a){console.error("Error parsing stored user data:",a)}else console.log("\u274c TokenManager: No casinoUser in localStorage");const t=localStorage.getItem("token")||localStorage.getItem("authToken")||localStorage.getItem("jwt");if(t)return this.token=t,console.log("\ud83d\udd11 TokenManager: Found direct token in localStorage"),t;const{data:{session:n}}=await r.N.auth.getSession();if(null!==n&&void 0!==n&&n.access_token)return this.token=n.access_token,console.log("\ud83d\udd11 TokenManager: Found token in Supabase session"),n.access_token;console.log("\u274c TokenManager: No token found anywhere")}setToken(e){this.token=e,console.log("\ud83d\udd11 TokenManager: Token set:",e?"YES":"NO"),console.log("\ud83d\udd11 TokenManager: Token cached in memory")}clearToken(){this.token=void 0,console.log("\ud83d\uddd1\ufe0f TokenManager: Token cleared");const e=localStorage.getItem("casinoUser");if(e)try{const t=JSON.parse(e);delete t.token,localStorage.setItem("casinoUser",JSON.stringify(t))}catch(t){console.warn("TokenManager: Failed to clear token from localStorage")}}isTokenValid(){return void 0!==this.token&&null!==this.token}}a.instance=void 0;const o=a.getInstance()},7044:(e,t,n)=>{var r=n(3734),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,r,a){t.push(r?a.replace(o,"$1"):n||e)}),t});e.exports=i},7059:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7101:(e,t,n)=>{var r=n(4672);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},7282:(e,t,n)=>{var r=n(2057),a=n(7646),o=n(9002);e.exports=function(e){return e&&e.length?r(e,o,a):void 0}},7311:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},7372:(e,t,n)=>{var r=n(5127),a=n(7840),o=n(5724);e.exports=function(e){return function(t,n,i){var s=Object(t);if(!a(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,i);return c>-1?s[l?t[c]:c]:void 0}}},7379:e=>{e.exports=function(e){return this.__data__.get(e)}},7405:(e,t,n)=>{var r=n(4102),a=n(4578),o=n(2279),i=n(6794),s=n(7059),l=n(1641),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&a(e),d=!n&&!u&&i(e),h=!n&&!u&&!d&&l(e),f=n||u||d||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},7427:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(6569));class o extends a.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=a?"".concat(a,".order"):"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a="undefined"===typeof r?"offset":"".concat(r,".offset"),o="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(a,"".concat(e)),this.url.searchParams.set(o,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(o,'; for="').concat(l,'"; options=').concat(s,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=o},7455:(e,t,n)=>{var r=n(3616);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7462:(e,t,n)=>{var r=n(2161),a=n(5112),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7518:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},7579:(e,t,n)=>{var r=n(927);e.exports=function(e,t){var n=!0;return r(e,function(e,r,a){return n=!!t(e,r,a)}),n}},7646:e=>{e.exports=function(e,t){return e<t}},7825:e=>{e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},7840:(e,t,n)=>{var r=n(3008),a=n(5776);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},7859:(e,t,n)=>{var r=n(7101);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},7887:(e,t,n)=>{var r=n(220)(n(4759),"Set");e.exports=r},7889:(e,t,n)=>{var r=n(5099);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7946:(e,t,n)=>{var r=n(52);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},7949:(e,t,n)=>{var r=n(3008),a=n(3306),o=n(4567),i=n(9131),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?h:s).test(i(e))}},7988:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},7989:(e,t,n)=>{var r=n(4635),a=n(4578),o=n(2279),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},8152:(e,t,n)=>{var r=n(656);e.exports=function(e,t,n){for(var a=-1,o=e.criteria,i=t.criteria,s=o.length,l=n.length;++a<s;){var c=r(o[a],i[a]);if(c)return a>=l?c:c*("desc"==n[a]?-1:1)}return e.index-t.index}},8166:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},8183:(e,t,n)=>{var r=n(2022),a=n(5776),o=n(9248),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[r(e)]}},8194:(e,t,n)=>{var r=n(6860),a=n(1515),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:(e=Object(e),r(i(e),function(t){return o.call(e,t)}))}:a;e.exports=s},8245:(e,t,n)=>{var r=n(1570),a=n(52),o=n(5127),i=n(6602),s=n(7311),l=n(5639),c=n(8152),u=n(9002),d=n(2279);e.exports=function(e,t,n){t=t.length?r(t,function(e){return d(e)?function(t){return a(t,1===e.length?e[0]:e)}:e}):[u];var h=-1;t=r(t,l(o));var f=i(e,function(e,n,a){return{criteria:r(t,function(t){return t(e)}),index:++h,value:e}});return s(f,function(e,t){return c(e,t,n)})}},8246:(e,t,n)=>{var r=n(4759).Uint8Array;e.exports=r},8258:(e,t,n)=>{var r=n(927);e.exports=function(e,t){var n;return r(e,function(e,r,a){return!(n=t(e,r,a))}),!!n}},8345:(e,t,n)=>{"use strict";var r=n(9950),a=n(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var R,L=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case j:return"Portal";case k:return"Profiler";case N:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Q(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,_e=null,Ne=null;function ke(e){if(e=xa(e)){if("function"!==typeof je)throw Error(o(280));var t=e.stateNode;t&&(t=wa(t),je(e.stateNode,e.type,t))}}function Se(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Oe(e,t){return e(t)}function Ce(){}var Pe=!1;function Ee(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Oe(e,t,n)}finally{Pe=!1,(null!==_e||null!==Ne)&&(Ce(),Ae())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){De=!1}function Me(e,t,n,r,a,o,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Re=!1,Le=null,Fe=!1,ze=null,Be={onError:function(e){Re=!0,Le=e}};function Ue(e,t,n,r,a,o,i,s,l){Re=!1,Le=null,Me.apply(Be,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return He(a),e;if(i===r)return He(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var $e=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Je=a.unstable_requestPaint,Xe=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=dt(s):0!==(o&=i)&&(r=dt(o))}else 0!==(i=n&~a)?r=dt(i):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,_t,Nt,kt,St=!1,At=[],Ot=null,Ct=null,Pt=null,Et=new Map,Tt=new Map,Dt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Rt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=xa(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xa(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){St=!1,null!==Ot&&Ft(Ot)&&(Ot=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Pt&&Ft(Pt)&&(Pt=null),Et.forEach(zt),Tt.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Ut(Ot,e),null!==Ct&&Ut(Ct,e),null!==Pt&&Ut(Pt,e),Et.forEach(t),Tt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var a=xt,o=qt.transition;qt.transition=null;try{xt=1,$t(e,t,n,r)}finally{xt=a,qt.transition=o}}function Kt(e,t,n,r){var a=xt,o=qt.transition;qt.transition=null;try{xt=4,$t(e,t,n,r)}finally{xt=a,qt.transition=o}}function $t(e,t,n,r){if(Ht){var a=Yt(e,t,n,r);if(null===a)Hr(e,t,r,Gt,n),Mt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ot=Rt(Ot,e,t,n,r,a),!0;case"dragenter":return Ct=Rt(Ct,e,t,n,r,a),!0;case"mouseover":return Pt=Rt(Pt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Et.set(o,Rt(Et.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Tt.set(o,Rt(Tt.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==a;){var o=xa(a);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Gt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=ya(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=L({},cn,{view:0,detail:0}),hn=an(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(L({},fn,{dataTransfer:0})),gn=an(L({},dn,{relatedTarget:0})),vn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(yn),bn=an(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return Nn}var Sn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Sn),On=an(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=an(En),Dn=[9,13,27,32],In=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Rn=u&&"TextEvent"in window&&!Mn,Ln=u&&(!In||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Vn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,$n=null;function Gn(e){Fr(e,0)}function Yn(e){if($(ba(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Qn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;Xn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),$n=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn($n)){var t=[];Vn(t,$n,e,we(e)),Ee(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn($n)}function or(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=ur(n,o);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Nr={};function kr(e){if(_r[e])return _r[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return _r[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Sr=kr("animationend"),Ar=kr("animationiteration"),Or=kr("animationstart"),Cr=kr("transitionend"),Pr=new Map,Er="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Er.length;Dr++){var Ir=Er[Dr];Tr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Tr(Sr,"onAnimationEnd"),Tr(Ar,"onAnimationIteration"),Tr(Or,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,l,c){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(o(198));var u=Le;Re=!1,Le=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;Lr(a,s,c),o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;Lr(a,s,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,i.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var a=Vt;break;case 4:a=Kt;break;default:a=$t}n=a.bind(null,t,n,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ya(s)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}s=s.parentNode}}r=r.return}Ee(function(){var r=o,a=we(n),i=[];e:{var s=Pr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Sr:case Ar:case Or:l=vn;break;case Cr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Te(p,h))&&u.push(Vr(p,m,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,a),i.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=On,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:ba(l),f=null==c?s:ba(c),(s=new u(m,p+"leave",l,n,a)).target=d,s.relatedTarget=f,m=null,ya(a)===r&&((u=new u(h,p+"enter",c,n,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=$r(f))p++;for(f=0,m=h;m;m=$r(m))f++;for(;0<p-f;)u=$r(u),p--;for(;0<f-p;)h=$r(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=$r(u),h=$r(h)}u=null}else u=null;null!==l&&Gr(i,s,l,u,!1),null!==c&&null!==d&&Gr(i,d,c,u,!0)}if("select"===(l=(s=r?ba(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(Hn(s))if(Xn)g=ir;else{g=ar;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Vn(i,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?ba(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(i,n,a)}var y;if(In)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wn?Bn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Wn&&(y=en()):(Qt="value"in(Xt=a)?Xt.value:Xt.textContent,Wn=!0)),0<(v=Kr(r,x)).length&&(x=new bn(x,e,null,n,a),i.push({event:x,listeners:v}),y?x.data=y:null!==(y=Un(n))&&(x.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!In&&Bn(e,t)?(e=en(),Zt=Qt=Xt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Fr(i,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Te(e,n))&&r.unshift(Vr(e,o,a)),null!=(o=Te(e,t))&&r.push(Vr(e,o,a))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Te(n,o))&&i.unshift(Vr(n,l,s)):a||null!=(l=Te(n,o))&&i.push(Vr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Qr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function xa(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wa(e){return e[fa]||null}var ja=[],_a=-1;function Na(e){return{current:e}}function ka(e){0>_a||(e.current=ja[_a],ja[_a]=null,_a--)}function Sa(e,t){_a++,ja[_a]=e.current,e.current=t}var Aa={},Oa=Na(Aa),Ca=Na(!1),Pa=Aa;function Ea(e,t){var n=e.type.contextTypes;if(!n)return Aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ta(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Da(){ka(Ca),ka(Oa)}function Ia(e,t,n){if(Oa.current!==Aa)throw Error(o(168));Sa(Oa,t),Sa(Ca,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,q(e)||"Unknown",a));return L({},n,r)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Pa=Oa.current,Sa(Oa,e),Sa(Ca,Ca.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ma(e,t,Pa),r.__reactInternalMemoizedMergedChildContext=e,ka(Ca),ka(Oa),Sa(Oa,e)):ka(Ca),Sa(Ca,n)}var Fa=null,za=!1,Ba=!1;function Ua(e){null===Fa?Fa=[e]:Fa.push(e)}function Wa(){if(!Ba&&null!==Fa){Ba=!0;var e=0,t=xt;try{var n=Fa;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,za=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),$e(Ze,Wa),a}finally{xt=t,Ba=!1}}return null}var qa=[],Ha=0,Va=null,Ka=0,$a=[],Ga=0,Ya=null,Ja=1,Xa="";function Qa(e,t){qa[Ha++]=Ka,qa[Ha++]=Va,Va=e,Ka=t}function Za(e,t,n){$a[Ga++]=Ja,$a[Ga++]=Xa,$a[Ga++]=Ya,Ya=e;var r=Ja;e=Xa;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ja=1<<32-it(t)+a|n<<a|r,Xa=o+e}else Ja=1<<o|n<<a|r,Xa=e}function eo(e){null!==e.return&&(Qa(e,1),Za(e,1,0))}function to(e){for(;e===Va;)Va=qa[--Ha],qa[Ha]=null,Ka=qa[--Ha],qa[Ha]=null;for(;e===Ya;)Ya=$a[--Ga],$a[Ga]=null,Xa=$a[--Ga],$a[Ga]=null,Ja=$a[--Ga],$a[Ga]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Ja,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ec(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ao)return uo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ca(e.nextSibling)}function po(){ro=no=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xo(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&xo(o)===t.type)?((r=a(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case j:return n.key===a?u(e,t,n,r):null;case T:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||M(n))return null!==a?null:d(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case j:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case T:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,a,null);yo(t,r)}return null}function m(a,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(a,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),o=i(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(a,d),ao&&Qa(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],l))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return ao&&Qa(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(g=p(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ao&&Qa(a,m),c}function g(a,s,l,c){var u=M(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=f(a,m,y.value,c);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(a,m),s=i(x,s,g),null===d?u=x:d.sibling=x,d=x,m=v}if(y.done)return n(a,m),ao&&Qa(a,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return ao&&Qa(a,g),u}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(a,e)}),ao&&Qa(a,g),u}return function e(r,o,i,l){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=o;null!==u;){if(u.key===c){if((c=i.type)===_){if(7===u.tag){n(r,u.sibling),(o=a(u,i.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&xo(c)===u.type){n(r,u.sibling),(o=a(u,i.props)).ref=vo(r,u,i),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===_?((o=Mc(i.props.children,r.mode,l,i.key)).return=r,r=o):((l=Ic(i.type,i.key,i.props,null,r.mode,l)).ref=vo(r,o,i),l.return=r,r=l)}return s(r);case j:e:{for(u=i.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(i,r.mode,l)).return=r,r=o}return s(r);case T:return e(r,o,(u=i._init)(i._payload),l)}if(te(i))return m(r,o,i,l);if(M(i))return g(r,o,i,l);yo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Lc(i,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=bo(!0),jo=bo(!1),_o=Na(null),No=null,ko=null,So=null;function Ao(){So=ko=No=null}function Oo(e){var t=_o.current;ka(_o),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){No=e,So=ko=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Eo(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===ko){if(null===No)throw Error(o(308));ko=e,No.dependencies={lanes:0,firstContext:e}}else ko=ko.next=e;return t}var To=null;function Do(e){null===To?To=[e]:To.push(e)}function Io(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Do(t)):(n.next=a.next,a.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Mo(e,n)}return null===(a=r.interleaved)?(t.next=t,Do(r)):(t.next=a.next,a.next=t),r.interleaved=t,Mo(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var a=e.updateQueue;Ro=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?o=c:i.next=c,i=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=a.baseState;for(i=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Ro=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,i|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var Vo={},Ko=Na(Vo),$o=Na(Vo),Go=Na(Vo);function Yo(e){if(e===Vo)throw Error(o(174));return e}function Jo(e,t){switch(Sa(Go,t),Sa($o,e),Sa(Ko,Vo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Ko),Sa(Ko,t)}function Xo(){ka(Ko),ka($o),ka(Go)}function Qo(e){Yo(Go.current);var t=Yo(Ko.current),n=le(t,e.type);t!==n&&(Sa($o,e),Sa(Ko,n))}function Zo(e){$o.current===e&&(ka(Ko),ka($o))}var ei=Na(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=b.ReactCurrentDispatcher,oi=b.ReactCurrentBatchConfig,ii=0,si=null,li=null,ci=null,ui=!1,di=!1,hi=0,fi=0;function pi(){throw Error(o(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,a,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Zi:es,e=n(r,a),di){i=0;do{if(di=!1,hi=0,25<=i)throw Error(o(301));i+=1,ci=li=null,t.updateQueue=null,ai.current=ts,e=n(r,a)}while(di)}if(ai.current=Qi,t=null!==li&&null!==li.next,ii=0,ci=li=si=null,ui=!1,t)throw Error(o(300));return e}function vi(){var e=0!==hi;return hi=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ci?si.memoizedState=ci=e:ci=ci.next=e,ci}function xi(){if(null===li){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===ci?si.memoizedState:ci.next;if(null!==t)ci=t,li=e;else{if(null===e)throw Error(o(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===ci?si.memoizedState=ci=e:ci=ci.next=e}return ci}function bi(e,t){return"function"===typeof t?t(e):t}function wi(e){var t=xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=li,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((ii&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,si.lanes|=d,Rl|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,si.lanes|=i,Rl|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ji(e){var t=xi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(xs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _i(){}function Ni(e,t){var n=si,r=xi(),a=t(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,xs=!0),r=r.queue,Ri(Ai.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==ci&&1&ci.memoizedState.tag){if(n.flags|=2048,Ei(9,Si.bind(null,n,r,a,t),void 0,null),null===Cl)throw Error(o(349));0!==(30&ii)||ki(n,t,a)}return a}function ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,r){t.value=n,t.getSnapshot=r,Oi(t)&&Ci(e)}function Ai(e,t,n){return n(function(){Oi(t)&&Ci(e)})}function Oi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ci(e){var t=Mo(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,si,e),[t.memoizedState,e]}function Ei(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ti(){return xi().memoizedState}function Di(e,t,n,r){var a=yi();si.flags|=e,a.memoizedState=Ei(1|t,n,void 0,void 0===r?null:r)}function Ii(e,t,n,r){var a=xi();r=void 0===r?null:r;var o=void 0;if(null!==li){var i=li.memoizedState;if(o=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=Ei(t,n,o,r))}si.flags|=e,a.memoizedState=Ei(1|t,n,o,r)}function Mi(e,t){return Di(8390656,8,e,t)}function Ri(e,t){return Ii(2048,8,e,t)}function Li(e,t){return Ii(4,2,e,t)}function Fi(e,t){return Ii(4,4,e,t)}function zi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4,4,zi.bind(null,t,e),n)}function Ui(){}function Wi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=xi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),si.lanes|=n,Rl|=n,e.baseState=!0),t)}function Vi(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{xt=n,oi.transition=r}}function Ki(){return xi().memoizedState}function $i(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yi(e))Ji(t,n);else if(null!==(n=Io(e,t,n,r))){nc(n,e,r,ec()),Xi(n,t,r)}}function Gi(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Ji(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(a.next=a,Do(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Io(e,t,a,r))&&(nc(n,e,r,a=ec()),Xi(n,t,r))}}function Yi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Ji(e,t){di=ui=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qi={readContext:Eo,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Zi={readContext:Eo,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Eo,useEffect:Mi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,zi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$i.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Vi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,a=yi();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Cl)throw Error(o(349));0!==(30&ii)||ki(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Mi(Ai.bind(null,r,i,e),[e]),r.flags|=2048,Ei(9,Si.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Cl.identifierPrefix;if(ao){var n=Xa;t=":"+t+"R"+(n=(Ja&~(1<<32-it(Ja)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Eo,useCallback:Wi,useContext:Eo,useEffect:Ri,useImperativeHandle:Bi,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:qi,useReducer:wi,useRef:Ti,useState:function(){return wi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(xi(),li.memoizedState,e)},useTransition:function(){return[wi(bi)[0],xi().memoizedState]},useMutableSource:_i,useSyncExternalStore:Ni,useId:Ki,unstable_isNewReconciler:!1},ts={readContext:Eo,useCallback:Wi,useContext:Eo,useEffect:Ri,useImperativeHandle:Bi,useInsertionEffect:Li,useLayoutEffect:Fi,useMemo:qi,useReducer:ji,useRef:Ti,useState:function(){return ji(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=xi();return null===li?t.memoizedState=e:Hi(t,li.memoizedState,e)},useTransition:function(){return[ji(bi)[0],xi().memoizedState]},useMutableSource:_i,useSyncExternalStore:Ni,useId:Ki,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=zo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,a))&&(nc(t,e,a,r),Uo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),o=zo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Bo(e,o,a))&&(nc(t,e,a,r),Uo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=zo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Bo(e,a,r))&&(nc(t,e,r,n),Uo(t,e,r))}};function os(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,o))}function is(e,t,n){var r=!1,a=Aa,o=t.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(a=Ta(t)?Pa:Oa.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ea(e,a):Aa),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=Eo(o):(o=Ta(t)?Pa:Oa.current,a.context=Ea(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&as.enqueueReplaceState(a,a.state,null),qo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),ds(0,t)},n}function ps(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Bo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var ys=b.ReactCurrentOwner,xs=!1;function bs(e,t,n,r){t.child=null===e?jo(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var o=t.ref;return Po(t,a),r=gi(e,t,n,r,o,a),n=vi(),null===e||xs?(ao&&n&&eo(t),t.flags|=1,bs(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function js(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Tc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(xs=!0)}}return Ss(e,t,n,r,a)}function Ns(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Dl,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Dl,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Sa(Dl,Tl),Tl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Sa(Dl,Tl),Tl|=r;return bs(e,t,a,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,a){var o=Ta(n)?Pa:Oa.current;return o=Ea(t,o),Po(t,a),n=gi(e,t,n,r,o,a),r=vi(),null===e||xs?(ao&&r&&eo(t),t.flags|=1,bs(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function As(e,t,n,r,a){if(Ta(n)){var o=!0;Ra(t)}else o=!1;if(Po(t,a),null===t.stateNode)qs(e,t),is(t,n,r),ls(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Eo(c):c=Ea(t,c=Ta(n)?Pa:Oa.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,i,r,c),Ro=!1;var h=t.memoizedState;i.state=h,qo(t,r,i,a),l=t.memoizedState,s!==r||h!==l||Ca.current||Ro?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Ro||os(t,n,s,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Eo(l):l=Ea(t,l=Ta(n)?Pa:Oa.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,i,r,l),Ro=!1,h=t.memoizedState,i.state=h,qo(t,r,i,a);var p=t.memoizedState;s!==d||h!==p||Ca.current||Ro?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Ro||os(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Os(e,t,n,r,o,a)}function Os(e,t,n,r,a,o){ks(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&La(t,n,!1),Hs(e,t,o);r=t.stateNode,ys.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):bs(e,t,s,o),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),Jo(e,t.containerInfo)}function Ps(e,t,n,r,a){return po(),mo(a),t.flags|=256,bs(e,t,n,r),t.child}var Es,Ts,Ds,Is,Ms={dehydrated:null,treeContext:null,retryLane:0};function Rs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,a=t.pendingProps,i=ei.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(ei,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Rc(l,a,0,null),e=Mc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Rs(n),t.memoizedState=Ms,e):Fs(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Rc({mode:"visible",children:r.children},a,0,null),(i=Mc(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Rs(s),t.memoizedState=Ms,i);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=us(i=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Cl)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Mo(e,a),nc(r,e,a,-1))}return mc(),zs(e,t,s,r=us(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&($a[Ga++]=Ja,$a[Ga++]=Xa,$a[Ga++]=Ya,Ja=e.id,Xa=e.overflow,Ya=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(s){s=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Dc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Dc(r,s):(s=Mc(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?Rs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,a}return e=(s=e.child).sibling,a=Dc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fs(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Co(e.return,t,n)}function Us(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Ta(t.type)&&Da(),Ks(t),null;case 3:return r=t.stateNode,Xo(),ka(Ca),ka(Oa),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ic(oo),oo=null))),Ts(e,t),Ks(t),null;case 5:Zo(t);var a=Yo(Go.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ks(t),null}if(e=Yo(Ko.current),ho(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ha]=t,r[fa]=i,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)zr(Mr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":J(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":ae(r,i),zr("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ha]=t,e[fa]=r,Es(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)zr(Mr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":J(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zr("scroll",e):null!=u&&x(e,i,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Is(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Go.current),Yo(Ko.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Ks(t),null;case 13:if(ka(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,i=!1;else if(i=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[ha]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),i=!1}else null!==oo&&(ic(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Il&&(Il=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return Xo(),Ts(e,t),null===e&&Wr(t.stateNode.containerInfo),Ks(t),null;case 10:return Oo(t.type._context),Ks(t),null;case 19:if(ka(ei),null===(i=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Vs(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ti(e))){for(t.flags|=128,Vs(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sa(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>Wl&&(t.flags|=128,r=!0,Vs(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ao)return Ks(t),null}else 2*Xe()-i.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,Vs(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=ei.current,Sa(ei,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Gs(e,t){switch(to(t),t.tag){case 1:return Ta(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),ka(Ca),ka(Oa),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(ka(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(ei),null;case 4:return Xo(),null;case 10:return Oo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Es=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Ds=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Yo(Ko.current);var o,i=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),i=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Js=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&el(t,n,o)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Js||Zs(n,t);case 6:var r=ul,a=dl;ul=null,hl(e,t,n),dl=a,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Wt(e)):la(ul,n.stateNode));break;case 4:r=ul,a=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&el(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Js&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Nc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,hl(e,t,n),Js=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach(function(t){var r=Oc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(i,s,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Nc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Nc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Nc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){Nc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),xe(l,s);var u=xe(l,i);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):x(a,d,h,u)}switch(l){case"input":Q(a,i);break;case"textarea":oe(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){Nc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Nc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(g){Nc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Ul=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||d,ml(t,e),Js=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(h=Qs=d;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Nc(r,n,g)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Qs=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Nc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Nc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),cl(e,sl(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,sl(e),i);break;default:throw Error(o(161))}}catch(s){Nc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qs=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var a=Qs,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ys;if(!i){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Ys;var c=Js;if(Ys=i,(Js=l)&&!c)for(Qs=a;null!==Qs;)l=(i=Qs).child,22===i.tag&&null!==i.memoizedState?jl(a):null!==l?(l.return=i,Qs=l):jl(a);for(;null!==o;)Qs=o,xl(o,t,n),o=o.sibling;Qs=a,Ys=s,Js=c}bl(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Qs=o):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ho(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(o(163))}Js||512&t.flags&&al(t)}catch(f){Nc(t,t.return,f)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function jl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Nc(t,a,l)}}var o=t.return;try{al(t)}catch(l){Nc(t,o,l)}break;case 5:var i=t.return;try{al(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var _l,Nl=Math.ceil,kl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Al=b.ReactCurrentBatchConfig,Ol=0,Cl=null,Pl=null,El=0,Tl=0,Dl=Na(0),Il=0,Ml=null,Rl=0,Ll=0,Fl=0,zl=null,Bl=null,Ul=0,Wl=1/0,ql=null,Hl=!1,Vl=null,Kl=null,$l=!1,Gl=null,Yl=0,Jl=0,Xl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Ol)?Xe():-1!==Ql?Ql:Ql=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==El?El&-El:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(o(185));vt(e,n,r),0!==(2&Ol)&&e===Cl||(e===Cl&&(0===(2&Ol)&&(Ll|=n),4===Il&&sc(e,El)),rc(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(Wl=Xe()+500,za&&Wa()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,l=a[i];-1===l?0!==(s&n)&&0===(s&r)||(a[i]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Cl?El:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){za=!0,Ua(e)}(lc.bind(null,e)):Ua(lc.bind(null,e)),ia(function(){0===(6&Ol)&&Wa()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ql=-1,Zl=0,0!==(6&Ol))throw Error(o(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?El:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=Ol;Ol|=2;var i=pc();for(Cl===e&&El===t||(ql=null,Wl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ao(),kl.current=i,Ol=a,null!==Pl?t=0:(Cl=null,El=0,t=Il)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Ml,hc(e,0),sc(e,r),rc(e,Xe()),n;if(6===t)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t))throw n=Ml,hc(e,0),sc(e,r),rc(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Bl,ql);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,Bl,ql),t);break}wc(e,Bl,ql);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,Bl,ql),r);break}wc(e,Bl,ql);break;default:throw Error(o(329))}}}return rc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ic(t)),e}function ic(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Ol))throw Error(o(327));jc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,hc(e,0),sc(e,t),rc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,ql),rc(e,Xe()),null}function cc(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(Wl=Xe()+500,za&&Wa())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Ol)&&jc();var t=Ol;Ol|=1;var n=Al.transition,r=xt;try{if(Al.transition=null,xt=1,e)return e()}finally{xt=r,Al.transition=n,0===(6&(Ol=t))&&Wa()}}function dc(){Tl=Dl.current,ka(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Da();break;case 3:Xo(),ka(Ca),ka(Oa),ri();break;case 5:Zo(r);break;case 4:Xo();break;case 13:case 19:ka(ei);break;case 10:Oo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cl=e,Pl=e=Dc(e.current,null),El=Tl=t,Il=0,Ml=null,Fl=Ll=Rl=0,Bl=zl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}To=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(Ao(),ai.current=Qi,ui){for(var r=si.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ui=!1}if(ii=0,ci=li=si=null,di=!1,hi=0,Sl.current=null,null===n||null===n.return){Il=1,Ml=t,Pl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=El,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(i,u,t),mc();break e}c=Error(o(426))}else if(ao&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}i=c=cs(c,l),4!==Il&&(Il=2),null===zl?zl=[i]:zl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Wo(i,fs(0,c,t));break e;case 1:l=c;var y=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,Wo(i,ps(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=Qi,null===e?Qi:e}function mc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Cl||0===(268435455&Rl)&&0===(268435455&Ll)||sc(Cl,El)}function gc(e,t){var n=Ol;Ol|=2;var r=pc();for(Cl===e&&El===t||(ql=null,hc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(Ao(),Ol=n,kl.current=r,null!==Pl)throw Error(o(261));return Cl=null,El=0,Il}function vc(){for(;null!==Pl;)xc(Pl)}function yc(){for(;null!==Pl&&!Ye();)xc(Pl)}function xc(e){var t=_l(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$s(n,t,Tl)))return void(Pl=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Il=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,n){var r=xt,a=Al.transition;try{Al.transition=null,xt=1,function(e,t,n,r){do{jc()}while(null!==Gl);if(0!==(6&Ol))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Cl&&(Pl=Cl=null,El=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Cc(tt,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Al.transition,Al.transition=null;var s=xt;xt=1;var l=Ol;Ol|=4,Sl.current=null,function(e,t){if(ea=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(l=s+a),h!==i||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=s),f===i&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Je(),Ol=l,xt=s,Al.transition=i}else e.current=n;if($l&&($l=!1,Gl=e,Yl=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Wa()}(e,t,n,r)}finally{Al.transition=a,xt=r}return null}function jc(){if(null!==Gl){var e=bt(Yl),t=Al.transition,n=xt;try{if(Al.transition=null,xt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Yl=0,0!==(6&Ol))throw Error(o(331));var a=Ol;for(Ol|=4,Qs=e.current;null!==Qs;){var i=Qs,s=i.child;if(0!==(16&Qs.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Qs=u;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Qs=h;else for(;null!==Qs;){var f=(d=Qs).sibling,p=d.return;if(ol(d),d===u){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(i=Qs).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Qs=y;break e}Qs=i.return}}var x=e.current;for(Qs=x;null!==Qs;){var b=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Qs=b;else e:for(s=x;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===s){Qs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qs=w;break e}Qs=l.return}}if(Ol=a,Wa(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(j){}r=!0}return r}finally{xt=n,Al.transition=t}}return!1}function _c(e,t,n){e=Bo(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Bo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(El&n)===n&&(4===Il||3===Il&&(130023424&El)===El&&500>Xe()-Ul?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Mo(e,t))&&(vt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Oc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return $e(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,n,r){return new Pc(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Tc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Mc(n.children,a,i,t);case N:s=8,a|=8;break;case k:return(e=Ec(12,n,t,2|a)).elementType=k,e.lanes=i,e;case C:return(e=Ec(13,n,t,a)).elementType=C,e.lanes=i,e;case P:return(e=Ec(19,n,t,a)).elementType=P,e.lanes=i,e;case D:return Rc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case A:s=9;break e;case O:s=11;break e;case E:s=14;break e;case T:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ec(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Mc(e,t,n,r){return(e=Ec(7,e,r,t)).lanes=n,e}function Rc(e,t,n,r){return(e=Ec(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ec(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,a,o,i,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ec(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Uc(e){if(!e)return Aa;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ta(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ta(n))return Ma(e,n,t)}return t}function Wc(e,t,n,r,a,o,i,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=Uc(null),n=e.current,(o=zo(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Bo(n,o,a),e.current.lanes=a,vt(e,a,r),rc(e,r),e}function qc(e,t,n,r){var a=t.current,o=ec(),i=tc(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bo(a,t,i))&&(nc(e,a,i,o),Uo(e,a,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Cs(t),po();break;case 5:Qo(t);break;case 1:Ta(t.type)&&Ra(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sa(_o,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Sa(ei,1&ei.current),null!==(e=Hs(e,t,n))?e.sibling:null);Sa(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ao&&0!==(1048576&t.flags)&&Za(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var a=Ea(t,Oa.current);Po(t,n),a=gi(null,t,r,e,a,n);var i=vi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ta(r)?(i=!0,Ra(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Lo(t),a.updater=as,t.stateNode=a,a._reactInternals=t,ls(t,r,e,n),t=Os(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),bs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===E)return 14}return 2}(r),e=ns(r,e),a){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=js(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 1:return r=t.type,a=t.pendingProps,As(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 3:e:{if(Cs(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Fo(e,t),qo(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ps(e,t,r,n,a=cs(Error(o(423)),t));break e}if(r!==a){t=Ps(e,t,r,n,a=cs(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===a){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Qo(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==i&&na(r,i)&&(t.flags|=32),ks(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ls(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ws(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Sa(_o,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Ca.current){t=Hs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=zo(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Co(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Co(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}bs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Po(t,n),r=r(a=Eo(a)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return a=ns(r=t.type,t.pendingProps),js(e,t,r,a=ns(r.type,a),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ns(r,a),qs(e,t),t.tag=1,Ta(r)?(e=!0,Ra(t)):e=!1,Po(t,n),is(t,r,a),ls(t,r,a,n),Os(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Ns(e,t,n)}throw Error(o(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Hc(i);s.call(e)}}qc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Hc(i);o.call(e)}}var i=Wc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[pa]=i.current,Wr(8===e.nodeType?e.parentNode:e),uc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[pa]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc(function(){qc(t,l,n,r)}),l}(n,t,e,a,r);return Hc(i)}Yc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},Yc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){qc(null,e,null,null)}),t[pa]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Ol)&&(Wl=Xe()+500,Wa()))}break;case 13:uc(function(){var t=Mo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},jt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Mo(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Nt=function(){return xt},kt=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},je=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(o(90));$(r),Q(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=cc,Ce=uc;var eu={usingClientEntryPoint:!1,Events:[xa,ba,wa,Se,Ae,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",a=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,a,0,i,s),e[pa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},8384:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},8577:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case i:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case p:case l:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return v(e)===o}},8798:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},8829:(e,t,n)=>{var r=n(6675),a=n(7579),o=n(5127),i=n(2279),s=n(9042);e.exports=function(e,t,n){var l=i(e)?r:a;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},8857:(e,t,n)=>{var r=n(9343),a=n(4753),o=n(5916),i=n(2535);e.exports=function(e){return o(e)?r(i(e)):a(e)}},8925:(e,t,n)=>{var r=n(220),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},9002:e=>{e.exports=function(e){return e}},9042:(e,t,n)=>{var r=n(4206),a=n(7840),o=n(7059),i=n(4567);e.exports=function(e,t,n){if(!i(n))return!1;var s=typeof t;return!!("number"==s?a(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},9113:(e,t,n)=>{var r=n(6810),a=n(5876);e.exports=function(e,t){return r(a(e,t),1)}},9131:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},9208:e=>{e.exports=function(){}},9248:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},9343:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},9418:(e,t,n)=>{var r=n(1404);e.exports=function(e,t){return r(e,t)}},9424:(e,t,n)=>{"use strict";n.d(t,{db:()=>Zt,N:()=>Qt});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class a extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class o extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var s;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(s||(s={}));var l=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:r,region:a=s.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=a,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4621)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:l}=t;let c={},{region:u}=t;u||(u=this.region);const d=new URL("".concat(this.url,"/").concat(e));let h;u&&"any"!==u&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u)),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:h}).catch(e=>{throw new a(e)}),p=f.headers.get("x-relay-error");if(p&&"true"===p)throw new o(f);if(!f.ok)throw new i(f);let m,g=(null!==(n=f.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return m="application/json"===g?yield f.json():"application/octet-stream"===g?yield f.blob():"text/event-stream"===g?f:"multipart/form-data"===g?yield f.formData():yield f.text(),{data:m,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof i||r instanceof o?r.context:void 0}}})}}var u=n(1053);const{PostgrestClient:d,PostgrestQueryBuilder:h,PostgrestFilterBuilder:f,PostgrestTransformBuilder:p,PostgrestBuilder:m,PostgrestError:g}=u;const v=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(e," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(e," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},y="realtime-js/".concat("2.15.4"),x=1e4;var b,w,j,_,N,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(b||(b={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(j||(j={})),function(e){e.websocket="websocket"}(_||(_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(N||(N={}));class S{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const i=n.decode(e.slice(o,o+r));o+=r;const s=n.decode(e.slice(o,o+a));o+=a;return{ref:null,topic:i,event:s,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class A{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const O=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,a)=>(n[a]=C(a,e,t,r),n),{})},C=(e,t,n,r)=>{const a=t.find(t=>t.name===e),o=null===a||void 0===a?void 0:a.type,i=n[e];return o&&!r.includes(o)?P(o,i):E(i)},P=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return M(t,n)}switch(e){case k.bool:return T(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return D(t);case k.json:case k.jsonb:return I(t);case k.timestamp:return R(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return E(t)}},E=e=>e,T=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},I=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},M=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const o=e.slice(1,n);try{r=JSON.parse("["+o+"]")}catch(a){r=o?o.split(","):[]}return r.map(e=>P(t,e))}return e},R=e=>"string"===typeof e?e.replace(" ","T"):e,L=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class F{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var z,B,U,W;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(z||(z={}));class q{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=q.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=q.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=q.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),o=this.transformState(t),i={},s={};return this.map(a,(e,t)=>{o[e]||(s[e]=t)}),this.map(o,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),o=t.filter(e=>a.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(i[e]=o),l.length>0&&(s[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const o=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let a=e[t];if(!a)return;const o=n.map(e=>e.presence_ref);a=a.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(B||(B={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(U||(U={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(W||(W={}));class H{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new F(this,j.join,this.params,this.timeout),this.rejoinTimer=new A(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(j.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new q(this),this.broadcastEndpointURL=L(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:o,presence:i,private:s}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[U.PRESENCE]&&this.bindings[U.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:o,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:s};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(W.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(W.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,a=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,o=[];for(let r=0;r<a;r++){const a=t[r],{filter:{event:i,schema:s,table:l,filter:c}}=a,u=n&&n[r];if(!u||u.event!==i||u.schema!==s||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(W.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(W.SUBSCRIBED))}null===e||void 0===e||e(W.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(W.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(W.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===w.joined&&e===U.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,o;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===o?void 0:o.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:o,payload:i}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(j.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new F(this,j.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),o}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new F(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const o=e.toLocaleLowerCase(),{close:i,error:s,leave:l,join:c}=j;if(n&&[i,s,l,c].indexOf(o)>=0&&n!==this._joinRef())return;let u=this._onMessage(o,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(u,n)):null===(a=this.bindings[o])||void 0===a||a.filter(e=>{var n,r,a,i,s,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(s=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:o}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:o};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&H.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(j.close,{},e)}_onError(e){this._on(j.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=O(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=O(e.columns,e.old_record)),t}}const V=()=>{},K=25e3,$=10,G=100,Y=[1e3,2e3,5e3,1e4];class J{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x,this.transport=null,this.heartbeatIntervalMs=K,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=V,this.ref=0,this.reconnectTimer=null,this.logger=V,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4621)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(_.websocket),this.httpEndpoint=L(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case b.connecting:return N.Connecting;case b.open:return N.Open;case b.closing:return N.Closing;default:return N.Closed}}isConnected(){return this.connectionState()===N.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new H("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(a,")"),r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},G)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(s){this.log("error","error in heartbeat callback",s)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:a}=e,o=a?"(".concat(a,")"):"",i=r.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(n," ").concat(o).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(j.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:y};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(j.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new A(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,o,i,s,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:x,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:K,this.worker=null!==(a=null===e||void 0===e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(o=null===e||void 0===e?void 0:e.accessToken)&&void 0!==o?o:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:V,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(s=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==s?s:e=>Y[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class X extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Z extends X{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ee extends X{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var te=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const ne=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4621)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const a=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[a]=re(r)}),t};var ae=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const oe=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ie=(e,t,r)=>ae(void 0,void 0,void 0,function*(){const a=yield te(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,4621))).Response:Response});e instanceof a&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new Z(oe(n),r,a))}).catch(e=>{t(new ee(oe(e),e))}):t(new ee(oe(e),e))}),se=(e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null===t||void 0===t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n)):a};function le(e,t,n,r,a,o){return ae(this,void 0,void 0,function*(){return new Promise((i,s)=>{e(n,se(t,r,a,o)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ie(e,s,r))})})}function ce(e,t,n,r){return ae(this,void 0,void 0,function*(){return le(e,"GET",t,n,r)})}function ue(e,t,n,r,a){return ae(this,void 0,void 0,function*(){return le(e,"POST",t,r,a,n)})}function de(e,t,n,r,a){return ae(this,void 0,void 0,function*(){return le(e,"PUT",t,r,a,n)})}function he(e,t,n,r,a){return ae(this,void 0,void 0,function*(){return le(e,"DELETE",t,r,a,n)})}var fe=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const pe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},me={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ge{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=ne(r)}uploadOrUpdate(e,t,n,r){return fe(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},me),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const s=o.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),s&&a.append("metadata",this.encodeMetadata(s)),a.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),s&&a.append("metadata",this.encodeMetadata(s))):(a=n,i["cache-control"]="max-age=".concat(o.cacheControl),i["content-type"]=o.contentType,s&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null===r||void 0===r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?de:ue)(this.fetch,"".concat(this.url,"/object/").concat(c),a,Object.assign({headers:i},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(Q(a))return{data:null,error:a};throw a}})}upload(e,t,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return fe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),i=new URL(this.url+"/object/upload/sign/".concat(o));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:me.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]="max-age=".concat(t.cacheControl),o["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield de(this.fetch,i.toString(),e,{headers:o})).Key},error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield ue(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),o=new URL(this.url+a.url),i=o.searchParams.get("token");if(!i)throw new X("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:i},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}update(e,t,n){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return fe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}copy(e,t,n){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ue(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return a={signedUrl:encodeURI("".concat(this.url).concat(a.signedURL).concat(o))},{data:a,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return fe(this,void 0,void 0,function*(){try{const r=yield ue(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(a)):null})),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}download(e,t){return fe(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),a=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield ce(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(a),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(o){if(Q(o))return{data:null,error:o};throw o}})}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield ce(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:re(e),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return ae(this,void 0,void 0,function*(){return le(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(Q(n)&&n instanceof ee){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==a&&r.push(a);const o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&r.push(i);let s=r.join("&");return""!==s&&(s="?".concat(s)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(o,"/public/").concat(n).concat(s))}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}list(e,t,n){return fe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},pe),t),{prefix:e||""});return{data:yield ue(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}listV2(e,t){return fe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ue(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const ve={"X-Client-Info":"storage-js/".concat("2.11.0")};var ye=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class xe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const a=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},ve),t),this.fetch=ne(n)}listBuckets(){return ye(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ye(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ye(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}}class be extends xe{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new ge(this.url,this.headers,e,this.fetch)}}let we="";we="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const je={headers:{"X-Client-Info":"supabase-js-".concat(we,"/").concat("2.56.1")}},_e={schema:"public"},Ne={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ke={};var Se=n(4621),Ae=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const Oe=e=>{let t;return t=e||("undefined"===typeof fetch?Se.default:fetch),function(){return t(...arguments)}},Ce=(e,t,n)=>{const r=Oe(n),a="undefined"===typeof Headers?Se.Headers:Headers;return(n,o)=>Ae(void 0,void 0,void 0,function*(){var i;const s=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null===o||void 0===o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(s)),r(n,Object.assign(Object.assign({},o),{headers:l}))})};var Pe=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};const Ee="2.71.1",Te=3e4,De=9e4,Ie={"X-Client-Info":"gotrue-js/".concat(Ee)},Me="X-Supabase-Api-Version",Re={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Le=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Fe extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function ze(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Be extends Fe{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ue extends Fe{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class We extends Fe{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class qe extends We{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class He extends We{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ve extends We{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ke extends We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $e extends We{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ge extends We{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ye(e){return ze(e)&&"AuthRetryableFetchError"===e.name}class Je extends We{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Xe extends We{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ze=" \t\n\r=".split(""),et=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ze.length;t+=1)e[Ze[t].charCodeAt(0)]=-2;for(let t=0;t<Qe.length;t+=1)e[Qe[t].charCodeAt(0)]=t;return e})();function tt(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Qe[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Qe[e]),t.queuedBits-=6}}function nt(e,t,n){const r=et[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rt(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)nt(e.charCodeAt(i),a,o);return t.join("")}function at(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function ot(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}at(r,t)}}function it(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)nt(e.charCodeAt(a),n,r);return new Uint8Array(t)}function st(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>tt(e,n,r)),tt(null,n,r),t.join("")}const lt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ct={tested:!1,writable:!1},ut=()=>{if(!lt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ct.tested)return ct.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ct.tested=!0,ct.writable=!0}catch(t){ct.tested=!0,ct.writable=!1}return ct.writable};const dt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4621)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ht=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ft=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},pt=async(e,t)=>{await e.removeItem(t)};class mt{constructor(){this.promise=new mt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function gt(e){const t=e.split(".");if(3!==t.length)throw new Xe("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Le.test(t[n]))throw new Xe("JWT not in base64url format");return{header:JSON.parse(rt(t[0])),payload:JSON.parse(rt(t[1])),signature:it(t[2]),raw:{header:t[0],payload:t[1]}}}function vt(e){return("0"+e.toString(16)).substr(-2)}async function yt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,vt).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await ht(e,"".concat(t,"-code-verifier"),a);const o=await yt(r);return[o,r===o?"plain":"s256"]}mt.promiseConstructor=Promise;const bt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const wt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jt(e){if(!wt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _t(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Nt(e){return JSON.parse(JSON.stringify(e))}var kt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const St=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),At=[502,503,504];async function Ot(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Ge(St(e),0);if(At.includes(e.status))throw new Ge(St(e),e.status);let r,a;try{r=await e.json()}catch(i){throw new Ue(St(i),i)}const o=function(e){const t=e.headers.get(Me);if(!t)return null;if(!t.match(bt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(o&&o.getTime()>=Re.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?a=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new Je(St(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new qe}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Je(St(r),e.status,r.weak_password.reasons);throw new Be(St(r),e.status||500,a)}async function Ct(e,t,n,r){var a;const o=Object.assign({},null===r||void 0===r?void 0:r.headers);o[Me]||(o[Me]=Re.name),(null===r||void 0===r?void 0:r.jwt)&&(o.Authorization="Bearer ".concat(r.jwt));const i=null!==(a=null===r||void 0===r?void 0:r.query)&&void 0!==a?a:{};(null===r||void 0===r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const s=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,a,o){const i=((e,t,n,r)=>{const a={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,a,o);let s;try{s=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new Ge(St(l),0)}s.ok||await Ot(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(l){await Ot(l)}}(e,t,n+s,{headers:o,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Pt(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Et(e){const t=Pt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Tt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Dt(e){return{data:e,error:null}}function It(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=e,i=kt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},user:Object.assign({},i)},error:null}}function Mt(e){return e}const Rt=["global","local","others"];var Lt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};class Ft{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=dt(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt[0];if(Rt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Rt.join(", ")));try{return await Ct(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Ct(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Tt})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Lt(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Ct(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:It,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(ze(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ct(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Tt})}catch(t){if(ze(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,o,i,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Ct(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Mt});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(s=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==s?s:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(ze(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){jt(e);try{return await Ct(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Tt})}catch(t){if(ze(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){jt(e);try{return await Ct(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Tt})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];jt(e);try{return await Ct(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Tt})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){jt(e.userId);try{const{data:t,error:n}=await Ct(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _deleteFactor(e){jt(e.userId),jt(e.id);try{return{data:await Ct(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}}}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Bt=!!(globalThis&&ut()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ut extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wt extends Ut{}async function qt(e,t,n){Bt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Bt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Bt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Bt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Bt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Bt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ht={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ie,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vt(e,t,n){return await n()}const Kt={};class $t{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$t.nextInstanceID,$t.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ht),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Ft({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=dt(r.fetch),this.lock=r.lock||Vt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:lt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=qt:this.lock=Vt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:ut()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zt(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=zt(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Kt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Kt[this.storageKey]=Object.assign(Object.assign({},Kt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Kt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kt[this.storageKey]=Object.assign(Object.assign({},Kt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Ee,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),lt()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return ze(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",i),await this._saveSession(o),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ze(t)?{error:t}:{error:new Ue("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await Ct(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Pt}),{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:o}=e;let i=null,s=null;"pkce"===this.flowType&&([i,s]=await xt(this.storage,this.storageKey)),a=await Ct(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:i,code_challenge_method:s},xform:Pt})}else{if(!("phone"in e))throw new Ve("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:i}=e;a=await Ct(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null===i||void 0===i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Pt})}}const{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(a){if(ze(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await Ct(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Et})}else{if(!("phone"in e))throw new Ve("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await Ct(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Et})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new He}}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,a,o,i,s,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if(lt())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(y.host," wants you to sign in with your Solana account:"),v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1","URI: ".concat(y.href),"Issued At: ".concat(null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?["Not Before: ".concat(g.signInWithSolana.notBefore)]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.expirationTime)?["Expiration Time: ".concat(g.signInWithSolana.expirationTime)]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(g.signInWithSolana.chainId)]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.nonce)?["Nonce: ".concat(g.signInWithSolana.nonce)]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(g.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Ct(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:st(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Pt});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new He}}catch(m){if(ze(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:a}=await Ct(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Pt});if(await pt(this.storage,"".concat(this.storageKey,"-code-verifier")),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new He}}catch(a){if(ze(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:o}=e,i=await Ct(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Pt}),{data:s,error:l}=i;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new He}}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,a,o;try{if("email"in e){const{email:r,options:a}=e;let o=null,i=null;"pkce"===this.flowType&&([o,i]=await xt(this.storage,this.storageKey));const{error:s}=await Ct(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null===a||void 0===a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:o,code_challenge_method:i},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:s}=await Ct(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(o=null===n||void 0===n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:s}}throw new Ve("You must provide either an email or phone number.")}catch(i){if(ze(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:i}=await Ct(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Pt});if(i)throw i;if(!o)throw new Error("An error occurred on token verification.");const s=o.session,l=o.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(ze(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let a=null,o=null;return"pkce"===this.flowType&&([a,o]=await xt(this.storage,this.storageKey)),await Ct(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Dt})}catch(a){if(ze(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new qe;const{error:r}=await Ct(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ze(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:a}=e,{error:o}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:o,error:i}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:i}}throw new Ve("You must provide either an email or phone number and a type")}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ft(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<De;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await ft(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=_t()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Ct(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Tt}):await this._useSession(async e=>{var t,n,r;const{data:a,error:o}=e;if(o)throw o;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Ct(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Tt}):{data:{user:null},error:new qe}})}catch(t){if(ze(t))return function(e){return ze(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await pt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new qe;const o=r.session;let i=null,s=null;"pkce"===this.flowType&&null!=e.email&&([i,s]=await xt(this.storage,this.storageKey));const{data:l,error:c}=await Ct(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:s}),jwt:o.access_token,xform:Tt});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qe;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:o}=gt(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(ze(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new qe;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(ze(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lt())throw new Ke("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ke(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new $e("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ke("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $e("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:o,expires_in:i,expires_at:s,token_type:l}=e;if(!a||!i||!o||!l)throw new Ke("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;s&&(d=parseInt(s));const h=d-c;1e3*h<=Te&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(a);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(ze(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ft(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{error:a};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return ze(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await pt(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await xt(this.storage,this.storageKey,!0));try{return await Ct(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(ze(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(ze(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,o,i;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Ct(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(o=s.session)||void 0===o?void 0:o.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return lt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(ze(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:o}=t;if(o)throw o;return await Ct(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Ct(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Pt})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ye(t)&&Date.now()+n-a<Te},new Promise((e,t)=>{(async()=>{for(let o=0;o<1/0;o++)try{const t=await n(o);if(!r(o,null,t))return void e(t)}catch(a){if(!r(o,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),ze(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),lt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ft(this.storage,this.storageKey);if(a&&this.userStorage){let t=await ft(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await ht(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:_t()}else if(a&&!a.user&&!a.user){const e=await ft(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await pt(this.storage,this.storageKey+"-user"),await ht(this.storage,this.storageKey,a)):a.user=_t()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const o=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<De;if(this._debug(n,"session has".concat(o?"":" not"," expired with margin of ").concat(De,"s")),o){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),Ye(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(n,"error",a),void console.error(a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new mt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new qe;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),ze(a)){const e={session:null,error:a};return Ye(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await ht(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Nt(e);await ht(this.storage,this.storageKey,r)}else{const e=Nt(t);await ht(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await pt(this.storage,this.storageKey),await pt(this.storage,this.storageKey+"-code-verifier"),await pt(this.storage,this.storageKey+"-user"),this.userStorage&&await pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Te);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Te);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Te,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Ut))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await xt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Ct(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:o}=t;if(o)return{data:null,error:o};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await Ct(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(n=null===a||void 0===a?void 0:a.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code="data:image/svg+xml;utf-8,".concat(s.totp.qr_code)),{data:s,error:null})})}catch(t){if(ze(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:i}=await Ct(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:i})})}catch(t){if(ze(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Ct(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(ze(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=gt(r.access_token);let i=null;o.aal&&(i=o.aal);let s=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:i,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:a}=await Ct(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(a)throw a;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:a,signature:o,raw:{header:i,payload:s}}=gt(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:o},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,o,function(e){const t=[];return ot(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(s))))throw new Xe("Invalid JWT signature");return{data:{claims:a,header:r,signature:o},error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}}$t.nextInstanceID=0;const Gt=$t;class Yt extends Gt{constructor(e){super(e)}}var Jt=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,s)}l((r=r.apply(e,t||[])).next())})};class Xt{constructor(e,t,n){var r,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),u=function(e,t){var n,r;const{db:a,auth:o,realtime:i,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>Pe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:_e,realtime:ke,auth:Object.assign(Object.assign({},Ne),{storageKey:c}),global:je});this.storageKey=null!==(r=u.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=u.global.headers)&&void 0!==a?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(o=u.auth)&&void 0!==o?o:{},this.headers,u.global.fetch),this.fetch=Ce(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new d(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new be(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Jt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:a,detectSessionInUrl:o,storage:i,storageKey:s,flowType:l,lock:c,debug:u}=e;const d={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Yt({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:s,autoRefreshToken:r,persistSession:a,detectSessionInUrl:o,storage:i,flowType:l,lock:c,debug:u,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new J(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qt=((e,t,n)=>new Xt(e,t,n))("https://rtjdqnuzeupbgbovbriy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ0amRxbnV6ZXVwYmdib3Zicml5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyNjYwOTUsImV4cCI6MjA3MTg0MjA5NX0.5oJes7rJykxuGX0BZFDt4LpTmRJAgoh0wHRpmJ8HTng");const Zt=new class{constructor(){this.client=Qt}async testConnection(){try{const{count:e,error:t}=await this.client.from("users").select("*",{count:"exact",head:!0});return t?{success:!1,message:"Connection failed",details:t.message}:{success:!0,message:"Connected successfully",details:"Users table has ".concat(e," rows")}}catch(e){return{success:!1,message:"Connection error",details:e.message}}}async isHealthy(){try{const{error:e}=await this.client.from("users").select("id").limit(1);if(e)return console.error("\u274c Database connection failed:",e.message),!!e.message.includes("permission denied")&&(console.error("\u274c Permission denied - check Supabase RLS policies and API key"),!1);const{error:t}=await this.client.from("users").select("id").limit(1);return!t||!t.message.includes("does not exist")||(console.log("\u26a0\ufe0f Users table does not exist - manual table creation required"),!1)}catch(e){return console.error("\u274c Database health check error:",e),!1}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let n=this.client.from(e).select("*");for(const e of t)e.column&&e.value&&(n=n.eq(e.column,e.value));const{data:r,error:a}=await n;if(a)throw a;return r||[]}catch(n){return console.error("Error fetching from ".concat(e,":"),n),[]}}async save(e,t){try{const{error:n}=await this.client.from(e).upsert(t);if(n)throw n;return{success:!0}}catch(n){throw console.error("Error saving to ".concat(e,":"),n),n}}async initializeTables(){try{console.log("\ud83d\udd04 Attempting to initialize database tables...");const{error:e}=await this.client.from("users").select("id").limit(1);if(e)throw console.error("\u274c No read access to database:",e.message),new Error("Database access denied: ".concat(e.message));const{error:t}=await this.client.rpc("exec_sql",{sql:"CREATE TABLE IF NOT EXISTS test_permissions (id SERIAL PRIMARY KEY);"});if(t)throw console.error("\u274c No write permissions:",t.message),new Error("Database write access denied: ".concat(t.message));await this.client.rpc("exec_sql",{sql:"DROP TABLE IF EXISTS test_permissions;"}),console.log("\u2705 Database permissions verified")}catch(e){throw console.error("\u274c Database initialization failed:",e),e}}async createTablesDirectly(){try{const{error:e}=await this.client.from("users").select("id").limit(1);e&&e.message.includes("does not exist")&&(console.log("\u26a0\ufe0f Tables do not exist. Please create them manually in Supabase."),console.log("\ud83d\udccb Required tables: users, agents, customers, staff, trips, rolling_records, buy_in_out_records, staff_shifts"))}catch(e){console.error("Direct table creation failed:",e)}}async initializeSampleDataIfNeeded(){try{const{data:e}=await this.client.from("users").select("*").eq("username","admin");e&&0!==e.length||(await this.client.from("users").insert([{id:"admin-1",username:"admin",password:"admin123",email:"admin@casino.com",role:"admin",status:"active"}]),console.log("\u2705 Admin user created"))}catch(e){console.error("Error initializing sample data:",e)}}async login(e,t){try{const{data:n,error:r}=await this.client.from("users").select("*").eq("username",e).eq("password",t).single();if(r||!n)throw new Error("Invalid username or password");return n}catch(n){throw console.error("Login error:",n),n}}async clearAllDataForFreshStart(){try{const e=["rolling_records","buy_in_out_records","staff_shifts","trip_customers","trip_expenses","trips","customers","agents","staff","users"];for(const t of e)await this.client.from(t).delete().neq("id","");await this.client.from("users").insert([{id:"admin-1",username:"admin",password:"admin123",role:"admin",status:"active"}]),console.log("\u2705 Fresh start completed - all data cleared and admin recreated")}catch(e){throw console.error("Error during fresh start:",e),e}}async exportAllData(){try{const e=["users","agents","customers","staff","trips","rolling_records","buy_in_out_records","staff_shifts"],t={};for(const n of e){const{data:e,error:r}=await this.client.from(n).select("*");if(r)throw r;t[n]=e||[]}return t}catch(e){throw console.error("Error exporting data:",e),e}}async importAllData(e){try{const t=["users","agents","customers","staff","trips","rolling_records","buy_in_out_records","staff_shifts"];for(const n of t)if(e[n]&&Array.isArray(e[n])&&e[n].length>0){const{error:t}=await this.client.from(n).insert(e[n]);if(t)throw t}return!0}catch(t){return console.error("Error importing data:",t),!1}}async restoreFromBackup(e,t){try{const n="string"===typeof t?parseInt(t):t;return console.log("Restoring from backup: ".concat(e," at ").concat(new Date(n).toISOString())),!0}catch(n){return console.error("Error restoring from backup:",n),!1}}getStats(){return{mode:"production",healthy:!0,lastHealthCheck:(new Date).toISOString(),backupCount:2}}getAvailableBackups(){return[{key:"backup_2024_01_01",timestamp:new Date(Date.now()-864e5).toISOString(),size:12e5,description:"Daily backup"},{key:"backup_2024_01_02",timestamp:new Date(Date.now()-432e5).toISOString(),size:15e5,description:"Manual backup"}]}get supabase(){return this.client}}},9501:(e,t,n)=>{"use strict";n.d(t,{apiClient:()=>o});var r=n(2555),a=n(7026);const o=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:3001/api";this.baseUrl=void 0,this.token=null,this.baseUrl=e,this.initializeToken()}async initializeToken(){try{const e=localStorage.getItem("casinoUser");if(e){const t=JSON.parse(e);t.token&&(this.token=t.token,console.log("\ud83d\udd11 ApiClient: Token loaded from localStorage on init"))}}catch(e){console.warn("\u26a0\ufe0f ApiClient: Failed to load token from localStorage:",e)}}setToken(e){this.token=e,a.b.setToken(e),console.log("\ud83d\udd11 ApiClient: Token set explicitly:",e?"YES":"NO")}async refreshToken(){console.log("\ud83d\udd04 ApiClient: Refreshing token...");const e=await a.b.getToken();return e?(this.token=e,console.log("\ud83d\udd11 ApiClient: Token refreshed successfully"),!0):(console.log("\u274c ApiClient: Token refresh failed - no token available"),!1)}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const o="".concat(this.baseUrl).concat(e),i=(0,r.A)({"Content-Type":"application/json"},t.headers);let s=n||this.token;if(!s)try{const e=localStorage.getItem("casinoUser");if(e){const t=JSON.parse(e);t.token&&(s=t.token,this.token=s,console.log("\ud83d\udd11 ApiClient Interceptor: Token retrieved from localStorage"))}}catch(l){console.warn("\u26a0\ufe0f ApiClient Interceptor: Failed to parse localStorage user data")}if(s||(s=await a.b.getToken()||null,s&&(this.token=s,console.log("\ud83d\udd11 ApiClient Interceptor: Token retrieved from TokenManager"))),"/auth/login"===e)console.log("\ud83d\udd13 ApiClient: Skipping auth for login endpoint");else{if(!s)return console.error("\u274c ApiClient Interceptor: No authentication token available"),{success:!1,error:"Authentication required - please login first"};i.Authorization="Bearer ".concat(s),console.log("\ud83d\udd11 ApiClient Interceptor: Added auth header for ".concat(e))}console.log("\ud83d\udce4 API Request:",{url:o,method:t.method||"GET",headers:i,body:t.body});try{const e=await fetch(o,(0,r.A)((0,r.A)({},t),{},{headers:i})),n=await e.json();if(!e.ok){if(401===e.status&&s)return console.warn("\ud83d\udd04 Token expired, clearing stored tokens..."),this.token=null,localStorage.removeItem("casinoUser"),a.b.clearToken(),{success:!1,error:"Session expired - please login again"};throw new Error(n.message||"HTTP error! status: ".concat(e.status))}return n}catch(l){return console.error("API request failed: ".concat(e),l),{success:!1,error:l instanceof Error?l.message:"Unknown error occurred"}}}async login(e,t){try{var n;console.log("\ud83d\udd10 ApiClient: Making login request...");const o=await this.request("/auth/login",{method:"POST",body:JSON.stringify({username:e,password:t})});if(console.log("\ud83d\udd10 ApiClient: Login response:",o),!o.success)throw new Error(o.error||"Login failed");let i=null,s=null;const l=o.data;if(null!==l&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.token?(i=l.data.token,s=l.data.user||{}):null!==l&&void 0!==l&&l.token&&(i=l.token,s=l.user||{}),i){console.log("\ud83d\udd11 ApiClient: Storing token after successful login"),this.setToken(i);const t=(0,r.A)((0,r.A)({},s),{},{token:i,id:s.id||"admin-1",username:s.username||e,role:s.role||"admin"});return localStorage.setItem("casinoUser",JSON.stringify(t)),console.log("\ud83d\udd11 ApiClient: Saved user with token to localStorage"),a.b.setToken(i),{success:!0,data:(0,r.A)((0,r.A)({},l||{}),{},{data:{token:i,user:t}})}}return o}catch(o){return console.error("Login request failed:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async getUsers(){return this.request("/users")}async createUser(e){return this.request("/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,t){return this.request("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request("/users/".concat(e),{method:"DELETE"})}async getCustomers(e){return this.request("/customers",{},e)}async createCustomer(e,t){return this.request("/customers",{method:"POST",body:JSON.stringify(e)},t)}async updateCustomer(e,t,n){return this.request("/customers/".concat(e),{method:"PUT",body:JSON.stringify(t)},n)}async deleteCustomer(e,t){return this.request("/customers/".concat(e),{method:"DELETE"},t)}async getAgents(e){return this.request("/agents",{},e)}async createAgent(e,t){return this.request("/agents",{method:"POST",body:JSON.stringify(e)},t)}async updateAgent(e,t,n){return this.request("/agents/".concat(e),{method:"PUT",body:JSON.stringify(t)},n)}async deleteAgent(e,t){return this.request("/agents/".concat(e),{method:"DELETE"},t)}async getAgentChildren(e,t){return this.request("/agents/".concat(e,"/children"),{},t)}async getAgentHierarchy(e){return this.request("/agents/hierarchy",{},e)}async updateAgentParent(e,t,n){return this.request("/agents/".concat(e,"/parent"),{method:"PUT",body:JSON.stringify({parent_agent_id:t})},n)}async getTrips(){return this.request("/trips")}async getTripsWithSharing(){console.log("\ud83d\udd04 ApiClient: Fetching trips with sharing data...");const e=await this.request("/trips");return console.log("\ud83d\udcca ApiClient: Trips with sharing data loaded:",Array.isArray(e.data)?e.data.length:0),e}async createTrip(e){return this.request("/trips",{method:"POST",body:JSON.stringify(e)})}async updateTrip(e,t){return this.request("/trips/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTrip(e){return this.request("/trips/".concat(e),{method:"DELETE"})}async getTripAgentSummary(e){return console.log("\ud83d\udcca ApiClient: Fetching agent summary for trip:",e),this.request("/trips/".concat(e,"/agent-summary"))}async getTransactions(){return this.request("/transactions")}async createTransaction(e){return this.request("/transactions",{method:"POST",body:JSON.stringify(e)})}async updateTransaction(e,t){return this.request("/transactions/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteTransaction(e){return this.request("/transactions/".concat(e),{method:"DELETE"})}async getCustomerTransactions(e,t){const n=t?"?trip_id=".concat(t):"";return this.request("/transactions/customer/".concat(e).concat(n))}async getRollingRecords(){return this.request("/rolling-records")}async createRolling(e){return this.request("/rolling-records",{method:"POST",body:JSON.stringify(e)})}async updateRolling(e,t){return this.request("/rolling-records/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteRolling(e){return this.request("/rolling-records/".concat(e),{method:"DELETE"})}async getCustomerRollings(e,t){const n=new URLSearchParams({customer_id:e});return t&&n.append("trip_id",t),this.request("/rolling-records?".concat(n.toString()))}async getReports(){return this.request("/reports")}async getDashboardStats(){return this.request("/reports/dashboard")}async getCustomerReport(e){return this.request("/reports/customer/".concat(e))}async getAgentReport(e){return this.request("/reports/agent/".concat(e))}async getTripReport(e){return this.request("/reports/trip/".concat(e))}async getCustomerDetails(e){return this.request("/customers/".concat(e,"/details"))}async createCustomerDetails(e,t){return this.request("/customers/".concat(e,"/details"),{method:"POST",body:JSON.stringify(t)})}async updateCustomerDetails(e,t){return this.request("/customers/".concat(e,"/details"),{method:"PUT",body:JSON.stringify(t)})}async deleteCustomerDetails(e){return this.request("/customers/".concat(e,"/details"),{method:"DELETE"})}async uploadCustomerAttachments(e,t){return this.request("/customers/".concat(e,"/attachments"),{method:"POST",body:JSON.stringify({attachments:t})})}async getCustomerAttachments(e){return this.request("/customers/".concat(e,"/attachments"))}async deleteCustomerAttachment(e,t){return this.request("/customers/".concat(e,"/attachments/").concat(t),{method:"DELETE"})}async uploadCustomerPassport(e,t){return this.request("/customers/".concat(e,"/passport"),{method:"POST",body:JSON.stringify(t)})}async promoteCustomerToAgent(e,t){return this.request("/customers/".concat(e,"/promote-to-agent"),{method:"POST",body:JSON.stringify({parent_agent_id:t})})}async getStaffs(){return this.request("/staffs")}async getStaff(e){return this.request("/staffs/".concat(e))}async createStaff(e){return this.request("/staffs",{method:"POST",body:JSON.stringify(e)})}async updateStaff(e,t){return this.request("/staffs/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteStaff(e){return this.request("/staffs/".concat(e),{method:"DELETE"})}async staffCheckIn(e,t){return this.request("/staffs/".concat(e,"/check-in"),{method:"POST",body:JSON.stringify(t)})}async staffCheckOut(e,t){return this.request("/staffs/".concat(e,"/check-out"),{method:"POST",body:JSON.stringify(t)})}async getStaffShifts(e,t){const n=t?new URLSearchParams(t).toString():"";return this.request("/staffs/".concat(e,"/shifts").concat(n?"?".concat(n):""))}async getStaffRollingRecords(e,t){const n=t?new URLSearchParams(t).toString():"";return this.request("/staffs/".concat(e,"/rolling-records").concat(n?"?".concat(n):""))}async get(e,t){return this.request(e,{method:"GET"},t)}async post(e,t,n){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0},n)}async put(e,t,n){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0},n)}async delete(e,t){return this.request(e,{method:"DELETE"},t)}}},9508:e=>{e.exports=function(e){return e.split("")}},9757:(e,t,n)=>{var r=n(6669),a=n(6010),o=n(3445);e.exports=function(e,t,n,i,s,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var v=e[p],y=t[p];if(i)var x=c?i(y,v,p,t,e,l):i(v,y,p,e,t,l);if(void 0!==x){if(x)continue;m=!1;break}if(g){if(!a(t,function(e,t){if(!o(g,t)&&(v===e||s(v,e,n,i,l)))return g.push(t)})){m=!1;break}}else if(v!==y&&!s(v,y,n,i,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},9769:(e,t,n)=>{var r=n(4489),a=n(3334),o=n(4243);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9794:(e,t,n)=>{var r=n(4567);e.exports=function(e){return e===e&&!r(e)}},9853:(e,t,n)=>{var r=n(2022),a=n(9248);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==r(e)}},9892:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+a+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[o,i,s].join("|")+")"+c+l+")*"),d="(?:"+[o+r+"?",r,i,s,n].join("|")+")",h=RegExp(a+"(?="+a+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},9939:(e,t,n)=>{var r=n(9954)();e.exports=r},9950:(e,t,n)=>{"use strict";e.exports=n(2049)},9954:(e,t,n)=>{var r=n(4181),a=n(9042),o=n(314);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&a(t,n,i)&&(n=i=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),i=void 0===i?t<n?1:-1:o(i),r(t,n,i,e)}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>Gy,scaleDiverging:()=>kN,scaleDivergingLog:()=>SN,scaleDivergingPow:()=>ON,scaleDivergingSqrt:()=>CN,scaleDivergingSymlog:()=>AN,scaleIdentity:()=>xw,scaleImplicit:()=>Ky,scaleLinear:()=>yw,scaleLog:()=>Ow,scaleOrdinal:()=>$y,scalePoint:()=>Jy,scalePow:()=>Lw,scaleQuantile:()=>Yw,scaleQuantize:()=>Jw,scaleRadial:()=>Bw,scaleSequential:()=>yN,scaleSequentialLog:()=>xN,scaleSequentialPow:()=>wN,scaleSequentialQuantile:()=>_N,scaleSequentialSqrt:()=>jN,scaleSequentialSymlog:()=>bN,scaleSqrt:()=>Fw,scaleSymlog:()=>Tw,scaleThreshold:()=>Xw,scaleTime:()=>pN,scaleUtc:()=>mN,tickFormat:()=>gw});var t=n(9950),r=n.t(t,2),a=n(1352),o=n(2555);function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=s(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function l(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=s(e))&&(r&&(r+=" "),r+=t);return r}const c=l,u=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),o=a?u(e.slice(1),a):void 0;if(o)return o;if(0===t.validators.length)return;const i=e.join("-");return null===(n=t.validators.find(e=>{let{validator:t}=e;return t(i)}))||void 0===n?void 0:n.classGroupId},d=/^\[(.+)\]$/,h=e=>{if(d.test(e)){const t=d.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},f=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return v(Object.entries(e.classGroups),n).forEach(e=>{let[n,a]=e;p(a,r,n,t)}),r},p=(e,t,n,r)=>{e.forEach(e=>{if("string"===typeof e){return void((""===e?t:m(t,e)).classGroupId=n)}if("function"===typeof e)return g(e)?void p(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(e=>{let[a,o]=e;p(o,m(t,a),n,r)})})},m=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},g=e=>e.isThemeGetter,v=(e,t)=>t?e.map(e=>{let[n,r]=e;const a=r.map(e=>"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map(e=>{let[n,r]=e;return[t+n,r]})):e);return[n,a]}):e,y=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},x=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,a=t[0],o=t.length,i=e=>{const n=[];let i,s=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===s){if(c===a&&(r||e.slice(d,d+o)===t)){n.push(e.slice(l,d)),l=d+o;continue}if("/"===c){i=d;continue}}"["===c?s++:"]"===c&&s--}const c=0===n.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return n?e=>n({className:e,parseClassName:i}):i},b=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},w=e=>(0,o.A)({cache:y(e.cacheSize),parseClassName:x(e)},(e=>{const t=f(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),u(n,t)||h(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&r[e]?[...a,...r[e]]:a}}})(e)),j=/\s+/;function _(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=N(e))&&(r&&(r+=" "),r+=t);return r}const N=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=N(e[r]))&&(n&&(n+=" "),n+=t);return n};function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a,o,i,s=function(t){const r=n.reduce((e,t)=>t(e),e());return a=w(r),o=a.cache.get,i=a.cache.set,s=l,l(t)};function l(e){const t=o(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,o=[],i=e.trim().split(j);let s="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let h=Boolean(d),f=r(h?u.substring(0,d):u);if(!f){if(!h){s=e+(s.length>0?" "+s:s);continue}if(f=r(u),!f){s=e+(s.length>0?" "+s:s);continue}h=!1}const p=b(t).join(":"),m=c?p+"!":p,g=m+f;if(o.includes(g))continue;o.push(g);const v=a(f,h);for(let n=0;n<v.length;++n){const e=v[n];o.push(m+e)}s=e+(s.length>0?" "+s:s)}return s})(e,a);return i(e,n),n}return function(){return s(_.apply(null,arguments))}}const S=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},A=/^\[(?:([a-z-]+):)?(.+)\]$/i,O=/^\d+\/\d+$/,C=new Set(["px","full","screen"]),P=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,M=e=>L(e)||C.has(e)||O.test(e),R=e=>J(e,"length",X),L=e=>Boolean(e)&&!Number.isNaN(Number(e)),F=e=>J(e,"number",L),z=e=>Boolean(e)&&Number.isInteger(Number(e)),B=e=>e.endsWith("%")&&L(e.slice(0,-1)),U=e=>A.test(e),W=e=>P.test(e),q=new Set(["length","size","percentage"]),H=e=>J(e,q,Q),V=e=>J(e,"position",Q),K=new Set(["image","url"]),$=e=>J(e,K,ee),G=e=>J(e,"",Z),Y=()=>!0,J=(e,t,n)=>{const r=A.exec(e);return!!r&&(r[1]?"string"===typeof t?r[1]===t:t.has(r[1]):n(r[2]))},X=e=>E.test(e)&&!T.test(e),Q=()=>!1,Z=e=>D.test(e),ee=e=>I.test(e),te=(Symbol.toStringTag,()=>{const e=S("colors"),t=S("spacing"),n=S("blur"),r=S("brightness"),a=S("borderColor"),o=S("borderRadius"),i=S("borderSpacing"),s=S("borderWidth"),l=S("contrast"),c=S("grayscale"),u=S("hueRotate"),d=S("invert"),h=S("gap"),f=S("gradientColorStops"),p=S("gradientColorStopPositions"),m=S("inset"),g=S("margin"),v=S("opacity"),y=S("padding"),x=S("saturate"),b=S("scale"),w=S("sepia"),j=S("skew"),_=S("space"),N=S("translate"),k=()=>["auto",U,t],A=()=>[U,t],O=()=>["",M,R],C=()=>["auto",L,U],P=()=>["","0",U],E=()=>[L,U];return{cacheSize:500,separator:":",theme:{colors:[Y],spacing:[M,R],blur:["none","",W,U],brightness:E(),borderColor:[e],borderRadius:["none","","full",W,U],borderSpacing:A(),borderWidth:O(),contrast:E(),grayscale:P(),hueRotate:E(),invert:P(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[B,R],inset:k(),margin:k(),opacity:E(),padding:A(),saturate:E(),scale:E(),sepia:P(),skew:E(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",U]}],container:["container"],columns:[{columns:[W]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",U]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",z,U]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",U]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",z,U]}],"grid-cols":[{"grid-cols":[Y]}],"col-start-end":[{col:["auto",{span:["full",z,U]},U]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[Y]}],"row-start-end":[{row:["auto",{span:[z,U]},U]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",U]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",U]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",U,t]}],"min-w":[{"min-w":[U,t,"min","max","fit"]}],"max-w":[{"max-w":[U,t,"none","full","min","max","fit","prose",{screen:[W]},W]}],h:[{h:[U,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[U,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[U,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[U,t,"auto","min","max","fit"]}],"font-size":[{text:["base",W,R]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",F]}],"font-family":[{font:[Y]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",U]}],"line-clamp":[{"line-clamp":["none",L,F]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",M,U]}],"list-image":[{"list-image":["none",U]}],"list-style-type":[{list:["none","disc","decimal",U]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",M,R]}],"underline-offset":[{"underline-offset":["auto",M,U]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",U]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",U]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",V]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",H]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[M,U]}],"outline-w":[{outline:[M,R]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[M,R]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",W,G]}],"shadow-color":[{shadow:[Y]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",W,U]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",U]}],duration:[{duration:E()}],ease:[{ease:["linear","in","out","in-out",U]}],delay:[{delay:E()}],animate:[{animate:["none","spin","ping","pulse","bounce",U]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[z,U]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",U]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",U]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",U]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[M,R,F]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),ne=k(te);function re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ne(l(t))}var ae=n(4414);const oe=["className","type"];function ie(e){let{className:t,type:n}=e,r=i(e,oe);return(0,ae.jsx)("input",(0,o.A)({type:n,"data-slot":"input",className:re("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t)},r))}var se=n(7119);function le(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function ce(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=le(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():le(t[e],null)}}}}function ue(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useCallback(ce(...n),n)}const de=["children"],he=["children"];function fe(e){const n=me(e),r=t.forwardRef((e,r)=>{const{children:a}=e,s=i(e,de),l=t.Children.toArray(a),c=l.find(ye);if(c){const e=c.props.children,a=l.map(n=>n===c?t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null:n);return(0,ae.jsx)(n,(0,o.A)((0,o.A)({},s),{},{ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,a):null}))}return(0,ae.jsx)(n,(0,o.A)((0,o.A)({},s),{},{ref:r,children:a}))});return r.displayName="".concat(e,".Slot"),r}var pe=fe("Slot");function me(e){const n=t.forwardRef((e,n)=>{const{children:r}=e,a=i(e,he);if(t.isValidElement(r)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const n=(0,o.A)({},t);for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=function(){const e=i(...arguments);return a(...arguments),e}:a&&(n[r]=a):"style"===r?n[r]=(0,o.A)((0,o.A)({},a),i):"className"===r&&(n[r]=[a,i].filter(Boolean).join(" "))}return(0,o.A)((0,o.A)({},e),n)}(a,r.props);return r.type!==t.Fragment&&(i.ref=n?ce(n,e):e),t.cloneElement(r,i)}return t.Children.count(r)>1?t.Children.only(null):null});return n.displayName="".concat(e,".SlotClone"),n}var ge=Symbol("radix.slottable");function ve(e){const t=e=>{let{children:t}=e;return(0,ae.jsx)(ae.Fragment,{children:t})};return t.displayName="".concat(e,".Slottable"),t.__radixId=ge,t}function ye(e){return t.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ge}const xe=["asChild"];var be=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{const r=fe("Primitive.".concat(n)),a=t.forwardRef((e,t)=>{const{asChild:a}=e,s=i(e,xe),l=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,ae.jsx)(l,(0,o.A)((0,o.A)({},s),{},{ref:t}))});return a.displayName="Primitive.".concat(n),(0,o.A)((0,o.A)({},e),{},{[n]:a})},{});var we=t.forwardRef((e,t)=>(0,ae.jsx)(be.label,(0,o.A)((0,o.A)({},e),{},{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));we.displayName="Label";var je=we;const _e=["className"];function Ne(e){let{className:t}=e,n=i(e,_e);return(0,ae.jsx)(je,(0,o.A)({"data-slot":"label",className:re("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t)},n))}const ke=["className"],Se=["className"],Ae=["className","children"],Oe=["className"],Ce=["className"],Pe=["className"],Ee=["className"],Te=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,ke);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"card",className:re("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n)},r))});Te.displayName="Card";const De=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Se);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"card-header",className:re("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n)},r))});De.displayName="CardHeader";const Ie=t.forwardRef((e,t)=>{let{className:n,children:r}=e,a=i(e,Ae);return(0,ae.jsx)("h4",(0,o.A)((0,o.A)({ref:t,"data-slot":"card-title",className:re("leading-none",n)},a),{},{children:r}))});Ie.displayName="CardTitle";const Me=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Oe);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"card-description",className:re("text-muted-foreground",n)},r))});Me.displayName="CardDescription";t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Ce);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"card-action",className:re("col-start-2 row-span-2 row-start-1 self-start justify-self-end",n)},r))}).displayName="CardAction";const Re=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Pe);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"card-content",className:re("px-6 [&:last-child]:pb-6",n)},r))});Re.displayName="CardContent";t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Ee);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"card-footer",className:re("flex items-center px-6 pb-6 [.border-t]:pt-6",n)},r))}).displayName="CardFooter";var Le=n(9424),Fe=n(9501);const ze=new class{constructor(){this.apiClient=Fe.apiClient,this.connectionCache=null,this.CACHE_DURATION=3e4}async testConnection(){try{if(this.connectionCache){if(Date.now()-this.connectionCache.timestamp<this.CACHE_DURATION)return console.log("\u26a1 Using cached connection result"),this.connectionCache.result}const e="http://localhost:3001/api",t=new AbortController,n=setTimeout(()=>t.abort(),5e3),r=await fetch("".concat(null===e||void 0===e?void 0:e.replace("/api",""),"/health"),{signal:t.signal});clearTimeout(n);const a=await r.json(),o=r.ok&&"OK"===a.status?{success:!0,message:"Connected successfully",details:"Backend API connection is healthy"}:{success:!1,message:"Connection failed",details:"Backend API is not responding"};return this.connectionCache={result:o,timestamp:Date.now()},o}catch(e){const t={success:!1,message:"Connection error",details:"AbortError"===e.name?"Connection timeout":e.message};return this.connectionCache={result:t,timestamp:Date.now()-(this.CACHE_DURATION-5e3)},t}}async isHealthy(){try{return(await this.testConnection()).success}catch(e){return console.error("\u274c Database health check error:",e),!1}}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let n=[];switch(e){case"users":const t=await Fe.apiClient.getUsers();n=t.success&&t.data||[];break;case"customers":const r=await Fe.apiClient.getCustomers();n=r.success&&r.data||[];break;case"agents":const a=await Fe.apiClient.getAgents();n=a.success&&a.data||[];break;case"trips":const o=await Fe.apiClient.getTrips();n=o.success&&o.data||[];break;case"transactions":const i=await Fe.apiClient.getTransactions();n=i.success&&i.data||[];break;case"staff":const s=await Fe.apiClient.getStaffs();n=s.success&&s.data||[];break;case"rolling_records":const l=await Fe.apiClient.get("/rolling-records");n=l.success&&l.data||[];break;default:return console.warn("Table ".concat(e," not supported in API wrapper")),[]}return t.length>0&&(n=n.filter(e=>t.every(t=>!t.column||void 0===t.value||e[t.column]===t.value))),n||[]}catch(n){return console.error("Error fetching from ".concat(e,":"),n),[]}}async save(e,t){try{const n=[];for(const r of t){let t;switch(e){case"users":t=await Fe.apiClient.createUser(r);break;case"customers":t=await Fe.apiClient.createCustomer(r);break;case"agents":t=await Fe.apiClient.createAgent(r);break;case"trips":t=await Fe.apiClient.createTrip(r);break;case"transactions":t=await Fe.apiClient.createTransaction(r);break;default:throw new Error("Table ".concat(e," not supported for save operation"))}n.push(t)}return{success:!0,results:n}}catch(n){throw console.error("Error saving to ".concat(e,":"),n),n}}async initializeTables(){try{return console.log("\ud83d\udd04 Backend API handles table initialization..."),!0}catch(e){throw console.error("\u274c Database initialization failed:",e),e}}async initializeSampleDataIfNeeded(){try{const e=Le.N.from("users").select("username").eq("username","admin").single(),t=new Promise((e,t)=>setTimeout(()=>t(new Error("Check timeout")),3e3)),{data:n}=await Promise.race([e,t]);if(n)console.log("\u26a1 Admin user already exists - skipping");else{console.log("\ud83d\udd27 Creating admin user...");const e=Le.N.auth.signUp({email:"admin@casino.com",password:"admin123",options:{data:{username:"admin",role:"admin"}}}).catch(e=>(console.warn("Auth creation skipped:",e.message),{data:{user:{id:"admin-1"}}})),t=(async()=>{try{return await Le.N.from("users").insert([{id:"admin-1",username:"admin",password:"admin123",role:"admin"}]),console.log("Profile created"),!0}catch(e){return e.message.includes("duplicate")||console.warn("Profile creation failed:",e),!1}})();await Promise.race([Promise.all([e,t]),new Promise((e,t)=>setTimeout(()=>t(new Error("Initialization timeout")),5e3))]),console.log("\u2705 Admin user initialized")}}catch(e){"Check timeout"===e.message||"Initialization timeout"===e.message?console.warn("\u26a0\ufe0f User initialization timed out - continuing anyway"):console.error("Error initializing sample data:",e)}}async login(e,t){try{var n;console.log("\ud83d\udd10 DatabaseWrapper: Starting login process...");const r=await Fe.apiClient.login(e,t);if(console.log("\ud83d\udd10 DatabaseWrapper: Login response:",r),!r.success)throw new Error(r.error||"Login failed");const a=r.data;let o=null,i=null;return null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.user?(o=a.data.user,i=a.data.token):null!==a&&void 0!==a&&a.user?(o=a.user,i=a.token):o={id:(null===a||void 0===a?void 0:a.id)||"admin-1",username:(null===a||void 0===a?void 0:a.username)||e,role:(null===a||void 0===a?void 0:a.role)||"admin"},console.log("\ud83d\udd11 DatabaseWrapper: User extracted:",o),console.log("\ud83d\udd11 DatabaseWrapper: Token present:",i?"YES":"NO"),o}catch(r){throw console.error("Login error:",r),r}}async clearAllDataForFreshStart(){try{return console.log("\u26a0\ufe0f Clear data operation should be handled by backend API"),!0}catch(e){throw console.error("Error during fresh start:",e),e}}async exportAllData(){try{const e={},t=["users","agents","customers","trips","transactions"];for(const n of t){const t=await this.get(n,[]);e[n]=t||[]}return e}catch(e){throw console.error("Error exporting data:",e),e}}async importAllData(e){try{const t=["users","agents","customers","trips","transactions"];for(const n of t)e[n]&&Array.isArray(e[n])&&e[n].length>0&&await this.save(n,e[n]);return!0}catch(t){return console.error("Error importing data:",t),!1}}getStats(){return{mode:"api",healthy:!0,lastHealthCheck:(new Date).toISOString(),backupCount:0}}getAvailableBackups(){return[]}async getStaffs(){try{console.log("\ud83d\udccb DatabaseWrapper: Fetching all staff members...");const e=await Fe.apiClient.getStaffs();if(!e.success)throw new Error(e.error||"Failed to fetch staff members");return e.data||[]}catch(e){throw console.error("\u274c DatabaseWrapper: Error fetching staff:",e),e}}async getStaff(e){try{console.log("\ud83d\udccb DatabaseWrapper: Fetching staff member: ".concat(e));const t=await Fe.apiClient.getStaff(e);if(!t.success)throw new Error(t.error||"Failed to fetch staff member");return t.data}catch(t){throw console.error("\u274c DatabaseWrapper: Error fetching staff:",t),t}}async createStaff(e){try{console.log("\ud83d\udc64 DatabaseWrapper: Creating staff member...");const t=await Fe.apiClient.createStaff(e);if(!t.success)throw new Error(t.error||"Failed to create staff member");return t.data}catch(t){throw console.error("\u274c DatabaseWrapper: Error creating staff:",t),t}}async updateStaff(e,t){try{console.log("\ud83d\udc64 DatabaseWrapper: Updating staff member: ".concat(e));const n=await Fe.apiClient.updateStaff(e,t);if(!n.success)throw new Error(n.error||"Failed to update staff member");return n.data}catch(n){throw console.error("\u274c DatabaseWrapper: Error updating staff:",n),n}}async deleteStaff(e){try{console.log("\ud83d\uddd1\ufe0f DatabaseWrapper: Deleting staff member: ".concat(e));const t=await Fe.apiClient.deleteStaff(e);if(!t.success)throw new Error(t.error||"Failed to delete staff member");return t.data}catch(t){throw console.error("\u274c DatabaseWrapper: Error deleting staff:",t),t}}async staffCheckIn(e,t){try{console.log("\u23f0 DatabaseWrapper: Staff check-in: ".concat(e));const n=await Fe.apiClient.staffCheckIn(e,t);if(!n.success)throw new Error(n.error||"Failed to check in staff member");return n.data}catch(n){throw console.error("\u274c DatabaseWrapper: Error checking in staff:",n),n}}async staffCheckOut(e,t){try{console.log("\u23f0 DatabaseWrapper: Staff check-out: ".concat(e));const n=await Fe.apiClient.staffCheckOut(e,t);if(!n.success)throw new Error(n.error||"Failed to check out staff member");return n.data}catch(n){throw console.error("\u274c DatabaseWrapper: Error checking out staff:",n),n}}async getStaffShifts(e,t){try{console.log("\ud83d\udccb DatabaseWrapper: Fetching shifts for staff: ".concat(e));const n=await Fe.apiClient.getStaffShifts(e,t);if(!n.success)throw new Error(n.error||"Failed to fetch staff shifts");return n.data||[]}catch(n){throw console.error("\u274c DatabaseWrapper: Error fetching staff shifts:",n),n}}async getStaffRollingRecords(e,t){try{console.log("\ud83d\udccb DatabaseWrapper: Fetching rolling records for staff: ".concat(e));const n=await Fe.apiClient.getStaffRollingRecords(e,t);if(!n.success)throw new Error(n.error||"Failed to fetch staff rolling records");return n.data||[]}catch(n){throw console.error("\u274c DatabaseWrapper: Error fetching staff rolling records:",n),n}}},Be=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ue=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},We=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const He=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Ve=(0,t.forwardRef)((e,n)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d}=e,h=i(e,He);return(0,t.createElement)("svg",(0,o.A)((0,o.A)({ref:n},qe),{},{width:a,height:a,stroke:r,strokeWidth:l?24*Number(s)/Number(a):s,className:We("lucide",c)},h),[...d.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),Ke=["className"],$e=(e,n)=>{const r=(0,t.forwardRef)((r,a)=>{let{className:s}=r,l=i(r,Ke);return(0,t.createElement)(Ve,(0,o.A)({ref:a,iconNode:n,className:We("lucide-".concat(Be(Ue(e))),"lucide-".concat(e),s)},l))});return r.displayName=Ue(e),r},Ge=$e("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ye=$e("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Je=$e("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Xe=$e("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Qe=$e("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ze=$e("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),et={50:"bg-blue-50 text-blue-700 border-blue-200",100:"bg-blue-100 text-blue-800 border-blue-300",500:"bg-blue-500 text-white border-blue-500",600:"bg-blue-600 text-white border-blue-600"},tt={50:"bg-green-50 text-green-700 border-green-200",100:"bg-green-100 text-green-800 border-green-300",500:"bg-green-500 text-white border-green-500",600:"bg-green-600 text-white border-green-600"},nt={50:"bg-yellow-50 text-yellow-700 border-yellow-200",100:"bg-yellow-100 text-yellow-800 border-yellow-300",500:"bg-yellow-500 text-white border-yellow-500",600:"bg-yellow-600 text-white border-yellow-600"},rt={50:"bg-red-50 text-red-700 border-red-200",100:"bg-red-100 text-red-800 border-red-300",500:"bg-red-500 text-white border-red-500",600:"bg-red-600 text-white border-red-600"},at={50:"bg-gray-50 text-gray-700 border-gray-200",100:"bg-gray-100 text-gray-800 border-gray-300",500:"bg-gray-500 text-white border-gray-500",600:"bg-gray-600 text-white border-gray-600"},ot="space-y-4 sm:space-y-6 px-2 sm:px-0",it="flex flex-col sm:flex-row gap-2 sm:space-x-2",st="text-xl sm:text-2xl font-bold",lt="text-lg sm:text-xl font-semibold",ct="text-base sm:text-lg font-medium",ut="text-sm sm:text-base",dt="text-xs sm:text-sm",ht="text-xs sm:text-sm font-medium text-gray-500",ft={xs:"h-6 px-2 text-xs",sm:"h-8 px-3 text-xs sm:text-sm",md:"h-10 px-4 text-sm sm:text-base",lg:"h-12 px-6 text-base sm:text-lg",mobile:"w-full sm:w-auto h-10 px-4 text-sm sm:text-base"},pt="w-3 h-3 sm:w-4 sm:h-4",mt=e=>{let{variant:t="primary",size:n="md",children:r,onClick:a,disabled:o=!1,icon:i,className:s="",type:l="button"}=e;return(0,ae.jsxs)("button",{type:l,onClick:a,disabled:o,className:"\n        ".concat(ft[n],"\n        ").concat((()=>{switch(t){case"primary":default:return"bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white border-blue-500";case"secondary":return"bg-gray-100 hover:bg-gray-200 active:bg-gray-300 text-gray-800 border-gray-300";case"success":return"bg-green-500 hover:bg-green-600 active:bg-green-700 text-white border-green-500";case"warning":return"bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700 text-white border-yellow-500";case"error":return"bg-red-500 hover:bg-red-600 active:bg-red-700 text-white border-red-500";case"outline":return"bg-white hover:bg-gray-50 active:bg-gray-100 text-gray-700 border-2 border-gray-300 hover:border-gray-400"}})(),"\n        flex items-center justify-center\n        rounded-md border\n        font-medium\n        transition-colors duration-200\n        disabled:opacity-50 disabled:cursor-not-allowed\n        touch-manipulation\n        ").concat(s,"\n      "),children:[i&&(0,ae.jsx)("span",{className:"mr-2",children:i}),r]})},gt=e=>{let{variant:t="gray",size:n="sm",children:r,className:a=""}=e;const o="sm"===n?"text-xs px-2 py-1":"text-sm px-3 py-1.5";return(0,ae.jsx)("span",{className:"\n      ".concat((()=>{switch(t){case"primary":return et[100];case"success":return tt[100];case"warning":return nt[100];case"error":return rt[100];default:return at[100]}})(),"\n      ").concat(o,"\n      rounded-full font-medium w-fit\n      ").concat(a,"\n    "),children:r})},vt=e=>{let{type:n,title:r,message:a,onClose:o,autoClose:i=!0,duration:s=3e3}=e;t.useEffect(()=>{if(i&&o){const e=setTimeout(o,s);return()=>clearTimeout(e)}},[i,s,o]);const l=(()=>{switch(n){case"success":return{icon:(0,ae.jsx)(Ye,{className:"h-5 w-5 text-green-500"}),bgClass:"border-green-200 bg-green-50",textClass:"text-green-800",titleClass:"text-green-800",buttonClass:"text-green-500 hover:text-green-700"};case"error":return{icon:(0,ae.jsx)(Je,{className:"h-5 w-5 text-red-500"}),bgClass:"border-red-200 bg-red-50",textClass:"text-red-800",titleClass:"text-red-800",buttonClass:"text-red-500 hover:text-red-700"};case"warning":return{icon:(0,ae.jsx)(Xe,{className:"h-5 w-5 text-yellow-500"}),bgClass:"border-yellow-200 bg-yellow-50",textClass:"text-yellow-800",titleClass:"text-yellow-800",buttonClass:"text-yellow-500 hover:text-yellow-700"};default:return{icon:(0,ae.jsx)(Qe,{className:"h-5 w-5 text-blue-500"}),bgClass:"border-blue-200 bg-blue-50",textClass:"text-blue-800",titleClass:"text-blue-800",buttonClass:"text-blue-500 hover:text-blue-700"}}})();return(0,ae.jsx)("div",{className:"fixed top-4 right-4 left-4 md:left-auto md:max-w-md z-50",children:(0,ae.jsx)("div",{className:"".concat(l.bgClass," shadow-lg rounded-lg p-4"),children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{className:"flex items-start",children:[(0,ae.jsx)("div",{className:"mt-0.5 mr-3",children:l.icon}),(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsx)("p",{className:"font-medium mb-1 ".concat(l.titleClass),children:r}),(0,ae.jsx)("p",{className:"text-sm ".concat(l.textClass),children:a})]})]}),o&&(0,ae.jsx)("button",{onClick:o,className:"".concat(l.buttonClass," transition-colors"),children:(0,ae.jsx)(Ze,{className:"w-4 h-4"})})]})})})},yt=e=>{let{children:t,columns:n=1,className:r=""}=e;const a=2===n?"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4":"space-y-3 sm:space-y-4";return(0,ae.jsx)("div",{className:"".concat(a," ").concat(r),children:t})},xt=e=>{let{children:t,className:n=""}=e;return(0,ae.jsx)("div",{className:"".concat(ot," ").concat(n),children:t})},bt=e=>{let{title:t,subtitle:n,badges:r=[],actions:a,className:o=""}=e;return(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-3 sm:space-y-0 ".concat(o),children:[(0,ae.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ae.jsx)("h2",{className:st,children:t}),n&&(0,ae.jsx)("p",{className:"".concat(ut," text-gray-600 mt-1"),children:n}),r.length>0&&(0,ae.jsx)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:r.map((e,t)=>(0,ae.jsx)(gt,{variant:e.variant,children:e.text},t))})]}),a&&(0,ae.jsx)("div",{className:"flex flex-col sm:flex-row gap-2",children:a})]})};function wt(e){let{onLogin:n}=e;const[r,a]=(0,t.useState)(""),[o,i]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1);return(0,ae.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-6 sm:py-12 px-2 sm:px-4 lg:px-8",children:(0,ae.jsxs)("div",{className:"max-w-md w-full",children:[s&&(0,ae.jsx)("div",{className:"mb-6",children:(0,ae.jsx)(vt,{type:"error",title:"Authentication Failed",message:s,onClose:()=>l(""),autoClose:!1})}),(0,ae.jsxs)(Te,{className:"bg-white/95 backdrop-blur-sm border-2 border-amber-300 shadow-2xl shadow-amber-500/20",children:[(0,ae.jsxs)(De,{className:"text-center pb-6 sm:pb-8 pt-6 sm:pt-8 px-4 sm:px-8",children:[(0,ae.jsx)("div",{className:"mb-4",children:(0,ae.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center shadow-lg",children:(0,ae.jsx)("span",{className:"text-lg sm:text-2xl font-bold text-white",children:"HW"})})}),(0,ae.jsx)(Ie,{className:"".concat(st," sm:text-3xl font-bold bg-gradient-to-r from-amber-600 to-amber-800 bg-clip-text text-transparent"),children:"Hoe Win Junket Management System"}),(0,ae.jsx)(Me,{className:"".concat(ut," text-slate-600 mt-3 font-medium"),children:"Professional Gaming Management Platform"})]}),(0,ae.jsx)(Re,{className:"px-4 sm:px-8 pb-6 sm:pb-8",children:(0,ae.jsx)("form",{onSubmit:async e=>{e.preventDefault(),l(""),u(!0);try{console.log("\ud83d\udd10 Starting login process..."),console.log("\ud83d\udc64 Username:",r),console.log("\ud83d\udd11 Password length:",o.length),console.log("\ud83d\udd0d Checking database health...");if(!await Le.db.isHealthy())throw new Error("Database connection failed. Please check your internet connection and try again.");console.log("\u2705 Database health check passed, attempting login...");const e=await ze.login(r,o);console.log("\u2705 Login successful for user:",e),console.log("\ud83d\udd0d User object structure:",JSON.stringify(e,null,2)),console.log("\ud83d\udd0d User role:",null===e||void 0===e?void 0:e.role),console.log("\ud83d\udd0d User token:",null!==e&&void 0!==e&&e.token?"Present":"Missing"),n(e)}catch(s){var t;if(console.error("\u274c Login error:",s),"admin"===r&&"admin123"===o&&null!==(t=s.message)&&void 0!==t&&t.includes("Invalid")){console.log("\ud83d\udd27 Login failed for admin, attempting to initialize admin account...");try{await Le.db.initializeSampleDataIfNeeded(),console.log("\u2705 Admin account initialized, retrying login...");const e=await ze.login(r,o);return console.log("\u2705 Retry login successful for user:",e),void n(e)}catch(a){return console.error("\u274c Failed to initialize admin account:",a),void l("Login failed. Admin initialization error: ".concat(a.message))}}l(s.message||"Login failed")}finally{u(!1)}},children:(0,ae.jsxs)(yt,{columns:1,children:[(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsx)(Ne,{htmlFor:"username",className:"".concat(ht," text-slate-700 font-semibold"),children:"Username"}),(0,ae.jsx)(ie,{id:"username",type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"Enter username",required:!0,disabled:c,className:"h-10 sm:h-12 border-2 border-slate-200 focus:border-amber-400 focus:ring-amber-400/20 bg-white/80 backdrop-blur-sm"})]}),(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsx)(Ne,{htmlFor:"password",className:"".concat(ht," text-slate-700 font-semibold"),children:"Password"}),(0,ae.jsx)(ie,{id:"password",type:"password",value:o,onChange:e=>i(e.target.value),placeholder:"Enter password",required:!0,disabled:c,className:"h-10 sm:h-12 border-2 border-slate-200 focus:border-amber-400 focus:ring-amber-400/20 bg-white/80 backdrop-blur-sm"})]}),s.includes("Invalid credentials")&&(0,ae.jsxs)("div",{className:"mt-3 p-3 bg-amber-50/80 border border-amber-200 rounded-md",children:[(0,ae.jsx)("div",{className:"".concat(dt," font-semibold mb-2 text-amber-800"),children:"Valid Credentials:"}),(0,ae.jsxs)("div",{className:"".concat(dt," space-y-1 text-amber-700"),children:[(0,ae.jsxs)("div",{children:["\u2022 Admin: ",(0,ae.jsx)("code",{className:"bg-amber-200 px-2 py-1 rounded font-mono text-xs",children:"admin / admin123"})]}),(0,ae.jsxs)("div",{children:["\u2022 Agent: ",(0,ae.jsx)("code",{className:"bg-amber-200 px-2 py-1 rounded font-mono text-xs",children:"agent1 / agent123"})]}),(0,ae.jsxs)("div",{children:["\u2022 Staff: ",(0,ae.jsx)("code",{className:"bg-amber-200 px-2 py-1 rounded font-mono text-xs",children:"staff1 / staff123"})]})]})]}),(0,ae.jsx)(mt,{type:"submit",variant:"primary",size:"mobile",disabled:c,className:"h-10 sm:h-12 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white font-semibold shadow-lg shadow-amber-500/25 border-0 transition-all duration-200",icon:c?(0,ae.jsx)(Ge,{className:"w-4 h-4 animate-spin"}):void 0,children:c?"Authenticating...":"Access Dashboard"})]})})})]})]})})}const jt=$e("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),_t=$e("trending-down",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Nt=$e("trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),kt=$e("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),St=$e("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),At=$e("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ot=$e("user-check",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Ct=$e("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Pt=$e("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Et=$e("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),Tt=$e("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Dt=$e("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),It=(0,t.createContext)(void 0),Mt={en:{dashboard:"Dashboard",customers:"Customers",agents:"Agents",staff:"Staff",projects:"Projects",data:"Data",checkinout:"Check-in/Out",boss:"Boss",trips:"Trips",trip_details:"Trip Details",expenses:"Expenses",transactions:"Transactions",sharing:"Sharing",reports:"Reports",settings:"Settings",project_management:"Project Management",back_to_trips:"Back to Trips",view_in:"View in:",total_rolling:"Total Rolling",total_win_loss:"Total Win/Loss",total_buy_in:"Total Buy In",total_buy_out:"Total Buy Out",net_result:"Net Result",total_expenses:"Total Expenses",active_customers:"Active Customers",recent_activity:"Recent Activity",refresh:"Refresh",add_new:"Add New",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",confirm:"Confirm",close:"Close",active:"Active",completed:"Completed",in_progress:"In Progress",cancelled:"Cancelled",pending:"Pending",name:"Name",description:"Description",date:"Date",amount:"Amount",status:"Status",actions:"Actions",loading:"Loading...",error:"Error",success:"Success",no_data:"No data available",currency:"Currency",exchange_rate:"Exchange Rate",hkd:"HKD",myr:"MYR",peso:"PESO",reports_title:"Real-time Reports Dashboard",reports_subtitle:"Comprehensive business intelligence and analytics",overview_metrics:"Overview Metrics",financial_summary:"Financial Summary",customer_metrics:"Customer Metrics",agent_performance:"Agent Performance",operational_metrics:"Operational Metrics",agent_hierarchy:"Agent Performance Hierarchy",agent_hierarchy_desc:"Hierarchical view of agents and their customers - expand to see customer details",sort_by:"Sort by:",reports_total_rolling:"Total Rolling",win_loss:"Win/Loss",customer_count:"Customer Count",average_rolling:"Average Rolling",agent_name:"Agent Name",individual_rolling:"Individual Rolling",individual_win:"Individual Win",trip_count:"Trip Count",profit_loss:"Profit/Loss",house_gross_win:"House Gross Win",house_net_win:"House Net Win",house_final_profit:"House Final Profit",reports_total_customers:"Total Customers",reports_active_customers:"Active Customers",total_agents:"Total Agents",active_agents:"Active Agents",total_trips:"Total Trips",completed_trips:"Completed Trips",ongoing_trips:"Ongoing Trips",profit_margin:"Profit Margin",rolling_percentage:"Rolling Percentage",company_share:"Company Share",net_cash_flow:"Net Cash Flow",real_time_sync:"Real-time Sync",last_sync:"Last Sync",connection_status:"Connection Status",connected:"Connected",disconnected:"Disconnected",sync_error:"Sync Error",auto_refresh:"Auto Refresh",manual_refresh:"Manual Refresh",export_data:"Export Data",financial_overview:"Real-time Financial Overview",total_rolling_amount:"Total Rolling Amount",company_gross_profit:"Company Gross Profit",overview_expenses:"Expenses",company_net_profit:"Company Net Profit",from_rolling_records:"From rolling records across customers",from_trip_sharing:"From trip sharing without data",total_operational_expenses:"Total operational expenses from trip sharing",company_share_from_trip:"Company share from trip sharing",operations_overview:"Operations Overview",overview_active_customers:"Active Customers",overview_active_agents:"Active Agents",overview_trip_summary:"Trip Summary",overview_recent_activity:"Recent Activity",of_total_customers:"of total customers",of_total_agents:"of total agents",completed_ongoing_planned:"completed, ongoing, planned",transactions_in_last_hours:"Transactions in last 24 hours",overview_active_trips:"Active Trips",current_ongoing_trips:"Current ongoing trips with real-time performance data",testing_trip:"Testing Trip",manila_okada:"Manila Okada",overview_progress:"Progress",overview_rolling:"Rolling",overview_win_loss:"Win/Loss",customer_performance:"Real-time Customer Performance",all_customers_based_on:"All customers based on live rolling data",sort_by_rolling:"Sort by: Rolling",agent_active:"Agent: \u2022 Active",overview_commission_rate:"Commission Rate",welcome_user:"Welcome",silver_vip:"Silver",gold_vip:"Gold",platinum_vip:"Platinum",diamond_vip:"Diamond",company_loss:"Company Loss",company_win:"Company Win",break_even:"Break Even",agent:"Agent",unknown_destination:"Unknown Destination",progress:"Progress",update_customer_info:"Update basic customer information",add_customer_desc:"Add a new customer with basic details. You can add extended details after creation.",customer_full_name:"Customer full name",select_agent:"Select an agent",no_customers_found:"No customers found",contact_admin:"Contact an administrator to add customers",add_first_customer:"Add your first customer to get started",records:"records",live_data:"Live Data",customer_since:"Customer since",details_available:"Details available",no_details_available:"No details available",edit_basic_info:"Edit Basic Info",edit_details:"Edit Details",promote_to_agent:"Promote to Agent",delete_customer:"Delete Customer",trips_loaded:"Trips Loaded",customers_available:"Customers Available",agents_available:"Agents Available",create_trip:"Create Trip",create_new_trip:"Create New Trip",create_trip_desc:"Create a new trip that will be saved to Supabase database.",trip_name:"Trip Name",start_date:"Start Date",end_date:"End Date",creating:"Creating...",loading_trips:"Loading trips...",no_trips_found:"No trips found",view_details:"View Details",amount_hkd:"Amount (HKD)",buy_in:"Buy-in",buy_out:"Buy-out"},zh:{dashboard:"\u4eea\u8868\u677f",customers:"\u5ba2\u6237",agents:"\u4ee3\u7406",staff:"\u5458\u5de5",projects:"\u9879\u76ee",data:"\u6570\u636e",checkinout:"\u7b7e\u5230/\u7b7e\u9000",boss:"\u8001\u677f",trips:"\u884c\u7a0b",trip_details:"\u884c\u7a0b\u8be6\u60c5",expenses:"\u8d39\u7528",transactions:"\u4ea4\u6613",sharing:"\u5206\u6210",reports:"\u62a5\u544a",settings:"\u8bbe\u7f6e",project_management:"\u9879\u76ee\u7ba1\u7406",back_to_trips:"\u8fd4\u56de\u884c\u7a0b",view_in:"\u67e5\u770b\u5e01\u79cd:",total_rolling:"\u603b\u6d41\u6c34",total_win_loss:"\u603b\u8f93\u8d62",total_buy_in:"\u603b\u4e70\u5165",total_buy_out:"\u603b\u4e70\u51fa",net_result:"\u51c0\u7ed3\u679c",total_expenses:"\u603b\u8d39\u7528",active_customers:"\u6d3b\u8dc3\u5ba2\u6237",recent_activity:"\u6700\u8fd1\u6d3b\u52a8",refresh:"\u5237\u65b0",add_new:"\u65b0\u589e",edit:"\u7f16\u8f91",delete:"\u5220\u9664",save:"\u4fdd\u5b58",cancel:"\u53d6\u6d88",confirm:"\u786e\u8ba4",close:"\u5173\u95ed",active:"\u6d3b\u8dc3",completed:"\u5df2\u5b8c\u6210",in_progress:"\u8fdb\u884c\u4e2d",cancelled:"\u5df2\u53d6\u6d88",pending:"\u5f85\u5904\u7406",name:"\u540d\u79f0",description:"\u63cf\u8ff0",date:"\u65e5\u671f",amount:"\u91d1\u989d",status:"\u72b6\u6001",actions:"\u64cd\u4f5c",loading:"\u52a0\u8f7d\u4e2d...",error:"\u9519\u8bef",success:"\u6210\u529f",no_data:"\u6682\u65e0\u6570\u636e",currency:"\u5e01\u79cd",exchange_rate:"\u6c47\u7387",hkd:"\u6e2f\u5e01",myr:"\u9a6c\u5e01",peso:"\u6bd4\u7d22",reports_title:"\u5b9e\u65f6\u62a5\u544a\u4eea\u8868\u677f",reports_subtitle:"\u5168\u9762\u7684\u5546\u4e1a\u667a\u80fd\u548c\u5206\u6790",overview_metrics:"\u6982\u89c8\u6307\u6807",financial_summary:"\u8d22\u52a1\u6458\u8981",customer_metrics:"\u5ba2\u6237\u6307\u6807",agent_performance:"\u4ee3\u7406\u8868\u73b0",operational_metrics:"\u8fd0\u8425\u6307\u6807",agent_hierarchy:"\u4ee3\u7406\u8868\u73b0\u5c42\u7ea7",agent_hierarchy_desc:"\u4ee3\u7406\u548c\u5ba2\u6237\u7684\u5c42\u7ea7\u89c6\u56fe - \u5c55\u5f00\u67e5\u770b\u5ba2\u6237\u8be6\u60c5",sort_by:"\u6392\u5e8f\u65b9\u5f0f:",reports_total_rolling:"\u603b\u6d41\u6c34",win_loss:"\u8f93\u8d62",customer_count:"\u5ba2\u6237\u6570\u91cf",average_rolling:"\u5e73\u5747\u6d41\u6c34",agent_name:"\u4ee3\u7406\u59d3\u540d",individual_rolling:"\u4e2a\u4eba\u6d41\u6c34",individual_win:"\u4e2a\u4eba\u8f93\u8d62",trip_count:"\u884c\u7a0b\u6570\u91cf",profit_loss:"\u76c8\u4e8f",house_gross_win:"\u5e84\u5bb6\u6bdb\u5229",house_net_win:"\u5e84\u5bb6\u51c0\u5229",house_final_profit:"\u5e84\u5bb6\u6700\u7ec8\u5229\u6da6",reports_total_customers:"\u603b\u5ba2\u6237\u6570",reports_active_customers:"\u6d3b\u8dc3\u5ba2\u6237",total_agents:"\u603b\u4ee3\u7406\u6570",active_agents:"\u6d3b\u8dc3\u4ee3\u7406",total_trips:"\u603b\u884c\u7a0b\u6570",completed_trips:"\u5df2\u5b8c\u6210\u884c\u7a0b",ongoing_trips:"\u8fdb\u884c\u4e2d\u884c\u7a0b",profit_margin:"\u5229\u6da6\u7387",rolling_percentage:"\u6d41\u6c34\u767e\u5206\u6bd4",company_share:"\u516c\u53f8\u5206\u6210",net_cash_flow:"\u51c0\u73b0\u91d1\u6d41",real_time_sync:"\u5b9e\u65f6\u540c\u6b65",last_sync:"\u6700\u540e\u540c\u6b65",connection_status:"\u8fde\u63a5\u72b6\u6001",connected:"\u5df2\u8fde\u63a5",disconnected:"\u5df2\u65ad\u5f00",sync_error:"\u540c\u6b65\u9519\u8bef",auto_refresh:"\u81ea\u52a8\u5237\u65b0",manual_refresh:"\u624b\u52a8\u5237\u65b0",export_data:"\u5bfc\u51fa\u6570\u636e",financial_overview:"\u5b9e\u65f6\u8d22\u52a1\u6982\u89c8",total_rolling_amount:"\u603b\u6d41\u6c34\u91d1\u989d",company_gross_profit:"\u516c\u53f8\u6bdb\u5229",overview_expenses:"\u8d39\u7528",company_net_profit:"\u516c\u53f8\u51c0\u5229\u6da6",from_rolling_records:"\u6765\u81ea\u5ba2\u6237\u6d41\u6c34\u8bb0\u5f55",from_trip_sharing:"\u6765\u81ea\u884c\u7a0b\u5206\u6210\u6570\u636e",total_operational_expenses:"\u884c\u7a0b\u5206\u6210\u7684\u603b\u8fd0\u8425\u8d39\u7528",company_share_from_trip:"\u884c\u7a0b\u5206\u6210\u7684\u516c\u53f8\u4efd\u989d",operations_overview:"\u8fd0\u8425\u6982\u89c8",overview_active_customers:"\u6d3b\u8dc3\u5ba2\u6237",overview_active_agents:"\u6d3b\u8dc3\u4ee3\u7406",overview_trip_summary:"\u884c\u7a0b\u6458\u8981",overview_recent_activity:"\u6700\u8fd1\u6d3b\u52a8",of_total_customers:"\u603b\u5ba2\u6237\u6570",of_total_agents:"\u603b\u4ee3\u7406\u6570",completed_ongoing_planned:"\u5df2\u5b8c\u6210\uff0c\u8fdb\u884c\u4e2d\uff0c\u8ba1\u5212\u4e2d",transactions_in_last_hours:"\u8fc7\u53bb24\u5c0f\u65f6\u4ea4\u6613",overview_active_trips:"\u6d3b\u8dc3\u884c\u7a0b",current_ongoing_trips:"\u5f53\u524d\u8fdb\u884c\u4e2d\u7684\u884c\u7a0b\u53ca\u5b9e\u65f6\u8868\u73b0\u6570\u636e",testing_trip:"\u6d4b\u8bd5\u884c\u7a0b",manila_okada:"\u9a6c\u5c3c\u62c9\u5965\u5361\u8fbe",overview_progress:"\u8fdb\u5ea6",overview_rolling:"\u6d41\u6c34",overview_win_loss:"\u8f93\u8d62",customer_performance:"\u5b9e\u65f6\u5ba2\u6237\u8868\u73b0",all_customers_based_on:"\u57fa\u4e8e\u5b9e\u65f6\u6d41\u6c34\u6570\u636e\u7684\u6240\u6709\u5ba2\u6237",sort_by_rolling:"\u6392\u5e8f\u65b9\u5f0f\uff1a\u6d41\u6c34",agent_active:"\u4ee3\u7406\uff1a\u2022 \u6d3b\u8dc3",overview_commission_rate:"\u4f63\u91d1\u7387",welcome_user:"\u6b22\u8fce",silver_vip:"\u94f6\u5361",gold_vip:"\u91d1\u5361",platinum_vip:"\u767d\u91d1\u5361",diamond_vip:"\u94bb\u77f3\u5361",company_loss:"\u516c\u53f8\u8f93\u94b1",company_win:"\u516c\u53f8\u8d62\u94b1",break_even:"\u6301\u5e73",agent:"\u4ee3\u7406",unknown_destination:"\u672a\u77e5\u76ee\u7684\u5730",progress:"\u8fdb\u5ea6",update_customer_info:"\u66f4\u65b0\u57fa\u672c\u5ba2\u6237\u4fe1\u606f",add_customer_desc:"\u6dfb\u52a0\u65b0\u5ba2\u6237\u7684\u57fa\u672c\u8be6\u60c5\u3002\u521b\u5efa\u540e\u53ef\u4ee5\u6dfb\u52a0\u6269\u5c55\u8be6\u60c5\u3002",customer_full_name:"\u5ba2\u6237\u5168\u540d",select_agent:"\u9009\u62e9\u4ee3\u7406",no_customers_found:"\u672a\u627e\u5230\u5ba2\u6237",contact_admin:"\u8054\u7cfb\u7ba1\u7406\u5458\u6dfb\u52a0\u5ba2\u6237",add_first_customer:"\u6dfb\u52a0\u60a8\u7684\u7b2c\u4e00\u4e2a\u5ba2\u6237\u5f00\u59cb\u4f7f\u7528",records:"\u8bb0\u5f55",live_data:"\u5b9e\u65f6\u6570\u636e",customer_since:"\u5ba2\u6237\u6ce8\u518c\u65f6\u95f4",details_available:"\u8be6\u60c5\u53ef\u7528",no_details_available:"\u65e0\u8be6\u60c5\u53ef\u7528",edit_basic_info:"\u7f16\u8f91\u57fa\u672c\u4fe1\u606f",edit_details:"\u7f16\u8f91\u8be6\u60c5",promote_to_agent:"\u63d0\u5347\u4e3a\u4ee3\u7406",delete_customer:"\u5220\u9664\u5ba2\u6237",trips_loaded:"\u5df2\u52a0\u8f7d\u884c\u7a0b",customers_available:"\u53ef\u7528\u5ba2\u6237",agents_available:"\u53ef\u7528\u4ee3\u7406",create_trip:"\u521b\u5efa\u884c\u7a0b",create_new_trip:"\u521b\u5efa\u65b0\u884c\u7a0b",create_trip_desc:"\u521b\u5efa\u4e00\u4e2a\u65b0\u884c\u7a0b\uff0c\u5c06\u4fdd\u5b58\u5230 Supabase \u6570\u636e\u5e93\u3002",trip_name:"\u884c\u7a0b\u540d\u79f0",start_date:"\u5f00\u59cb\u65e5\u671f",end_date:"\u7ed3\u675f\u65e5\u671f",creating:"\u521b\u5efa\u4e2d...",loading_trips:"\u52a0\u8f7d\u884c\u7a0b\u4e2d...",no_trips_found:"\u672a\u627e\u5230\u884c\u7a0b",view_details:"\u67e5\u770b\u8be6\u60c5",amount_hkd:"\u91d1\u989d (\u6e2f\u5e01)",buy_in:"\u4e70\u5165",buy_out:"\u4e70\u51fa"}},Rt=e=>{let{children:n}=e;const[r,a]=(0,t.useState)(()=>localStorage.getItem("language")||"en");(0,t.useEffect)(()=>{localStorage.setItem("language",r)},[r]);return(0,ae.jsx)(It.Provider,{value:{language:r,setLanguage:a,t:e=>Mt[r][e]||e},children:n})},Lt=()=>{const e=(0,t.useContext)(It);if(void 0===e)throw new Error("useLanguage must be used within a LanguageProvider");return e};function Ft(e){let{user:n}=e;const{t:r}=Lt(),[a,i]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)(!0),[v,y]=(0,t.useState)("rolling"),[x,b]=(0,t.useState)("desc"),w=e=>void 0===e||null===e||isNaN(e)?"0":e.toLocaleString(),j=e=>void 0===e||null===e||isNaN(e)?0:e,_=(0,t.useCallback)(async()=>{try{console.log("\ud83d\udd04 Loading dashboard data from API...");const[e,t,n,r]=await Promise.all([Le.db.get("agents",[]),Le.db.get("customers",[]),Le.db.get("transactions",[]),Fe.apiClient.getTripsWithSharing()]),a=r.data||[];console.log("\ud83d\udcca Dashboard data loaded:",{agents:Array.isArray(e)?e.length:0,customers:Array.isArray(t)?t.length:0,trips:Array.isArray(a)?a.length:0,transactions:Array.isArray(n)?n.length:0});const s=(Array.isArray(t)?t:[]).map(e=>(0,o.A)((0,o.A)({},e),{},{id:e.id,name:e.name,agentName:e.agent_name,isActive:"active"===e.status,totalRolling:parseFloat(e.total_rolling)||0,totalWinLoss:parseFloat(e.total_win_loss)||0,totalBuyIn:parseFloat(e.total_buy_in)||0,totalBuyOut:parseFloat(e.total_buy_out)||0,attachments:e.attachments||[],isAgent:e.is_agent||!1,rollingPercentage:parseFloat(e.rolling_percentage)||1.4,creditLimit:parseFloat(e.credit_limit)||0,availableCredit:parseFloat(e.available_credit)||0})),c=(Array.isArray(a)?a:[]).map(e=>(0,o.A)((0,o.A)({},e),{},{attachments:e.attachments||[]}));i(e),l(s),u(c),h([]),p(n||[]),console.log("\u2705 Dashboard data loaded: ".concat(s.length," customers, ").concat(e.length," agents, ").concat(c.length," trips"))}catch(e){console.error("\u274c Error loading dashboard data:",e)}finally{g(!1)}},[]);(0,t.useEffect)(()=>{_()},[_]);const{filteredCustomers:N,filteredTrips:k}=(()=>{let e=s,t=c;return"agent"===n.role&&n.agentId&&(e=s.filter(e=>e.agentId===n.agentId),t=c.filter(e=>e.agents&&e.agents.some(e=>e.agentId===n.agentId)||e.agentId===n.agentId)),{filteredCustomers:e,filteredTrips:t}})(),S=(()=>{const e=k.reduce((e,t)=>e+j(t.totalRolling),0),t=k.reduce((e,t)=>e+j(t.totalWinLoss),0),n=k.reduce((e,t)=>e+j(t.calculatedTotalRolling),0),r=k.reduce((e,t)=>e+(t.expenses||[]).reduce((e,t)=>e+j(t.amount),0),0),o=N.length,i=N.filter(e=>e.isActive).length,s=N.reduce((e,t)=>e+j(t.totalWinLoss),0),l=N.reduce((e,t)=>e+j(t.totalBuyIn),0),u=N.reduce((e,t)=>e+j(t.totalBuyOut),0),h=c.reduce((e,t)=>{var n,r,a,o;const i=j((null===(n=t.sharing)||void 0===n?void 0:n.total_rolling)||(null===(r=t.sharing)||void 0===r?void 0:r.totalRolling));return console.log("\ud83d\udd0d Trip ".concat(t.name,":"),{hasSharing:!!t.sharing,total_rolling:null===(a=t.sharing)||void 0===a?void 0:a.total_rolling,totalRolling:null===(o=t.sharing)||void 0===o?void 0:o.totalRolling,sharingObject:t.sharing,contributingValue:i}),e+i},0);console.log("\ud83d\udcca Dashboard Total Rolling Summary:",{totalTrips:c.length,tripsWithSharing:c.filter(e=>e.sharing).length,finalTotalRolling:h});const p=a.length,m=a.filter(e=>"active"===e.status).length,g=k.length,v=k.filter(e=>"completed"===e.status).length,y=k.filter(e=>"in-progress"===e.status).length,x=k.filter(e=>"active"===e.status).length;console.log("\ud83d\udd0d Debug trips data for calculations:",c.length),c.forEach((e,t)=>{console.log("Trip ".concat(t+1," (").concat(e.name,"):"),{hasSharing:!!e.sharing,sharingKeys:e.sharing?Object.keys(e.sharing):"no sharing",sharingData:e.sharing})});const b=c.reduce((e,t)=>{var n,r,a;const o=j((null===(n=t.sharing)||void 0===n?void 0:n.total_win_loss)||(null===(r=t.sharing)||void 0===r?void 0:r.totalWinLoss));return console.log("Trip ".concat(t.name,": total_win_loss = ").concat(null===(a=t.sharing)||void 0===a?void 0:a.total_win_loss,", contributing ").concat(o," to gross profit")),e+o},0),w=c.reduce((e,t)=>{var n,r,a;const o=j((null===(n=t.sharing)||void 0===n?void 0:n.total_expenses)||(null===(r=t.sharing)||void 0===r?void 0:r.totalExpenses));return console.log("Trip ".concat(t.name,": total_expenses = ").concat(null===(a=t.sharing)||void 0===a?void 0:a.total_expenses,", contributing ").concat(o," to expenses")),e+o},0),_=c.reduce((e,t)=>{var n,r,a;const o=j((null===(n=t.sharing)||void 0===n?void 0:n.company_share)||(null===(r=t.sharing)||void 0===r?void 0:r.companyShare));return console.log("Trip ".concat(t.name,": company_share = ").concat(null===(a=t.sharing)||void 0===a?void 0:a.company_share,", contributing ").concat(o," to net profit")),e+o},0);console.log("\ud83d\udcca Final calculations:",{tripSharingGrossProfit:b,tripSharingExpenses:w,tripSharingNetProfit:_});return{tripTotalRolling:e,tripTotalWinLoss:t,totalRollingCommission:n,totalExpenses:w,totalCustomers:o,activeCustomers:i,customerTotalRolling:h,customerTotalWinLoss:s,customerTotalBuyIn:l,customerTotalBuyOut:u,totalAgents:p,activeAgents:m,totalTrips:g,completedTrips:v,ongoingTrips:y,plannedTrips:x,houseGrossWin:b,houseNetWin:b-n,houseFinalProfit:_,profitMargin:h>0?_/h*100:0,expenseRatio:h>0?r/h*100:0,commissionRatio:h>0?n/h*100:0,recentRollingRecords:d.filter(e=>Date.now()-new Date(e.datetime||e.created_at).getTime()<864e5).length,recentBuyInOutRecords:f.filter(e=>Date.now()-new Date(e.timestamp).getTime()<864e5).length,totalRollingRecords:d.length,totalBuyInOutRecords:f.length}})(),A=k.filter(e=>e.status&&"active"===e.status.toLowerCase()).map(e=>{const t=N.filter(t=>{var n;return null===(n=e.customers)||void 0===n?void 0:n.some(e=>e.customerId===t.id)});return(0,o.A)((0,o.A)({},e),{},{customers:t})});return m?(0,ae.jsx)(xt,{children:(0,ae.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)(Ge,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"}),(0,ae.jsx)("p",{className:"mt-2 ".concat(dt," text-gray-600"),children:"Loading dashboard data..."})]})})}):(0,ae.jsxs)(xt,{children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h3",{className:"".concat(lt," mb-3 sm:mb-4 px-1 sm:px-0"),children:"Real-time Financial Overview"}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,ae.jsxs)(Te,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium text-blue-800",children:"Total Rolling Amount"}),(0,ae.jsx)(kt,{className:"h-4 w-4 text-blue-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-xl sm:text-2xl font-bold text-blue-700 break-words",children:["HK$",w(Math.abs(S.customerTotalRolling))]}),(0,ae.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["From ",S.totalRollingRecords," rolling records across ",S.totalCustomers," customers"]})]})]}),(0,ae.jsxs)(Te,{className:"bg-gradient-to-r ".concat(S.houseGrossWin>=0?"from-green-50 to-green-100 border-green-200":"from-red-50 to-red-100 border-red-200"),children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium ".concat(S.houseGrossWin>=0?"text-green-800":"text-red-800"),children:"Company Gross Profit"}),S.houseGrossWin>=0?(0,ae.jsx)(Nt,{className:"h-4 w-4 text-green-600"}):(0,ae.jsx)(_t,{className:"h-4 w-4 text-red-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-xl sm:text-2xl font-bold break-words ".concat(S.houseGrossWin>=0?"text-green-600":"text-red-600"),children:["HK$",w(Math.abs(S.houseGrossWin))]}),(0,ae.jsx)("p",{className:"text-xs mt-1 ".concat(S.houseGrossWin>=0?"text-green-600":"text-red-600"),children:"From trip sharing win/loss data"})]})]}),(0,ae.jsxs)(Te,{className:"bg-gradient-to-r from-red-50 to-red-100 border-red-200",children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium text-red-800",children:"Expenses"}),(0,ae.jsx)(St,{className:"h-4 w-4 text-red-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-2xl font-bold text-red-700",children:["HK$",w(Math.abs(S.totalExpenses))]}),(0,ae.jsx)("p",{className:"text-xs text-red-600",children:"Total operational expenses from trip sharing"})]})]}),(0,ae.jsxs)(Te,{className:"bg-gradient-to-r ".concat(S.houseFinalProfit>=0?"from-green-50 to-green-100 border-green-200":"from-red-50 to-red-100 border-red-200"),children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium ".concat(S.houseFinalProfit>=0?"text-green-800":"text-red-800"),children:"Company Net Profit"}),S.houseFinalProfit>=0?(0,ae.jsx)(Nt,{className:"h-4 w-4 text-green-600"}):(0,ae.jsx)(_t,{className:"h-4 w-4 text-red-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-2xl font-bold ".concat(S.houseFinalProfit>=0?"text-green-600":"text-red-600"),children:["HK$",w(Math.abs(S.houseFinalProfit))]}),(0,ae.jsx)("p",{className:"text-xs ".concat(S.houseFinalProfit>=0?"text-green-600":"text-red-600"),children:"Company share from trip sharing"})]})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h3",{className:"".concat(lt," mb-3 sm:mb-4 px-1 sm:px-0"),children:"Operations Overview"}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium",children:"Active Customers"}),(0,ae.jsx)(At,{className:"h-4 w-4 text-muted-foreground"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:S.activeCustomers}),(0,ae.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",S.totalCustomers," total customers"]})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium",children:"Active Agents"}),(0,ae.jsx)(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:S.activeAgents}),(0,ae.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",S.totalAgents," total agents"]})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium",children:"Trip Summary"}),(0,ae.jsx)(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:S.totalTrips}),(0,ae.jsxs)("p",{className:"text-xs text-muted-foreground",children:[S.completedTrips," completed, ",S.ongoingTrips," ongoing, ",S.plannedTrips," planned"]})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium",children:"Recent Activity"}),(0,ae.jsx)(Pt,{className:"h-4 w-4 text-muted-foreground"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-xl sm:text-2xl font-bold",children:S.recentRollingRecords+S.recentBuyInOutRecords}),(0,ae.jsx)("p",{className:"text-xs text-muted-foreground",children:"Transactions in last 24 hours"})]})]})]})]}),(0,ae.jsxs)(Te,{className:"h-full",children:[(0,ae.jsxs)(De,{className:"pb-3",children:[(0,ae.jsx)(Ie,{className:ct,children:"Active Trips"}),(0,ae.jsx)(Me,{className:"text-xs sm:text-sm",children:"Current ongoing trips with real-time performance data"})]}),(0,ae.jsx)(Re,{children:0===A.length?(0,ae.jsxs)("div",{className:"text-center py-8",children:[(0,ae.jsx)(Ct,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No active trips found"}),(0,ae.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Active trips will appear here when trips are in progress"})]}):(0,ae.jsx)("div",{className:"space-y-3 sm:space-y-4",children:A.slice(0,5).map(e=>{var t,n,a,o,i;const s=(null===(t=e.sharing)||void 0===t?void 0:t.total_rolling)||(null===(n=e.sharing)||void 0===n?void 0:n.totalRolling)||0,l=(null===(a=e.sharing)||void 0===a?void 0:a.total_win_loss)||(null===(o=e.sharing)||void 0===o?void 0:o.totalWinLoss)||0,c=e.date?new Date(e.date):null,u=c?new Date(c.getTime()+6048e5):null,d=new Date;let h=0;if(c&&u){const e=u.getTime()-c.getTime(),t=d.getTime()-c.getTime();h=Math.max(0,Math.min(100,t/e*100))}return(0,ae.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ae.jsx)("div",{className:"flex-shrink-0",children:(0,ae.jsx)(gt,{variant:"success",children:"active"===e.status?r("active"):"in-progress"===e.status?r("ongoing"):r("completed")})}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"font-medium",children:e.name||"Unnamed Trip"}),(0,ae.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,ae.jsx)(Ct,{className:"h-3 w-3 mr-1"}),e.description||r("unknown_destination")," \u2022 ",(null===(i=e.customers)||void 0===i?void 0:i.length)||0," ",r("customers")]}),(0,ae.jsxs)("p",{className:"text-xs text-blue-600",children:[r("progress"),": ",Math.round(h),"% \u2022 ",e.date?new Date(e.date).toLocaleDateString():"TBD"]})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6 text-right text-xs",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:r("rolling")}),(0,ae.jsxs)("div",{className:"font-medium text-blue-600",children:["HK$",w(Math.abs(s))]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:r("win_loss")}),(0,ae.jsxs)("div",{className:"font-medium ".concat(l<0?"text-red-600":l>=0?"text-green-600":"text-gray-600"),children:["HK$",w(Math.abs(l))]})]})]})]},e.id)})})})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-3",children:(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ie,{className:"text-base sm:text-lg",children:r("customer_performance")}),(0,ae.jsxs)(Me,{className:"text-xs sm:text-sm",children:[r("all_customers_based_on")," ","agent"===n.role?"you manage":""," (",N.length," ",r("customers"),")"]})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2 text-xs sm:text-sm",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-1 text-xs sm:text-sm",children:[(0,ae.jsx)("span",{className:"text-gray-500 hidden sm:inline",children:r("sort_by")}),(0,ae.jsxs)("button",{onClick:()=>y("rolling"===v?"winloss":"rolling"),className:"flex items-center space-x-1 px-2 py-1 rounded hover:bg-gray-100 transition-colors text-xs sm:text-sm",children:[(0,ae.jsx)("span",{className:"font-medium",children:r("rolling"===v?"rolling":"win_loss")}),(0,ae.jsx)(Et,{className:"h-3 w-3"})]})]}),(0,ae.jsx)("button",{onClick:()=>b("desc"===x?"asc":"desc"),className:"flex items-center px-2 py-1 rounded hover:bg-gray-100 transition-colors",title:"Sort ".concat("desc"===x?"ascending":"descending"),children:"desc"===x?(0,ae.jsx)(Tt,{className:"h-4 w-4 text-gray-600"}):(0,ae.jsx)(Dt,{className:"h-4 w-4 text-gray-600"})})]})]})}),(0,ae.jsx)(Re,{children:0===N.length?(0,ae.jsxs)("div",{className:"text-center py-8",children:[(0,ae.jsx)(At,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No customer data found"}),(0,ae.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Customer performance will appear here once rolling records are created"})]}):(0,ae.jsx)("div",{className:"space-y-3 sm:space-y-4 max-h-96 overflow-y-auto pr-1 sm:pr-2",children:(()=>{const e=[...N].sort((e,t)=>{let n,r;return"rolling"===v?(n=j(e.totalRolling),r=j(t.totalRolling)):(n=j(e.totalWinLoss),r=j(t.totalWinLoss)),"desc"===x?r-n:n-r});return e})().map(e=>{const t=(e=>0===e?{text:"Break Even",icon:jt,color:"text-gray-600"}:e>0?{text:"Junket Loss",icon:_t,color:"text-red-600"}:{text:"Junket Profit",icon:Nt,color:"text-green-600"})(e.totalWinLoss||0),n=t.icon,a=e.totalWinLoss||0;return(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 border rounded-lg hover:bg-gray-50 transition-colors space-y-2 sm:space-y-0",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1",children:[(0,ae.jsx)(n,{className:"h-4 w-4 sm:h-5 sm:w-5 ".concat(t.color," flex-shrink-0")}),(0,ae.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ae.jsx)("p",{className:"font-medium text-sm sm:text-base truncate",children:e.name}),(0,ae.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 truncate",children:[r("agent"),": ",e.agentName," \u2022 ",e.isActive?r("active"):r("inactive")]}),(0,ae.jsxs)("p",{className:"text-xs text-purple-600",children:[r("commission_rate"),": ",e.rollingPercentage,"%"]})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-6 text-right text-xs",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:r("rolling")}),(0,ae.jsxs)("div",{className:"font-medium text-blue-600",children:["HK$",w(Math.abs(e.totalRolling||0))]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:r("win_loss")}),(0,ae.jsxs)("div",{className:"font-medium ".concat(a<0?"text-red-600":a>0?"text-green-600":"text-gray-600"),children:["HK$",w(Math.abs(a))]}),(0,ae.jsx)("div",{className:"text-xs ".concat(a<0?"text-red-500":a>0?"text-green-500":"text-gray-500"),children:r(a<0?"company_loss":a>0?"company_win":"break_even")})]})]})]},e.id)})})})]})]})}const zt=["class","className"],Bt=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Ut=l,Wt=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return Ut(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:s}=t,l=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===s||void 0===s?void 0:s[e];if(null===t)return null;const o=Bt(t)||Bt(r);return a[e][o]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),u=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=i(t,zt);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes((0,o.A)((0,o.A)({},s),c)[t]):(0,o.A)((0,o.A)({},s),c)[t]===n})?[...e,n,r]:e},[]);return Ut(e,l,u,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)},qt=["className","variant","size","asChild"],Ht=Wt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Vt=t.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:s=!1}=e,l=i(e,qt);const c=s?pe:"button";return(0,ae.jsx)(c,(0,o.A)({"data-slot":"button",className:re(Ht({variant:r,size:a,className:n})),ref:t},l))});Vt.displayName="Button";const Kt=["className"];function $t(e){let{className:t}=e,n=i(e,Kt);return(0,ae.jsx)("textarea",(0,o.A)({"data-slot":"textarea",className:re("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t)},n))}function Gt(e){if(null==e)throw new TypeError("Cannot destructure "+e)}"undefined"===typeof window||!window.document||window.document.createElement;function Yt(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null===e||void 0===e||e(r),!1===n||!r.defaultPrevented)return null===t||void 0===t?void 0:t(r)}}const Jt=["children"],Xt=["scope","children"];function Qt(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const a=()=>{const n=r.map(e=>t.createContext(e));return function(r){const a=(null===r||void 0===r?void 0:r[e])||n;return t.useMemo(()=>({["__scope".concat(e)]:(0,o.A)((0,o.A)({},r),{},{[e]:a})}),[r,a])}};return a.scopeName=e,[function(n,a){const o=t.createContext(a),s=r.length;r=[...r,a];const l=n=>{var r;const{scope:a,children:l}=n,c=i(n,Xt),u=(null===a||void 0===a||null===(r=a[e])||void 0===r?void 0:r[s])||o,d=t.useMemo(()=>c,Object.values(c));return(0,ae.jsx)(u.Provider,{value:d,children:l})};return l.displayName=n+"Provider",[l,function(r,i){var l;const c=(null===i||void 0===i||null===(l=i[e])||void 0===l?void 0:l[s])||o,u=t.useContext(c);if(u)return u;if(void 0!==a)return a;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},Zt(a,...n)]}function Zt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const a=n[0];if(1===n.length)return a;const i=()=>{const e=n.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(n){const r=e.reduce((e,t)=>{let{useScope:r,scopeName:a}=t;const i=r(n)["__scope".concat(a)];return(0,o.A)((0,o.A)({},e),i)},{});return t.useMemo(()=>({["__scope".concat(a.scopeName)]:r}),[r])}};return i.scopeName=a.scopeName,i}var en=null!==globalThis&&void 0!==globalThis&&globalThis.document?t.useLayoutEffect:()=>{},tn=r[" useId ".trim().toString()]||(()=>{}),nn=0;function rn(e){const[n,r]=t.useState(tn());return en(()=>{e||r(e=>null!==e&&void 0!==e?e:String(nn++))},[e]),e||(n?"radix-".concat(n):"")}var an=r[" useInsertionEffect ".trim().toString()]||en;function on(e){let{prop:n,defaultProp:r,onChange:a=()=>{},caller:o}=e;const[i,s,l]=function(e){let{defaultProp:n,onChange:r}=e;const[a,o]=t.useState(n),i=t.useRef(a),s=t.useRef(r);return an(()=>{s.current=r},[r]),t.useEffect(()=>{var e;i.current!==a&&(null===(e=s.current)||void 0===e||e.call(s,a),i.current=a)},[a,i]),[a,o,s]}({defaultProp:r,onChange:a}),c=void 0!==n,u=c?n:i;{const e=t.useRef(void 0!==n);t.useEffect(()=>{const t=e.current;if(t!==c){const e=t?"controlled":"uncontrolled",n=c?"controlled":"uncontrolled";console.warn("".concat(o," is changing from ").concat(e," to ").concat(n,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=c},[c,o])}const d=t.useCallback(e=>{if(c){const r=function(e){return"function"===typeof e}(e)?e(n):e;var t;if(r!==n)null===(t=l.current)||void 0===t||t.call(l,r)}else s(e)},[c,n,s,l]);return[u,d]}Symbol("RADIX:SYNC_STATE");function sn(e){const n=t.useRef(e);return t.useEffect(()=>{n.current=e}),t.useMemo(()=>function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return null===(e=n.current)||void 0===e?void 0:e.call(n,...r)},[])}const ln=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"];var cn,un="dismissableLayer.update",dn="dismissableLayer.pointerDownOutside",hn="dismissableLayer.focusOutside",fn=t.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pn=t.forwardRef((e,n)=>{var r;const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,onDismiss:d}=e,h=i(e,ln),f=t.useContext(fn),[p,m]=t.useState(null),g=null!==(r=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,v]=t.useState({}),y=ue(n,e=>m(e)),x=Array.from(f.layers),[b]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(b),j=p?x.indexOf(p):-1,_=f.layersWithOutsidePointerEventsDisabled.size>0,N=j>=w,k=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=sn(e),a=t.useRef(!1),o=t.useRef(()=>{});return t.useEffect(()=>{const e=e=>{if(e.target&&!a.current){let t=function(){vn(dn,r,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}else n.removeEventListener("click",o.current);a.current=!1},t=window.setTimeout(()=>{n.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}},[n,r]),{onPointerDownCapture:()=>a.current=!0}}(e=>{const t=e.target,n=[...f.branches].some(e=>e.contains(t));N&&!n&&(null===l||void 0===l||l(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g),S=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=sn(e),a=t.useRef(!1);return t.useEffect(()=>{const e=e=>{if(e.target&&!a.current){vn(hn,r,{originalEvent:e},{discrete:!1})}};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)},[n,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{const t=e.target;[...f.branches].some(e=>e.contains(t))||(null===c||void 0===c||c(e),null===u||void 0===u||u(e),e.defaultPrevented||null===d||void 0===d||d())},g);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document;const r=sn(e);t.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e,{capture:!0}),()=>n.removeEventListener("keydown",e,{capture:!0})},[r,n])}(e=>{j===f.layers.size-1&&(null===s||void 0===s||s(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},g),t.useEffect(()=>{if(p)return a&&(0===f.layersWithOutsidePointerEventsDisabled.size&&(cn=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(p)),f.layers.add(p),gn(),()=>{a&&1===f.layersWithOutsidePointerEventsDisabled.size&&(g.body.style.pointerEvents=cn)}},[p,g,a,f]),t.useEffect(()=>()=>{p&&(f.layers.delete(p),f.layersWithOutsidePointerEventsDisabled.delete(p),gn())},[p,f]),t.useEffect(()=>{const e=()=>v({});return document.addEventListener(un,e),()=>document.removeEventListener(un,e)},[]),(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({},h),{},{ref:y,style:(0,o.A)({pointerEvents:_?N?"auto":"none":void 0},e.style),onFocusCapture:Yt(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Yt(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Yt(e.onPointerDownCapture,k.onPointerDownCapture)}))});pn.displayName="DismissableLayer";var mn=t.forwardRef((e,n)=>{const r=t.useContext(fn),a=t.useRef(null),i=ue(n,a);return t.useEffect(()=>{const e=a.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({},e),{},{ref:i}))});function gn(){const e=new CustomEvent(un);document.dispatchEvent(e)}function vn(e,t,n,r){let{discrete:a}=r;const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),a?function(e,t){e&&se.flushSync(()=>e.dispatchEvent(t))}(o,i):o.dispatchEvent(i)}mn.displayName="DismissableLayerBranch";const yn=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"];var xn="focusScope.autoFocusOnMount",bn="focusScope.autoFocusOnUnmount",wn={bubbles:!1,cancelable:!0},jn=t.forwardRef((e,n)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:s,onUnmountAutoFocus:l}=e,c=i(e,yn),[u,d]=t.useState(null),h=sn(s),f=sn(l),p=t.useRef(null),m=ue(n,e=>d(e)),g=t.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;t.useEffect(()=>{if(a){let e=function(e){if(g.paused||!u)return;const t=e.target;u.contains(t)?p.current=t:Sn(p.current,{select:!0})},t=function(e){if(g.paused||!u)return;const t=e.relatedTarget;null!==t&&(u.contains(t)||Sn(p.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Sn(u)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return u&&r.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[a,u,g.paused]),t.useEffect(()=>{if(u){An.add(g);const t=document.activeElement;if(!u.contains(t)){const n=new CustomEvent(xn,wn);u.addEventListener(xn,h),u.dispatchEvent(n),n.defaultPrevented||(!function(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=document.activeElement;for(const r of e)if(Sn(r,{select:t}),document.activeElement!==n)return}((e=_n(u),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Sn(u))}return()=>{u.removeEventListener(xn,h),setTimeout(()=>{const e=new CustomEvent(bn,wn);u.addEventListener(bn,f),u.dispatchEvent(e),e.defaultPrevented||Sn(null!==t&&void 0!==t?t:document.body,{select:!0}),u.removeEventListener(bn,f),An.remove(g)},0)}}var e},[u,h,f,g]);const v=t.useCallback(e=>{if(!r&&!a)return;if(g.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){const t=e.currentTarget,[a,o]=function(e){const t=_n(e),n=Nn(t,e),r=Nn(t.reverse(),e);return[n,r]}(t);a&&o?e.shiftKey||n!==o?e.shiftKey&&n===a&&(e.preventDefault(),r&&Sn(o,{select:!0})):(e.preventDefault(),r&&Sn(a,{select:!0})):n===t&&e.preventDefault()}},[r,a,g.paused]);return(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({tabIndex:-1},c),{},{ref:m,onKeyDown:v}))});function _n(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Nn(e,t){for(const n of e)if(!kn(n,{upTo:t}))return n}function kn(e,t){let{upTo:n}=t;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Sn(e){let{select:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}jn.displayName="FocusScope";var An=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null===n||void 0===n||n.pause()),e=On(e,t),e.unshift(t)},remove(t){var n;e=On(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function On(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const Cn=["container"];var Pn=t.forwardRef((e,n)=>{var r;const{container:a}=e,s=i(e,Cn),[l,c]=t.useState(!1);en(()=>c(!0),[]);const u=a||l&&(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body);return u?se.createPortal((0,ae.jsx)(be.div,(0,o.A)((0,o.A)({},s),{},{ref:n})),u):null});Pn.displayName="Portal";var En=e=>{const{present:n,children:r}=e,a=function(e){const[n,r]=t.useState(),a=t.useRef(null),o=t.useRef(e),i=t.useRef("none"),s=e?"mounted":"unmounted",[l,c]=function(e,n){return t.useReducer((e,t)=>{const r=n[e][t];return null!==r&&void 0!==r?r:e},e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect(()=>{const e=Tn(a.current);i.current="mounted"===l?e:"none"},[l]),en(()=>{const t=a.current,n=o.current;if(n!==e){const r=i.current,a=Tn(t);if(e)c("MOUNT");else if("none"===a||"none"===(null===t||void 0===t?void 0:t.display))c("UNMOUNT");else{c(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}o.current=e}},[e,c]),en(()=>{if(n){var e;let t;const r=null!==(e=n.ownerDocument.defaultView)&&void 0!==e?e:window,s=e=>{const i=Tn(a.current).includes(CSS.escape(e.animationName));if(e.target===n&&i&&(c("ANIMATION_END"),!o.current)){const e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},l=e=>{e.target===n&&(i.current=Tn(a.current))};return n.addEventListener("animationstart",l),n.addEventListener("animationcancel",s),n.addEventListener("animationend",s),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",l),n.removeEventListener("animationcancel",s),n.removeEventListener("animationend",s)}}c("ANIMATION_END")},[n,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:t.useCallback(e=>{a.current=e?getComputedStyle(e):null,r(e)},[])}}(n),o="function"===typeof r?r({present:a.isPresent}):t.Children.only(r),i=ue(a.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=r&&"isReactWarning"in r&&r.isReactWarning;if(a)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a)return e.props.ref;return e.props.ref||e.ref}(o));return"function"===typeof r||a.isPresent?t.cloneElement(o,{ref:i}):null};function Tn(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}En.displayName="Presence";var Dn=0;function In(){t.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:Mn()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:Mn()),Dn++,()=>{1===Dn&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Dn--}},[])}function Mn(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Rn=function(){return Rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rn.apply(this,arguments)};function Ln(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;function Fn(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var zn="right-scroll-bar-position",Bn="width-before-scroll-bar";function Un(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}var Wn="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,qn=new WeakMap;function Hn(e,n){var r=function(e,n){var r=(0,t.useState)(function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}})[0];return r.callback=n,r.facade}(n||null,function(t){return e.forEach(function(e){return Un(e,t)})});return Wn(function(){var t=qn.get(r);if(t){var n=new Set(t),a=new Set(e),o=r.current;n.forEach(function(e){a.has(e)||Un(e,null)}),a.forEach(function(e){n.has(e)||Un(e,o)})}qn.set(r,e)},[e]),r}function Vn(e){return e}function Kn(e,t){void 0===t&&(t=Vn);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},i=function(){return Promise.resolve().then(o)};i(),n={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),n}}}}}var $n=function(e){void 0===e&&(e={});var t=Kn(null);return t.options=Rn({async:!0,ssr:!1},e),t}(),Gn=function(){},Yn=t.forwardRef(function(e,n){var r=t.useRef(null),a=t.useState({onScrollCapture:Gn,onWheelCapture:Gn,onTouchMoveCapture:Gn}),o=a[0],i=a[1],s=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,m=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,x=void 0===y?"div":y,b=e.gapMode,w=Ln(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=f,_=Hn([r,n]),N=Rn(Rn({},w),o);return t.createElement(t.Fragment,null,d&&t.createElement(j,{sideCar:$n,removeScrollBar:u,shards:h,noRelative:p,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:b}),s?t.cloneElement(t.Children.only(l),Rn(Rn({},N),{ref:_})):t.createElement(x,Rn({},N,{className:c,ref:_}),l))});Yn.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Yn.classNames={fullWidth:Bn,zeroRight:zn};var Jn,Xn=function(e){var n=e.sideCar,r=Ln(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return t.createElement(a,Rn({},r))};Xn.isSideCarExport=!0;function Qn(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Jn||n.nc;return t&&e.setAttribute("nonce",t),e}var Zn=function(){var e=0,t=null;return{add:function(n){var r,a;0==e&&(t=Qn())&&(a=n,(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},er=function(){var e=function(){var e=Zn();return function(n,r){t.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&r])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},tr={left:0,top:0,right:0,gap:0},nr=function(e){return parseInt(e||"",10)||0},rr=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return tr;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[nr(n),nr(r),nr(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ar=er(),or="data-scroll-locked",ir=function(e,t,n,r){var a=e.left,o=e.top,i=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body[").concat(or,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(zn," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Bn," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(zn," .").concat(zn," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Bn," .").concat(Bn," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(or,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},sr=function(){var e=parseInt(document.body.getAttribute(or)||"0",10);return isFinite(e)?e:0},lr=function(e){var n=e.noRelative,r=e.noImportant,a=e.gapMode,o=void 0===a?"margin":a;t.useEffect(function(){return document.body.setAttribute(or,(sr()+1).toString()),function(){var e=sr()-1;e<=0?document.body.removeAttribute(or):document.body.setAttribute(or,e.toString())}},[]);var i=t.useMemo(function(){return rr(o)},[o]);return t.createElement(ar,{styles:ir(i,!n,o,r?"":"!important")})},cr=!1;if("undefined"!==typeof window)try{var ur=Object.defineProperty({},"passive",{get:function(){return cr=!0,!0}});window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch(YD){cr=!1}var dr=!!cr&&{passive:!1},hr=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},fr=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!==typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),pr(e,r)){var a=mr(e,r);if(a[1]>a[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},pr=function(e,t){return"v"===e?function(e){return hr(e,"overflowY")}(t):function(e){return hr(e,"overflowX")}(t)},mr=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},gr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vr=function(e){return[e.deltaX,e.deltaY]},yr=function(e){return e&&"current"in e?e.current:e},xr=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},br=0,wr=[];function jr(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const _r=(Nr=function(e){var n=t.useRef([]),r=t.useRef([0,0]),a=t.useRef(),o=t.useState(br++)[0],i=t.useState(er)[0],s=t.useRef(e);t.useEffect(function(){s.current=e},[e]),t.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=Fn([e.lockRef.current],(e.shards||[]).map(yr),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=t.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var n,o=gr(e),i=r.current,l="deltaX"in e?e.deltaX:i[0]-o[0],c="deltaY"in e?e.deltaY:i[1]-o[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=fr(d,u);if(!h)return!0;if(h?n=d:(n="v"===d?"h":"v",h=fr(d,u)),!h)return!1;if(!a.current&&"changedTouches"in e&&(l||c)&&(a.current=n),!n)return!0;var f=a.current||n;return function(e,t,n,r,a){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=o*r,s=n.target,l=t.contains(s),c=!1,u=i>0,d=0,h=0;do{if(!s)break;var f=mr(e,s),p=f[0],m=f[1]-f[2]-o*p;(p||m)&&pr(e,s)&&(d+=m,h+=p);var g=s.parentNode;s=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(u&&(a&&Math.abs(d)<1||!a&&i>d)||!u&&(a&&Math.abs(h)<1||!a&&-i>h))&&(c=!0),c}(f,t,e,"h"===f?l:c,!0)},[]),c=t.useCallback(function(e){var t=e;if(wr.length&&wr[wr.length-1]===i){var r="deltaY"in t?vr(t):gr(t),a=n.current.filter(function(e){return e.name===t.type&&(e.target===t.target||t.target===e.shadowParent)&&(n=e.delta,a=r,n[0]===a[0]&&n[1]===a[1]);var n,a})[0];if(a&&a.should)t.cancelable&&t.preventDefault();else if(!a){var o=(s.current.shards||[]).map(yr).filter(Boolean).filter(function(e){return e.contains(t.target)});(o.length>0?l(t,o[0]):!s.current.noIsolation)&&t.cancelable&&t.preventDefault()}}},[]),u=t.useCallback(function(e,t,r,a){var o={name:e,delta:t,target:r,should:a,shadowParent:jr(r)};n.current.push(o),setTimeout(function(){n.current=n.current.filter(function(e){return e!==o})},1)},[]),d=t.useCallback(function(e){r.current=gr(e),a.current=void 0},[]),h=t.useCallback(function(t){u(t.type,vr(t),t.target,l(t,e.lockRef.current))},[]),f=t.useCallback(function(t){u(t.type,gr(t),t.target,l(t,e.lockRef.current))},[]);t.useEffect(function(){return wr.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,dr),document.addEventListener("touchmove",c,dr),document.addEventListener("touchstart",d,dr),function(){wr=wr.filter(function(e){return e!==i}),document.removeEventListener("wheel",c,dr),document.removeEventListener("touchmove",c,dr),document.removeEventListener("touchstart",d,dr)}},[]);var p=e.removeScrollBar,m=e.inert;return t.createElement(t.Fragment,null,m?t.createElement(i,{styles:xr(o)}):null,p?t.createElement(lr,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},$n.useMedium(Nr),Xn);var Nr,kr=t.forwardRef(function(e,n){return t.createElement(Yn,Rn({},e,{ref:n,sideCar:_r}))});kr.classNames=Yn.classNames;const Sr=kr;var Ar=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},Or=new WeakMap,Cr=new WeakMap,Pr={},Er=0,Tr=function(e){return e&&(e.host||Tr(e.parentNode))},Dr=function(e,t,n,r){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=Tr(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Pr[n]||(Pr[n]=new WeakMap);var o=Pr[n],i=[],s=new Set,l=new Set(a),c=function(e){e&&!s.has(e)&&(s.add(e),c(e.parentNode))};a.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(s.has(e))u(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,l=(Or.get(e)||0)+1,c=(o.get(e)||0)+1;Or.set(e,l),o.set(e,c),i.push(e),1===l&&a&&Cr.set(e,!0),1===c&&e.setAttribute(n,"true"),a||e.setAttribute(r,"true")}catch(d){console.error("aria-hidden: cannot operate on ",e,d)}})};return u(t),s.clear(),Er++,function(){i.forEach(function(e){var t=Or.get(e)-1,a=o.get(e)-1;Or.set(e,t),o.set(e,a),t||(Cr.has(e)||e.removeAttribute(r),Cr.delete(e)),a||e.removeAttribute(n)}),--Er||(Or=new WeakMap,Or=new WeakMap,Cr=new WeakMap,Pr={})}},Ir=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=t||Ar(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),Dr(r,a,n,"aria-hidden")):function(){return null}};const Mr=["__scopeDialog"],Rr=["forceMount"],Lr=["__scopeDialog"],Fr=["forceMount"],zr=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Br=["__scopeDialog"],Ur=["__scopeDialog"],Wr=["__scopeDialog"];var qr="Dialog",[Hr,Vr]=Qt(qr),[Kr,$r]=Hr(qr),Gr=e=>{const{__scopeDialog:n,children:r,open:a,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,l=t.useRef(null),c=t.useRef(null),[u,d]=on({prop:a,defaultProp:null!==o&&void 0!==o&&o,onChange:i,caller:qr});return(0,ae.jsx)(Kr,{scope:n,triggerRef:l,contentRef:c,contentId:rn(),titleId:rn(),descriptionId:rn(),open:u,onOpenChange:d,onOpenToggle:t.useCallback(()=>d(e=>!e),[d]),modal:s,children:r})};Gr.displayName=qr;var Yr="DialogTrigger",Jr=t.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=i(e,Mr),a=$r(Yr,n),s=ue(t,a.triggerRef);return(0,ae.jsx)(be.button,(0,o.A)((0,o.A)({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":ga(a.open)},r),{},{ref:s,onClick:Yt(e.onClick,a.onOpenToggle)}))});Jr.displayName=Yr;var Xr="DialogPortal",[Qr,Zr]=Hr(Xr,{forceMount:void 0}),ea=e=>{const{__scopeDialog:n,forceMount:r,children:a,container:o}=e,i=$r(Xr,n);return(0,ae.jsx)(Qr,{scope:n,forceMount:r,children:t.Children.map(a,e=>(0,ae.jsx)(En,{present:r||i.open,children:(0,ae.jsx)(Pn,{asChild:!0,container:o,children:e})}))})};ea.displayName=Xr;var ta="DialogOverlay",na=t.forwardRef((e,t)=>{const n=Zr(ta,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=i(e,Rr),s=$r(ta,e.__scopeDialog);return s.modal?(0,ae.jsx)(En,{present:r||s.open,children:(0,ae.jsx)(aa,(0,o.A)((0,o.A)({},a),{},{ref:t}))}):null});na.displayName=ta;var ra=fe("DialogOverlay.RemoveScroll"),aa=t.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=i(e,Lr),a=$r(ta,n);return(0,ae.jsx)(Sr,{as:ra,allowPinchZoom:!0,shards:[a.contentRef],children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"data-state":ga(a.open)},r),{},{ref:t,style:(0,o.A)({pointerEvents:"auto"},r.style)}))})}),oa="DialogContent",ia=t.forwardRef((e,t)=>{const n=Zr(oa,e.__scopeDialog),{forceMount:r=n.forceMount}=e,a=i(e,Fr),s=$r(oa,e.__scopeDialog);return(0,ae.jsx)(En,{present:r||s.open,children:s.modal?(0,ae.jsx)(sa,(0,o.A)((0,o.A)({},a),{},{ref:t})):(0,ae.jsx)(la,(0,o.A)((0,o.A)({},a),{},{ref:t}))})});ia.displayName=oa;var sa=t.forwardRef((e,n)=>{const r=$r(oa,e.__scopeDialog),a=t.useRef(null),i=ue(n,r.contentRef,a);return t.useEffect(()=>{const e=a.current;if(e)return Ir(e)},[]),(0,ae.jsx)(ca,(0,o.A)((0,o.A)({},e),{},{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Yt(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Yt(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Yt(e.onFocusOutside,e=>e.preventDefault())}))}),la=t.forwardRef((e,n)=>{const r=$r(oa,e.__scopeDialog),a=t.useRef(!1),i=t.useRef(!1);return(0,ae.jsx)(ca,(0,o.A)((0,o.A)({},e),{},{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,o;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(a.current||null===(o=r.triggerRef.current)||void 0===o||o.focus(),t.preventDefault());a.current=!1,i.current=!1},onInteractOutside:t=>{var n,o;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target;(null===(o=r.triggerRef.current)||void 0===o?void 0:o.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}}))}),ca=t.forwardRef((e,n)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:l}=e,c=i(e,zr),u=$r(oa,r),d=t.useRef(null),h=ue(n,d);return In(),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(jn,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:l,children:(0,ae.jsx)(pn,(0,o.A)((0,o.A)({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":ga(u.open)},c),{},{ref:h,onDismiss:()=>u.onOpenChange(!1)}))}),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(ba,{titleId:u.titleId}),(0,ae.jsx)(wa,{contentRef:d,descriptionId:u.descriptionId})]})]})}),ua="DialogTitle",da=t.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=i(e,Br),a=$r(ua,n);return(0,ae.jsx)(be.h2,(0,o.A)((0,o.A)({id:a.titleId},r),{},{ref:t}))});da.displayName=ua;var ha="DialogDescription",fa=t.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=i(e,Ur),a=$r(ha,n);return(0,ae.jsx)(be.p,(0,o.A)((0,o.A)({id:a.descriptionId},r),{},{ref:t}))});fa.displayName=ha;var pa="DialogClose",ma=t.forwardRef((e,t)=>{const{__scopeDialog:n}=e,r=i(e,Wr),a=$r(pa,n);return(0,ae.jsx)(be.button,(0,o.A)((0,o.A)({type:"button"},r),{},{ref:t,onClick:Yt(e.onClick,()=>a.onOpenChange(!1))}))});function ga(e){return e?"open":"closed"}ma.displayName=pa;var va="DialogTitleWarning",[ya,xa]=function(e,n){const r=t.createContext(n),a=e=>{const{children:n}=e,a=i(e,Jt),o=t.useMemo(()=>a,Object.values(a));return(0,ae.jsx)(r.Provider,{value:o,children:n})};return a.displayName=e+"Provider",[a,function(a){const o=t.useContext(r);if(o)return o;if(void 0!==n)return n;throw new Error("`".concat(a,"` must be used within `").concat(e,"`"))}]}(va,{contentName:oa,titleName:ua,docsSlug:"dialog"}),ba=e=>{let{titleId:n}=e;const r=xa(va),a="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return t.useEffect(()=>{if(n){document.getElementById(n)||console.error(a)}},[a,n]),null},wa=e=>{let{contentRef:n,descriptionId:r}=e;const a=xa("DialogDescriptionWarning"),o="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(a.contentName,"}.");return t.useEffect(()=>{var e;const t=null===(e=n.current)||void 0===e?void 0:e.getAttribute("aria-describedby");if(r&&t){document.getElementById(r)||console.warn(o)}},[o,n,r]),null},ja=Gr,_a=Jr,Na=ea,ka=na,Sa=ia,Aa=da,Oa=fa,Ca=ma;const Pa=["className"],Ea=["className","children"],Ta=["className"],Da=["className"],Ia=["className"],Ma=["className"],Ra=ja,La=t.forwardRef((e,t)=>{let n=Object.assign({},(Gt(e),e));return(0,ae.jsx)(_a,(0,o.A)({ref:t,"data-slot":"dialog-trigger"},n))});La.displayName=_a.displayName;const Fa=Na;t.forwardRef((e,t)=>{let n=Object.assign({},(Gt(e),e));return(0,ae.jsx)(Ca,(0,o.A)({ref:t,"data-slot":"dialog-close"},n))}).displayName=Ca.displayName;const za=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Pa);return(0,ae.jsx)(ka,(0,o.A)({ref:t,"data-slot":"dialog-overlay",className:re("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n)},r))});za.displayName=ka.displayName;const Ba=t.forwardRef((e,t)=>{let{className:n,children:r}=e,a=i(e,Ea);return(0,ae.jsxs)(Fa,{children:[(0,ae.jsx)(za,{}),(0,ae.jsxs)(Sa,(0,o.A)((0,o.A)({ref:t,"data-slot":"dialog-content",className:re("bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n)},a),{},{children:[r,(0,ae.jsxs)(Ca,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,ae.jsx)(Ze,{}),(0,ae.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});Ba.displayName=Sa.displayName;const Ua=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Ta);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"dialog-header",className:re("flex flex-col gap-2 text-center sm:text-left",n)},r))});Ua.displayName="DialogHeader";t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Da);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"dialog-footer",className:re("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n)},r))}).displayName="DialogFooter";const Wa=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Ia);return(0,ae.jsx)(Aa,(0,o.A)({ref:t,"data-slot":"dialog-title",className:re("text-lg leading-none font-semibold",n)},r))});Wa.displayName=Aa.displayName;const qa=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Ma);return(0,ae.jsx)(Oa,(0,o.A)({ref:t,"data-slot":"dialog-description",className:re("text-muted-foreground text-sm",n)},r))});qa.displayName=Oa.displayName;const Ha=["__scopeAlertDialog"],Va=["__scopeAlertDialog"],Ka=["__scopeAlertDialog"],$a=["__scopeAlertDialog"],Ga=["__scopeAlertDialog","children"],Ya=["__scopeAlertDialog"],Ja=["__scopeAlertDialog"],Xa=["__scopeAlertDialog"],Qa=["__scopeAlertDialog"];var Za="AlertDialog",[eo,to]=Qt(Za,[Vr]),no=Vr(),ro=e=>{const{__scopeAlertDialog:t}=e,n=i(e,Ha),r=no(t);return(0,ae.jsx)(ja,(0,o.A)((0,o.A)((0,o.A)({},r),n),{},{modal:!0}))};ro.displayName=Za;var ao=t.forwardRef((e,t)=>{const{__scopeAlertDialog:n}=e,r=i(e,Va),a=no(n);return(0,ae.jsx)(_a,(0,o.A)((0,o.A)((0,o.A)({},a),r),{},{ref:t}))});ao.displayName="AlertDialogTrigger";var oo=e=>{const{__scopeAlertDialog:t}=e,n=i(e,Ka),r=no(t);return(0,ae.jsx)(Na,(0,o.A)((0,o.A)({},r),n))};oo.displayName="AlertDialogPortal";var io=t.forwardRef((e,t)=>{const{__scopeAlertDialog:n}=e,r=i(e,$a),a=no(n);return(0,ae.jsx)(ka,(0,o.A)((0,o.A)((0,o.A)({},a),r),{},{ref:t}))});io.displayName="AlertDialogOverlay";var so="AlertDialogContent",[lo,co]=eo(so),uo=ve("AlertDialogContent"),ho=t.forwardRef((e,n)=>{const{__scopeAlertDialog:r,children:a}=e,s=i(e,Ga),l=no(r),c=t.useRef(null),u=ue(n,c),d=t.useRef(null);return(0,ae.jsx)(ya,{contentName:so,titleName:fo,docsSlug:"alert-dialog",children:(0,ae.jsx)(lo,{scope:r,cancelRef:d,children:(0,ae.jsxs)(Sa,(0,o.A)((0,o.A)((0,o.A)({role:"alertdialog"},l),s),{},{ref:u,onOpenAutoFocus:Yt(s.onOpenAutoFocus,e=>{var t;e.preventDefault(),null===(t=d.current)||void 0===t||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,ae.jsx)(uo,{children:a}),(0,ae.jsx)(bo,{contentRef:c})]}))})})});ho.displayName=so;var fo="AlertDialogTitle",po=t.forwardRef((e,t)=>{const{__scopeAlertDialog:n}=e,r=i(e,Ya),a=no(n);return(0,ae.jsx)(Aa,(0,o.A)((0,o.A)((0,o.A)({},a),r),{},{ref:t}))});po.displayName=fo;var mo="AlertDialogDescription",go=t.forwardRef((e,t)=>{const{__scopeAlertDialog:n}=e,r=i(e,Ja),a=no(n);return(0,ae.jsx)(Oa,(0,o.A)((0,o.A)((0,o.A)({},a),r),{},{ref:t}))});go.displayName=mo;var vo=t.forwardRef((e,t)=>{const{__scopeAlertDialog:n}=e,r=i(e,Xa),a=no(n);return(0,ae.jsx)(Ca,(0,o.A)((0,o.A)((0,o.A)({},a),r),{},{ref:t}))});vo.displayName="AlertDialogAction";var yo="AlertDialogCancel",xo=t.forwardRef((e,t)=>{const{__scopeAlertDialog:n}=e,r=i(e,Qa),{cancelRef:a}=co(yo,n),s=no(n),l=ue(t,a);return(0,ae.jsx)(Ca,(0,o.A)((0,o.A)((0,o.A)({},s),r),{},{ref:l}))});xo.displayName=yo;var bo=e=>{let{contentRef:n}=e;const r="`".concat(so,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(so,"` by passing a `").concat(mo,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(so,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return t.useEffect(()=>{var e;document.getElementById(null===(e=n.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,n]),null},wo=ao,jo=oo,_o=io,No=ho,ko=vo,So=xo,Ao=po,Oo=go;const Co=["className"],Po=["className"],Eo=["className"],To=["className"],Do=["className"],Io=["className"],Mo=["className"],Ro=["className"],Lo=ro,Fo=t.forwardRef((e,t)=>{let n=Object.assign({},(Gt(e),e));return(0,ae.jsx)(wo,(0,o.A)({ref:t,"data-slot":"alert-dialog-trigger"},n))});Fo.displayName=wo.displayName;const zo=jo,Bo=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Co);return(0,ae.jsx)(_o,(0,o.A)({ref:t,"data-slot":"alert-dialog-overlay",className:re("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n)},r))});Bo.displayName=_o.displayName;const Uo=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Po);return(0,ae.jsxs)(zo,{children:[(0,ae.jsx)(Bo,{}),(0,ae.jsx)(No,(0,o.A)({ref:t,"data-slot":"alert-dialog-content",className:re("bg-white data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n)},r))]})});Uo.displayName=No.displayName;const Wo=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Eo);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"alert-dialog-header",className:re("flex flex-col gap-2 text-center sm:text-left",n)},r))});Wo.displayName="AlertDialogHeader";const qo=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,To);return(0,ae.jsx)("div",(0,o.A)({ref:t,"data-slot":"alert-dialog-footer",className:re("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n)},r))});qo.displayName="AlertDialogFooter";const Ho=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Do);return(0,ae.jsx)(Ao,(0,o.A)({ref:t,"data-slot":"alert-dialog-title",className:re("text-lg font-semibold",n)},r))});Ho.displayName=Ao.displayName;const Vo=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Io);return(0,ae.jsx)(Oo,(0,o.A)({ref:t,"data-slot":"alert-dialog-description",className:re("text-muted-foreground text-sm",n)},r))});Vo.displayName=Oo.displayName;const Ko=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Mo);return(0,ae.jsx)(ko,(0,o.A)({ref:t,"data-slot":"alert-dialog-action",className:re(Ht(),n)},r))});Ko.displayName=ko.displayName;const $o=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Ro);return(0,ae.jsx)(So,(0,o.A)({ref:t,"data-slot":"alert-dialog-cancel",className:re(Ht({variant:"outline"}),n)},r))});function Go(e,t){let[n,r]=t;return Math.min(r,Math.max(n,e))}function Yo(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function Jo(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Xo(e,t){return e.get(Jo(e,t))}function Qo(e,t,n){return e.set(Jo(e,t),n),n}var Zo;$o.displayName=So.displayName;const ei=["scope","children"];function ti(e){const n=e+"CollectionProvider",[r,a]=Qt(n),[s,l]=r(n,{collectionRef:{current:null},itemMap:new Map}),c=e=>{const{scope:n,children:r}=e,a=t.useRef(null),o=t.useRef(new Map).current;return(0,ae.jsx)(s,{scope:n,itemMap:o,collectionRef:a,children:r})};c.displayName=n;const u=e+"CollectionSlot",d=fe(u),h=t.forwardRef((e,t)=>{const{scope:n,children:r}=e,a=ue(t,l(u,n).collectionRef);return(0,ae.jsx)(d,{ref:a,children:r})});h.displayName=u;const f=e+"CollectionItemSlot",p="data-radix-collection-item",m=fe(f),g=t.forwardRef((e,n)=>{const{scope:r,children:a}=e,s=i(e,ei),c=t.useRef(null),u=ue(n,c),d=l(f,r);return t.useEffect(()=>(d.itemMap.set(c,(0,o.A)({ref:c},s)),()=>{d.itemMap.delete(c)})),(0,ae.jsx)(m,(0,o.A)((0,o.A)({},{[p]:""}),{},{ref:u,children:a}))});return g.displayName=f,[{Provider:c,Slot:h,ItemSlot:g},function(n){const r=l(e+"CollectionConsumer",n),a=t.useCallback(()=>{const e=r.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll("[".concat(p,"]"))),n=Array.from(r.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return n},[r.collectionRef,r.itemMap]);return a},a]}var ni=new WeakMap;Zo=new WeakMap,Map;function ri(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);const n=function(e,t){const n=e.length,r=ai(t),a=r>=0?r:n+r;return a<0||a>=n?-1:a}(e,t);return-1===n?void 0:e[n]}function ai(e){return e!==e||0===e?0:Math.trunc(e)}var oi=t.createContext(void 0);function ii(e){const n=t.useContext(oi);return e||n||"ltr"}const si=["top","right","bottom","left"],li=Math.min,ci=Math.max,ui=Math.round,di=Math.floor,hi=e=>({x:e,y:e}),fi={left:"right",right:"left",bottom:"top",top:"bottom"},pi={start:"end",end:"start"};function mi(e,t,n){return ci(e,li(t,n))}function gi(e,t){return"function"===typeof e?e(t):e}function vi(e){return e.split("-")[0]}function yi(e){return e.split("-")[1]}function xi(e){return"x"===e?"y":"x"}function bi(e){return"y"===e?"height":"width"}const wi=new Set(["top","bottom"]);function ji(e){return wi.has(vi(e))?"y":"x"}function _i(e){return xi(ji(e))}function Ni(e){return e.replace(/start|end/g,e=>pi[e])}const ki=["left","right"],Si=["right","left"],Ai=["top","bottom"],Oi=["bottom","top"];function Ci(e,t,n,r){const a=yi(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Si:ki:t?ki:Si;case"left":case"right":return t?Ai:Oi;default:return[]}}(vi(e),"start"===n,r);return a&&(o=o.map(e=>e+"-"+a),t&&(o=o.concat(o.map(Ni)))),o}function Pi(e){return e.replace(/left|right|bottom|top/g,e=>fi[e])}function Ei(e){return"number"!==typeof e?function(e){return(0,o.A)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Ti(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}const Di=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Ii=["strategy"],Mi=["mainAxis","crossAxis","limiter"],Ri=["apply"];function Li(e,t,n){let{reference:r,floating:a}=e;const o=ji(t),i=_i(t),s=bi(i),l=vi(t),c="y"===o,u=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[s]/2-a[s]/2;let f;switch(l){case"top":f={x:u,y:r.y-a.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-a.width,y:d};break;default:f={x:r.x,y:r.y}}switch(yi(t)){case"start":f[i]-=h*(n&&c?-1:1);break;case"end":f[i]+=h*(n&&c?-1:1)}return f}async function Fi(e,t){var n;void 0===t&&(t={});const{x:r,y:a,platform:o,rects:i,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=gi(t,e),p=Ei(f),m=s[h?"floating"===d?"reference":"floating":d],g=Ti(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),x=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},b=Ti(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-b.top+p.top)/x.y,bottom:(b.bottom-g.bottom+p.bottom)/x.y,left:(g.left-b.left+p.left)/x.x,right:(b.right-g.right+p.right)/x.x}}function zi(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Bi(e){return si.some(t=>e[t]>=0)}const Ui=new Set(["left","top"]);function Wi(){return"undefined"!==typeof window}function qi(e){return Ki(e)?(e.nodeName||"").toLowerCase():"#document"}function Hi(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Vi(e){var t;return null==(t=(Ki(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ki(e){return!!Wi()&&(e instanceof Node||e instanceof Hi(e).Node)}function $i(e){return!!Wi()&&(e instanceof Element||e instanceof Hi(e).Element)}function Gi(e){return!!Wi()&&(e instanceof HTMLElement||e instanceof Hi(e).HTMLElement)}function Yi(e){return!(!Wi()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Hi(e).ShadowRoot)}const Ji=new Set(["inline","contents"]);function Xi(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=cs(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Ji.has(a)}const Qi=new Set(["table","td","th"]);function Zi(e){return Qi.has(qi(e))}const es=[":popover-open",":modal"];function ts(e){return es.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const ns=["transform","translate","scale","rotate","perspective"],rs=["transform","translate","scale","rotate","perspective","filter"],as=["paint","layout","strict","content"];function os(e){const t=is(),n=$i(e)?cs(e):e;return ns.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||rs.some(e=>(n.willChange||"").includes(e))||as.some(e=>(n.contain||"").includes(e))}function is(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const ss=new Set(["html","body","#document"]);function ls(e){return ss.has(qi(e))}function cs(e){return Hi(e).getComputedStyle(e)}function us(e){return $i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ds(e){if("html"===qi(e))return e;const t=e.assignedSlot||e.parentNode||Yi(e)&&e.host||Vi(e);return Yi(t)?t.host:t}function hs(e){const t=ds(e);return ls(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gi(t)&&Xi(t)?t:hs(t)}function fs(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const a=hs(e),o=a===(null==(r=e.ownerDocument)?void 0:r.body),i=Hi(a);if(o){const e=ps(i);return t.concat(i,i.visualViewport||[],Xi(a)?a:[],e&&n?fs(e):[])}return t.concat(a,fs(a,[],n))}function ps(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ms(e){const t=cs(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Gi(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:r,s=ui(n)!==o||ui(r)!==i;return s&&(n=o,r=i),{width:n,height:r,$:s}}function gs(e){return $i(e)?e:e.contextElement}function vs(e){const t=gs(e);if(!Gi(t))return hi(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:o}=ms(t);let i=(o?ui(n.width):n.width)/r,s=(o?ui(n.height):n.height)/a;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}const ys=hi(0);function xs(e){const t=Hi(e);return is()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ys}function bs(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const a=e.getBoundingClientRect(),o=gs(e);let i=hi(1);t&&(r?$i(r)&&(i=vs(r)):i=vs(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Hi(e))&&t}(o,n,r)?xs(o):hi(0);let l=(a.left+s.x)/i.x,c=(a.top+s.y)/i.y,u=a.width/i.x,d=a.height/i.y;if(o){const e=Hi(o),t=r&&$i(r)?Hi(r):r;let n=e,a=ps(n);for(;a&&r&&t!==n;){const e=vs(a),t=a.getBoundingClientRect(),r=cs(a),o=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=i,n=Hi(a),a=ps(n)}}return Ti({width:u,height:d,x:l,y:c})}function ws(e,t){const n=us(e).scrollLeft;return t?t.left+n:bs(Vi(e)).left+n}function js(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-ws(e,n),y:n.top+t.scrollTop}}const _s=new Set(["absolute","fixed"]);function Ns(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Hi(e),r=Vi(e),a=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,s=0,l=0;if(a){o=a.width,i=a.height;const e=is();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,l=a.offsetTop)}const c=ws(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,i=Math.abs(r.clientWidth-t.clientWidth-a);i<=25&&(o-=i)}else c<=25&&(o+=c);return{width:o,height:i,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=Vi(e),n=us(e),r=e.ownerDocument.body,a=ci(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=ci(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+ws(e);const s=-n.scrollTop;return"rtl"===cs(r).direction&&(i+=ci(t.clientWidth,r.clientWidth)-a),{width:a,height:o,x:i,y:s}}(Vi(e));else if($i(t))r=function(e,t){const n=bs(e,!0,"fixed"===t),r=n.top+e.clientTop,a=n.left+e.clientLeft,o=Gi(e)?vs(e):hi(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:a*o.x,y:r*o.y}}(t,n);else{const n=xs(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Ti(r)}function ks(e,t){const n=ds(e);return!(n===t||!$i(n)||ls(n))&&("fixed"===cs(n).position||ks(n,t))}function Ss(e,t,n){const r=Gi(t),a=Vi(t),o="fixed"===n,i=bs(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=hi(0);function c(){l.x=ws(a)}if(r||!r&&!o)if(("body"!==qi(t)||Xi(a))&&(s=us(t)),r){const e=bs(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&c();o&&!r&&a&&c();const u=!a||r||o?hi(0):js(a,s);return{x:i.left+s.scrollLeft-l.x-u.x,y:i.top+s.scrollTop-l.y-u.y,width:i.width,height:i.height}}function As(e){return"static"===cs(e).position}function Os(e,t){if(!Gi(e)||"fixed"===cs(e).position)return null;if(t)return t(e);let n=e.offsetParent;return Vi(e)===n&&(n=n.ownerDocument.body),n}function Cs(e,t){const n=Hi(e);if(ts(e))return n;if(!Gi(e)){let t=ds(e);for(;t&&!ls(t);){if($i(t)&&!As(t))return t;t=ds(t)}return n}let r=Os(e,t);for(;r&&Zi(r)&&As(r);)r=Os(r,t);return r&&ls(r)&&As(r)&&!os(r)?n:r||function(e){let t=ds(e);for(;Gi(t)&&!ls(t);){if(os(t))return t;if(ts(t))return null;t=ds(t)}return null}(e)||n}const Ps={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const o="fixed"===a,i=Vi(r),s=!!t&&ts(t.floating);if(r===i||s&&o)return n;let l={scrollLeft:0,scrollTop:0},c=hi(1);const u=hi(0),d=Gi(r);if((d||!d&&!o)&&(("body"!==qi(r)||Xi(i))&&(l=us(r)),Gi(r))){const e=bs(r);c=vs(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!i||d||o?hi(0):js(i,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Vi,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[..."clippingAncestors"===n?ts(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=fs(e,[],!1).filter(e=>$i(e)&&"body"!==qi(e)),a=null;const o="fixed"===cs(e).position;let i=o?ds(e):e;for(;$i(i)&&!ls(i);){const t=cs(i),n=os(i);n||"fixed"!==t.position||(a=null),(o?!n&&!a:!n&&"static"===t.position&&a&&_s.has(a.position)||Xi(i)&&!n&&ks(e,i))?r=r.filter(e=>e!==i):a=t,i=ds(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],i=o[0],s=o.reduce((e,n)=>{const r=Ns(t,n,a);return e.top=ci(r.top,e.top),e.right=li(r.right,e.right),e.bottom=li(r.bottom,e.bottom),e.left=ci(r.left,e.left),e},Ns(t,i,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Cs,getElementRects:async function(e){const t=this.getOffsetParent||Cs,n=this.getDimensions,r=await n(e.floating);return{reference:Ss(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=ms(e);return{width:t,height:n}},getScale:vs,isElement:$i,isRTL:function(e){return"rtl"===cs(e).direction}};function Es(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ts(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:c=!1}=r,u=gs(e),d=a||i?[...u?fs(u):[],...fs(t)]:[];d.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)});const h=u&&l?function(e,t){let n,r=null;const a=Vi(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(l||t(),!f||!p)return;const m={rootMargin:-di(h)+"px "+-di(a.clientWidth-(d+f))+"px "+-di(a.clientHeight-(h+p))+"px "+-di(d)+"px",threshold:ci(0,li(1,c))||1};let g=!0;function v(t){const r=t[0].intersectionRatio;if(r!==c){if(!g)return s();r?s(!1,r):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||Es(u,e.getBoundingClientRect())||s(),g=!1}try{r=new IntersectionObserver(v,(0,o.A)((0,o.A)({},m),{},{root:a.ownerDocument}))}catch(y){r=new IntersectionObserver(v,m)}r.observe(e)}(!0),i}(u,n):null;let f,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g=c?bs(e):null;return c&&function t(){const r=bs(e);g&&!Es(g,r)&&n();g=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)}),null==h||h(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(f)}}const Ds=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:l}=t,c=await async function(e,t){const{placement:n,platform:r,elements:a}=e,o=await(null==r.isRTL?void 0:r.isRTL(a.floating)),i=vi(n),s=yi(n),l="y"===ji(n),c=Ui.has(i)?-1:1,u=o&&l?-1:1,d=gi(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"===typeof p&&(f="end"===s?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return s===(null==(n=l.offset)?void 0:n.placement)&&null!=(r=l.arrow)&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:(0,o.A)((0,o.A)({},c),{},{placement:s})}}}},Is=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,s=gi(e,t),{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}}}=s,d=i(s,Mi),h={x:n,y:r},f=await Fi(t,d),p=ji(vi(a)),m=xi(p);let g=h[m],v=h[p];if(l){const e="y"===m?"bottom":"right";g=mi(g+f["y"===m?"top":"left"],g,g-f[e])}if(c){const e="y"===p?"bottom":"right";v=mi(v+f["y"===p?"top":"left"],v,v-f[e])}const y=u.fn((0,o.A)((0,o.A)({},t),{},{[m]:g,[p]:v}));return(0,o.A)((0,o.A)({},y),{},{data:{x:y.x-n,y:y.y-r,enabled:{[m]:l,[p]:c}}})}}},Ms=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:o,rects:s,initialPlacement:l,platform:c,elements:u}=t,d=gi(e,t),{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=d,y=i(d,Di);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const x=vi(a),b=ji(l),w=vi(l)===l,j=await(null==c.isRTL?void 0:c.isRTL(u.floating)),_=p||(w||!v?[Pi(l)]:function(e){const t=Pi(e);return[Ni(e),t,Ni(t)]}(l)),N="none"!==g;!p&&N&&_.push(...Ci(l,v,g,j));const k=[l,..._],S=await Fi(t,y),A=[];let O=(null==(r=o.flip)?void 0:r.overflows)||[];if(h&&A.push(S[x]),f){const e=function(e,t,n){void 0===n&&(n=!1);const r=yi(e),a=_i(e),o=bi(a);let i="x"===a?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Pi(i)),[i,Pi(i)]}(a,s,j);A.push(S[e[0]],S[e[1]])}if(O=[...O,{placement:a,overflows:A}],!A.every(e=>e<=0)){var C,P;const e=((null==(C=o.flip)?void 0:C.index)||0)+1,t=k[e];if(t){if(!("alignment"===f&&b!==ji(t))||O.every(e=>ji(e.placement)!==b||e.overflows[0]>0))return{data:{index:e,overflows:O},reset:{placement:t}}}let n=null==(P=O.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:P.placement;if(!n)switch(m){case"bestFit":{var E;const e=null==(E=O.filter(e=>{if(N){const t=ji(e.placement);return t===b||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:E[0];e&&(n=e);break}case"initialPlacement":n=l}if(a!==n)return{reset:{placement:n}}}return{}}}},Rs=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:l,elements:c}=t,u=gi(e,t),{apply:d=()=>{}}=u,h=i(u,Ri),f=await Fi(t,h),p=vi(a),m=yi(a),g="y"===ji(a),{width:v,height:y}=s.floating;let x,b;"top"===p||"bottom"===p?(x=p,b=m===(await(null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(b=p,x="end"===m?"top":"bottom");const w=y-f.top-f.bottom,j=v-f.left-f.right,_=li(y-f[x],w),N=li(v-f[b],j),k=!t.middlewareData.shift;let S=_,A=N;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(A=j),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(S=w),k&&!m){const e=ci(f.left,0),t=ci(f.right,0),n=ci(f.top,0),r=ci(f.bottom,0);g?A=v-2*(0!==e||0!==t?e+t:ci(f.left,f.right)):S=y-2*(0!==n||0!==r?n+r:ci(f.top,f.bottom))}await d((0,o.A)((0,o.A)({},t),{},{availableWidth:A,availableHeight:S}));const O=await l.getDimensions(c.floating);return v!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}},Ls=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,r=gi(e,t),{strategy:a="referenceHidden"}=r,s=i(r,Ii);switch(a){case"referenceHidden":{const e=zi(await Fi(t,(0,o.A)((0,o.A)({},s),{},{elementContext:"reference"})),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Bi(e)}}}case"escaped":{const e=zi(await Fi(t,(0,o.A)((0,o.A)({},s),{},{altBoundary:!0})),n.floating);return{data:{escapedOffsets:e,escaped:Bi(e)}}}default:return{}}}}},Fs=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=gi(e,t)||{};if(null==u)return{};const h=Ei(d),f={x:n,y:r},p=_i(a),m=bi(p),g=await s.getDimensions(u),v="y"===p,y=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",w=i.reference[m]+i.reference[p]-f[p]-i.floating[m],j=f[p]-i.reference[p],_=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let N=_?_[b]:0;N&&await(null==s.isElement?void 0:s.isElement(_))||(N=l.floating[b]||i.floating[m]);const k=w/2-j/2,S=N/2-g[m]/2-1,A=li(h[y],S),O=li(h[x],S),C=A,P=N-g[m]-O,E=N/2-g[m]/2+k,T=mi(C,E,P),D=!c.arrow&&null!=yi(a)&&E!==T&&i.reference[m]/2-(E<C?A:O)-g[m]/2<0,I=D?E<C?E-C:E-P:0;return{[p]:f[p]+I,data:(0,o.A)({[p]:T,centerOffset:E-T-I},D&&{alignmentOffset:I}),reset:D}}}),zs=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=gi(e,t),d={x:n,y:r},h=ji(a),f=xi(h);let p=d[f],m=d[h];const g=gi(l,t),v="number"===typeof g?{mainAxis:g,crossAxis:0}:(0,o.A)({mainAxis:0,crossAxis:0},g);if(c){const e="y"===f?"height":"width",t=i.reference[f]-i.floating[e]+v.mainAxis,n=i.reference[f]+i.reference[e]-v.mainAxis;p<t?p=t:p>n&&(p=n)}if(u){var y,x;const e="y"===f?"width":"height",t=Ui.has(vi(a)),n=i.reference[h]-i.floating[e]+(t&&(null==(y=s.offset)?void 0:y[h])||0)+(t?0:v.crossAxis),r=i.reference[h]+i.reference[e]+(t?0:(null==(x=s.offset)?void 0:x[h])||0)-(t?v.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[f]:p,[h]:m}}}},Bs=(e,t,n)=>{const r=new Map,a=(0,o.A)({platform:Ps},n),i=(0,o.A)((0,o.A)({},a.platform),{},{_c:r});return(async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,l=i.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=Li(u,r,c),f=r,p={},m=0;for(let g=0;g<l.length;g++){const{name:n,fn:i}=l[g],{x:v,y:y,data:x,reset:b}=await i({x:d,y:h,initialPlacement:r,placement:f,strategy:a,middlewareData:p,rects:u,platform:s,elements:{reference:e,floating:t}});d=null!=v?v:d,h=null!=y?y:h,p=(0,o.A)((0,o.A)({},p),{},{[n]:(0,o.A)((0,o.A)({},p[n]),x)}),b&&m<=50&&(m++,"object"===typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:a}):b.rects),({x:d,y:h}=Li(u,f,c))),g=-1)}return{x:d,y:h,placement:f,strategy:a,middlewareData:p}})(e,t,(0,o.A)((0,o.A)({},a),{},{platform:i}))};var Us="undefined"!==typeof document?t.useLayoutEffect:function(){};function Ws(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!Ws(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!==r--;){const n=a[r];if(("_owner"!==n||!e.$$typeof)&&!Ws(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function qs(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Hs(e,t){const n=qs(e);return Math.round(t*n)/n}function Vs(e){const n=t.useRef(e);return Us(()=>{n.current=e}),n}const Ks=(e,t)=>(0,o.A)((0,o.A)({},Ds(e)),{},{options:[e,t]}),$s=(e,t)=>(0,o.A)((0,o.A)({},Is(e)),{},{options:[e,t]}),Gs=(e,t)=>(0,o.A)((0,o.A)({},zs(e)),{},{options:[e,t]}),Ys=(e,t)=>(0,o.A)((0,o.A)({},Ms(e)),{},{options:[e,t]}),Js=(e,t)=>(0,o.A)((0,o.A)({},Rs(e)),{},{options:[e,t]}),Xs=(e,t)=>(0,o.A)((0,o.A)({},Ls(e)),{},{options:[e,t]}),Qs=(e,t)=>(0,o.A)((0,o.A)({},(e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&function(e){return{}.hasOwnProperty.call(e,"current")}(n)?null!=n.current?Fs({element:n.current,padding:r}).fn(t):{}:n?Fs({element:n,padding:r}).fn(t):{}}}))(e)),{},{options:[e,t]}),Zs=["children","width","height"];var el=t.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5}=e,s=i(e,Zs);return(0,ae.jsx)(be.svg,(0,o.A)((0,o.A)({},s),{},{ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,ae.jsx)("polygon",{points:"0,0 30,0 15,10"})}))});el.displayName="Arrow";var tl=el;const nl=["__scopePopper","virtualRef"],rl=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"],al=["__scopePopper"];var ol="Popper",[il,sl]=Qt(ol),[ll,cl]=il(ol),ul=e=>{const{__scopePopper:n,children:r}=e,[a,o]=t.useState(null);return(0,ae.jsx)(ll,{scope:n,anchor:a,onAnchorChange:o,children:r})};ul.displayName=ol;var dl="PopperAnchor",hl=t.forwardRef((e,n)=>{const{__scopePopper:r,virtualRef:a}=e,s=i(e,nl),l=cl(dl,r),c=t.useRef(null),u=ue(n,c),d=t.useRef(null);return t.useEffect(()=>{const e=d.current;d.current=(null===a||void 0===a?void 0:a.current)||c.current,e!==d.current&&l.onAnchorChange(d.current)}),a?null:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({},s),{},{ref:u}))});hl.displayName=dl;var fl="PopperContent",[pl,ml]=il(fl),gl=t.forwardRef((e,n)=>{var r,a,s,l,c,u,d,h;const{__scopePopper:f,side:p="bottom",sideOffset:m=0,align:g="center",alignOffset:v=0,arrowPadding:y=0,avoidCollisions:x=!0,collisionBoundary:b=[],collisionPadding:w=0,sticky:j="partial",hideWhenDetached:_=!1,updatePositionStrategy:N="optimized",onPlaced:k}=e,S=i(e,rl),A=cl(fl,f),[O,C]=t.useState(null),P=ue(n,e=>C(e)),[E,T]=t.useState(null),D=function(e){const[n,r]=t.useState(void 0);return en(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let a,o;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;a=t.inlineSize,o=t.blockSize}else a=e.offsetWidth,o=e.offsetHeight;r({width:a,height:o})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),n}(E),I=null!==(r=null===D||void 0===D?void 0:D.width)&&void 0!==r?r:0,M=null!==(a=null===D||void 0===D?void 0:D.height)&&void 0!==a?a:0,R=p+("center"!==g?"-"+g:""),L="number"===typeof w?w:(0,o.A)({top:0,right:0,bottom:0,left:0},w),F=Array.isArray(b)?b:[b],z=F.length>0,B={padding:L,boundary:F.filter(bl),altBoundary:z},{refs:U,floatingStyles:W,placement:q,isPositioned:H,middlewareData:V}=function(e){void 0===e&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:a=[],platform:i,elements:{reference:s,floating:l}={},transform:c=!0,whileElementsMounted:u,open:d}=e,[h,f]=t.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[p,m]=t.useState(a);Ws(p,a)||m(a);const[g,v]=t.useState(null),[y,x]=t.useState(null),b=t.useCallback(e=>{e!==N.current&&(N.current=e,v(e))},[]),w=t.useCallback(e=>{e!==k.current&&(k.current=e,x(e))},[]),j=s||g,_=l||y,N=t.useRef(null),k=t.useRef(null),S=t.useRef(h),A=null!=u,O=Vs(u),C=Vs(i),P=Vs(d),E=t.useCallback(()=>{if(!N.current||!k.current)return;const e={placement:n,strategy:r,middleware:p};C.current&&(e.platform=C.current),Bs(N.current,k.current,e).then(e=>{const t=(0,o.A)((0,o.A)({},e),{},{isPositioned:!1!==P.current});T.current&&!Ws(S.current,t)&&(S.current=t,se.flushSync(()=>{f(t)}))})},[p,n,r,C,P]);Us(()=>{!1===d&&S.current.isPositioned&&(S.current.isPositioned=!1,f(e=>(0,o.A)((0,o.A)({},e),{},{isPositioned:!1})))},[d]);const T=t.useRef(!1);Us(()=>(T.current=!0,()=>{T.current=!1}),[]),Us(()=>{if(j&&(N.current=j),_&&(k.current=_),j&&_){if(O.current)return O.current(j,_,E);E()}},[j,_,E,O,A]);const D=t.useMemo(()=>({reference:N,floating:k,setReference:b,setFloating:w}),[b,w]),I=t.useMemo(()=>({reference:j,floating:_}),[j,_]),M=t.useMemo(()=>{const e={position:r,left:0,top:0};if(!I.floating)return e;const t=Hs(I.floating,h.x),n=Hs(I.floating,h.y);return c?(0,o.A)((0,o.A)({},e),{},{transform:"translate("+t+"px, "+n+"px)"},qs(I.floating)>=1.5&&{willChange:"transform"}):{position:r,left:t,top:n}},[r,c,I.floating,h.x,h.y]);return t.useMemo(()=>(0,o.A)((0,o.A)({},h),{},{update:E,refs:D,elements:I,floatingStyles:M}),[h,E,D,I,M])}({strategy:"fixed",placement:R,whileElementsMounted:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ts(...t,{animationFrame:"always"===N})},elements:{reference:A.anchor},middleware:[Ks({mainAxis:m+M,alignmentAxis:v}),x&&$s((0,o.A)({mainAxis:!0,crossAxis:!1,limiter:"partial"===j?Gs():void 0},B)),x&&Ys((0,o.A)({},B)),Js((0,o.A)((0,o.A)({},B),{},{apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:a}=e;const{width:o,height:i}=n.reference,s=t.floating.style;s.setProperty("--radix-popper-available-width","".concat(r,"px")),s.setProperty("--radix-popper-available-height","".concat(a,"px")),s.setProperty("--radix-popper-anchor-width","".concat(o,"px")),s.setProperty("--radix-popper-anchor-height","".concat(i,"px"))}})),E&&Qs({element:E,padding:y}),wl({arrowWidth:I,arrowHeight:M}),_&&Xs((0,o.A)({strategy:"referenceHidden"},B))]}),[K,$]=jl(q),G=sn(k);en(()=>{H&&(null===G||void 0===G||G())},[H,G]);const Y=null===(s=V.arrow)||void 0===s?void 0:s.x,J=null===(l=V.arrow)||void 0===l?void 0:l.y,X=0!==(null===(c=V.arrow)||void 0===c?void 0:c.centerOffset),[Q,Z]=t.useState();return en(()=>{O&&Z(window.getComputedStyle(O).zIndex)},[O]),(0,ae.jsx)("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:(0,o.A)((0,o.A)({},W),{},{transform:H?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[null===(u=V.transformOrigin)||void 0===u?void 0:u.x,null===(d=V.transformOrigin)||void 0===d?void 0:d.y].join(" ")},(null===(h=V.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:(0,ae.jsx)(pl,{scope:f,placedSide:K,onArrowChange:T,arrowX:Y,arrowY:J,shouldHideArrow:X,children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"data-side":K,"data-align":$},S),{},{ref:P,style:(0,o.A)((0,o.A)({},S.style),{},{animation:H?void 0:"none"})}))})})});gl.displayName=fl;var vl="PopperArrow",yl={top:"bottom",right:"left",bottom:"top",left:"right"},xl=t.forwardRef(function(e,t){const{__scopePopper:n}=e,r=i(e,al),a=ml(vl,n),s=yl[a.placedSide];return(0,ae.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,ae.jsx)(tl,(0,o.A)((0,o.A)({},r),{},{ref:t,style:(0,o.A)((0,o.A)({},r.style),{},{display:"block"})}))})});function bl(e){return null!==e}xl.displayName=vl;var wl=e=>({name:"transformOrigin",options:e,fn(t){var n,r,a,o,i;const{placement:s,rects:l,middlewareData:c}=t,u=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),d=u?0:e.arrowWidth,h=u?0:e.arrowHeight,[f,p]=jl(s),m={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(r=null===(a=c.arrow)||void 0===a?void 0:a.x)&&void 0!==r?r:0)+d/2,v=(null!==(o=null===(i=c.arrow)||void 0===i?void 0:i.y)&&void 0!==o?o:0)+h/2;let y="",x="";return"bottom"===f?(y=u?m:"".concat(g,"px"),x="".concat(-h,"px")):"top"===f?(y=u?m:"".concat(g,"px"),x="".concat(l.floating.height+h,"px")):"right"===f?(y="".concat(-h,"px"),x=u?m:"".concat(v,"px")):"left"===f&&(y="".concat(l.floating.width+h,"px"),x=u?m:"".concat(v,"px")),{data:{x:y,y:x}}}});function jl(e){const[t,n="center"]=e.split("-");return[t,n]}var _l=ul,Nl=hl,kl=gl,Sl=xl;var Al=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ol=t.forwardRef((e,t)=>(0,ae.jsx)(be.span,(0,o.A)((0,o.A)({},e),{},{ref:t,style:(0,o.A)((0,o.A)({},Al),e.style)})));Ol.displayName="VisuallyHidden";const Cl=["__scopeSelect","disabled"],Pl=["__scopeSelect","className","style","children","placeholder"],El=["__scopeSelect","children"],Tl=["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"],Dl=["__scopeSelect","onPlaced"],Il=["__scopeSelect","align","collisionPadding"],Ml=["__scopeSelect","nonce"],Rl=["__scopeSelect"],Ll=["__scopeSelect"],Fl=["__scopeSelect","value","disabled","textValue"],zl=["__scopeSelect","className","style"],Bl=["__scopeSelect"],Ul=["__scopeSelect","onAutoScroll"],Wl=["__scopeSelect"],ql=["__scopeSelect"],Hl=["__scopeSelect","value"];var Vl=[" ","Enter","ArrowUp","ArrowDown"],Kl=[" ","Enter"],$l="Select",[Gl,Yl,Jl]=ti($l),[Xl,Ql]=Qt($l,[Jl,sl]),Zl=sl(),[ec,tc]=Xl($l),[nc,rc]=Xl($l),ac=e=>{const{__scopeSelect:n,children:r,open:a,defaultOpen:i,onOpenChange:s,value:l,defaultValue:c,onValueChange:u,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:g}=e,v=Zl(n),[y,x]=t.useState(null),[b,w]=t.useState(null),[j,_]=t.useState(!1),N=ii(d),[k,S]=on({prop:a,defaultProp:null!==i&&void 0!==i&&i,onChange:s,caller:$l}),[A,O]=on({prop:l,defaultProp:c,onChange:u,caller:$l}),C=t.useRef(null),P=!y||(g||!!y.closest("form")),[E,T]=t.useState(new Set),D=Array.from(E).map(e=>e.props.value).join(";");return(0,ae.jsx)(_l,(0,o.A)((0,o.A)({},v),{},{children:(0,ae.jsxs)(ec,{required:m,scope:n,trigger:y,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:_,contentId:rn(),value:A,onValueChange:O,open:k,onOpenChange:S,dir:N,triggerPointerDownPosRef:C,disabled:p,children:[(0,ae.jsx)(Gl.Provider,{scope:n,children:(0,ae.jsx)(nc,{scope:e.__scopeSelect,onNativeOptionAdd:t.useCallback(e=>{T(t=>new Set(t).add(e))},[]),onNativeOptionRemove:t.useCallback(e=>{T(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:r})}),P?(0,ae.jsxs)(Kc,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:A,onChange:e=>O(e.target.value),disabled:p,form:g,children:[void 0===A?(0,ae.jsx)("option",{value:""}):null,Array.from(E)]},D):null]})}))};ac.displayName=$l;var oc="SelectTrigger",ic=t.forwardRef((e,n)=>{const{__scopeSelect:r,disabled:a=!1}=e,s=i(e,Cl),l=Zl(r),c=tc(oc,r),u=c.disabled||a,d=ue(n,c.onTriggerChange),h=Yl(r),f=t.useRef("touch"),[p,m,g]=Gc(e=>{const t=h().filter(e=>!e.disabled),n=t.find(e=>e.value===c.value),r=Yc(t,e,n);void 0!==r&&c.onValueChange(r.value)}),v=e=>{u||(c.onOpenChange(!0),g()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,ae.jsx)(Nl,(0,o.A)((0,o.A)({asChild:!0},l),{},{children:(0,ae.jsx)(be.button,(0,o.A)((0,o.A)({type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":$c(c.value)?"":void 0},s),{},{ref:d,onClick:Yt(s.onClick,e=>{e.currentTarget.focus(),"mouse"!==f.current&&v(e)}),onPointerDown:Yt(s.onPointerDown,e=>{f.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(v(e),e.preventDefault())}),onKeyDown:Yt(s.onKeyDown,e=>{const t=""!==p.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||m(e.key),t&&" "===e.key||Vl.includes(e.key)&&(v(),e.preventDefault())})}))}))});ic.displayName=oc;var sc="SelectValue",lc=t.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:l=""}=e,c=i(e,Pl),u=tc(sc,n),{onValueNodeHasChildrenChange:d}=u,h=void 0!==s,f=ue(t,u.onValueNodeChange);return en(()=>{d(h)},[d,h]),(0,ae.jsx)(be.span,(0,o.A)((0,o.A)({},c),{},{ref:f,style:{pointerEvents:"none"},children:$c(u.value)?(0,ae.jsx)(ae.Fragment,{children:l}):s}))});lc.displayName=sc;var cc=t.forwardRef((e,t)=>{const{__scopeSelect:n,children:r}=e,a=i(e,El);return(0,ae.jsx)(be.span,(0,o.A)((0,o.A)({"aria-hidden":!0},a),{},{ref:t,children:r||"\u25bc"}))});cc.displayName="SelectIcon";var uc=e=>(0,ae.jsx)(Pn,(0,o.A)({asChild:!0},e));uc.displayName="SelectPortal";var dc="SelectContent",hc=t.forwardRef((e,n)=>{const r=tc(dc,e.__scopeSelect),[a,i]=t.useState();if(en(()=>{i(new DocumentFragment)},[]),!r.open){const t=a;return t?se.createPortal((0,ae.jsx)(pc,{scope:e.__scopeSelect,children:(0,ae.jsx)(Gl.Slot,{scope:e.__scopeSelect,children:(0,ae.jsx)("div",{children:e.children})})}),t):null}return(0,ae.jsx)(vc,(0,o.A)((0,o.A)({},e),{},{ref:n}))});hc.displayName=dc;var fc=10,[pc,mc]=Xl(dc),gc=fe("SelectContent.RemoveScroll"),vc=t.forwardRef((e,n)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:l,onPointerDownOutside:c,side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:x}=e,b=i(e,Tl),w=tc(dc,r),[j,_]=t.useState(null),[N,k]=t.useState(null),S=ue(n,e=>_(e)),[A,O]=t.useState(null),[C,P]=t.useState(null),E=Yl(r),[T,D]=t.useState(!1),I=t.useRef(!1);t.useEffect(()=>{if(j)return Ir(j)},[j]),In();const M=t.useCallback(e=>{const[t,...n]=E().map(e=>e.ref.current),[r]=n.slice(-1),a=document.activeElement;for(const o of e){if(o===a)return;if(null===o||void 0===o||o.scrollIntoView({block:"nearest"}),o===t&&N&&(N.scrollTop=0),o===r&&N&&(N.scrollTop=N.scrollHeight),null===o||void 0===o||o.focus(),document.activeElement!==a)return}},[E,N]),R=t.useCallback(()=>M([A,j]),[M,A,j]);t.useEffect(()=>{T&&R()},[T,R]);const{onOpenChange:L,triggerPointerDownPosRef:F}=w;t.useEffect(()=>{if(j){let e={x:0,y:0};const t=t=>{var n,r,a,o;e={x:Math.abs(Math.round(t.pageX)-(null!==(n=null===(r=F.current)||void 0===r?void 0:r.x)&&void 0!==n?n:0)),y:Math.abs(Math.round(t.pageY)-(null!==(a=null===(o=F.current)||void 0===o?void 0:o.y)&&void 0!==a?a:0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():j.contains(n.target)||L(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[j,L,F]),t.useEffect(()=>{const e=()=>L(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[L]);const[z,B]=Gc(e=>{const t=E().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=Yc(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),U=t.useCallback((e,t,n)=>{const r=!I.current&&!n;(void 0!==w.value&&w.value===t||r)&&(O(e),r&&(I.current=!0))},[w.value]),W=t.useCallback(()=>null===j||void 0===j?void 0:j.focus(),[j]),q=t.useCallback((e,t,n)=>{const r=!I.current&&!n;(void 0!==w.value&&w.value===t||r)&&P(e)},[w.value]),H="popper"===a?xc:yc,V=H===xc?{side:u,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:y,avoidCollisions:x}:{};return(0,ae.jsx)(pc,{scope:r,content:j,viewport:N,onViewportChange:k,itemRefCallback:U,selectedItem:A,onItemLeave:W,itemTextRefCallback:q,focusSelectedItem:R,selectedItemText:C,position:a,isPositioned:T,searchRef:z,children:(0,ae.jsx)(Sr,{as:gc,allowPinchZoom:!0,children:(0,ae.jsx)(jn,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Yt(s,e=>{var t;null===(t=w.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()}),children:(0,ae.jsx)(pn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:(0,ae.jsx)(H,(0,o.A)((0,o.A)((0,o.A)({role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault()},b),V),{},{onPlaced:()=>D(!0),ref:S,style:(0,o.A)({display:"flex",flexDirection:"column",outline:"none"},b.style),onKeyDown:Yt(b.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||B(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=E().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>M(t)),e.preventDefault()}})}))})})})})});vc.displayName="SelectContentImpl";var yc=t.forwardRef((e,n)=>{const{__scopeSelect:r,onPlaced:a}=e,s=i(e,Dl),l=tc(dc,r),c=mc(dc,r),[u,d]=t.useState(null),[h,f]=t.useState(null),p=ue(n,e=>f(e)),m=Yl(r),g=t.useRef(!1),v=t.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:b,focusSelectedItem:w}=c,j=t.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&h&&y&&x&&b){const e=l.trigger.getBoundingClientRect(),t=h.getBoundingClientRect(),n=l.valueNode.getBoundingClientRect(),r=b.getBoundingClientRect();if("rtl"!==l.dir){const a=r.left-t.left,o=n.left-a,i=e.left-o,s=e.width+i,l=Math.max(s,t.width),c=window.innerWidth-fc,d=Go(o,[fc,Math.max(fc,c-l)]);u.style.minWidth=s+"px",u.style.left=d+"px"}else{const a=t.right-r.right,o=window.innerWidth-n.right-a,i=window.innerWidth-e.right-o,s=e.width+i,l=Math.max(s,t.width),c=window.innerWidth-fc,d=Go(o,[fc,Math.max(fc,c-l)]);u.style.minWidth=s+"px",u.style.right=d+"px"}const o=m(),i=window.innerHeight-2*fc,s=y.scrollHeight,c=window.getComputedStyle(h),d=parseInt(c.borderTopWidth,10),f=parseInt(c.paddingTop,10),p=parseInt(c.borderBottomWidth,10),v=d+f+s+parseInt(c.paddingBottom,10)+p,w=Math.min(5*x.offsetHeight,v),j=window.getComputedStyle(y),_=parseInt(j.paddingTop,10),N=parseInt(j.paddingBottom,10),k=e.top+e.height/2-fc,S=i-k,A=x.offsetHeight/2,O=d+f+(x.offsetTop+A),C=v-O;if(O<=k){const e=o.length>0&&x===o[o.length-1].ref.current;u.style.bottom="0px";const t=h.clientHeight-y.offsetTop-y.offsetHeight,n=O+Math.max(S,A+(e?N:0)+t+p);u.style.height=n+"px"}else{const e=o.length>0&&x===o[0].ref.current;u.style.top="0px";const t=Math.max(k,d+y.offsetTop+(e?_:0)+A)+C;u.style.height=t+"px",y.scrollTop=O-k+y.offsetTop}u.style.margin="".concat(fc,"px 0"),u.style.minHeight=w+"px",u.style.maxHeight=i+"px",null===a||void 0===a||a(),requestAnimationFrame(()=>g.current=!0)}},[m,l.trigger,l.valueNode,u,h,y,x,b,l.dir,a]);en(()=>j(),[j]);const[_,N]=t.useState();en(()=>{h&&N(window.getComputedStyle(h).zIndex)},[h]);const k=t.useCallback(e=>{e&&!0===v.current&&(j(),null===w||void 0===w||w(),v.current=!1)},[j,w]);return(0,ae.jsx)(bc,{scope:r,contentWrapper:u,shouldExpandOnScrollRef:g,onScrollButtonChange:k,children:(0,ae.jsx)("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({},s),{},{ref:p,style:(0,o.A)({boxSizing:"border-box",maxHeight:"100%"},s.style)}))})})});yc.displayName="SelectItemAlignedPosition";var xc=t.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=fc}=e,s=i(e,Il),l=Zl(n);return(0,ae.jsx)(kl,(0,o.A)((0,o.A)((0,o.A)({},l),s),{},{ref:t,align:r,collisionPadding:a,style:(0,o.A)((0,o.A)({boxSizing:"border-box"},s.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});xc.displayName="SelectPopperPosition";var[bc,wc]=Xl(dc,{}),jc="SelectViewport",_c=t.forwardRef((e,n)=>{const{__scopeSelect:r,nonce:a}=e,s=i(e,Ml),l=mc(jc,r),c=wc(jc,r),u=ue(n,l.onViewportChange),d=t.useRef(0);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,ae.jsx)(Gl.Slot,{scope:r,children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"data-radix-select-viewport":"",role:"presentation"},s),{},{ref:u,style:(0,o.A)({position:"relative",flex:1,overflow:"hidden auto"},s.style),onScroll:Yt(s.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=c;if(null!==r&&void 0!==r&&r.current&&n){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*fc,a=parseFloat(n.style.minHeight),o=parseFloat(n.style.height),i=Math.max(a,o);if(i<r){const a=i+e,o=Math.min(r,a),s=a-o;n.style.height=o+"px","0px"===n.style.bottom&&(t.scrollTop=s>0?s:0,n.style.justifyContent="flex-end")}}}d.current=t.scrollTop})}))})]})});_c.displayName=jc;var Nc="SelectGroup",[kc,Sc]=Xl(Nc),Ac=t.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=i(e,Rl),a=rn();return(0,ae.jsx)(kc,{scope:n,id:a,children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({role:"group","aria-labelledby":a},r),{},{ref:t}))})});Ac.displayName=Nc;var Oc="SelectLabel",Cc=t.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=i(e,Ll),a=Sc(Oc,n);return(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({id:a.id},r),{},{ref:t}))});Cc.displayName=Oc;var Pc="SelectItem",[Ec,Tc]=Xl(Pc),Dc=t.forwardRef((e,n)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:l}=e,c=i(e,Fl),u=tc(Pc,r),d=mc(Pc,r),h=u.value===a,[f,p]=t.useState(null!==l&&void 0!==l?l:""),[m,g]=t.useState(!1),v=ue(n,e=>{var t;return null===(t=d.itemRefCallback)||void 0===t?void 0:t.call(d,e,a,s)}),y=rn(),x=t.useRef("touch"),b=()=>{s||(u.onValueChange(a),u.onOpenChange(!1))};if(""===a)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,ae.jsx)(Ec,{scope:r,value:a,disabled:s,textId:y,isSelected:h,onItemTextChange:t.useCallback(e=>{p(t=>{var n;return t||(null!==(n=null===e||void 0===e?void 0:e.textContent)&&void 0!==n?n:"").trim()})},[]),children:(0,ae.jsx)(Gl.ItemSlot,{scope:r,value:a,disabled:s,textValue:f,children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":h&&m,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1},c),{},{ref:v,onFocus:Yt(c.onFocus,()=>g(!0)),onBlur:Yt(c.onBlur,()=>g(!1)),onClick:Yt(c.onClick,()=>{"mouse"!==x.current&&b()}),onPointerUp:Yt(c.onPointerUp,()=>{"mouse"===x.current&&b()}),onPointerDown:Yt(c.onPointerDown,e=>{x.current=e.pointerType}),onPointerMove:Yt(c.onPointerMove,e=>{var t;(x.current=e.pointerType,s)?null===(t=d.onItemLeave)||void 0===t||t.call(d):"mouse"===x.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Yt(c.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null===(t=d.onItemLeave)||void 0===t||t.call(d))}),onKeyDown:Yt(c.onKeyDown,e=>{var t;""!==(null===(t=d.searchRef)||void 0===t?void 0:t.current)&&" "===e.key||(Kl.includes(e.key)&&b()," "===e.key&&e.preventDefault())})}))})})});Dc.displayName=Pc;var Ic="SelectItemText",Mc=t.forwardRef((e,n)=>{const{__scopeSelect:r,className:a,style:s}=e,l=i(e,zl),c=tc(Ic,r),u=mc(Ic,r),d=Tc(Ic,r),h=rc(Ic,r),[f,p]=t.useState(null),m=ue(n,e=>p(e),d.onItemTextChange,e=>{var t;return null===(t=u.itemTextRefCallback)||void 0===t?void 0:t.call(u,e,d.value,d.disabled)}),g=null===f||void 0===f?void 0:f.textContent,v=t.useMemo(()=>(0,ae.jsx)("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=h;return en(()=>(y(v),()=>x(v)),[y,x,v]),(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(be.span,(0,o.A)((0,o.A)({id:d.textId},l),{},{ref:m})),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?se.createPortal(l.children,c.valueNode):null]})});Mc.displayName=Ic;var Rc="SelectItemIndicator",Lc=t.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=i(e,Bl);return Tc(Rc,n).isSelected?(0,ae.jsx)(be.span,(0,o.A)((0,o.A)({"aria-hidden":!0},r),{},{ref:t})):null});Lc.displayName=Rc;var Fc="SelectScrollUpButton",zc=t.forwardRef((e,n)=>{const r=mc(Fc,e.__scopeSelect),a=wc(Fc,e.__scopeSelect),[i,s]=t.useState(!1),l=ue(n,a.onScrollButtonChange);return en(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;s(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,ae.jsx)(Wc,(0,o.A)((0,o.A)({},e),{},{ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});zc.displayName=Fc;var Bc="SelectScrollDownButton",Uc=t.forwardRef((e,n)=>{const r=mc(Bc,e.__scopeSelect),a=wc(Bc,e.__scopeSelect),[i,s]=t.useState(!1),l=ue(n,a.onScrollButtonChange);return en(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;s(n)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),i?(0,ae.jsx)(Wc,(0,o.A)((0,o.A)({},e),{},{ref:l,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});Uc.displayName=Bc;var Wc=t.forwardRef((e,n)=>{const{__scopeSelect:r,onAutoScroll:a}=e,s=i(e,Ul),l=mc("SelectScrollButton",r),c=t.useRef(null),u=Yl(r),d=t.useCallback(()=>{null!==c.current&&(window.clearInterval(c.current),c.current=null)},[]);return t.useEffect(()=>()=>d(),[d]),en(()=>{var e;const t=u().find(e=>e.ref.current===document.activeElement);null===t||void 0===t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[u]),(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"aria-hidden":!0},s),{},{ref:n,style:(0,o.A)({flexShrink:0},s.style),onPointerDown:Yt(s.onPointerDown,()=>{null===c.current&&(c.current=window.setInterval(a,50))}),onPointerMove:Yt(s.onPointerMove,()=>{var e;null===(e=l.onItemLeave)||void 0===e||e.call(l),null===c.current&&(c.current=window.setInterval(a,50))}),onPointerLeave:Yt(s.onPointerLeave,()=>{d()})}))}),qc=t.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=i(e,Wl);return(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"aria-hidden":!0},r),{},{ref:t}))});qc.displayName="SelectSeparator";var Hc="SelectArrow",Vc=t.forwardRef((e,t)=>{const{__scopeSelect:n}=e,r=i(e,ql),a=Zl(n),s=tc(Hc,n),l=mc(Hc,n);return s.open&&"popper"===l.position?(0,ae.jsx)(Sl,(0,o.A)((0,o.A)((0,o.A)({},a),r),{},{ref:t})):null});Vc.displayName=Hc;var Kc=t.forwardRef((e,n)=>{let{__scopeSelect:r,value:a}=e,s=i(e,Hl);const l=t.useRef(null),c=ue(n,l),u=function(e){const n=t.useRef({value:e,previous:e});return t.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}(a);return t.useEffect(()=>{const e=l.current;if(!e)return;const t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(u!==a&&n){const t=new Event("change",{bubbles:!0});n.call(e,a),e.dispatchEvent(t)}},[u,a]),(0,ae.jsx)(be.select,(0,o.A)((0,o.A)({},s),{},{style:(0,o.A)((0,o.A)({},Al),s.style),ref:c,defaultValue:a}))});function $c(e){return""===e||void 0===e}function Gc(e){const n=sn(e),r=t.useRef(""),a=t.useRef(0),o=t.useCallback(e=>{const t=r.current+e;n(t),function e(t){r.current=t,window.clearTimeout(a.current),""!==t&&(a.current=window.setTimeout(()=>e(""),1e3))}(t)},[n]),i=t.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return t.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,o,i]}function Yc(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=function(e,t){return e.map((n,r)=>e[(t+r)%e.length])}(e,Math.max(a,0));1===r.length&&(o=o.filter(e=>e!==n));const i=o.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}Kc.displayName="SelectBubbleInput";var Jc=ac,Xc=ic,Qc=lc,Zc=cc,eu=uc,tu=hc,nu=_c,ru=Dc,au=Mc,ou=Lc,iu=zc,su=Uc;const lu=$e("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),cu=$e("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),uu=$e("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),du=["className","size","children"],hu=["className","children","position"],fu=["className","children"],pu=["className"],mu=["className"];function gu(e){let t=Object.assign({},(Gt(e),e));return(0,ae.jsx)(Jc,(0,o.A)({"data-slot":"select"},t))}function vu(e){let t=Object.assign({},(Gt(e),e));return(0,ae.jsx)(Qc,(0,o.A)({"data-slot":"select-value"},t))}function yu(e){let{className:t,size:n="default",children:r}=e,a=i(e,du);return(0,ae.jsxs)(Xc,(0,o.A)((0,o.A)({"data-slot":"select-trigger","data-size":n,className:re("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},a),{},{children:[r,(0,ae.jsx)(Zc,{asChild:!0,children:(0,ae.jsx)(lu,{className:"size-4 opacity-50"})})]}))}function xu(e){let{className:t,children:n,position:r="popper"}=e,a=i(e,hu);return(0,ae.jsx)(eu,{children:(0,ae.jsxs)(tu,(0,o.A)((0,o.A)({"data-slot":"select-content",className:re("bg-white text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r},a),{},{children:[(0,ae.jsx)(wu,{}),(0,ae.jsx)(nu,{className:re("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:n}),(0,ae.jsx)(ju,{})]}))})}function bu(e){let{className:t,children:n}=e,r=i(e,fu);return(0,ae.jsxs)(ru,(0,o.A)((0,o.A)({"data-slot":"select-item",className:re("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t)},r),{},{children:[(0,ae.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,ae.jsx)(ou,{children:(0,ae.jsx)(cu,{className:"size-4"})})}),(0,ae.jsx)(au,{children:n})]}))}function wu(e){let{className:t}=e,n=i(e,pu);return(0,ae.jsx)(iu,(0,o.A)((0,o.A)({"data-slot":"select-scroll-up-button",className:re("flex cursor-default items-center justify-center py-1",t)},n),{},{children:(0,ae.jsx)(uu,{className:"size-4"})}))}function ju(e){let{className:t}=e,n=i(e,mu);return(0,ae.jsx)(su,(0,o.A)((0,o.A)({"data-slot":"select-scroll-down-button",className:re("flex cursor-default items-center justify-center py-1",t)},n),{},{children:(0,ae.jsx)(lu,{className:"size-4"})}))}const _u=["className","variant","asChild"],Nu=Wt("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ku(e){let{className:t,variant:n,asChild:r=!1}=e,a=i(e,_u);const s=r?pe:"span";return(0,ae.jsx)(s,(0,o.A)({"data-slot":"badge",className:re(Nu({variant:n}),t)},a))}const Su=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"],Au=["__scopeRovingFocusGroup","focusable","active","tabStopId","children"];var Ou="rovingFocusGroup.onEntryFocus",Cu={bubbles:!1,cancelable:!0},Pu="RovingFocusGroup",[Eu,Tu,Du]=ti(Pu),[Iu,Mu]=Qt(Pu,[Du]),[Ru,Lu]=Iu(Pu),Fu=t.forwardRef((e,t)=>(0,ae.jsx)(Eu.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,ae.jsx)(Eu.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,ae.jsx)(zu,(0,o.A)((0,o.A)({},e),{},{ref:t}))})}));Fu.displayName=Pu;var zu=t.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:s=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1}=e,p=i(e,Su),m=t.useRef(null),g=ue(n,m),v=ii(l),[y,x]=on({prop:c,defaultProp:null!==u&&void 0!==u?u:null,onChange:d,caller:Pu}),[b,w]=t.useState(!1),j=sn(h),_=Tu(r),N=t.useRef(!1),[k,S]=t.useState(0);return t.useEffect(()=>{const e=m.current;if(e)return e.addEventListener(Ou,j),()=>e.removeEventListener(Ou,j)},[j]),(0,ae.jsx)(Ru,{scope:r,orientation:a,dir:v,loop:s,currentTabStopId:y,onItemFocus:t.useCallback(e=>x(e),[x]),onItemShiftTab:t.useCallback(()=>w(!0),[]),onFocusableItemAdd:t.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>S(e=>e-1),[]),children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({tabIndex:b||0===k?-1:0,"data-orientation":a},p),{},{ref:g,style:(0,o.A)({outline:"none"},e.style),onMouseDown:Yt(e.onMouseDown,()=>{N.current=!0}),onFocus:Yt(e.onFocus,e=>{const t=!N.current;if(e.target===e.currentTarget&&t&&!b){const t=new CustomEvent(Ou,Cu);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=_().filter(e=>e.focusable);qu([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),f)}}N.current=!1}),onBlur:Yt(e.onBlur,()=>w(!1))}))})}),Bu="RovingFocusGroupItem",Uu=t.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:s=!1,tabStopId:l,children:c}=e,u=i(e,Au),d=rn(),h=l||d,f=Lu(Bu,r),p=f.currentTabStopId===h,m=Tu(r),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=f;return t.useEffect(()=>{if(a)return g(),()=>v()},[a,g,v]),(0,ae.jsx)(Eu.ItemSlot,{scope:r,id:h,focusable:a,active:s,children:(0,ae.jsx)(be.span,(0,o.A)((0,o.A)({tabIndex:p?0:-1,"data-orientation":f.orientation},u),{},{ref:n,onMouseDown:Yt(e.onMouseDown,e=>{a?f.onItemFocus(h):e.preventDefault()}),onFocus:Yt(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:Yt(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Wu[r]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const r=n.indexOf(e.currentTarget);n=f.loop?function(e,t){return e.map((n,r)=>e[(t+r)%e.length])}(n,r+1):n.slice(r+1)}setTimeout(()=>qu(n))}}),children:"function"===typeof c?c({isCurrentTabStop:p,hasTabStop:null!=y}):c}))})});Uu.displayName=Bu;var Wu={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Hu=Fu,Vu=Uu;const Ku=["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"],$u=["__scopeTabs","loop"],Gu=["__scopeTabs","value","disabled"],Yu=["__scopeTabs","value","forceMount","children"];var Ju="Tabs",[Xu,Qu]=Qt(Ju,[Mu]),Zu=Mu(),[ed,td]=Xu(Ju),nd=t.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:l="horizontal",dir:c,activationMode:u="automatic"}=e,d=i(e,Ku),h=ii(c),[f,p]=on({prop:r,onChange:a,defaultProp:null!==s&&void 0!==s?s:"",caller:Ju});return(0,ae.jsx)(ed,{scope:n,baseId:rn(),value:f,onValueChange:p,orientation:l,dir:h,activationMode:u,children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({dir:h,"data-orientation":l},d),{},{ref:t}))})});nd.displayName=Ju;var rd="TabsList",ad=t.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0}=e,a=i(e,$u),s=td(rd,n),l=Zu(n);return(0,ae.jsx)(Hu,(0,o.A)((0,o.A)({asChild:!0},l),{},{orientation:s.orientation,dir:s.dir,loop:r,children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({role:"tablist","aria-orientation":s.orientation},a),{},{ref:t}))}))});ad.displayName=rd;var od="TabsTrigger",id=t.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1}=e,s=i(e,Gu),l=td(od,n),c=Zu(n),u=cd(l.baseId,r),d=ud(l.baseId,r),h=r===l.value;return(0,ae.jsx)(Vu,(0,o.A)((0,o.A)({asChild:!0},c),{},{focusable:!a,active:h,children:(0,ae.jsx)(be.button,(0,o.A)((0,o.A)({type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u},s),{},{ref:t,onMouseDown:Yt(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(r)}),onKeyDown:Yt(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(r)}),onFocus:Yt(e.onFocus,()=>{const e="manual"!==l.activationMode;h||a||!e||l.onValueChange(r)})}))}))});id.displayName=od;var sd="TabsContent",ld=t.forwardRef((e,n)=>{const{__scopeTabs:r,value:a,forceMount:s,children:l}=e,c=i(e,Yu),u=td(sd,r),d=cd(u.baseId,a),h=ud(u.baseId,a),f=a===u.value,p=t.useRef(f);return t.useEffect(()=>{const e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,ae.jsx)(En,{present:s||f,children:t=>{let{present:r}=t;return(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!r,id:h,tabIndex:0},c),{},{ref:n,style:(0,o.A)((0,o.A)({},e.style),{},{animationDuration:p.current?"0s":void 0}),children:r&&l}))}})});function cd(e,t){return"".concat(e,"-trigger-").concat(t)}function ud(e,t){return"".concat(e,"-content-").concat(t)}ld.displayName=sd;var dd=nd,hd=ad,fd=id,pd=ld;const md=["className"],gd=["className"],vd=["className"],yd=["className"];function xd(e){let{className:t}=e,n=i(e,md);return(0,ae.jsx)(dd,(0,o.A)({"data-slot":"tabs",className:re("flex flex-col gap-2",t)},n))}function bd(e){let{className:t}=e,n=i(e,gd);return(0,ae.jsx)(hd,(0,o.A)({"data-slot":"tabs-list",className:re("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t)},n))}function wd(e){let{className:t}=e,n=i(e,vd);return(0,ae.jsx)(fd,(0,o.A)({"data-slot":"tabs-trigger",className:re("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},n))}function jd(e){let{className:t}=e,n=i(e,yd);return(0,ae.jsx)(pd,(0,o.A)({"data-slot":"tabs-content",className:re("flex-1 outline-none",t)},n))}const _d=["__scopeCollapsible","open","defaultOpen","disabled","onOpenChange"],Nd=["__scopeCollapsible"],kd=["forceMount"],Sd=["__scopeCollapsible","present","children"];var Ad="Collapsible",[Od,Cd]=Qt(Ad),[Pd,Ed]=Od(Ad),Td=t.forwardRef((e,n)=>{const{__scopeCollapsible:r,open:a,defaultOpen:s,disabled:l,onOpenChange:c}=e,u=i(e,_d),[d,h]=on({prop:a,defaultProp:null!==s&&void 0!==s&&s,onChange:c,caller:Ad});return(0,ae.jsx)(Pd,{scope:r,disabled:l,contentId:rn(),open:d,onOpenToggle:t.useCallback(()=>h(e=>!e),[h]),children:(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"data-state":Fd(d),"data-disabled":l?"":void 0},u),{},{ref:n}))})});Td.displayName=Ad;var Dd="CollapsibleTrigger",Id=t.forwardRef((e,t)=>{const{__scopeCollapsible:n}=e,r=i(e,Nd),a=Ed(Dd,n);return(0,ae.jsx)(be.button,(0,o.A)((0,o.A)({type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Fd(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled},r),{},{ref:t,onClick:Yt(e.onClick,a.onOpenToggle)}))});Id.displayName=Dd;var Md="CollapsibleContent",Rd=t.forwardRef((e,t)=>{const{forceMount:n}=e,r=i(e,kd),a=Ed(Md,e.__scopeCollapsible);return(0,ae.jsx)(En,{present:n||a.open,children:e=>{let{present:n}=e;return(0,ae.jsx)(Ld,(0,o.A)((0,o.A)({},r),{},{ref:t,present:n}))}})});Rd.displayName=Md;var Ld=t.forwardRef((e,n)=>{const{__scopeCollapsible:r,present:a,children:s}=e,l=i(e,Sd),c=Ed(Md,r),[u,d]=t.useState(a),h=t.useRef(null),f=ue(n,h),p=t.useRef(0),m=p.current,g=t.useRef(0),v=g.current,y=c.open||u,x=t.useRef(y),b=t.useRef(void 0);return t.useEffect(()=>{const e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),en(()=>{const e=h.current;if(e){b.current=b.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();p.current=t.height,g.current=t.width,x.current||(e.style.transitionDuration=b.current.transitionDuration,e.style.animationName=b.current.animationName),d(a)}},[c.open,a]),(0,ae.jsx)(be.div,(0,o.A)((0,o.A)({"data-state":Fd(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!y},l),{},{ref:f,style:(0,o.A)({"--radix-collapsible-content-height":m?"".concat(m,"px"):void 0,"--radix-collapsible-content-width":v?"".concat(v,"px"):void 0},e.style),children:y&&s}))});function Fd(e){return e?"open":"closed"}var zd=Td;function Bd(e){let t=Object.assign({},(Gt(e),e));return(0,ae.jsx)(zd,(0,o.A)({"data-slot":"collapsible"},t))}function Ud(e){let t=Object.assign({},(Gt(e),e));return(0,ae.jsx)(Id,(0,o.A)({"data-slot":"collapsible-trigger"},t))}function Wd(e){let t=Object.assign({},(Gt(e),e));return(0,ae.jsx)(Rd,(0,o.A)({"data-slot":"collapsible-content"},t))}const qd=$e("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Hd=$e("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Vd=$e("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Kd=$e("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),$d=$e("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function Gd(e){let{attachments:n=[],onAttachmentsChange:r,currentUser:a="Unknown User",maxFileSize:o=5,allowedTypes:i=["image/*","application/pdf",".doc",".docx",".xls",".xlsx",".txt"],disabled:s=!1,onUpload:l}=e;const c=(0,t.useRef)(null),[u,d]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),g=Array.isArray(n)?n:[],v=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},y=e=>e.startsWith("image/")||"application/pdf"===e||e.startsWith("text/");return(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("input",{ref:c,type:"file",multiple:!0,accept:i.join(","),onChange:async e=>{const t=e.target.files;if(t&&0!==t.length){f(null),d(!0);try{const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(r.size>1024*o*1024){f('File "'.concat(r.name,'" is too large. Maximum size is ').concat(o,"MB."));continue}if(!i.some(e=>e.includes("*")?r.type.startsWith(e.replace("*","")):r.type===e||r.name.toLowerCase().endsWith(e))){f('File "'.concat(r.name,'" is not a supported file type.'));continue}const s=await new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsDataURL(r)}),l={id:"file_".concat(Date.now(),"_").concat(n),name:r.name,size:r.size,type:r.type,data:s,uploadedAt:(new Date).toISOString(),uploadedBy:a};e.push(l)}e.length>0&&(l?l(e):r([...g,...e]))}catch(YD){f("Failed to upload files. Please try again."),console.error("File upload error:",YD)}finally{d(!1),c.current&&(c.current.value="")}}},className:"hidden",disabled:s}),(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},disabled:u||s,className:"w-full",children:u?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mr-2"}),"Uploading..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(qd,{className:"w-4 h-4 mr-2"}),"Upload Files"]})}),h&&(0,ae.jsxs)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-md flex items-center space-x-2",children:[(0,ae.jsx)(Hd,{className:"w-4 h-4 text-red-600"}),(0,ae.jsx)("span",{className:"text-sm text-red-700",children:h}),(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>f(null),className:"ml-auto p-1 h-auto",children:(0,ae.jsx)(Ze,{className:"w-3 h-3"})})]}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum file size: ",o,"MB. Supported formats: Images, PDF, Documents, Spreadsheets"]})]}),g&&g.length>0&&(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("h4",{className:"font-medium text-gray-900",children:["Attached Files (",g.length,")"]}),(0,ae.jsx)("div",{className:"space-y-2",children:g.map(e=>{return(0,ae.jsx)(Te,{className:"p-3",children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,ae.jsx)("span",{className:"text-lg",children:(t=e.type,t.startsWith("image/")?"\ud83d\uddbc\ufe0f":"application/pdf"===t?"\ud83d\udcc4":t.includes("word")||t.includes("doc")?"\ud83d\udcdd":t.includes("sheet")||t.includes("excel")?"\ud83d\udcca":t.includes("text")?"\ud83d\udcc4":"\ud83d\udcc1")}),(0,ae.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ae.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,ae.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,ae.jsx)("span",{children:v(e.size)}),(0,ae.jsxs)("span",{children:["by ",e.uploadedBy]}),(0,ae.jsx)("span",{children:new Date(e.uploadedAt).toLocaleDateString()})]})]})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-1",children:[y(e.type)&&(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(e=>{m(e)})(e),className:"p-2",children:(0,ae.jsx)(Vd,{className:"w-4 h-4"})}),(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(e=>{try{const t=document.createElement("a");t.href=e.data,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(h){console.error("Download error:",h),f("Failed to download file.")}})(e),className:"p-2",children:(0,ae.jsx)(Kd,{className:"w-4 h-4"})}),!s&&(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(e=>{try{const t=g.filter(t=>t.id!==e);r(t)}catch(h){console.error("Delete error:",h),f("Failed to delete file.")}})(e.id),className:"p-2 text-red-600 hover:text-red-700",children:(0,ae.jsx)($d,{className:"w-4 h-4"})})]})]})},e.id);var t})})]}),p&&(0,ae.jsx)(Ra,{open:!!p,onOpenChange:()=>m(null),children:(0,ae.jsxs)(Ba,{className:"max-w-4xl max-h-[80vh]",children:[(0,ae.jsx)(Ua,{children:(0,ae.jsx)(Wa,{children:p.name})}),(0,ae.jsxs)("div",{className:"overflow-auto",children:[p.type.startsWith("image/")&&(0,ae.jsx)("img",{src:p.data,alt:p.name,className:"max-w-full h-auto"}),"application/pdf"===p.type&&(0,ae.jsx)("iframe",{src:p.data,className:"w-full h-96",title:p.name}),p.type.startsWith("text/")&&(0,ae.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,ae.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:(0,ae.jsx)("p",{className:"text-gray-600",children:"Text file preview not available. Please download to view."})})})]})]})})]})}const Yd=["className","variant"],Jd=["className"],Xd=Wt("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Qd(e){let{className:t,variant:n}=e,r=i(e,Yd);return(0,ae.jsx)("div",(0,o.A)({"data-slot":"alert",role:"alert",className:re(Xd({variant:n}),t)},r))}function Zd(e){let{className:t}=e,n=i(e,Jd);return(0,ae.jsx)("div",(0,o.A)({"data-slot":"alert-description",className:re("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t)},n))}const eh=$e("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),th=$e("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);function nh(e){let{children:n}=e;const[r,a]=(0,t.useState)(""),[o,i]=(0,t.useState)(!1),s=(0,t.useCallback)(e=>{a(e),console.error("\ud83d\udd34 Application Error:",e)},[]),l=(0,t.useCallback)(()=>{a("")},[]);return(0,ae.jsxs)(ae.Fragment,{children:[r&&(0,ae.jsx)("div",{className:"fixed top-4 right-4 left-4 md:left-auto md:max-w-md z-50",children:(0,ae.jsxs)(Qd,{className:"border-red-200 bg-red-50 shadow-lg",children:[(0,ae.jsx)(Xe,{className:"h-5 w-5 text-red-500"}),(0,ae.jsx)(Zd,{className:"text-red-800 pr-8",children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsx)("p",{className:"font-medium mb-1",children:"Database Error"}),(0,ae.jsx)("p",{className:"text-sm",children:r}),(0,ae.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,ae.jsx)(Vt,{size:"sm",variant:"outline",onClick:async()=>{i(!0);try{await Le.db.isHealthy()?l():a("Database connection is still unavailable. Please try again later.")}catch(r){const t=r instanceof Error?r.message:"Unknown error occurred";a("Connection retry failed: ".concat(t))}finally{i(!1)}},disabled:o,className:"h-7 px-2 text-xs border-red-300 text-red-700 hover:bg-red-100",children:o?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(eh,{className:"w-3 h-3 mr-1 animate-spin"}),"Retrying..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(th,{className:"w-3 h-3 mr-1"}),"Retry"]})}),(0,ae.jsx)(Vt,{size:"sm",variant:"ghost",onClick:l,className:"h-7 px-2 text-xs text-red-700 hover:bg-red-100",children:"Dismiss"})]})]}),(0,ae.jsx)(Vt,{size:"sm",variant:"ghost",onClick:l,className:"h-6 w-6 p-0 text-red-500 hover:bg-red-100",children:(0,ae.jsx)(Ze,{className:"w-4 h-4"})})]})})]})}),n(s,l)]})}function rh(e){const t=t=>(0,ae.jsx)(nh,{children:(n,r)=>(0,ae.jsx)(e,(0,o.A)((0,o.A)({},t),{},{showError:n,clearError:r}))});return t.displayName="withErrorHandler(".concat(e.displayName||e.name,")"),t}const ah=["src","alt","style","className"];function oh(e){const[n,r]=(0,t.useState)(!1),{src:a,alt:s,style:l,className:c}=e,u=i(e,ah);return n?(0,ae.jsx)("div",{className:"inline-block bg-gray-100 text-center align-middle ".concat(null!==c&&void 0!==c?c:""),style:l,children:(0,ae.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,ae.jsx)("img",(0,o.A)((0,o.A)({src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Failed to load"},u),{},{"data-original-url":a}))})}):(0,ae.jsx)("img",(0,o.A)((0,o.A)({src:a,alt:s,className:c,style:l},u),{},{onError:()=>{r(!0)}}))}if("undefined"!==typeof document&&!document.getElementById("photo-scroll-styles")){const e=document.createElement("style");e.id="photo-scroll-styles",e.textContent="\n  .photo-scroll-container::-webkit-scrollbar {\n    width: 6px;\n  }\n  .photo-scroll-container::-webkit-scrollbar-track {\n    background: #f7fafc;\n    border-radius: 3px;\n  }\n  .photo-scroll-container::-webkit-scrollbar-thumb {\n    background: #cbd5e0;\n    border-radius: 3px;\n  }\n  .photo-scroll-container::-webkit-scrollbar-thumb:hover {\n    background: #a0aec0;\n  }\n",document.head.appendChild(e)}const ih=e=>{let{photos:t,type:n="transaction",size:r="medium",maxPhotos:a=4,onPhotoClick:o,onPhotoDelete:i,showDelete:s=!0,showDownload:l=!1,userRole:c="",customerName:u=""}=e;const d=t.filter(e=>{var t,n;return(null===(t=e.photo)||void 0===t?void 0:t.data)&&(!!(n=e.photo.data)&&n.startsWith("data:image/")&&!n.includes("base64,test")&&n.length>100)}),h=d.slice(0,a),f=()=>{switch(r){case"small":return"h-24 sm:h-20 w-full";case"medium":default:return"h-32 sm:h-24 w-full";case"large":return"h-40 sm:h-32 w-full"}},p=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}};return 0===h.length?(0,ae.jsx)("div",{className:"".concat(f()," bg-gray-100 rounded border flex items-center justify-center"),children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"w-6 h-6 mx-auto mb-1 opacity-30",children:(0,ae.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,ae.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),(0,ae.jsx)("p",{className:"text-xs text-gray-400",children:"No photo"})]})}):(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsx)("div",{className:"max-h-80 sm:max-h-64 overflow-y-auto photo-scroll-container",style:{scrollbarWidth:"thin",scrollbarColor:"#CBD5E0 #F7FAFC"},children:(0,ae.jsx)("div",{className:"grid ".concat("large"===r?1===d.length?"grid-cols-1":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":1===d.length?"grid-cols-1":"grid-cols-1 sm:grid-cols-2"," gap-3 sm:gap-4 p-2 sm:p-1"),children:d.map((e,t)=>(0,ae.jsx)("div",{className:"relative group",children:(0,ae.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200",children:[(0,ae.jsxs)("div",{className:"relative",children:[(0,ae.jsx)(oh,{src:e.photo.data,alt:"".concat(n," ").concat(t+1),className:"".concat(f()," object-cover cursor-pointer w-full"),onClick:()=>(e=>{if(o)return void o(e);const t=document.createElement("div");t.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",t.innerHTML='\n      <div class="relative max-w-4xl max-h-4xl p-4">\n        <img src="'.concat(e.photo.data,'" class="max-w-full max-h-full object-contain rounded" />\n        <button class="absolute top-2 right-2 text-white bg-black bg-opacity-50 rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-75">\xd7</button>\n        <div class="absolute bottom-2 left-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded text-sm">\n          ').concat(e.upload_date?new Date(e.upload_date).toLocaleDateString():""," \n          ").concat(e.status?"- ".concat(e.status):"","\n          ").concat(e.photo.filename?"- ".concat(e.photo.filename):"","\n        </div>\n      </div>\n    "),document.body.appendChild(t),t.addEventListener("click",e=>{const n=e.target;n!==t&&"\xd7"!==(null===n||void 0===n?void 0:n.textContent)||document.body.removeChild(t)})})(e)}),e.status&&(0,ae.jsx)("div",{className:"absolute top-2 left-2",children:(0,ae.jsx)(ku,{className:"text-xs ".concat(p(e.status)," shadow-sm"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,ae.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity duration-200",children:[l&&"admin"===c&&(0,ae.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{if("admin"===c)try{const t=document.createElement("a");t.href=e.photo.data;const r=e.transaction_date?new Date(e.transaction_date).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],a=u?u.replace(/[^a-zA-Z0-9\u4e00-\u9fff]/g,"_"):"Customer",o=n.charAt(0).toUpperCase()+n.slice(1),i="".concat(a,".").concat(o,".").concat(r,".jpg");t.download=i,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),console.log("\u2705 Photo downloaded:",i)}catch(t){console.error("Download failed:",t),alert("\u4e0b\u8f7d\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}else alert("\u53ea\u6709\u7ba1\u7406\u5458\u53ef\u4ee5\u4e0b\u8f7d\u7167\u7247")})(e)},className:"bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white rounded-full p-2.5 sm:p-2 shadow-lg backdrop-blur-sm z-10 transition-colors touch-manipulation",title:"\u4e0b\u8f7d\u7167\u7247",children:(0,ae.jsx)(Kd,{className:"w-4 h-4 sm:w-3 sm:h-3"})}),s&&i&&(0,ae.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u5f20\u7167\u7247\u5417\uff1f")&&i(e.id)},className:"bg-red-500 hover:bg-red-600 active:bg-red-700 text-white rounded-full p-2.5 sm:p-2 shadow-lg backdrop-blur-sm z-10 transition-colors touch-manipulation",title:"\u5220\u9664\u7167\u7247",children:(0,ae.jsx)(Ze,{className:"w-4 h-4 sm:w-3 sm:h-3"})})]})]}),e.transaction_date&&(0,ae.jsx)("div",{className:"px-3 py-2.5 sm:py-2 bg-gray-50 border-t",children:(0,ae.jsx)("div",{className:"text-sm sm:text-xs text-gray-600 text-center font-medium",children:new Date(e.transaction_date).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})})})]})},e.id))})}),d.length>0&&(0,ae.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm sm:text-xs text-gray-500 bg-gray-50 rounded-md py-2.5 sm:py-2",children:[(0,ae.jsx)("span",{className:"font-medium",children:d.length}),(0,ae.jsx)("span",{children:1===d.length?"photo":"photos"})]})]})},sh=e=>"boss"===e||"staff"===e,lh=e=>"admin"===e||"agent"===e||"boss"===e,ch=$e("trending-up",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),uh=$e("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),dh=$e("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),hh=$e("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]),fh=$e("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ph=$e("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),mh=$e("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),gh=$e("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vh=$e("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),yh=$e("id-card",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),xh=$e("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),bh=$e("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),wh=$e("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);const jh=rh(function(e){var n,r,a,i,s;let{user:l,showError:c,clearError:u}=e;const{t:d}=Lt(),h=sh(l.role),f=lh(l.role),p=e=>{if(!e)return"Unknown";const t=new Date(e);return isNaN(t.getTime())?"Unknown":t.toLocaleDateString()},[m,g]=(0,t.useState)([]),[v,y]=(0,t.useState)([]),[x,b]=(0,t.useState)([]),[w,j]=(0,t.useState)([]),[_,N]=(0,t.useState)([]),[k,S]=(0,t.useState)(!1),[A,O]=(0,t.useState)(!1),[C,P]=(0,t.useState)(null),[E,T]=(0,t.useState)(null),[D,I]=(0,t.useState)(null),[M,R]=(0,t.useState)(null),[L,F]=(0,t.useState)(null),[z,B]=(0,t.useState)(!1),[U,W]=(0,t.useState)(!0),[q,H]=(0,t.useState)(!1),[V,K]=(0,t.useState)({isOpen:!1,src:"",title:""}),[$,G]=(0,t.useState)({name:"",email:"",phone:"",agentId:"",vip_level:"silver",status:"active"}),[Y,J]=(0,t.useState)({passportNumber:"",passportFile:null,idNumber:"",nationality:"",dateOfBirth:"",address:"",occupation:"",hobby:"",gamingPreferences:"",emergencyContact:"",emergencyPhone:"",maritalStatus:"",educationLevel:"",incomeRange:"",preferredLanguage:"English",notes:"",specialRequirements:""}),X=(0,t.useCallback)(async()=>{try{u(),console.log("\ud83d\udd04 Loading real-time customer data from Supabase...");const[e,t,n,r,a]=await Promise.all([Le.db.get("customers",[]),Le.db.get("agents",[]),Le.db.get("trips",[]),Le.db.get("rollingRecords",[]),Le.db.get("buyInOutRecords",[])]),i=e.map(async e=>{try{const t=await Fe.apiClient.getCustomerDetails(e.id);return{customerId:e.id,details:t.success?t.data:null}}catch(t){return console.log("No details found for customer ".concat(e.id)),{customerId:e.id,details:null}}}),s=await Promise.all(i),l=new Map;s.forEach(e=>{e.details&&l.set(e.customerId,e.details)}),console.log("\ud83d\udd0d Customer details loaded:",s.length,"customers"),console.log("\ud83d\udd0d Customer details map size:",l.size),l.size>0&&console.log("\ud83d\udd0d Sample customer details:",Array.from(l.entries())[0]),console.log("\ud83d\udd0d Agents data loaded:",t.length,"agents"),t.length>0&&console.log("\ud83d\udd0d Sample agent:",t[0]);const c=e.map(e=>{const n=l.get(e.id);console.log("\ud83d\udd0d Customer ".concat(e.name," raw data:"),{created_at:e.created_at,createdAt:e.createdAt,agent_id:e.agent_id,agentId:e.agentId,status:e.status,isActive:e.isActive,total_rolling:e.total_rolling,total_win_loss:e.total_win_loss,total_buy_in:e.total_buy_in,total_buy_out:e.total_buy_out});const r=e.agent_id||e.agentId,a=t.find(e=>e.id===r),i=(0,o.A)((0,o.A)({},e),{},{totalRolling:parseFloat(String(e.total_rolling||0))||0,totalWinLoss:parseFloat(String(e.total_win_loss||0))||0,totalBuyIn:parseFloat(String(e.total_buy_in||0))||0,totalBuyOut:parseFloat(String(e.total_buy_out||0))||0,details:n,attachments:(null===n||void 0===n?void 0:n.attachments)||[],createdAt:e.created_at||e.createdAt,agentId:r,agentName:(null===a||void 0===a?void 0:a.name)||"Unknown Agent",isActive:"active"===e.status||e.isActive,isAgent:e.is_agent||!1,sourceAgentId:e.source_agent_id||void 0,rollingPercentage:parseFloat(String(e.rolling_percentage||1.4))||1.4,creditLimit:parseFloat(String(e.credit_limit||0))||0,availableCredit:parseFloat(String(e.available_credit||0))||0});return console.log("\u2705 Customer ".concat(e.name," processed data:"),{createdAt:i.createdAt,agentId:i.agentId,agentName:i.agentName,status:e.status,isActive:i.isActive,foundAgent:a?"".concat(a.name," (").concat(a.id,")"):"Not found"}),i}),d=n.map(e=>{var t;return(0,o.A)((0,o.A)({},e),{},{calculatedTotalRolling:.014*(e.totalRolling||0),attachments:e.attachments||[],customers:(null===(t=e.customers)||void 0===t?void 0:t.map(t=>{const n=r.filter(n=>n.customerId===t.customerId&&n.recordedAt>=e.date).reduce((e,t)=>e+(t.winLoss||0),0);return(0,o.A)((0,o.A)({},t),{},{winLoss:n,rollingPercentage:t.rollingPercentage||1.4,calculatedRollingAmount:t.calculatedRollingAmount||.014*(t.rollingAmount||0)})}))||[]})});g(c),y(t),b(d),j(r),N(a),console.log("\u2705 Loaded real-time data: ".concat(c.length," customers, ").concat(t.length," agents, ").concat(d.length," trips, ").concat(r.length," rolling records"))}catch(e){console.error("\u274c Error loading real-time customer data:",e),c("Failed to load customer data: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{W(!1)}},[u,c]);(0,t.useEffect)(()=>{X()},[X]);const Q="agent"===l.role&&l.agentId?m.filter(e=>e.agentId===l.agentId):m,Z=(e,t)=>{K({isOpen:!0,src:e,title:t})},ee=()=>{K({isOpen:!1,src:"",title:""})},te=async()=>{if(M)try{H(!0),u(),console.log("\ud83d\uddd1\ufe0f Deleting customer:",M.name,M.id);const e=await Fe.apiClient.deleteCustomer(M.id);if(!e.success)throw new Error(e.error||"Failed to delete customer");console.log("\u2705 Customer deleted successfully"),await X(),R(null)}catch(e){console.error("\u274c Error deleting customer:",e),c("Failed to delete customer: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{H(!1)}},ne=async(e,t)=>{try{console.log("\ud83d\udd0d Frontend - Updating customer attachments:",e,t.length);const n=m.map(n=>n.id===e?(0,o.A)((0,o.A)({},n),{},{attachments:t}):n);g(n);const r=await Fe.apiClient.uploadCustomerAttachments(e,t);if(!r.success)throw new Error(r.error||"Failed to upload attachments");console.log("\u2705 Customer attachments updated successfully"),await X()}catch(n){console.error("\u274c Error updating customer attachments:",n),c("Failed to update attachments: ".concat(n instanceof Error?n.message:"Unknown error occurred")),await X()}},re="agent"===l.role&&l.agentId?v.filter(e=>e.id===l.agentId):v.filter(e=>"active"===e.status),oe=e=>{switch(e){case"planned":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},se=e=>0===e?{text:"Break Even",icon:jt,bgColor:"bg-gray-100",textColor:"text-gray-700",iconColor:"text-gray-600"}:e>0?{text:"Customer Win",icon:ch,bgColor:"bg-green-100",textColor:"text-green-700",iconColor:"text-green-600"}:{text:"House Win",icon:_t,bgColor:"bg-red-100",textColor:"text-red-700",iconColor:"text-red-600"},le="admin"===l.role,ce="agent"===l.role,ue="staff"===l.role;return U?(0,ae.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:"Loading real-time customer data from Supabase..."})]})}):(0,ae.jsxs)("div",{className:"space-y-6",children:[ue&&(0,ae.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,ae.jsxs)("div",{className:"flex items-center",children:[(0,ae.jsx)(Vd,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("p",{className:"text-sm font-medium text-blue-800",children:[d("customer_info")," - ",d("view")," Only"]}),(0,ae.jsx)("p",{className:"text-xs text-blue-600",children:"You have read-only access to customer information, trip history, and documents."})]})]})}),(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:d("Customer Management")}),(0,ae.jsx)("p",{className:"text-gray-600",children:ce?"Manage your customers with real-time rolling data and complete profile editing":ue?"View customer information, real-time data, and trip history":"Manage all customers with live data updates and comprehensive profile management"})]}),!h&&(0,ae.jsxs)(Ra,{open:k,onOpenChange:S,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{onClick:()=>{P(null),G({name:"",email:"",phone:"",agentId:"agent"===l.role&&l.agentId?l.agentId:"",vip_level:"Silver",status:"active"}),S(!0)},disabled:q,children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),d("add_customer")]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:d(C?"edit_customer":"add_customer")}),(0,ae.jsx)(qa,{children:d(C?"update_customer_info":"add_customer_desc")})]}),(0,ae.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(!v.find(e=>e.id===$.agentId))return void c("Please select a valid agent");if(C){const e={name:$.name,email:$.email,phone:$.phone||null,agent_id:$.agentId,vip_level:$.vip_level||"Silver",status:$.status||"active"},t=await Fe.apiClient.updateCustomer(C.id,e);if(!t.success)throw new Error(t.error||"Failed to update customer");await X()}else{const e={name:$.name,email:$.email,phone:$.phone||null,agent_id:$.agentId,vip_level:$.vip_level||"Silver",status:$.status||"active"},t=await Fe.apiClient.createCustomer(e);if(!t.success)throw new Error(t.error||"Failed to create customer 1");await X()}G({name:"",email:"",phone:"",agentId:"",vip_level:"Silver",status:"active"}),P(null),S(!1)}catch(t){}},className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"name",children:d("name")}),(0,ae.jsx)(ie,{id:"name",value:$.name,onChange:e=>G((0,o.A)((0,o.A)({},$),{},{name:e.target.value})),placeholder:d("customer_full_name"),required:!0,disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"email",children:d("email")}),(0,ae.jsx)(ie,{id:"email",type:"email",value:$.email,onChange:e=>G((0,o.A)((0,o.A)({},$),{},{email:e.target.value})),placeholder:"customer@email.com",required:!0,disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"phone",children:d("phone")}),(0,ae.jsx)(ie,{id:"phone",value:$.phone,onChange:e=>G((0,o.A)((0,o.A)({},$),{},{phone:e.target.value})),placeholder:"+1234567890",required:!0,disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"agent",children:d("agent")}),(0,ae.jsxs)(gu,{value:$.agentId,onValueChange:e=>G((0,o.A)((0,o.A)({},$),{},{agentId:e})),disabled:q||"agent"===l.role&&null!==C&&C.agentId!==l.agentId,children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{placeholder:d("select_agent")})}),(0,ae.jsx)(xu,{children:re.map(e=>(0,ae.jsx)(bu,{value:e.id,children:e.name},e.id))})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>S(!1),disabled:q,children:d("cancel")}),(0,ae.jsx)(Vt,{type:"submit",disabled:q,children:q?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),d("saving"),"..."]}):(0,ae.jsxs)(ae.Fragment,{children:[d(C?"update":"add")," ",d("customers")]})})]})]})]})]})]}),(0,ae.jsx)("div",{className:"grid gap-6",children:0===Q.length?(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"text-center py-12",children:(0,ae.jsxs)("p",{className:"text-gray-500",children:[d("no_customers_found"),". ",d(ue?"contact_admin":"add_first_customer")]})})}):Q.map(e=>{var t,n,r,a,o,i,s,u,g,v,y,b,j,N,k,A,C,E,L,z,U,W,H,V,K,$,Y,X,Q,ee,re,ie,ce,de,he,fe;const pe=(e=>{const t=[];return x.forEach(n=>{var r;const a=null===(r=n.customers)||void 0===r?void 0:r.find(t=>t.customerId===e);a&&t.push({tripId:n.id,tripName:n.name,tripDate:n.date,tripStatus:n.status,agentName:n.agentName||"Unknown Agent",customerData:a})}),t.sort((e,t)=>new Date(t.tripDate||"").getTime()-new Date(e.tripDate||"").getTime())})(e.id),me=(ge=e.id,w.filter(e=>e.customerId===ge).sort((e,t)=>new Date(t.recordedAt).getTime()-new Date(e.recordedAt).getTime()));var ge;const ve=(e=>_.filter(t=>t.customerId===e).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()))(e.id),ye=D===e.id;return(0,ae.jsx)(Bd,{open:ye,onOpenChange:()=>(e=>{I(D===e?null:e)})(e.id),children:(0,ae.jsxs)(Te,{className:"overflow-hidden",children:[(0,ae.jsx)(Ud,{asChild:!0,children:(0,ae.jsx)(De,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)("span",{children:e.name}),e.isAgent&&(0,ae.jsxs)(ku,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 flex items-center space-x-1",children:[(0,ae.jsx)(Ot,{className:"w-3 h-3"}),(0,ae.jsx)("span",{children:d("agent")})]}),e.attachments&&e.attachments.length>0&&(0,ae.jsxs)(ku,{variant:"outline",className:"flex items-center space-x-1",children:[(0,ae.jsx)(hh,{className:"w-3 h-3"}),(0,ae.jsx)("span",{children:e.attachments.length})]}),pe.length>0&&(0,ae.jsxs)(ku,{variant:"outline",className:"flex items-center space-x-1",children:[(0,ae.jsx)(Ct,{className:"w-3 h-3"}),(0,ae.jsxs)("span",{children:[pe.length," ",d("trips")]})]}),me.length>0&&(0,ae.jsxs)(ku,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[(0,ae.jsx)(St,{className:"w-3 h-3 mr-1"}),me.length," ",d("records")]}),ue&&(0,ae.jsxs)(ku,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[(0,ae.jsx)(Vd,{className:"w-3 h-3 mr-1"}),d("view")," Only"]})]}),(0,ae.jsxs)(Me,{children:["Customer since ",p(e.createdAt)," \u2022 Agent: ",e.agentName||"Unknown"]})]}),(0,ae.jsx)("div",{className:"flex items-center space-x-2",children:ye?(0,ae.jsx)(uu,{className:"w-5 h-5 text-gray-400"}):(0,ae.jsx)(lu,{className:"w-5 h-5 text-gray-400"})})]})})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 mb-4",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(fh,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"text-sm",children:e.email})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsxs)("span",{className:"text-sm text-gray-500",children:[d("phone"),":"]}),(0,ae.jsx)("span",{className:"text-sm",children:e.phone})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ph,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:e.details?d("details_available"):d("no_details_available")})]}),f&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(kt,{className:"w-4 h-4 text-blue-600"}),(0,ae.jsxs)("span",{className:"text-sm font-medium",children:[d("rolling"),": $",(e.totalRolling||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(e.totalWinLoss||0)>=0?(0,ae.jsx)(ch,{className:"w-4 h-4 text-green-600"}):(0,ae.jsx)(_t,{className:"w-4 h-4 text-red-600"}),(0,ae.jsxs)("span",{className:"text-sm font-medium ".concat((e.totalWinLoss||0)>=0?"text-green-600":"text-red-600"),children:[d("win_loss"),": $",Math.abs(e.totalWinLoss||0).toLocaleString()]})]})]})]}),!h&&(0,ae.jsxs)("div",{className:"flex space-x-2",children:[(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(e=>{P(e),G({name:e.name,email:e.email,phone:e.phone,agentId:e.agentId,vip_level:e.vip_level||"Silver",status:e.status||"active"}),S(!0)})(e),disabled:q,children:[(0,ae.jsx)(mh,{className:"w-4 h-4 mr-2"}),d("edit_basic_info")]}),(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(async e=>{T(e);try{const t=await Fe.apiClient.getCustomerDetails(e.id);if(t.success&&t.data){const e=t.data;J({passportNumber:e.passport_number||"",passportFile:null,idNumber:e.id_number||"",nationality:e.nationality||"",dateOfBirth:e.date_of_birth||"",address:e.address||"",occupation:e.occupation||"",hobby:e.hobby||"",gamingPreferences:e.gaming_preferences||"",emergencyContact:e.emergency_contact||"",emergencyPhone:e.emergency_phone||"",maritalStatus:e.marital_status||"",educationLevel:e.education_level||"",incomeRange:e.income_range||"",preferredLanguage:e.preferred_language||"English",notes:e.notes||"",specialRequirements:e.special_requirements||""})}else J({passportNumber:"",passportFile:null,idNumber:"",nationality:"",dateOfBirth:"",address:"",occupation:"",hobby:"",gamingPreferences:"",emergencyContact:"",emergencyPhone:"",maritalStatus:"",educationLevel:"",incomeRange:"",preferredLanguage:"English",notes:"",specialRequirements:""})}catch(t){console.error("Error loading customer details:",t),c("Failed to load customer details"),J({passportNumber:"",passportFile:null,idNumber:"",nationality:"",dateOfBirth:"",address:"",occupation:"",hobby:"",gamingPreferences:"",emergencyContact:"",emergencyPhone:"",maritalStatus:"",educationLevel:"",incomeRange:"",preferredLanguage:"English",notes:"",specialRequirements:""})}O(!0)})(e),disabled:q,children:[(0,ae.jsx)(ph,{className:"w-4 h-4 mr-2"}),d("edit_details")]}),le&&!e.isAgent&&(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(e=>{F(e),B(!0)})(e),disabled:q,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-200",children:[(0,ae.jsx)(Ot,{className:"w-4 h-4 mr-2"}),"Promote to Agent"]}),le&&(0,ae.jsxs)(Lo,{open:(null===M||void 0===M?void 0:M.id)===e.id,onOpenChange:e=>!e&&R(null),children:[(0,ae.jsx)(Fo,{asChild:!0,children:(0,ae.jsx)(Vt,{variant:"destructive",size:"sm",onClick:()=>R(e),disabled:q,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})}),(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Delete Customer"}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to permanently delete "',e.name,'"? This action cannot be undone and will remove all customer data, trip history, transactions, and associated records from the system.',(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),(0,ae.jsx)("strong",{children:"Warning:"})," This will also affect any trips this customer participated in and may impact financial calculations."]})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{disabled:q,children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:te,className:"bg-red-600 text-white hover:bg-red-700",disabled:q,children:q?"Deleting...":"Delete Customer"})]})]})]})]}),(0,ae.jsx)(Wd,{className:"mt-6",children:(0,ae.jsxs)(xd,{defaultValue:"info",className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-5",children:[(0,ae.jsxs)(wd,{value:"info",className:"flex items-center space-x-2",children:[(0,ae.jsx)(gh,{className:"w-4 h-4"}),(0,ae.jsx)("span",{children:"Profile"})]}),(0,ae.jsxs)(wd,{value:"trips",className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ct,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Trips (",pe.length,")"]})]}),(0,ae.jsxs)(wd,{value:"rolling",className:"flex items-center space-x-2",children:[(0,ae.jsx)(St,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Rolling (",me.length,")"]})]}),(0,ae.jsxs)(wd,{value:"cash",className:"flex items-center space-x-2",children:[(0,ae.jsx)(vh,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Cash Flow (",ve.length,")"]})]}),(0,ae.jsxs)(wd,{value:"files",className:"flex items-center space-x-2",children:[(0,ae.jsx)(hh,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Files (",((null===(t=e.attachments)||void 0===t?void 0:t.length)||0)+(null!==(n=e.details)&&void 0!==n&&null!==(r=n.passport_photo)&&void 0!==r&&r.data?1:0),")"]})]})]}),(0,ae.jsxs)(jd,{value:"info",className:"space-y-4 mt-6",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center",children:[(0,ae.jsx)(gh,{className:"w-4 h-4 mr-2"}),"Basic Information"]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,ae.jsx)("p",{className:"text-lg",children:e.name})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,ae.jsx)("p",{children:e.email})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,ae.jsx)("p",{children:e.phone})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Agent"}),(0,ae.jsx)("p",{children:e.agentName})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,ae.jsx)(ku,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Member Since"}),(0,ae.jsx)("p",{children:p(e.createdAt)})]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center",children:[(0,ae.jsx)(yh,{className:"w-4 h-4 mr-2"}),"Identity & Personal"]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Passport Number"}),(0,ae.jsx)("p",{children:(null===(a=e.details)||void 0===a?void 0:a.passport_number)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Passport Photo"}),null!==(o=e.details)&&void 0!==o&&null!==(i=o.passport_photo)&&void 0!==i&&i.data?(0,ae.jsxs)("div",{className:"mt-1",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ph,{className:"w-4 h-4 text-blue-500"}),(0,ae.jsx)("span",{className:"text-sm text-blue-600",children:(null===(s=e.details)||void 0===s||null===(u=s.passport_photo)||void 0===u?void 0:u.name)||(null===(g=e.details)||void 0===g?void 0:g.passport_file_name)||"Passport Photo"})]}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:["Uploaded: ",null!==(v=e.details)&&void 0!==v&&null!==(y=v.passport_photo)&&void 0!==y&&y.uploadedAt?new Date(e.details.passport_photo.uploadedAt).toLocaleDateString():null!==(b=e.details)&&void 0!==b&&b.passport_uploaded_at?new Date(e.details.passport_uploaded_at).toLocaleDateString():"Unknown date"]}),(null===(j=e.details)||void 0===j||null===(N=j.passport_photo)||void 0===N?void 0:N.data)&&(0,ae.jsx)("div",{className:"mt-2",children:(0,ae.jsx)(ih,{photos:[{id:"passport",photo:{data:e.details.passport_photo.data,filename:e.details.passport_photo.name||"passport.jpg",size:e.details.passport_photo.size,type:e.details.passport_photo.type},upload_date:e.details.passport_photo.uploaded_at}],type:"passport",size:"medium",maxPhotos:1})})]}):(0,ae.jsx)("p",{className:"text-gray-500",children:"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"ID Number"}),(0,ae.jsx)("p",{children:(null===(k=e.details)||void 0===k?void 0:k.id_number)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Nationality"}),(0,ae.jsx)("p",{children:(null===(A=e.details)||void 0===A?void 0:A.nationality)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Date of Birth"}),(0,ae.jsx)("p",{children:(null===(C=e.details)||void 0===C?void 0:C.date_of_birth)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,ae.jsx)("p",{children:(null===(E=e.details)||void 0===E?void 0:E.address)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Occupation"}),(0,ae.jsx)("p",{children:(null===(L=e.details)||void 0===L?void 0:L.occupation)||"Not provided"})]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center",children:[(0,ae.jsx)(xh,{className:"w-4 h-4 mr-2"}),"Preferences & Financial"]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Hobby"}),(0,ae.jsx)("p",{children:(null===(z=e.details)||void 0===z?void 0:z.hobby)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Gaming Preferences"}),(0,ae.jsx)("p",{children:(null===(U=e.details)||void 0===U?void 0:U.gaming_preferences)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Emergency Contact"}),(0,ae.jsx)("p",{children:(null===(W=e.details)||void 0===W?void 0:W.emergency_contact)||"Not provided"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Emergency Phone"}),(0,ae.jsx)("p",{children:(null===(H=e.details)||void 0===H?void 0:H.emergency_phone)||"Not provided"})]})]})]}),f&&(0,ae.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,ae.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,ae.jsx)(Pt,{className:"w-4 h-4 mr-2"}),"Real-time Financial Summary"]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Total Rolling"}),(0,ae.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["$",(e.totalRolling||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Total Win/Loss"}),(0,ae.jsxs)("p",{className:"text-xl font-bold ".concat((e.totalWinLoss||0)>=0?"text-green-600":"text-red-600"),children:["$",Math.abs(e.totalWinLoss||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Buy-in Total"}),(0,ae.jsxs)("p",{className:"text-xl font-bold text-blue-500",children:["$",(e.totalBuyIn||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Buy-out Total"}),(0,ae.jsxs)("p",{className:"text-xl font-bold text-purple-500",children:["$",(e.totalBuyOut||0).toLocaleString()]})]})]})]})]}),(0,ae.jsx)(jd,{value:"trips",className:"space-y-4 mt-6",children:0===pe.length?(0,ae.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ae.jsx)(Ct,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),(0,ae.jsx)("p",{children:"No trip history available"})]}):(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsx)("h4",{className:"font-medium text-gray-900",children:"Trip Participation History"}),(0,ae.jsxs)(ku,{variant:"outline",className:"bg-green-50 text-green-700",children:[(0,ae.jsx)(Pt,{className:"w-3 h-3 mr-1"}),"Live Data"]})]}),pe.map(e=>{const t=se(e.customerData.winLoss||0),n=t.icon;return(0,ae.jsx)(Te,{className:"p-4",children:(0,ae.jsx)("div",{className:"flex justify-between items-start",children:(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ae.jsx)("h5",{className:"font-medium",children:e.tripName}),(0,ae.jsx)(ku,{className:oe(e.tripStatus),children:e.tripStatus}),(0,ae.jsxs)(ku,{className:"".concat(t.bgColor," ").concat(t.textColor," flex items-center space-x-1"),children:[(0,ae.jsx)(n,{className:"w-3 h-3 ".concat(t.iconColor)}),(0,ae.jsx)("span",{children:t.text})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Date"}),(0,ae.jsx)("p",{children:p(e.tripDate)})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Rolling Amount"}),(0,ae.jsxs)("p",{className:"font-medium",children:["$",(e.customerData.rollingAmount||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Win/Loss (Real-time)"}),(0,ae.jsxs)("p",{className:"font-medium ".concat((e.customerData.winLoss||0)>=0?"text-green-600":"text-red-600"),children:["$",Math.abs(e.customerData.winLoss||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Agent"}),(0,ae.jsx)("p",{children:e.agentName})]})]})]})})},e.tripId)})]})}),(0,ae.jsx)(jd,{value:"rolling",className:"space-y-4 mt-6",children:0===me.length?(0,ae.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ae.jsx)(St,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),(0,ae.jsx)("p",{children:"No rolling records available"})]}):(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsx)("h4",{className:"font-medium text-gray-900",children:"Rolling Records"}),(0,ae.jsxs)(ku,{variant:"outline",className:"bg-green-50 text-green-700",children:[(0,ae.jsx)(Pt,{className:"w-3 h-3 mr-1"}),"Live Data"]})]}),me.slice(0,10).map(e=>{const t=se(e.winLoss||0),n=t.icon;return(0,ae.jsx)(Te,{className:"p-4",children:(0,ae.jsx)("div",{className:"flex justify-between items-start",children:(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ae.jsx)("h5",{className:"font-medium",children:e.gameType}),e.verified&&(0,ae.jsxs)(ku,{variant:"default",className:"bg-green-100 text-green-800",children:[(0,ae.jsx)(Ye,{className:"w-3 h-3 mr-1"}),"Verified"]}),(0,ae.jsxs)(ku,{className:"".concat(t.bgColor," ").concat(t.textColor," flex items-center space-x-1"),children:[(0,ae.jsx)(n,{className:"w-3 h-3 ".concat(t.iconColor)}),(0,ae.jsx)("span",{children:t.text})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 text-sm",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Rolling Amount"}),(0,ae.jsxs)("p",{className:"font-medium",children:["$",(e.rollingAmount||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Win/Loss"}),(0,ae.jsxs)("p",{className:"font-medium ".concat((e.winLoss||0)>=0?"text-green-600":"text-red-600"),children:["$",Math.abs(e.winLoss||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Buy-in"}),(0,ae.jsxs)("p",{className:"font-medium text-blue-600",children:["$",(e.buyInAmount||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Buy-out"}),(0,ae.jsxs)("p",{className:"font-medium text-purple-600",children:["$",(e.buyOutAmount||0).toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Recorded"}),(0,ae.jsx)("p",{children:new Date(e.recordedAt).toLocaleDateString()})]})]})]})})},e.id)}),me.length>10&&(0,ae.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Showing 10 most recent records out of ",me.length," total"]})]})}),(0,ae.jsx)(jd,{value:"cash",className:"space-y-4 mt-6",children:0===ve.length?(0,ae.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ae.jsx)(vh,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),(0,ae.jsx)("p",{children:"No cash flow records available"})]}):(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsx)("h4",{className:"font-medium text-gray-900",children:"Cash Flow Records"}),(0,ae.jsxs)(ku,{variant:"outline",className:"bg-green-50 text-green-700",children:[(0,ae.jsx)(Pt,{className:"w-3 h-3 mr-1"}),"Live Data"]})]}),ve.slice(0,10).map(e=>(0,ae.jsx)(Te,{className:"p-4",children:(0,ae.jsx)("div",{className:"flex justify-between items-start",children:(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ae.jsx)("h5",{className:"font-medium capitalize",children:e.transactionType}),(0,ae.jsxs)(ku,{variant:"outline",className:"buy-in"===e.transactionType?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700",children:["buy-in"===e.transactionType?(0,ae.jsx)(bh,{className:"w-3 h-3 mr-1"}):(0,ae.jsx)(wh,{className:"w-3 h-3 mr-1"}),e.transactionType]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Amount"}),(0,ae.jsxs)("p",{className:"font-medium ".concat("buy-in"===e.transactionType?"text-blue-600":"text-purple-600"),children:["$",e.amount.toLocaleString()]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Venue"}),(0,ae.jsx)("p",{children:e.venue||"Not specified"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Staff"}),(0,ae.jsx)("p",{children:e.staffName})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Date"}),(0,ae.jsx)("p",{children:new Date(e.timestamp).toLocaleDateString()})]})]})]})})},e.id)),ve.length>10&&(0,ae.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Showing 10 most recent records out of ",ve.length," total"]})]})}),(0,ae.jsxs)(jd,{value:"files",className:"space-y-4 mt-6",children:[!ue&&(0,ae.jsx)(Gd,{attachments:e.attachments||[],onAttachmentsChange:t=>ne(e.id,t),onUpload:t=>(async(e,t)=>{try{console.log("\ud83d\udd0d Frontend - Uploading new files:",e,t.length);const n=m.find(t=>t.id===e);if(!n)throw new Error("Customer not found");const r=[...n.attachments||[],...t];await ne(e,r)}catch(n){console.error("\u274c Error uploading files:",n),c("Failed to upload files: ".concat(n instanceof Error?n.message:"Unknown error occurred"))}})(e.id,t),disabled:ue,currentUser:l.username||l.email||"Unknown User"}),(null===(V=e.details)||void 0===V||null===(K=V.passport_photo)||void 0===K?void 0:K.data)&&(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center",children:[(0,ae.jsx)(yh,{className:"w-4 h-4 mr-2"}),"Passport Photo"]}),(0,ae.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(0,ae.jsxs)(Te,{className:"p-4",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ph,{className:"w-4 h-4 text-blue-500"}),(0,ae.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ae.jsx)("p",{className:"text-sm font-medium truncate",children:(null===($=e.details)||void 0===$||null===(Y=$.passport_photo)||void 0===Y?void 0:Y.name)||(null===(X=e.details)||void 0===X?void 0:X.passport_file_name)||"Passport Photo"}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[null!==(Q=e.details)&&void 0!==Q&&null!==(ee=Q.passport_photo)&&void 0!==ee&&ee.size?"".concat((e.details.passport_photo.size/1024).toFixed(1)," KB"):null!==(re=e.details)&&void 0!==re&&re.passport_file_size?"".concat((e.details.passport_file_size/1024).toFixed(1)," KB"):"Unknown size"," \u2022 ",null!==(ie=e.details)&&void 0!==ie&&null!==(ce=ie.passport_photo)&&void 0!==ce&&ce.uploadedAt?new Date(e.details.passport_photo.uploadedAt).toLocaleDateString():null!==(de=e.details)&&void 0!==de&&de.passport_uploaded_at?new Date(e.details.passport_uploaded_at).toLocaleDateString():"Unknown date"]})]})]}),(null===(he=e.details)||void 0===he||null===(fe=he.passport_photo)||void 0===fe?void 0:fe.data)&&(0,ae.jsx)("div",{className:"mt-2",children:(0,ae.jsx)(ih,{photos:[{id:"passport",photo:{data:e.details.passport_photo.data,filename:e.details.passport_photo.name||"passport.jpg",size:e.details.passport_photo.size,type:e.details.passport_photo.type},upload_date:e.details.passport_photo.uploaded_at}],type:"passport",size:"large",maxPhotos:1})})]})})]}),e.attachments&&e.attachments.length>0&&(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsx)("h4",{className:"font-medium text-gray-900",children:"Attached Files"}),(0,ae.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.attachments.map(t=>(0,ae.jsxs)(Te,{className:"p-4",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(hh,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ae.jsx)("p",{className:"text-sm font-medium truncate",children:t.name}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[(t.size/1024).toFixed(1)," KB \u2022 ",new Date(t.uploadedAt).toLocaleDateString()]})]})]}),t.type.startsWith("image/")&&(0,ae.jsx)("img",{src:t.data,alt:t.name,className:"mt-2 w-full h-32 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Z(t.data,"".concat(e.name," - ").concat(t.name))})]},t.id))})]})]})]})})]})]})},e.id)})}),(0,ae.jsx)(Ra,{open:A,onOpenChange:O,children:(0,ae.jsxs)(Ba,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Edit Customer Details"}),(0,ae.jsx)(qa,{children:"Update comprehensive customer information"})]}),(0,ae.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),E)try{H(!0);let e=null;if(Y.passportFile){var t,n;console.log("\ud83d\udd0d Uploading passport file:",Y.passportFile.name);const r=await new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsDataURL(Y.passportFile)}),a=await Fe.apiClient.uploadCustomerPassport(E.id,{name:Y.passportFile.name,type:Y.passportFile.type,size:Y.passportFile.size,data:r,uploadedAt:(new Date).toISOString()});if(!a.success)throw new Error(a.error||"Failed to upload passport file");e=null===(t=a.data)||void 0===t||null===(n=t.passport_photo)||void 0===n?void 0:n.data,console.log("\u2705 Passport file uploaded successfully:",e)}const r={passport_number:Y.passportNumber||null,id_number:Y.idNumber||null,nationality:Y.nationality||null,date_of_birth:Y.dateOfBirth||null,address:Y.address||null,occupation:Y.occupation||null,hobby:Y.hobby||null,gaming_preferences:Y.gamingPreferences||null,emergency_contact:Y.emergencyContact||null,emergency_phone:Y.emergencyPhone||null,marital_status:Y.maritalStatus||null,education_level:Y.educationLevel||null,income_range:Y.incomeRange||null,preferred_language:Y.preferredLanguage||"English",notes:Y.notes||null,special_requirements:Y.specialRequirements||null};console.log("\ud83d\udd0d Frontend - updateData being sent:",r),console.log("\ud83d\udd0d Frontend - Customer ID:",E.id),console.log("\ud83d\udd0d Frontend - Form data:",Y);const a=await Fe.apiClient.updateCustomerDetails(E.id,r);if(!a.success)throw new Error(a.error||"Failed to update customer details");if(console.log("\u2705 Customer details saved successfully"),await X(),E){const e=await Fe.apiClient.getCustomerDetails(E.id);if(e.success&&e.data){console.log("\u2705 Loaded updated customer details:",e.data);const t=e.data;J({passportNumber:t.passport_number||"",passportFile:null,idNumber:t.id_number||"",nationality:t.nationality||"",dateOfBirth:t.date_of_birth||"",address:t.address||"",occupation:t.occupation||"",hobby:t.hobby||"",gamingPreferences:t.gaming_preferences||"",emergencyContact:t.emergency_contact||"",emergencyPhone:t.emergency_phone||"",maritalStatus:t.marital_status||"",educationLevel:t.education_level||"",incomeRange:t.income_range||"",preferredLanguage:t.preferred_language||"English",notes:t.notes||"",specialRequirements:t.special_requirements||""});const n=m.find(e=>e.id===E.id);n&&T((0,o.A)({},n))}}O(!1),T(null)}catch(r){console.error("Error updating customer details:",r),c("Failed to update customer details: ".concat(r instanceof Error?r.message:"Unknown error occurred"))}finally{H(!1)}},className:"space-y-6",children:[(0,ae.jsxs)(xd,{defaultValue:"identity",className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-3",children:[(0,ae.jsx)(wd,{value:"identity",children:"Identity & Personal"}),(0,ae.jsx)(wd,{value:"preferences",children:"Preferences & Lifestyle"}),(0,ae.jsx)(wd,{value:"additional",children:"Additional Details"})]}),(0,ae.jsx)(jd,{value:"identity",className:"space-y-6",children:(0,ae.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border",children:[(0,ae.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ae.jsx)(yh,{className:"w-5 h-5 mr-2 text-blue-600"}),"Identity & Personal Information"]}),(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"passportNumber",children:"Passport Number"}),(0,ae.jsx)(ie,{id:"passportNumber",value:Y.passportNumber,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{passportNumber:e.target.value})),placeholder:"Not provided",disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"passportFile",children:"Passport Photo"}),(null===E||void 0===E||null===(n=E.details)||void 0===n||null===(r=n.passport_photo)||void 0===r?void 0:r.data)&&!Y.passportFile&&(0,ae.jsxs)("div",{className:"mb-3 p-3 border rounded-lg bg-gray-50",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ae.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Current Passport Photo:"}),(0,ae.jsxs)(Vt,{type:"button",variant:"outline",size:"sm",onClick:()=>E&&Z(E.details.passport_photo.data,"".concat(E.name," - Current Passport Photo")),children:[(0,ae.jsx)(Vd,{className:"w-3 h-3 mr-1"}),"View"]})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ph,{className:"w-4 h-4 text-blue-500"}),(0,ae.jsx)("span",{className:"text-sm text-gray-600",children:(null===(a=E.details)||void 0===a||null===(i=a.passport_photo)||void 0===i?void 0:i.name)||(null===(s=E.details)||void 0===s?void 0:s.passport_file_name)||"passport.jpg"})]}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a new file to replace the current passport photo"})]}),(0,ae.jsx)(ie,{id:"passportFile",type:"file",accept:"image/*,.pdf",onChange:e=>{var t;const n=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;J((0,o.A)((0,o.A)({},Y),{},{passportFile:n}))},disabled:q,className:"cursor-pointer"}),Y.passportFile&&(0,ae.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["New file selected: ",Y.passportFile.name," (",(Y.passportFile.size/1024).toFixed(1)," KB)"]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"idNumber",children:"ID Number"}),(0,ae.jsx)(ie,{id:"idNumber",value:Y.idNumber,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{idNumber:e.target.value})),placeholder:"Not provided",disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"nationality",children:"Nationality"}),(0,ae.jsx)(ie,{id:"nationality",value:Y.nationality,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{nationality:e.target.value})),placeholder:"Not provided",disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"dateOfBirth",children:"Date of Birth"}),(0,ae.jsx)(ie,{id:"dateOfBirth",type:"date",value:Y.dateOfBirth,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{dateOfBirth:e.target.value})),disabled:q})]}),(0,ae.jsxs)("div",{className:"col-span-2",children:[(0,ae.jsx)(Ne,{htmlFor:"address",children:"Address"}),(0,ae.jsx)($t,{id:"address",value:Y.address,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{address:e.target.value})),placeholder:"Not provided",disabled:q,rows:3})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"occupation",children:"Occupation"}),(0,ae.jsx)(ie,{id:"occupation",value:Y.occupation,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{occupation:e.target.value})),placeholder:"Not provided",disabled:q})]})]})]})}),(0,ae.jsx)(jd,{value:"preferences",className:"space-y-6",children:(0,ae.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg border",children:[(0,ae.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ae.jsx)(xh,{className:"w-5 h-5 mr-2 text-pink-600"}),"Preferences & Lifestyle"]}),(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"hobby",children:"Hobby"}),(0,ae.jsx)(ie,{id:"hobby",value:Y.hobby,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{hobby:e.target.value})),placeholder:"Not provided",disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"gamingPreferences",children:"Gaming Preferences"}),(0,ae.jsx)(ie,{id:"gamingPreferences",value:Y.gamingPreferences,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{gamingPreferences:e.target.value})),placeholder:"Not provided",disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"emergencyContact",children:"Emergency Contact"}),(0,ae.jsx)(ie,{id:"emergencyContact",value:Y.emergencyContact,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{emergencyContact:e.target.value})),placeholder:"Not provided",disabled:q})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"emergencyPhone",children:"Emergency Phone"}),(0,ae.jsx)(ie,{id:"emergencyPhone",value:Y.emergencyPhone,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{emergencyPhone:e.target.value})),placeholder:"Not provided",disabled:q})]})]})]})}),(0,ae.jsx)(jd,{value:"additional",className:"space-y-6",children:(0,ae.jsxs)("div",{className:"bg-green-50 p-6 rounded-lg border",children:[(0,ae.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ae.jsx)(ph,{className:"w-5 h-5 mr-2 text-green-600"}),"Additional Details"]}),(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"maritalStatus",children:"Marital Status"}),(0,ae.jsxs)(gu,{value:Y.maritalStatus,onValueChange:e=>J((0,o.A)((0,o.A)({},Y),{},{maritalStatus:e})),disabled:q,children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{placeholder:"Select status"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"single",children:"Single"}),(0,ae.jsx)(bu,{value:"married",children:"Married"}),(0,ae.jsx)(bu,{value:"divorced",children:"Divorced"}),(0,ae.jsx)(bu,{value:"widowed",children:"Widowed"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"educationLevel",children:"Education Level"}),(0,ae.jsxs)(gu,{value:Y.educationLevel,onValueChange:e=>J((0,o.A)((0,o.A)({},Y),{},{educationLevel:e})),disabled:q,children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{placeholder:"Select education"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"high_school",children:"High School"}),(0,ae.jsx)(bu,{value:"bachelor",children:"Bachelor's Degree"}),(0,ae.jsx)(bu,{value:"master",children:"Master's Degree"}),(0,ae.jsx)(bu,{value:"doctorate",children:"Doctorate"}),(0,ae.jsx)(bu,{value:"other",children:"Other"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"incomeRange",children:"Income Range"}),(0,ae.jsxs)(gu,{value:Y.incomeRange,onValueChange:e=>J((0,o.A)((0,o.A)({},Y),{},{incomeRange:e})),disabled:q,children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{placeholder:"Select range"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"under_50k",children:"Under $50,000"}),(0,ae.jsx)(bu,{value:"50k_100k",children:"$50,000 - $100,000"}),(0,ae.jsx)(bu,{value:"100k_250k",children:"$100,000 - $250,000"}),(0,ae.jsx)(bu,{value:"250k_500k",children:"$250,000 - $500,000"}),(0,ae.jsx)(bu,{value:"over_500k",children:"Over $500,000"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"preferredLanguage",children:"Preferred Language"}),(0,ae.jsxs)(gu,{value:Y.preferredLanguage,onValueChange:e=>J((0,o.A)((0,o.A)({},Y),{},{preferredLanguage:e})),disabled:q,children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"English",children:"English"}),(0,ae.jsx)(bu,{value:"Chinese",children:"Chinese"}),(0,ae.jsx)(bu,{value:"Cantonese",children:"Cantonese"}),(0,ae.jsx)(bu,{value:"Mandarin",children:"Mandarin"}),(0,ae.jsx)(bu,{value:"Japanese",children:"Japanese"}),(0,ae.jsx)(bu,{value:"Korean",children:"Korean"})]})]})]}),(0,ae.jsxs)("div",{className:"col-span-2",children:[(0,ae.jsx)(Ne,{htmlFor:"notes",children:"Notes"}),(0,ae.jsx)($t,{id:"notes",value:Y.notes,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{notes:e.target.value})),placeholder:"Additional notes about the customer...",disabled:q,rows:3})]}),(0,ae.jsxs)("div",{className:"col-span-2",children:[(0,ae.jsx)(Ne,{htmlFor:"specialRequirements",children:"Special Requirements"}),(0,ae.jsx)($t,{id:"specialRequirements",value:Y.specialRequirements,onChange:e=>J((0,o.A)((0,o.A)({},Y),{},{specialRequirements:e.target.value})),placeholder:"Any special requirements or accommodations...",disabled:q,rows:3})]})]})]})})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>O(!1),disabled:q,children:"Cancel"}),(0,ae.jsx)(Vt,{type:"submit",disabled:q,children:q?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving Details..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2"}),"Save Details"]})})]})]})]})}),(0,ae.jsx)(Lo,{open:z,onOpenChange:e=>!e&&B(!1),children:(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsxs)(Ho,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ot,{className:"w-5 h-5 text-green-600"}),(0,ae.jsx)("span",{children:"Promote Customer to Agent"})]}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to make "',null===L||void 0===L?void 0:L.name,'" into an agent?',(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),(0,ae.jsx)("strong",{children:"Note:"})," This action cannot be undone easily. The customer will retain all their existing trip history and financial records."]})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{disabled:q,children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:async()=>{if(L)try{H(!0),u(),console.log("\ud83d\udd04 Promoting customer to agent:",L.name,L.id);const e=await Fe.apiClient.promoteCustomerToAgent(L.id);if(!e.success)throw new Error(e.error||"Failed to promote customer to agent");console.log("\u2705 Customer promoted to agent successfully"),await X(),B(!1),F(null)}catch(e){console.error("\u274c Error promoting customer to agent:",e),c("Failed to promote customer to agent: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{H(!1)}},className:"bg-green-600 text-white hover:bg-green-700",disabled:q,children:q?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Promoting..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ot,{className:"w-4 h-4 mr-2"}),"Promote to Agent"]})})]})]})}),(0,ae.jsx)(Ra,{open:V.isOpen,onOpenChange:ee,children:(0,ae.jsxs)(Ba,{className:"max-w-4xl max-h-[90vh] p-0",children:[(0,ae.jsx)(Ua,{className:"p-6 pb-2",children:(0,ae.jsxs)(Wa,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(yh,{className:"w-5 h-5"}),(0,ae.jsx)("span",{children:V.title})]})}),(0,ae.jsxs)("div",{className:"px-6 pb-6",children:[(0,ae.jsx)("div",{className:"relative",children:(0,ae.jsx)("img",{src:V.src,alt:V.title,className:"w-full h-auto max-h-[70vh] object-contain rounded-lg"})}),(0,ae.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ae.jsx)(Vt,{variant:"outline",onClick:ee,children:"Close"})})]})]})})]})}),_h=$e("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Nh=rh(function(e){let{user:n,showError:r,clearError:a}=e;const i=sh(n.role),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(!0),[x,b]=(0,t.useState)(!1),[w,j]=(0,t.useState)({name:"",email:"",phone:"",parent_agent_id:"none"}),_=(0,t.useCallback)(async()=>{try{y(!0),a(),console.log("\ud83d\udd04 Loading agent data from backend API...");const e=await Fe.apiClient.getAgents();if(!e.success)throw new Error(e.error||"Failed to fetch agents");const t=(Array.isArray(e.data)?e.data:[]).map(e=>(0,o.A)((0,o.A)({},e),{},{isCustomer:!0,attachments:e.attachments||[],createdAt:new Date(e.created_at).toLocaleDateString(),parentAgent:e.parent_agent&&e.parent_agent.length>0?{id:e.parent_agent[0].id,name:e.parent_agent[0].name,email:e.parent_agent[0].email}:null,children:e.child_agents||[]}));l(t),console.log("\u2705 Loaded ".concat(t.length," agents from backend API")),console.log("\ud83d\udd0d Agents with children:",t.filter(e=>e.children&&e.children.length>0))}catch(e){console.error("\u274c Error loading agent data:",e),r("Failed to load agent data: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{y(!1)}},[a,r]);(0,t.useEffect)(()=>{_()},[_]);const N=async()=>{if(f)try{b(!0),a(),console.log("\ud83d\uddd1\ufe0f Deleting agent:",f.name,f.id);const e=await Fe.apiClient.deleteAgent(f.id);if(!e.success)throw new Error(e.error||"Failed to delete agent");console.log("\u2705 Agent deleted successfully"),await _(),p(null)}catch(e){console.error("\u274c Error deleting agent:",e),r("Failed to delete agent: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{b(!1)}},k="admin"===n.role,S="staff"===n.role;return v?(0,ae.jsx)(xt,{children:(0,ae.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)(Ge,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"".concat(dt," text-gray-600"),children:"Loading agent data from Supabase..."})]})})}):(0,ae.jsxs)(xt,{children:[S&&(0,ae.jsx)(vt,{type:"info",title:"Agent Information - View Only",message:"You have read-only access to agent information and contact details.",autoClose:!1}),(0,ae.jsx)(bt,{title:"Agent Management",subtitle:S?"View agent information and contact details.":"Manage agents who bring customers to the casino. All agents are automatically customers.",badges:[{text:"".concat(s.length," Agents"),variant:"primary"}],actions:i?null:(0,ae.jsxs)(Ra,{open:c,onOpenChange:u,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsx)(mt,{variant:"primary",size:"md",onClick:()=>{h(null),j({name:"",email:"",phone:"",parent_agent_id:"none"}),u(!0)},disabled:x,icon:(0,ae.jsx)(uh,{className:pt}),children:"Add Agent"})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:d?"Edit Agent":"Add New Agent"}),(0,ae.jsx)(qa,{children:d?"Update agent information":"Add a new agent to the system"})]}),(0,ae.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(b(!0),d){const e={name:w.name,email:w.email,phone:w.phone||null,parent_agent_id:"none"===w.parent_agent_id?null:w.parent_agent_id,status:"active"},t=await Fe.apiClient.updateAgent(d.id,e);if(!t.success)throw new Error(t.error||"Failed to update agent");await _()}else{const e={name:w.name,email:w.email,phone:w.phone||null,parent_agent_id:"none"===w.parent_agent_id?null:w.parent_agent_id,commission_rate:0,status:"active"},t=await Fe.apiClient.createAgent(e);if(!t.success)throw new Error(t.error||"Failed to create agent");await _()}j({name:"",email:"",phone:"",parent_agent_id:"none"}),h(null),u(!1)}catch(t){r("Failed to save agent: ".concat(t instanceof Error?t.message:"Unknown error occurred"))}finally{b(!1)}},className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"name",children:"Name"}),(0,ae.jsx)(ie,{id:"name",value:w.name,onChange:e=>j((0,o.A)((0,o.A)({},w),{},{name:e.target.value})),placeholder:"Agent full name",required:!0,disabled:x})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"email",children:"Email"}),(0,ae.jsx)(ie,{id:"email",type:"email",value:w.email,onChange:e=>j((0,o.A)((0,o.A)({},w),{},{email:e.target.value})),placeholder:"agent@email.com",required:!0,disabled:x})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"phone",children:"Phone"}),(0,ae.jsx)(ie,{id:"phone",value:w.phone,onChange:e=>j((0,o.A)((0,o.A)({},w),{},{phone:e.target.value})),placeholder:"+1234567890",required:!0,disabled:x})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"parent_agent",children:"Parent Agent (Optional)"}),(0,ae.jsxs)(gu,{value:w.parent_agent_id,onValueChange:e=>j((0,o.A)((0,o.A)({},w),{},{parent_agent_id:e})),disabled:x,children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{placeholder:"Select parent agent (optional)"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"none",children:"No parent agent"}),s.filter(e=>e.id!==(null===d||void 0===d?void 0:d.id)).map(e=>(0,ae.jsxs)(bu,{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent agent to create a hierarchical structure. Leave empty for top-level agents."})]}),(0,ae.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,ae.jsxs)("p",{className:"text-xs text-green-700",children:[(0,ae.jsx)("strong",{children:"Note:"})," All agents are automatically registered as customers and can participate in trips and gambling activities."]})}),(0,ae.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,ae.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,ae.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Profit Sharing"})}),(0,ae.jsx)("p",{className:"text-xs text-blue-700",children:"Agent profit sharing percentages are configured per trip in the Projects section."})]}),(0,ae.jsxs)("div",{className:it,children:[(0,ae.jsx)(mt,{type:"button",variant:"outline",size:"md",onClick:()=>u(!1),disabled:x,children:"Cancel"}),(0,ae.jsx)(mt,{type:"submit",variant:"primary",size:"md",disabled:x,icon:x?(0,ae.jsx)(dh,{className:"w-4 h-4 animate-spin"}):void 0,children:x?"Saving to Supabase...":"".concat(d?"Update":"Add"," Agent")})]})]})]})]})}),(0,ae.jsx)("div",{className:"grid gap-6",children:0===s.length?(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"text-center py-12",children:(0,ae.jsx)("p",{className:"text-gray-500",children:S?"No agents found in the system.":"No agents found. Add your first agent to get started."})})}):s.map(e=>{var t;const r=m===e.id;return(0,ae.jsx)(Bd,{open:r,onOpenChange:()=>{return t=e.id,void g(m===t?null:t);var t},children:(0,ae.jsxs)(Te,{className:"overflow-hidden",children:[(0,ae.jsx)(Ud,{asChild:!0,children:(0,ae.jsx)(De,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)(Ie,{className:"".concat(ct," flex items-center space-x-2"),children:[(0,ae.jsx)("span",{children:e.name}),(0,ae.jsx)(gt,{variant:e.status?"success":"gray",children:e.status?"Active":"Inactive"}),e.parentAgent&&(0,ae.jsxs)(gt,{variant:"primary",children:[(0,ae.jsx)(Ot,{className:"w-3 h-3 mr-1"}),"Sub-Agent"]}),e.children&&e.children.length>0&&(0,ae.jsxs)(gt,{variant:"success",children:[(0,ae.jsx)(Ot,{className:"w-3 h-3 mr-1"}),e.children.length," Sub"]}),e.attachments&&e.attachments.length>0&&(0,ae.jsxs)(gt,{variant:"gray",children:[(0,ae.jsx)(hh,{className:"w-3 h-3 mr-1"}),e.attachments.length]}),S&&(0,ae.jsxs)(gt,{variant:"warning",children:[(0,ae.jsx)(Vd,{className:"w-3 h-3 mr-1"}),"View Only"]})]}),(0,ae.jsxs)(Me,{children:["Agent since ",e.createdAt,e.parentAgent&&(0,ae.jsxs)("span",{className:"block text-blue-600 font-medium mt-1",children:["Under: ",e.parentAgent.name]})]})]}),(0,ae.jsx)("div",{className:"flex items-center space-x-2",children:r?(0,ae.jsx)(uu,{className:"w-5 h-5 text-gray-400"}):(0,ae.jsx)(lu,{className:"w-5 h-5 text-gray-400"})})]})})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(fh,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"text-sm",children:e.email})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(_h,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"text-sm",children:e.phone})]}),e.parentAgent&&(0,ae.jsxs)("div",{className:"flex items-center space-x-2 md:col-span-2 p-2 bg-blue-50 rounded-lg border border-blue-200",children:[(0,ae.jsx)(Ot,{className:"w-4 h-4 text-blue-600"}),(0,ae.jsxs)("span",{className:"text-sm text-blue-800",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Under:"})," ",(0,ae.jsx)("strong",{children:e.parentAgent.name})," (",e.parentAgent.email,")"]})]}),e.children&&e.children.length>0&&(0,ae.jsxs)("div",{className:"flex items-center space-x-2 md:col-span-2",children:[(0,ae.jsx)(Ot,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsxs)("span",{className:"text-sm",children:["Child Agents: ",(0,ae.jsx)("strong",{children:e.children.length})," agent",1!==e.children.length?"s":""]})]})]}),!i&&(0,ae.jsxs)("div",{className:"flex space-x-2",children:[(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(e=>{h(e),j({name:e.name,email:e.email,phone:e.phone,parent_agent_id:e.parent_agent_id||"none"}),u(!0)})(e),disabled:x,children:[(0,ae.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Edit"]}),(0,ae.jsxs)(Lo,{open:(null===f||void 0===f?void 0:f.id)===e.id,onOpenChange:e=>!e&&p(null),children:[(0,ae.jsx)(Fo,{asChild:!0,children:(0,ae.jsx)(Vt,{variant:"destructive",size:"sm",onClick:()=>p(e),disabled:x,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})}),(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Delete Agent"}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to permanently delete "',e.name,'"? This action cannot be undone and will remove all agent data from the system.',(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),(0,ae.jsx)("strong",{children:"Warning:"})," This will also affect any trips this agent is associated with. Agents with existing trip associations cannot be deleted."]})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{disabled:x,children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:N,className:"bg-red-600 text-white hover:bg-red-700",disabled:x,children:x?"Deleting...":"Delete Agent"})]})]})]})]}),(0,ae.jsx)(Wd,{className:"mt-6",children:(0,ae.jsxs)(xd,{defaultValue:"info",className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-2",children:[(0,ae.jsxs)(wd,{value:"info",className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ot,{className:"w-4 h-4"}),(0,ae.jsx)("span",{children:"Agent Information"})]}),(0,ae.jsxs)(wd,{value:"files",className:"flex items-center space-x-2",children:[(0,ae.jsx)(hh,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Files (",(null===(t=e.attachments)||void 0===t?void 0:t.length)||0,")"]})]})]}),(0,ae.jsxs)(jd,{value:"info",className:"space-y-4 mt-6",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,ae.jsx)("p",{className:"text-lg",children:e.name})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,ae.jsx)("p",{children:e.email})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,ae.jsx)("p",{children:e.phone})]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,ae.jsx)(ku,{variant:(e.status,"default"),children:e.status?"Active":"Inactive"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Member Since"}),(0,ae.jsx)("p",{children:e.createdAt})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,ae.jsxs)(ku,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[(0,ae.jsx)(Ot,{className:"w-3 h-3 mr-1"}),"Agent"]})]})]})]}),(0,ae.jsx)("div",{className:"pt-4 border-t",children:(0,ae.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,ae.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,ae.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Profit Sharing Information"})}),(0,ae.jsx)("p",{className:"text-sm text-blue-700",children:"This agent's profit sharing percentages are configured individually for each trip in the Projects section. As both an agent and customer, they can participate in trips and receive commissions based on their role in each trip."})]})})]}),(0,ae.jsxs)(jd,{value:"files",className:"space-y-4 mt-6",children:[(0,ae.jsxs)("div",{className:"mb-4",children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Document Management"}),(0,ae.jsx)("p",{className:"text-sm text-gray-400",children:k?"Upload passport, photo, and other important documents for this agent.":"View uploaded documents for this agent."})]}),k?(0,ae.jsx)(Gd,{attachments:e.attachments||[],onAttachmentsChange:t=>(async(e,t)=>{console.log("Attachment update requested for agent:",e,t)})(e.id,t),currentUser:n.username,disabled:x}):(0,ae.jsx)("div",{className:"space-y-2",children:e.attachments&&e.attachments.length>0?e.attachments.map(e=>(0,ae.jsx)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:(0,ae.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ae.jsx)(hh,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(2)," MB \u2022 Uploaded by ",e.uploadedBy," on ",new Date(e.uploadedAt).toLocaleDateString()]})]})]})},e.id)):(0,ae.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"No documents uploaded for this agent."})})]})]})})]})]})},e.id)})})]})}),kh=$e("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Sh=$e("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ah=$e("log-in",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Oh=$e("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ch=$e("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ph=$e("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Eh=$e("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Th=rh(function(e){let{user:n,showError:r,clearError:a}=e;const i=sh(n.role),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[x,b]=(0,t.useState)(null),[w,j]=(0,t.useState)(null),[_,N]=(0,t.useState)(null),[k,S]=(0,t.useState)(null),[A,O]=(0,t.useState)(null),[C,P]=(0,t.useState)(null),[E,T]=(0,t.useState)(""),[D,I]=(0,t.useState)(""),[M,R]=(0,t.useState)(!1),[L,F]=(0,t.useState)(!0),[z,B]=(0,t.useState)(!1),[U,W]=(0,t.useState)({}),[q,H]=(0,t.useState)({}),[V,K]=(0,t.useState)({name:"",email:"",phone:"",position:"",username:"",password:""}),[$,G]=(0,t.useState)({username:"",password:"",confirmPassword:""}),Y=(0,t.useCallback)(async e=>{if(!q[e]&&!U[e])try{H(t=>(0,o.A)((0,o.A)({},t),{},{[e]:!0}));const t=await Fe.apiClient.get("/staffs/".concat(e,"/shifts"));t.success&&W(n=>(0,o.A)((0,o.A)({},n),{},{[e]:t.data||[]}))}catch(t){console.error("\u274c Error loading staff shifts:",t)}finally{H(t=>(0,o.A)((0,o.A)({},t),{},{[e]:!1}))}},[q,U]),J=(0,t.useCallback)(async()=>{try{var e;F(!0),a(),console.log("\ud83d\udd04 Loading staff data from API...");const t=await Fe.apiClient.getStaffs();if(!t.success)throw new Error(t.error||"Failed to load staff data");const n=(null===(e=t.data)||void 0===e?void 0:e.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone,position:e.position,status:e.status,attachments:e.attachments||[],created_at:e.created_at,updated_at:e.updated_at,username:e.username,user_id:e.user_id,user_status:e.user_status,current_shift:e.current_shift||[]})))||[];l(n),console.log("\u2705 Loaded ".concat(n.length," staff members from API"))}catch(t){console.error("\u274c Error loading staff data:",t);const e=t instanceof Error?t.message:"Unknown error occurred";r("Failed to load staff data: ".concat(e))}finally{F(!1)}},[a,r]);(0,t.useEffect)(()=>{J()},[J]);const X=()=>{K({name:"",email:"",phone:"",position:"",username:"",password:""}),y(null),u(!1)},Q=()=>{G({username:"",password:"",confirmPassword:""}),b(null),h(!1),R(!1)},Z=e=>{b(e),G({username:e.username||"",password:"",confirmPassword:""}),h(!0)},ee=async e=>{try{B(!0),a();const t=await Fe.apiClient.deleteStaff(e);if(!t.success)throw new Error(t.error||"Failed to delete staff member");await J()}catch(t){console.error("\u274c Error deleting staff:",t);const e=t instanceof Error?t.message:"Unknown error occurred";r("Failed to delete staff: ".concat(e))}finally{B(!1)}},te=e=>{const t=s.find(t=>t.id===e);return t?{username:t.username,user_id:t.user_id,user_status:t.user_status}:null};return L?(0,ae.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:"Loading staff data from Supabase..."})]})}):(0,ae.jsxs)("div",{className:"space-y-6",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:"Staff Management"}),(0,ae.jsx)("p",{className:"text-gray-600",children:"Manage casino staff, their login credentials, and shift tracking with photo verification"})]}),!i&&(0,ae.jsxs)(Ra,{open:c,onOpenChange:u,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{onClick:()=>u(!0),disabled:z,children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Add Staff"]})}),(0,ae.jsxs)(Ba,{className:"max-w-2xl",children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:v?"Edit Staff Member":"Add New Staff Member"}),(0,ae.jsx)(qa,{children:v?"Update staff information":"Add a new staff member to the system"})]}),(0,ae.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(B(!0),a(),!V.name||!V.email||!V.phone||!V.position)throw new Error("Name, email, phone, position are required");if(!v&&(!V.username||!V.password))throw new Error("Username and password are required for new staff");if(v){const e={name:V.name,email:V.email,phone:V.phone,position:V.position};console.log("Updating staff with data:",e);const t=await Fe.apiClient.updateStaff(v.id,e);if(!t.success)throw new Error(t.error||"Failed to update staff member")}else{const e={name:V.name,email:V.email,phone:V.phone,position:V.position,username:V.username,password:V.password};console.log("Creating new staff with data:",(0,o.A)((0,o.A)({},e),{},{password:"***"}));const t=await Fe.apiClient.createStaff(e);if(!t.success)throw new Error(t.error||"Failed to create staff member")}await J(),X()}catch(t){console.error("\u274c Error saving staff:",t);const e=t instanceof Error?t.message:"Unknown error occurred";r("Failed to save staff: ".concat(e))}finally{B(!1)}},className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"name",className:"flex items-center",children:["Name ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsx)(ie,{id:"name",value:V.name,onChange:e=>K((0,o.A)((0,o.A)({},V),{},{name:e.target.value})),placeholder:"Staff member name",required:!0,disabled:z,className:V.name?"":"border-red-300"}),!V.name&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Name is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"position",className:"flex items-center",children:["Position ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsx)(ie,{id:"position",value:V.position,onChange:e=>K((0,o.A)((0,o.A)({},V),{},{position:e.target.value})),placeholder:"Floor Manager, Cashier, etc.",required:!0,disabled:z,className:V.position?"":"border-red-300"}),!V.position&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Position is required"})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"email",className:"flex items-center",children:["Email ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsx)(ie,{id:"email",type:"email",value:V.email,onChange:e=>K((0,o.A)((0,o.A)({},V),{},{email:e.target.value})),placeholder:"staff@casino.com",required:!0,disabled:z,className:V.email?"":"border-red-300"}),!V.email&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Email is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"phone",className:"flex items-center",children:["Phone ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsx)(ie,{id:"phone",value:V.phone,onChange:e=>K((0,o.A)((0,o.A)({},V),{},{phone:e.target.value})),placeholder:"+1234567890",required:!0,disabled:z,className:V.phone?"":"border-red-300"}),!V.phone&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Phone is required"})]})]}),!v&&(0,ae.jsx)("div",{children:(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"username",className:"flex items-center",children:["Username ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsx)(ie,{id:"username",value:V.username,onChange:e=>K((0,o.A)((0,o.A)({},V),{},{username:e.target.value})),placeholder:"Login username",required:!0,disabled:z,className:V.username?"":"border-red-300"}),!V.username&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Username is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"password",className:"flex items-center",children:["Password ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsx)(ie,{id:"password",type:"password",value:V.password,onChange:e=>K((0,o.A)((0,o.A)({},V),{},{password:e.target.value})),placeholder:"Login password",required:!0,disabled:z,className:V.password?"":"border-red-300"}),!V.password&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Password is required"})]})]})}),(0,ae.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,ae.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,ae.jsx)("strong",{children:"Note:"})," ",v?"You can update login credentials separately using the 'Manage Login' button.":"All fields marked with * are required. Username and password are needed for staff login."]})}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>u(!1),disabled:z,children:"Cancel"}),(0,ae.jsx)(Vt,{type:"submit",disabled:z,children:z?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving to Supabase..."]}):(0,ae.jsxs)(ae.Fragment,{children:[v?"Update":"Add"," Staff Member"]})})]})]})]})]})]}),!i&&(0,ae.jsx)(Ra,{open:d,onOpenChange:h,children:(0,ae.jsxs)(Ba,{className:"max-w-lg",children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsxs)(Wa,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(kh,{className:"w-5 h-5"}),(0,ae.jsxs)("span",{children:["Manage Login - ",null===x||void 0===x?void 0:x.name]})]}),(0,ae.jsx)(qa,{children:"Create or update login credentials for this staff member"})]}),(0,ae.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),x)if($.password===$.confirmPassword)try{B(!0),a();const e={username:$.username,password:$.password},t=await Fe.apiClient.updateStaff(x.id,e);if(!t.success)throw new Error(t.error||"Failed to update login credentials");await J(),Q()}catch(t){console.error("\u274c Error updating login credentials:",t);const e=t instanceof Error?t.message:"Unknown error occurred";r("Failed to update login credentials: ".concat(e))}finally{B(!1)}else r("Passwords do not match!")},className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"username",children:"Username"}),(0,ae.jsx)(ie,{id:"username",value:$.username,onChange:e=>G((0,o.A)((0,o.A)({},$),{},{username:e.target.value})),placeholder:"Enter username",required:!0,disabled:z}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This will be used to login to the staff portal"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"password",children:"Password"}),(0,ae.jsxs)("div",{className:"relative",children:[(0,ae.jsx)(ie,{id:"password",type:M?"text":"password",value:$.password,onChange:e=>G((0,o.A)((0,o.A)({},$),{},{password:e.target.value})),placeholder:"Enter password",required:!0,disabled:z}),(0,ae.jsx)(Vt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>R(!M),disabled:z,children:M?(0,ae.jsx)(Sh,{className:"w-4 h-4"}):(0,ae.jsx)(Vd,{className:"w-4 h-4"})})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let n=0;n<8;n++)t+=e.charAt(Math.floor(62*Math.random()));G((0,o.A)((0,o.A)({},$),{},{password:t,confirmPassword:t}))},className:"text-xs",disabled:z,children:"Generate Password"}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"Minimum 6 characters"})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,ae.jsx)(ie,{id:"confirmPassword",type:M?"text":"password",value:$.confirmPassword,onChange:e=>G((0,o.A)((0,o.A)({},$),{},{confirmPassword:e.target.value})),placeholder:"Confirm password",required:!0,disabled:z})]}),(0,ae.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,ae.jsxs)("p",{className:"text-xs text-green-700",children:[(0,ae.jsx)("strong",{children:"Security Note:"})," Staff members can only login with the exact credentials you provide here. Make sure to securely communicate these credentials to the staff member."]})}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:Q,disabled:z,children:"Cancel"}),(0,ae.jsx)(Vt,{type:"submit",disabled:z,children:z?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(kh,{className:"w-4 h-4 mr-2"}),te((null===x||void 0===x?void 0:x.id)||"")?"Update":"Create"," Login"]})})]})]})]})}),!i&&(0,ae.jsx)(Ra,{open:f,onOpenChange:p,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsxs)(Wa,{children:["Check In: ",null===w||void 0===w?void 0:w.name]}),(0,ae.jsx)(qa,{children:"Upload a photo as proof of check-in and add any notes for the shift."})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkInPhoto",children:"Check-in Photo (Required)"}),(0,ae.jsx)(ie,{id:"checkInPhoto",type:"file",accept:"image/*",onChange:e=>{var t;return O((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1",required:!0,disabled:z}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Take a photo as proof of check-in"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkInNotes",children:"Notes (Optional)"}),(0,ae.jsx)($t,{id:"checkInNotes",value:E,onChange:e=>T(e.target.value),placeholder:"Any notes for this shift...",rows:3,disabled:z})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:z,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(w&&A)try{B(!0),a();const e=new FileReader;e.onload=async e=>{try{var t;const n={check_in_photo:null===(t=e.target)||void 0===t?void 0:t.result,notes:E},r=await Fe.apiClient.staffCheckIn(w.id,n);if(!r.success)throw new Error(r.error||"Failed to check in staff member");await J(),p(!1),j(null),O(null),T("")}catch(n){console.error("\u274c Error processing check-in:",n);const e=n instanceof Error?n.message:"Unknown error occurred";r("Failed to process check-in: ".concat(e))}finally{B(!1)}},e.readAsDataURL(A)}catch(e){console.error("\u274c Error during check-in:",e);const t=e instanceof Error?e.message:"Unknown error occurred";r("Check-in failed: ".concat(t)),B(!1)}},disabled:!A||z,children:z?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking In..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ah,{className:"w-4 h-4 mr-2"}),"Check In"]})})]})]})]})}),!i&&(0,ae.jsx)(Ra,{open:m,onOpenChange:g,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsxs)(Wa,{children:["Check Out: ",null===_||void 0===_?void 0:_.name]}),(0,ae.jsx)(qa,{children:"Upload a photo as proof of check-out and add any end-of-shift notes."})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkOutPhoto",children:"Check-out Photo (Required)"}),(0,ae.jsx)(ie,{id:"checkOutPhoto",type:"file",accept:"image/*",onChange:e=>{var t;return P((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1",required:!0,disabled:z}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Take a photo as proof of check-out"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkOutNotes",children:"Notes (Optional)"}),(0,ae.jsx)($t,{id:"checkOutNotes",value:D,onChange:e=>I(e.target.value),placeholder:"Any end-of-shift notes...",rows:3,disabled:z})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>g(!1),disabled:z,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(_&&C)try{B(!0),a();const e=new FileReader;e.onload=async e=>{try{var t;const n={check_out_photo:null===(t=e.target)||void 0===t?void 0:t.result,notes:D},r=await Fe.apiClient.staffCheckOut(_.id,n);if(!r.success)throw new Error(r.error||"Failed to check out staff member");await J(),g(!1),N(null),P(null),I("")}catch(n){console.error("\u274c Error processing check-out:",n);const e=n instanceof Error?n.message:"Unknown error occurred";r("Failed to process check-out: ".concat(e))}finally{B(!1)}},e.readAsDataURL(C)}catch(e){console.error("\u274c Error during check-out:",e);const t=e instanceof Error?e.message:"Unknown error occurred";r("Check-out failed: ".concat(t)),B(!1)}},disabled:!C||z,children:z?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Checking Out..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Oh,{className:"w-4 h-4 mr-2"}),"Check Out"]})})]})]})]})}),(0,ae.jsx)("div",{className:"grid gap-6",children:0===s.length?(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"text-center py-12",children:(0,ae.jsx)("p",{className:"text-gray-500",children:"No staff members found. Add your first staff member to get started."})})}):s.map(e=>{var t,n;const o=k===e.id,s=te(e.id),l=(e=>e.current_shift&&e.current_shift.length>0&&"checked-in"===e.current_shift[0].status)(e);return(0,ae.jsx)(Bd,{open:o,onOpenChange:()=>{return t=e.id,void S(k===t?null:t);var t},children:(0,ae.jsxs)(Te,{className:"overflow-hidden",children:[(0,ae.jsx)(Ud,{asChild:!0,children:(0,ae.jsx)(De,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)("span",{children:e.name}),(0,ae.jsx)(ku,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Active":"Inactive"}),l&&(0,ae.jsxs)(ku,{variant:"default",className:"bg-green-600",children:[(0,ae.jsx)(Ye,{className:"w-3 h-3 mr-1"}),"Checked In"]}),s&&(0,ae.jsxs)(ku,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[(0,ae.jsx)(kh,{className:"w-3 h-3 mr-1"}),"Login Setup"]}),e.attachments&&e.attachments.length>0&&(0,ae.jsxs)(ku,{variant:"outline",className:"flex items-center space-x-1",children:[(0,ae.jsx)(hh,{className:"w-3 h-3"}),(0,ae.jsx)("span",{children:e.attachments.length})]})]}),(0,ae.jsxs)(Me,{children:[e.position," \u2022 Member since ",new Date(e.created_at).toLocaleDateString("en-CA")]})]}),(0,ae.jsx)("div",{className:"flex items-center space-x-2",children:o?(0,ae.jsx)(uu,{className:"w-5 h-5 text-gray-400"}):(0,ae.jsx)(lu,{className:"w-5 h-5 text-gray-400"})})]})})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(fh,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"text-sm",children:e.email})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(_h,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"text-sm",children:e.phone})]})]}),(0,ae.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[!i&&(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(e=>{y(e),K({name:e.name,email:e.email,phone:e.phone,position:e.position,username:e.username||"",password:""}),u(!0)})(e),disabled:z,children:[(0,ae.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Edit"]}),!i&&(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>Z(e),disabled:z,children:[(0,ae.jsx)(kh,{className:"w-4 h-4 mr-2"}),s?"Update Login":"Create Login"]}),!i&&(l?(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(e=>{N(e),P(null),I(""),g(!0)})(e),disabled:z,children:[(0,ae.jsx)(Oh,{className:"w-4 h-4 mr-2"}),"Check Out"]}):(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>(e=>{j(e),O(null),T(""),p(!0)})(e),disabled:z,children:[(0,ae.jsx)(Ah,{className:"w-4 h-4 mr-2"}),"Check In"]})),!i&&(0,ae.jsxs)(Lo,{children:[(0,ae.jsx)(Fo,{asChild:!0,children:(0,ae.jsx)(Vt,{variant:"destructive",size:"sm",disabled:z,className:"bg-red-600 text-white hover:bg-red-700",children:"Delete"})}),(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Delete Staff Member"}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to permanently delete "',e.name,'"? This action cannot be undone and will remove all their data, shift history, and login credentials from the system.']})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:()=>ee(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:z,children:z?"Deleting...":"Delete Permanently"})]})]})]})]}),(0,ae.jsx)(Wd,{className:"mt-6",children:(0,ae.jsxs)(xd,{defaultValue:"info",className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-4",children:[(0,ae.jsxs)(wd,{value:"info",className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ch,{className:"w-4 h-4"}),(0,ae.jsx)("span",{children:"Info"})]}),(0,ae.jsxs)(wd,{value:"shifts",className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ph,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Shifts (",(null===(t=e.current_shift)||void 0===t?void 0:t.length)||0,")"]})]}),(0,ae.jsxs)(wd,{value:"login",className:"flex items-center space-x-2",children:[(0,ae.jsx)(kh,{className:"w-4 h-4"}),(0,ae.jsx)("span",{children:"Login"})]}),(0,ae.jsxs)(wd,{value:"files",className:"flex items-center space-x-2",children:[(0,ae.jsx)(hh,{className:"w-4 h-4"}),(0,ae.jsxs)("span",{children:["Files (",(null===(n=e.attachments)||void 0===n?void 0:n.length)||0,")"]})]})]}),(0,ae.jsx)(jd,{value:"info",className:"space-y-4 mt-6",children:(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,ae.jsx)("p",{className:"text-lg",children:e.name})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,ae.jsx)("p",{children:e.email})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,ae.jsx)("p",{children:e.phone})]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Position"}),(0,ae.jsx)("p",{children:e.position})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,ae.jsx)(ku,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Active":"Inactive"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Member Since"}),(0,ae.jsx)("p",{children:e.created_at})]})]})]})}),(0,ae.jsx)(jd,{value:"shifts",className:"space-y-4 mt-6",children:(()=>{U[e.id]||q[e.id]||Y(e.id);const t=U[e.id]||[];return q[e.id]?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(eh,{className:"w-8 h-8 mx-auto text-gray-400 mb-4 animate-spin"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"Loading shift history..."})]})}):0===t.length?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(Ph,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No shift history found."}),(0,ae.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Check-ins and check-outs will appear here."})]})}):(0,ae.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:t.sort((e,t)=>new Date(t.check_in_time).getTime()-new Date(e.check_in_time).getTime()).map(e=>(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"p-4",children:(0,ae.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)(ku,{variant:"checked-in"===e.status?"default":"secondary",children:"checked-in"===e.status?"Active":"Completed"}),(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.shift_date).toLocaleDateString()})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)(Ah,{className:"w-4 h-4 text-green-600"}),(0,ae.jsx)(Ne,{className:"text-sm font-medium",children:"Check In"})]}),(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.check_in_time).toLocaleString()}),e.check_in_photo&&(0,ae.jsx)("div",{className:"mt-2",children:(0,ae.jsx)(oh,{src:e.check_in_photo,alt:"Check-in photo",className:"w-20 h-20 object-cover rounded border cursor-pointer hover:opacity-80",onClick:()=>window.open(e.check_in_photo,"_blank")})})]}),e.check_out_time&&(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)(Oh,{className:"w-4 h-4 text-red-600"}),(0,ae.jsx)(Ne,{className:"text-sm font-medium",children:"Check Out"})]}),(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.check_out_time).toLocaleString()}),e.check_out_photo&&(0,ae.jsx)("div",{className:"mt-2",children:(0,ae.jsx)(oh,{src:e.check_out_photo,alt:"Check-out photo",className:"w-20 h-20 object-cover rounded border cursor-pointer hover:opacity-80",onClick:()=>window.open(e.check_out_photo,"_blank")})})]})]}),e.notes&&(0,ae.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded",children:[(0,ae.jsx)(Ne,{className:"text-xs font-medium text-gray-500",children:"Notes"}),(0,ae.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.notes})]}),e.check_out_time&&(0,ae.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Duration: ",(()=>{const t=new Date(e.check_out_time).getTime()-new Date(e.check_in_time).getTime(),n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);return"".concat(n,"h ").concat(r,"m")})()]})]})})})},e.id))})})()}),(0,ae.jsx)(jd,{value:"login",className:"space-y-4 mt-6",children:s?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"p-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Username"}),(0,ae.jsx)("p",{className:"font-medium",children:s.username})]}),(0,ae.jsx)(ku,{variant:"active"===s.user_status?"default":"secondary",children:"active"===s.user_status?"Active":"Inactive"})]}),(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Password"}),(0,ae.jsx)("p",{className:"text-sm font-mono bg-gray-100 p-2 rounded",children:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Account Created"}),(0,ae.jsx)("p",{className:"text-sm",children:e.created_at})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"User ID"}),(0,ae.jsx)("p",{className:"text-sm font-mono",children:s.user_id})]})]}),(0,ae.jsxs)("div",{className:"flex space-x-2 mt-4",children:[!i&&(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>Z(e),disabled:z,children:[(0,ae.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Update Credentials"]}),!i&&(0,ae.jsxs)(Lo,{children:[(0,ae.jsx)(Fo,{asChild:!0,children:(0,ae.jsx)(Vt,{variant:"destructive",size:"sm",disabled:z,children:"Delete Login"})}),(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Delete Login Account"}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to delete the login account for "',e.name,'"? They will no longer be able to access the staff portal.']})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:()=>ee(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:z,children:z?"Deleting...":"Delete Login"})]})]})]})]})]})}):(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(kh,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500 mb-4",children:"No login credentials set up for this staff member."}),!i&&(0,ae.jsxs)(Vt,{onClick:()=>Z(e),disabled:z,children:[(0,ae.jsx)(Eh,{className:"w-4 h-4 mr-2"}),"Create Login Account"]})]})})}),(0,ae.jsxs)(jd,{value:"files",className:"mt-6",children:[!i&&(0,ae.jsx)("div",{className:"mb-4",children:(0,ae.jsx)(Gd,{onUpload:t=>(async(e,t)=>{try{B(!0),a();const n=await Fe.apiClient.updateStaff(e,{attachments:t});if(!n.success)throw new Error(n.error||"Failed to update staff attachments");await J()}catch(n){console.error("\u274c Error updating staff attachments:",n);const e=n instanceof Error?n.message:"Unknown error occurred";r("Failed to update staff attachments: ".concat(e))}finally{B(!1)}})(e.id,[...e.attachments||[],...t]),onAttachmentsChange:()=>{},disabled:z})}),(()=>{U[e.id]||q[e.id]||Y(e.id);const t=U[e.id]||[],n=e.attachments||[],r=[];t.forEach(e=>{e.check_in_photo&&r.push({type:"Check-in Photo",photo:e.check_in_photo,date:new Date(e.check_in_time).toLocaleString(),shift_id:e.id,timestamp:new Date(e.check_in_time).getTime()}),e.check_out_photo&&r.push({type:"Check-out Photo",photo:e.check_out_photo,date:new Date(e.check_out_time).toLocaleString(),shift_id:e.id,timestamp:new Date(e.check_out_time).getTime()})}),r.sort((e,t)=>t.timestamp-e.timestamp);return n.length>0||r.length>0?(0,ae.jsxs)("div",{className:"space-y-6",children:[r.length>0&&(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[(0,ae.jsx)(Ye,{className:"w-4 h-4"}),"Check-in/out Photos (",r.length,")"]}),(0,ae.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((e,t)=>(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"p-4",children:(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsx)(ku,{variant:e.type.includes("Check-in")?"default":"secondary",children:e.type}),(0,ae.jsx)(Vd,{className:"w-4 h-4 text-gray-400"})]}),(0,ae.jsx)("div",{className:"aspect-square relative",children:(0,ae.jsx)(oh,{src:e.photo,alt:e.type,className:"w-full h-full object-cover rounded border cursor-pointer hover:opacity-80",onClick:()=>window.open(e.photo,"_blank")})}),(0,ae.jsx)("div",{children:(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:e.date})})]})})},"photo-".concat(e.shift_id,"-").concat(t)))})]}),n.length>0&&(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[(0,ae.jsx)(hh,{className:"w-4 h-4"}),"Documents & Files (",n.length,")"]}),(0,ae.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((e,t)=>(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"p-4",children:(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(hh,{className:"w-4 h-4 text-gray-400"}),(0,ae.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ae.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[e.size," bytes \u2022 ",e.type]})]})]})})},"attachment-".concat(t)))})]})]}):(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(hh,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No files or photos found."}),(0,ae.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Upload documents or check-in/out photos will appear here."})]})})})()]})]})})]})]})},e.id)})})]})}),Dh=$e("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Ih=$e("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Mh=rh(function(e){let{user:n,showError:r,clearError:a}=e;const[i,s]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),[h,f]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(null),[y,x]=(0,t.useState)(null),[b,w]=(0,t.useState)(""),[j,_]=(0,t.useState)(""),[N,k]=(0,t.useState)(!0),[S,A]=(0,t.useState)(!1),[O,C]=(0,t.useState)(null),[P,E]=(0,t.useState)([]),[T,D]=(0,t.useState)(null),[I,M]=(0,t.useState)("transaction"),[R,L]=(0,t.useState)(null),[F,z]=(0,t.useState)((new Date).toISOString().split("T")[0]),[B,U]=(0,t.useState)(!1),[,W]=(0,t.useState)([]),[,q]=(0,t.useState)([]),[H,V]=(0,t.useState)(null),[K,$]=(0,t.useState)([]),[G,Y]=(0,t.useState)(""),J=(0,t.useCallback)(async()=>{try{k(!0),a();const e=n.staff_id||n.id;console.log("Loading staff data for staff ID:",e,"User ID:",n.id);const t=await Fe.apiClient.get("/staffs/".concat(e));t.success&&s(t.data);const r=await Fe.apiClient.get("/staffs/".concat(e,"/shifts"));r.success&&c(r.data);const i=await Fe.apiClient.get("/trips/my-schedule");if(i.success){const e=(i.data||[]).map(e=>(0,o.A)((0,o.A)({},e),{},{customers:[],activecustomerscount:e.activecustomerscount||0}));d(e)}else d([])}catch(e){console.error("Error loading staff data:",e),r("Failed to load staff data")}finally{k(!1)}},[n,a,r]);(0,t.useEffect)(()=>{J()},[J]);const X=()=>l.find(e=>"checked-in"===e.status),Q=()=>void 0!==X(),Z=async e=>{try{let n=!1;const r=e=>e.map(e=>{const t=["id","customer_id","customerId","ID","Id"].map(t=>e[t]).find(e=>e)||"unknown-id",n=["name","customer_name","customerName","full_name","fullName","Name","first_name","firstName","last_name","lastName","display_name","displayName"];let r=n.map(t=>e[t]).find(e=>e&&e.trim());return!r&&e.customer&&(r=n.map(t=>e.customer[t]).find(e=>e&&e.trim())),r||(r="Customer ".concat(t)),(0,o.A)((0,o.A)({},e),{},{id:t,name:r,customer_id:t,customer_name:r})});try{const t=await Fe.apiClient.get("/trips/".concat(e.id,"/customer-stats"));if(t.success){const e=r(t.data||[]);E(e),n=!0}}catch(t){console.log("Trip-specific customer stats failed, trying trip customers endpoint")}if(!n)try{const t=await Fe.apiClient.get("/trips/".concat(e.id,"/customers"));if(t.success){const e=r(t.data||[]);E(e),n=!0}}catch(t){console.log("Trip customers endpoint failed")}if(!n&&e.customers){const t=r(e.customers||[]);E(t),n=!0}if(n)try{const[n,r]=await Promise.all([Fe.apiClient.get("/transactions?trip_id=".concat(e.id)),Fe.apiClient.get("/rolling-records?trip_id=".concat(e.id))]);console.log("Transactions response:",n),console.log("Rolling response:",r),n.success&&W(n.data||[]),r.success&&q(r.data||[]);try{const t=await Fe.apiClient.get("/customer-photos?trip_id=".concat(e.id));console.log("Customer photos response:",t),t.success?$(t.data||[]):$([])}catch(t){console.log("Failed to load customer photos (new API may not be implemented yet):",t),$([])}}catch(t){console.log("Failed to load transactions/rolling:",t),W([]),q([]),$([])}else console.log("No customers loaded, setting empty arrays"),E([]),W([]),q([]),$([]);C(e)}catch(t){console.error("Error loading trip details:",t),r("Failed to load trip details"),e.customers&&E(e.customers),W([]),q([]),$([]),V(null)}},ee=async e=>{A(!0);try{const t=await Fe.apiClient.delete("/customer-photos/".concat(e));if(t.success)console.log("\u2705 Photo deleted successfully:",e),O&&await Z(O);else{const e=t.message||"Unknown error occurred";r("Failed to delete photo: "+e)}}catch(t){console.error("Photo deletion error:",t),t.message&&t.message.includes("403")?r("Permission denied: You do not have permission to delete this photo. Only the uploader or admin can delete photos."):t.message&&t.message.includes("404")?r("Photo not found: This photo may have already been deleted."):t.message&&t.message.includes("401")?r("Authentication required: Please log in again to delete photos."):r("Failed to delete photo: "+(t.message||"Network or server error"))}finally{A(!1)}};if(N)return(0,ae.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:"Loading staff information..."})]})});const te=X();return(0,ae.jsxs)(xt,{children:[G&&(0,ae.jsx)(vt,{type:"success",title:"Success",message:G,onClose:()=>Y("")}),(0,ae.jsx)(bt,{title:"Staff Self-Service",subtitle:"Welcome, ".concat((null===i||void 0===i?void 0:i.name)||n.username),badges:[{text:"Staff ID: ".concat(n.id),variant:"gray"},{text:"".concat(u.length," Assigned Trips"),variant:"primary"}],actions:(0,ae.jsxs)(mt,{variant:"outline",size:"mobile",onClick:J,disabled:N,icon:(0,ae.jsx)(eh,{className:pt}),children:[(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Refresh"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Refresh Data"})]})}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-3 sm:pb-6",children:(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2 text-base sm:text-lg",children:[(0,ae.jsx)(Ph,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,ae.jsx)("span",{children:"Current Status"})]})}),(0,ae.jsx)(Re,{className:"pt-0",children:(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0",children:[(0,ae.jsx)("div",{className:"flex-1 min-w-0",children:Q()?(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:[(0,ae.jsxs)(ku,{className:"bg-green-100 text-green-800 px-3 py-1 w-fit",children:[(0,ae.jsx)(Ye,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"On Duty"]}),(0,ae.jsxs)("span",{className:"text-xs sm:text-sm text-gray-600",children:["Since: ",new Date(te.check_in_time).toLocaleString()]})]}),(0,ae.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,ae.jsxs)("div",{className:"sm:inline",children:["Shift Date: ",te.shift_date]}),(0,ae.jsxs)("div",{className:"sm:inline sm:ml-2",children:["Duration: ",Math.floor(((new Date).getTime()-new Date(te.check_in_time).getTime())/6e4)," min"]})]})]}):(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:[(0,ae.jsxs)(ku,{variant:"secondary",className:"px-3 py-1 w-fit",children:[(0,ae.jsx)(Je,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Off Duty"]}),(0,ae.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Ready to check in"})]})}),(0,ae.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:space-x-2",children:Q()?(0,ae.jsxs)(Ra,{open:p,onOpenChange:m,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{variant:"destructive",disabled:S,className:"w-full sm:w-auto",children:[(0,ae.jsx)(Oh,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Check Out"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Check Out"})]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Check Out"}),(0,ae.jsx)(qa,{children:"Upload a photo as proof of check-out and add any end-of-shift notes."})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkOutPhoto",children:"Check-out Photo (Required)"}),(0,ae.jsx)(ie,{id:"checkOutPhoto",type:"file",accept:"image/*",onChange:e=>{var t;return x((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1",required:!0,disabled:S})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkOutNotes",children:"End of Shift Notes (Optional)"}),(0,ae.jsx)($t,{id:"checkOutNotes",value:j,onChange:e=>_(e.target.value),placeholder:"Any end-of-shift notes...",rows:3,disabled:S})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>m(!1),disabled:S,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(y){A(!0);try{const e=new FileReader;e.onload=async e=>{try{var t;const a=null===(t=e.target)||void 0===t?void 0:t.result,o=n.staff_id||n.id,i=await Fe.apiClient.post("/staffs/".concat(o,"/check-out"),{check_out_photo:a,notes:j});i.success?(m(!1),x(null),_(""),Y("Check-out successful! Your shift has ended."),setTimeout(()=>Y(""),3e3),await J()):r("Check-out failed: "+i.message)}catch(a){console.error("Check-out error:",a),r("Check-out failed")}finally{A(!1)}},e.readAsDataURL(y)}catch(e){r("Check-out failed"),A(!1)}}},disabled:!y||S,children:S?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Pt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Oh,{className:"w-4 h-4 mr-2"}),"Check Out"]})})]})]})]})]}):(0,ae.jsxs)(Ra,{open:h,onOpenChange:f,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{disabled:S,className:"w-full sm:w-auto",children:[(0,ae.jsx)(Ah,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Check In"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Check In"})]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Check In"}),(0,ae.jsx)(qa,{children:"Upload a photo as proof of check-in and add any notes for the shift."})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkInPhoto",children:"Check-in Photo (Required)"}),(0,ae.jsx)(ie,{id:"checkInPhoto",type:"file",accept:"image/*",onChange:e=>{var t;return v((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},className:"mt-1",required:!0,disabled:S})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"checkInNotes",children:"Notes (Optional)"}),(0,ae.jsx)($t,{id:"checkInNotes",value:b,onChange:e=>w(e.target.value),placeholder:"Any notes for this shift...",rows:3,disabled:S})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>f(!1),disabled:S,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(g){A(!0);try{const e=new FileReader;e.onload=async e=>{try{var t;const a=null===(t=e.target)||void 0===t?void 0:t.result,o=n.staff_id||n.id,i=await Fe.apiClient.post("/staffs/".concat(o,"/check-in"),{check_in_photo:a,notes:b});i.success?(f(!1),v(null),w(""),Y("Check-in successful! You are now on duty."),setTimeout(()=>Y(""),3e3),await J()):r("Check-in failed: "+i.message)}catch(a){console.error("Check-in error:",a),r("Check-in failed")}finally{A(!1)}},e.readAsDataURL(g)}catch(e){console.error("Check-in error:",e),r("Check-in failed"),A(!1)}}},disabled:!g||S,children:S?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Pt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ah,{className:"w-4 h-4 mr-2"}),"Check In"]})})]})]})]})]})})]})})]}),(0,ae.jsxs)(xd,{defaultValue:"trips",className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-2 h-auto",children:[(0,ae.jsxs)(wd,{value:"trips",className:"flex items-center space-x-1 sm:space-x-2 py-2 sm:py-3",children:[(0,ae.jsx)(Ct,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,ae.jsx)("span",{className:"text-xs sm:text-sm",children:"My Trips"})]}),(0,ae.jsxs)(wd,{value:"shifts",className:"flex items-center space-x-1 sm:space-x-2 py-2 sm:py-3",children:[(0,ae.jsx)(Dh,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,ae.jsx)("span",{className:"text-xs sm:text-sm",children:"My Shifts"})]})]}),(0,ae.jsx)(jd,{value:"trips",className:"mt-6",children:(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"pb-3 sm:pb-6",children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2 text-base sm:text-lg",children:[(0,ae.jsx)(Ct,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,ae.jsx)("span",{children:"Assigned Trips"})]}),(0,ae.jsx)(Me,{className:"text-sm",children:"Trips you are assigned to manage"})]}),(0,ae.jsx)(Re,{children:0===u.length?(0,ae.jsxs)("div",{className:"text-center py-8",children:[(0,ae.jsx)(At,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No trips assigned."})]}):(0,ae.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,ae.jsxs)("div",{className:"mb-4",children:[(0,ae.jsx)(Te,{className:"border-l-4 border-l-blue-400",children:(0,ae.jsxs)(Re,{className:"p-3 sm:p-4",children:[(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 mb-3",children:[(0,ae.jsx)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:(0,ae.jsx)("h4",{className:"font-medium text-sm sm:text-base truncate",children:e.trip_name})}),(0,ae.jsx)(ku,{className:"text-xs w-fit ".concat("active"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-xs text-gray-500",children:"Destination"}),(0,ae.jsx)("p",{className:"text-sm",children:e.destination})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-xs text-gray-500",children:"Dates"}),(0,ae.jsxs)("p",{className:"text-sm",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]})]})]}),(0,ae.jsxs)("div",{className:"mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[(0,ae.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,ae.jsxs)(ku,{variant:"outline",className:"text-xs",children:[e.activecustomerscount||0," Active Customers"]})}),(0,ae.jsx)("div",{className:"flex flex-col sm:flex-row gap-2 sm:space-x-2",children:(0,ae.jsx)(Vt,{size:"sm",variant:"outline",onClick:()=>{V(H===e.id?null:e.id),H!==e.id&&Z(e)},className:"text-xs w-full sm:w-auto",children:H===e.id?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(uu,{className:"w-3 h-3 mr-1"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Hide Customers"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Hide"})]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(lu,{className:"w-3 h-3 mr-1"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"View Customers"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"View"})]})})})]})]})}),H===e.id&&(0,ae.jsx)("div",{className:"mt-3 pl-2 sm:pl-4 border-l-2 border-blue-200",children:0===P.length?(0,ae.jsxs)("div",{className:"text-center py-6 bg-gray-50 rounded",children:[(0,ae.jsx)(At,{className:"w-6 h-6 sm:w-8 sm:h-8 mx-auto text-gray-400 mb-2"}),(0,ae.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Loading customers..."})]}):(0,ae.jsx)("div",{className:"space-y-2 sm:space-y-3",children:P.map(e=>{var t,r;const a=(null===(t=e.customer)||void 0===t?void 0:t.id)||e.customer_id,o=(null===(r=e.customer)||void 0===r?void 0:r.name)||e.name,i=K.filter(e=>e.customer_id===a),s=i.filter(e=>"transaction"===e.photo_type),l=i.filter(e=>"rolling"===e.photo_type);return(0,ae.jsx)(Te,{className:"border-l-4 border-l-gray-300",children:(0,ae.jsxs)(Re,{className:"p-2 sm:p-3",children:[(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0 mb-3",children:[(0,ae.jsx)("h5",{className:"text-sm sm:text-base font-medium truncate",children:o||"Customer"}),(0,ae.jsx)(ku,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 text-xs w-fit",children:"Active"})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[(0,ae.jsxs)("div",{className:"border rounded p-2 sm:p-3",children:[(0,ae.jsx)("h6",{className:"text-xs sm:text-sm font-medium mb-2",children:"Transaction"}),(0,ae.jsx)("div",{className:"mb-3",children:(0,ae.jsx)(ih,{photos:s,type:"transaction",size:"medium",maxPhotos:4,onPhotoDelete:ee,showDelete:"admin"===n.role||s.some(e=>e.uploaded_by===n.staff_id),showDownload:!0,userRole:n.role,customerName:o})}),(0,ae.jsxs)(mt,{variant:"outline",size:"mobile",onClick:()=>{D(e),M("transaction"),U(!0)},icon:(0,ae.jsx)(Ih,{className:pt}),children:[(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Upload Transaction Photo"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Upload Transaction"})]})]}),(0,ae.jsxs)("div",{className:"border rounded p-2 sm:p-3",children:[(0,ae.jsx)("h6",{className:"text-xs sm:text-sm font-medium mb-2",children:"Rolling"}),(0,ae.jsx)("div",{className:"mb-3",children:(0,ae.jsx)(ih,{photos:l,type:"rolling",size:"medium",maxPhotos:4,onPhotoDelete:ee,showDelete:"admin"===n.role||l.some(e=>e.uploaded_by===n.staff_id),showDownload:!0,userRole:n.role,customerName:o})}),(0,ae.jsxs)(mt,{variant:"outline",size:"mobile",onClick:()=>{D(e),M("rolling"),U(!0)},icon:(0,ae.jsx)(Ih,{className:pt}),children:[(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Upload Rolling Photo"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Upload Rolling"})]})]})]})]})},a)})})})]},e.id))})})]})}),(0,ae.jsx)(jd,{value:"shifts",className:"mt-4 sm:mt-6",children:(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"pb-3 sm:pb-6",children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2 text-base sm:text-lg",children:[(0,ae.jsx)(Dh,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,ae.jsx)("span",{children:"Shift History"})]}),(0,ae.jsx)(Me,{className:"text-sm",children:"Your recent shifts and attendance"})]}),(0,ae.jsx)(Re,{children:0===l.length?(0,ae.jsxs)("div",{className:"text-center py-8",children:[(0,ae.jsx)(Ph,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No shift history found."})]}):(0,ae.jsx)("div",{className:"space-y-4",children:l.sort((e,t)=>{const n=new Date(e.check_in_time||e.shift_date||e.checkInTime||e.shiftDate);return new Date(t.check_in_time||t.shift_date||t.checkInTime||t.shiftDate).getTime()-n.getTime()}).slice(0,10).map(e=>(0,ae.jsx)(Te,{className:"border-l-4 border-l-blue-400",children:(0,ae.jsxs)(Re,{className:"p-3 sm:p-4",children:[(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 mb-3",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(Dh,{className:"w-3 h-3 sm:w-4 sm:h-4 text-gray-400"}),(0,ae.jsx)("span",{className:"font-medium text-sm sm:text-base",children:e.shift_date})]}),(0,ae.jsx)(ku,{className:"text-xs w-fit ".concat("checked-in"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"checked-in"===e.status?"On Duty":"Completed"})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-xs text-gray-500",children:"Check-in Time"}),(0,ae.jsx)("p",{children:new Date(e.check_in_time).toLocaleString()}),e.check_in_photo&&(0,ae.jsx)("div",{className:"mt-2",children:(0,ae.jsx)(oh,{src:e.check_in_photo,alt:"Check-in proof",className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded border"})})]}),e.check_out_time&&(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-xs text-gray-500",children:"Check-out Time"}),(0,ae.jsx)("p",{children:new Date(e.check_out_time).toLocaleString()}),e.check_out_photo&&(0,ae.jsx)("div",{className:"mt-2",children:(0,ae.jsx)(oh,{src:e.check_out_photo,alt:"Check-out proof",className:"w-12 h-12 sm:w-16 sm:h-16 object-cover rounded border"})})]})]}),e.notes&&(0,ae.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs",children:[(0,ae.jsx)(Ne,{className:"text-gray-500",children:"Notes"}),(0,ae.jsx)("p",{className:"text-gray-700 mt-1",children:e.notes})]})]})},e.id))})})]})})]}),(0,ae.jsx)(Ra,{open:B,onOpenChange:U,children:(0,ae.jsxs)(Ba,{className:"max-w-md",children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsxs)(Wa,{className:"flex items-center space-x-2",children:["transaction"===I?(0,ae.jsx)(kt,{className:"w-5 h-5"}):(0,ae.jsx)(Ih,{className:"w-5 h-5"}),(0,ae.jsxs)("span",{children:["Upload ","transaction"===I?"Transaction":"Rolling"," Photo"]})]}),(0,ae.jsxs)(qa,{children:["Upload proof photo for ",null===O||void 0===O?void 0:O.trip_name]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[T&&(0,ae.jsxs)("div",{className:"p-3 bg-blue-50 rounded border",children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-blue-800",children:"Selected Customer"}),(0,ae.jsx)("div",{className:"mt-1",children:(0,ae.jsx)("p",{className:"font-medium",children:T.customer_name||T.name})})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"uploadDate",children:"Date (Required)"}),(0,ae.jsx)(ie,{id:"uploadDate",type:"date",value:F,onChange:e=>z(e.target.value),disabled:S,required:!0,className:"mb-2"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"uploadPhoto",children:"Upload Photo"}),(0,ae.jsx)(ie,{id:"uploadPhoto",type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&L(e.target.files[0])},disabled:S,required:!0})]}),R&&(0,ae.jsxs)("div",{className:"mt-2",children:[(0,ae.jsx)(Ne,{className:"text-sm mb-1 block",children:"Photo Preview"}),(0,ae.jsx)("div",{className:"border rounded p-2 bg-gray-50",children:(0,ae.jsx)("img",{src:URL.createObjectURL(R),alt:"Preview",className:"max-h-40 mx-auto object-contain"})})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:()=>U(!1),disabled:S,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(R&&T&&F){A(!0);try{const e=new FileReader;e.onload=async e=>{try{var t,a,o;const i={data:null===(t=e.target)||void 0===t?void 0:t.result,filename:R.name,size:R.size,type:R.type,uploaded_at:(new Date).toISOString()},s={customer_id:null===(a=T.customer)||void 0===a?void 0:a.id,trip_id:O.id,photo_type:I,photo:i,uploaded_by:n.staff_id||n.id,transaction_date:F},l="/customer-photos";console.log("Uploading ".concat(I," photo for customer:"),T.customer_name||T.name),console.log("\ud83d\udd0d Selected Customer Object:",T),console.log("\ud83d\udd0d Customer ID fields:",{"selectedCustomer.id":T.id,"selectedCustomer.customer_id":T.customer_id,"selectedCustomer.customer?.id":null===(o=T.customer)||void 0===o?void 0:o.id}),console.log("\ud83d\udcf8 Uploading photo payload:",{customer_id:s.customer_id,trip_id:s.trip_id,photo_type:s.photo_type,photo:s.photo,transaction_date:s.transaction_date});const c=await Fe.apiClient.post(l,s);c.success?(U(!1),L(null),z((new Date).toISOString().split("T")[0]),D(null),Y("".concat("transaction"===I?"Transaction":"Rolling"," photo uploaded successfully and pending approval")),setTimeout(()=>Y(""),3e3),await Z(O)):r("Failed to upload ".concat(I," photo: ")+c.message)}catch(i){console.error("".concat(I," photo upload error:"),i),r("Failed to upload ".concat(I," photo"))}finally{A(!1)}},e.readAsDataURL(R)}catch(e){console.error("".concat(I," upload error:"),e),r("Failed to upload ".concat(I)),A(!1)}}else r("Please fill in all required fields")},disabled:!R||!F||S,children:S?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Upload"})]})]})]})})]})});var Rh=n(7026);const Lh=["className"],Fh=["className"],zh=["className"],Bh=["className"],Uh=["className"],Wh=["className"];function qh(e){let{className:t}=e,n=i(e,Lh);return(0,ae.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,ae.jsx)("table",(0,o.A)({"data-slot":"table",className:re("w-full caption-bottom text-sm",t)},n))})}function Hh(e){let{className:t}=e,n=i(e,Fh);return(0,ae.jsx)("thead",(0,o.A)({"data-slot":"table-header",className:re("[&_tr]:border-b",t)},n))}function Vh(e){let{className:t}=e,n=i(e,zh);return(0,ae.jsx)("tbody",(0,o.A)({"data-slot":"table-body",className:re("[&_tr:last-child]:border-0",t)},n))}function Kh(e){let{className:t}=e,n=i(e,Bh);return(0,ae.jsx)("tr",(0,o.A)({"data-slot":"table-row",className:re("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t)},n))}function $h(e){let{className:t}=e,n=i(e,Uh);return(0,ae.jsx)("th",(0,o.A)({"data-slot":"table-head",className:re("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t)},n))}function Gh(e){let{className:t}=e,n=i(e,Wh);return(0,ae.jsx)("td",(0,o.A)({"data-slot":"table-cell",className:re("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t)},n))}const Yh=[{value:"PESO",label:"Philippine Peso (\u20b1)",symbol:"\u20b1"},{value:"HKD",label:"Hong Kong Dollar (HK$)",symbol:"HK$"},{value:"MYR",label:"Malaysian Ringgit (RM)",symbol:"RM"}],Jh=e=>{const t=Yh.find(t=>t.value===e);return(null===t||void 0===t?void 0:t.symbol)||"HK$"},Xh=function(e){let t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!e||0===e)return 0;if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HKD")===t)return e;let r=1;if(t!==(n.currency||"HKD"))switch(t){case"PESO":r=n.exchange_rate_peso||1;break;case"HKD":r=n.exchange_rate_hkd||1;break;case"MYR":r=n.exchange_rate_myr||1;break;default:r=1}return e*r},Qh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HKD",n=arguments.length>2?arguments[2]:void 0;if(!e&&0!==e)return Jh(t)+"0.00";const r=Jh(t),a=(null===n||void 0===n?void 0:n.currency)||"HKD",o=n?Xh(e,a,t,n):e;return n&&t!==a&&console.log("\ud83d\udcb1 Currency conversion:",{originalAmount:e,fromCurrency:a,toCurrency:t,exchangeRate:"MYR"===t?n.exchange_rate_myr:"PESO"===t?n.exchange_rate_peso:n.exchange_rate_hkd,convertedAmount:o,formattedResult:"".concat(r).concat(Math.abs(o).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}),"".concat(r).concat(Math.abs(o).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))},Zh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HKD",n=arguments.length>2?arguments[2]:void 0;if(!e&&0!==e)return Jh(t)+"0.00";const r=Jh(t),a=(null===n||void 0===n?void 0:n.currency)||"HKD",o=n?Xh(e,a,t,n):e;return"".concat(o>=0?"":"-").concat(r).concat(Math.abs(o).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))},ef=$e("chart-no-axes-column-increasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),tf=$e("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),nf=$e("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),rf=$e("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const af=function(e){var n,r,a,i,s,l,c,u,d,h,f,p,m;let{user:g}=e;const v=g||{role:"admin",agentId:null,username:"admin"},y=(0,t.useCallback)(()=>{},[]),x=(0,t.useCallback)(e=>console.error(e),[]),{t:b}=Lt(),w=sh(v.role),j=lh(v.role),_=e=>{const t=parseFloat(e);return isNaN(t)?0:t},[N,k]=(0,t.useState)([]),[S,A]=(0,t.useState)([]),[O,C]=(0,t.useState)([]),[P,E]=(0,t.useState)([]),[T,D]=(0,t.useState)(null),[I,M]=(0,t.useState)("trips"),[R,L]=(0,t.useState)("overview"),[F,z]=(0,t.useState)(!0),[B,U]=(0,t.useState)(!1),[W,q]=(0,t.useState)(""),[H,V]=(0,t.useState)(!1),[K,$]=(0,t.useState)([]),[G,Y]=(0,t.useState)(null),[J,X]=(0,t.useState)([]),[Q,Z]=(0,t.useState)(!1),[ee,te]=(0,t.useState)(!1),[ne,re]=(0,t.useState)(!1),[oe,se]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(!1),[he,fe]=(0,t.useState)(!1),[pe,me]=(0,t.useState)(null),[ge,ve]=(0,t.useState)(null),[ye,xe]=(0,t.useState)(!1),[be,we]=(0,t.useState)(!1),[je,_e]=(0,t.useState)(null),[ke,Se]=(0,t.useState)(null),[Ae,Oe]=(0,t.useState)({}),[Ce,Pe]=(0,t.useState)({}),[Ee,ze]=(0,t.useState)({}),[Be,Ue]=(0,t.useState)(!1),[We,qe]=(0,t.useState)(null),[He,Ve]=(0,t.useState)(0),[Ke,$e]=(0,t.useState)(!1),[Ge,Je]=(0,t.useState)(!1),[Qe,et]=(0,t.useState)(null),[tt,nt]=(0,t.useState)(!1),[rt,at]=(0,t.useState)(null),[ot,it]=(0,t.useState)(!1),[st,lt]=(0,t.useState)(null),[ct,ut]=(0,t.useState)([]),[dt,ht]=(0,t.useState)(!1),[ft,pt]=(0,t.useState)(null),[mt,gt]=(0,t.useState)(!1),[vt,yt]=(0,t.useState)(!1),[xt,bt]=(0,t.useState)({type:"buy-in",amount:"",venue:"",datetime:(new Date).toISOString().slice(0,16)}),[wt,jt]=(0,t.useState)({amount:"",staff_id:"",game_type:"baccarat",venue:"",datetime:(new Date).toISOString().slice(0,16)}),[_t,Nt]=(0,t.useState)({name:"",description:"",date:"",endDate:"",venue:"",budget:"",status:"active",currency:"HKD",exchange_rate_peso:1,exchange_rate_hkd:1,exchange_rate_myr:1}),[St,Pt]=(0,t.useState)("HKD"),[Et,Tt]=(0,t.useState)("");(0,t.useEffect)(()=>{ee||Tt("")},[ee]),(0,t.useEffect)(()=>{null!==T&&void 0!==T&&T.currency&&(Pt(T.currency),console.log("\ud83d\udd04 Trip changed, updating viewing currency:",{tripId:T.id,tripCurrency:T.currency,exchangeRates:{peso:T.exchange_rate_peso,hkd:T.exchange_rate_hkd,myr:T.exchange_rate_myr}}))},[T]);const[Dt,It]=(0,t.useState)({description:"",amount:0,category:"flight",datetime:(new Date).toISOString().slice(0,16)}),[Mt,Rt]=(0,t.useState)(25),[Ft,zt]=(0,t.useState)(null),[Bt,Ut]=(0,t.useState)(null),Wt=e=>void 0===e||null===e||isNaN(e)?"0":e.toLocaleString(),qt="admin"===v.role,Ht="agent"===v.role&&v.agentId,Kt=(0,t.useCallback)(async e=>{try{gt(!0);const t=await Fe.apiClient.get("/trips/".concat(e,"/expenses"));t.success&&$(t.data.expenses||[])}catch(t){console.error("Error loading trip expenses:",t),x("Failed to load trip expenses")}finally{gt(!1)}},[x]),Gt=(0,t.useCallback)(async e=>{try{yt(!0);const t=await Fe.apiClient.get("/trips/".concat(e,"/sharing"));t.success&&Y(t.data)}catch(t){console.error("Error loading trip sharing:",t),x("Failed to load trip sharing")}finally{yt(!1)}},[x]),Yt=(0,t.useCallback)(async e=>{try{console.log("\ud83d\udcca Loading agent summary for trip:",e);const t=await Fe.apiClient.getTripAgentSummary(e);console.log("\ud83d\udcca Agent summary API response:",t),t.success?(console.log("\u2705 Agent summary data:",t.data),X(Array.isArray(t.data)?t.data:[])):(console.log("\u274c Agent summary API failed:",t),X([]))}catch(t){console.error("Error loading agent summary:",t),x("Failed to load agent summary"),X([])}},[x]),Jt=(0,t.useCallback)(async(e,t)=>{try{console.log("\ud83d\udd0d Loading customer photos for:",{customerId:e,tripId:t});const n=await Fe.apiClient.get("/trips/".concat(t,"/customers/").concat(e,"/photos"));n.success?(console.log("\ud83d\udcf8 Customer photos loaded:",n.data),ut(n.data||[])):(console.log("\u274c Failed to load customer photos:",n.error),ut([]))}catch(n){console.error("\u274c Error loading customer photos:",n),ut([])}},[]),Xt=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!e&&H&&N.length>0)return void console.log("\ud83d\udccb Using cached data, skipping reload");z(!0),q(""),y();if(!await Rh.b.getToken()){console.log("\u274c No authentication token available, attempting auto-login...");try{var t;const e="http://localhost:3001/api",n=await fetch("".concat(e,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})}),r=await n.json();if(!r.success||null===(t=r.data)||void 0===t||!t.token)return console.log("\u274c Auto-login failed:",r),q("Authentication required. Please login first."),void z(!1);{console.log("\u2705 Auto-login successful"),Rh.b.setToken(r.data.token);const e=(0,o.A)((0,o.A)({},r.data.user),{},{token:r.data.token});localStorage.setItem("casinoUser",JSON.stringify(e))}}catch(n){return console.error("\u274c Auto-login error:",n),q("Authentication failed. Please check your connection."),void z(!1)}}console.log("\ud83d\udd0d Loading data for user role:",v.role);const[r,a,i,s]=await Promise.all([Le.db.get("trips",[]),Le.db.get("customers",[]),Le.db.get("agents",[]),Fe.apiClient.get("/staffs")]);console.log("\ud83d\udcca Raw data loaded:",{trips:(null===r||void 0===r?void 0:r.length)||0,customers:(null===a||void 0===a?void 0:a.length)||0,agents:(null===i||void 0===i?void 0:i.length)||0,userRole:v.role});const l=s.success?s.data:[],c=(r||[]).map(e=>{var t,n;return{id:e.id,name:e.trip_name||e.name||"Unnamed Trip",description:e.description||"",date:e.start_date||e.date,startDate:e.start_date||e.date,endDate:e.end_date||e.endDate,status:e.status||"active",budget:e.total_budget||0,createdAt:e.created_at||(new Date).toISOString(),currency:e.currency||"HKD",exchange_rate_peso:e.exchange_rate_peso||1,exchange_rate_hkd:e.exchange_rate_hkd||1,exchange_rate_myr:e.exchange_rate_myr||(null!==(t=e.name)&&void 0!==t&&t.toLowerCase().includes("manila")||null!==(n=e.trip_name)&&void 0!==n&&n.toLowerCase().includes("manila")?.6:1),customers:[],agents:[],expenses:[],totalRolling:0,totalWinLoss:0,totalBuyIn:0,totalBuyOut:0,calculatedTotalRolling:0,sharing:{totalWinLoss:0,totalExpenses:0,totalRollingCommission:0,totalBuyIn:0,totalBuyOut:0,netResult:0,netCashFlow:0,totalAgentShare:0,companyShare:0,agentSharePercentage:0,companySharePercentage:100,agentShares:[],agentBreakdown:[]},attachments:[],lastDataUpdate:(new Date).toISOString(),activeCustomersCount:0,recentActivityCount:0,totalExpenses:0,_dataLoaded:!1}});k(c),A(a||[]),C(i||[]),E(l||[]),V(!0),console.log("\u2705 Basic project data loaded quickly: ".concat(c.length," trips")),c.length>0&&setTimeout(async()=>{try{const e=await Promise.all(c.map(async e=>{try{const[t,n,r]=await Promise.all([Fe.apiClient.get("/trips/".concat(e.id,"/statistics")),Fe.apiClient.get("/trips/".concat(e.id,"/sharing")),Fe.apiClient.get("/trips/".concat(e.id,"/customer-stats"))]),a=t.success?t.data:null,i=n.success?n.data:null,s=r.success?r.data:[],l=(null===a||void 0===a?void 0:a.statistics)||a;return(0,o.A)((0,o.A)({},e),{},{customers:s,totalRolling:(null===l||void 0===l?void 0:l.total_rolling)||(null===a||void 0===a?void 0:a.total_rolling)||0,totalWinLoss:(null===l||void 0===l?void 0:l.net_profit)||(null===a||void 0===a?void 0:a.net_profit)||0,totalBuyIn:(null===l||void 0===l?void 0:l.total_buy_in)||(null===a||void 0===a?void 0:a.total_buy_in)||0,totalBuyOut:(null===l||void 0===l?void 0:l.total_cash_out)||(null===a||void 0===a?void 0:a.total_cash_out)||0,calculatedTotalRolling:(null===l||void 0===l?void 0:l.total_rolling)||(null===a||void 0===a?void 0:a.total_rolling)||0,sharing:{total_rolling:(null===i||void 0===i?void 0:i.total_rolling)||0,total_expenses:(null===i||void 0===i?void 0:i.total_expenses)||0,net_result:(null===i||void 0===i?void 0:i.net_result)||0,totalWinLoss:(null===i||void 0===i?void 0:i.total_win_loss)||0,totalRollingCommission:(null===i||void 0===i?void 0:i.total_rolling_commission)||0,totalBuyIn:(null===i||void 0===i?void 0:i.total_buy_in)||0,totalBuyOut:(null===i||void 0===i?void 0:i.total_buy_out)||0,netCashFlow:(null===i||void 0===i?void 0:i.net_cash_flow)||0,totalAgentShare:(null===i||void 0===i?void 0:i.total_agent_share)||0,companyShare:(null===i||void 0===i?void 0:i.company_share)||0,agentSharePercentage:(null===i||void 0===i?void 0:i.agent_share_percentage)||0,companySharePercentage:(null===i||void 0===i?void 0:i.company_share_percentage)||100,agentShares:[],agentBreakdown:(null===i||void 0===i?void 0:i.agent_breakdown)||[]},totalExpenses:(null===i||void 0===i?void 0:i.total_expenses)||0,_dataLoaded:!0})}catch(n){return console.warn("Failed to load detailed data for trip ".concat(e.id,":"),n),(0,o.A)((0,o.A)({},e),{},{_dataLoaded:!1})}}));k(e),console.log("\u2705 Detailed trip data loaded in background")}catch(n){console.warn("Background data loading failed:",n)}},100)}catch(n){console.error("\u274c Error loading data:",n),q("Failed to load project data: ".concat(n)),x("Failed to load project data")}finally{z(!1)}},[H,N.length,x,y,v.role]);(0,t.useEffect)(()=>{Xt(!0)},[Xt]),(0,t.useEffect)(()=>{T&&(console.log("\ud83c\udfaf Loading detailed data for selected trip:",{tripId:T.id,tripName:T.name,customers:T.customers,agents:T.agents}),Kt(T.id),Gt(T.id))},[T,Kt,Gt]);const Qt=async e=>{console.log("\ud83c\udfaf Selecting trip for details:",e.name);try{var t,n,r,a,i,s,l,c,u,d;z(!0);const[h,f,p,m,g,v,y]=await Promise.all([Fe.apiClient.get("/trips/".concat(e.id,"/customer-stats")),Fe.apiClient.get("/trips/".concat(e.id,"/expenses")),Fe.apiClient.get("/trips/".concat(e.id,"/sharing")),Fe.apiClient.get("/trips/".concat(e.id,"/statistics")),Fe.apiClient.get("/trips/".concat(e.id,"/transactions")),Fe.apiClient.get("/trips/".concat(e.id,"/agents")),Fe.apiClient.get("/trips/".concat(e.id,"/staff"))]);console.log("\ud83d\udcca Backend API responses:",{customers:h,expenses:f,sharing:p,statistics:m,transactions:g,agents:v,staff:y});const x=(0,o.A)((0,o.A)({},e),{},{customers:h.success?h.data:[],expenses:f.success&&(null===(t=f.data)||void 0===t?void 0:t.expenses)||[],agents:v.success?v.data:[],staff:y.success?y.data:[],sharing:p.success?p.data:e.sharing,statistics:m.success?m.data:null,transactions:g.success?g.data:[],activeCustomersCount:h.success?(null===(n=h.data)||void 0===n?void 0:n.length)||0:e.activeCustomersCount||0,backendData:{totalBuyIn:m.success&&(null===(r=m.data)||void 0===r||null===(a=r.statistics)||void 0===a?void 0:a.total_buy_in)||0,totalCashOut:m.success&&(null===(i=m.data)||void 0===i||null===(s=i.statistics)||void 0===s?void 0:s.total_cash_out)||0,totalWinLoss:m.success&&(null===(l=m.data)||void 0===l||null===(c=l.statistics)||void 0===c?void 0:c.total_win_loss)||0,profitMargin:m.success&&(null===(u=m.data)||void 0===u||null===(d=u.statistics)||void 0===d?void 0:d.profit_margin)||0,customerStatsLoaded:h.success,expensesLoaded:f.success,agentsLoaded:v.success,sharingLoaded:p.success,statisticsLoaded:m.success,transactionsLoaded:g.success}});x.customers&&x.customers.length>0&&(x.totalBuyIn=x.customers.reduce((e,t)=>e+_(t.total_buy_in),0),x.totalBuyOut=x.customers.reduce((e,t)=>e+_(t.total_cash_out),0),x.totalRolling=x.customers.reduce((e,t)=>e+_(t.rolling_amount),0),x.totalWinLoss=x.customers.reduce((e,t)=>e+_(t.net_result),0)),x.expenses&&x.expenses.length>0&&(x.totalExpenses=x.expenses.reduce((e,t)=>e+_(t.amount),0)),console.log("\ud83d\udcca Enriched trip with backend data:",x),$(x.expenses||[]),Y(x.sharing||null),await Yt(e.id),D(x),M("trip-details"),L("overview")}catch(h){console.error("\u274c Error loading trip details:",h),D(e),M("trip-details"),L("overview")}finally{z(!1)}},Zt=async e=>{if(T){console.log("\ud83d\udd04 Starting delete customer process:",{customerId:e,tripId:T.id}),U(!0);try{console.log("\ud83d\udce1 Making API call to delete customer...");const t=await Fe.apiClient.delete("/trips/".concat(T.id,"/customers/").concat(e));if(console.log("\ud83d\udce8 API Response:",t),!t.success)throw new Error(t.error||"Failed to remove customer from trip");console.log("\u2705 Customer removed from trip via API successfully"),console.log("\ud83d\udd04 Refreshing trip data..."),await Qt(T),console.log("\u2705 Trip data refreshed after customer removal")}catch(t){console.error("\u274c Error removing customer from trip:",t);const e=t instanceof Error?t.message:"Unknown error occurred";x("Failed to remove customer from trip: ".concat(e))}finally{U(!1)}}},en=async(e,t)=>{try{const n=await Fe.apiClient.getCustomerTransactions(e,t);n.success&&Pe(t=>(0,o.A)((0,o.A)({},t),{},{[e]:Array.isArray(n.data)?n.data:[]}))}catch(n){console.error("Error loading customer transactions:",n)}},tn=async(e,t)=>{try{const n=await Fe.apiClient.getCustomerRollings(e,t);n.success&&ze(t=>(0,o.A)((0,o.A)({},t),{},{[e]:Array.isArray(n.data)?n.data:[]}))}catch(n){console.error("Error loading customer rollings:",n)}},nn="agent"===v.role&&v.agentId?N.filter(e=>e.agents&&e.agents.some(e=>e.agentId===v.agentId)):N;return F&&!H?(0,ae.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,ae.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading Project Data"}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"Connecting to Supabase and loading trips, customers, and agents..."}),(0,ae.jsx)("div",{className:"mt-3 w-48 bg-gray-200 rounded-full h-2 mx-auto",children:(0,ae.jsx)("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})})]})}):(0,ae.jsxs)("div",{className:"space-y-6",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"pt-4",children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:b("trips_loaded")}),(0,ae.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===N||void 0===N?void 0:N.length)||0})]}),(0,ae.jsx)(Ct,{className:"w-8 h-8 text-blue-400"})]})})}),(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"pt-4",children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:b("customers_available")}),(0,ae.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null===S||void 0===S?void 0:S.length)||0})]}),(0,ae.jsx)(At,{className:"w-8 h-8 text-green-400"})]})})}),(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"pt-4",children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:b("agents_available")}),(0,ae.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null===O||void 0===O?void 0:O.length)||0})]}),(0,ae.jsx)(Ot,{className:"w-8 h-8 text-purple-400"})]})})})]}),W&&(0,ae.jsxs)(Qd,{className:"border-red-200 bg-red-50",children:[(0,ae.jsx)(Xe,{className:"w-4 h-4 text-red-600"}),(0,ae.jsxs)(Zd,{className:"text-red-800",children:[(0,ae.jsxs)("strong",{children:[b("error"),":"]})," ",W,(0,ae.jsxs)(Vt,{onClick:()=>Xt(!0),size:"sm",variant:"outline",className:"ml-3 text-red-800 border-red-300 hover:bg-red-100",children:[(0,ae.jsx)(eh,{className:"w-3 h-3 mr-1"}),b("retry")]})]})]}),(0,ae.jsxs)(xd,{value:I,onValueChange:M,className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-2",children:[(0,ae.jsx)(wd,{value:"trips",children:b("trips")}),(0,ae.jsx)(wd,{value:"trip-details",disabled:!T,children:b("trip_details")})]}),(0,ae.jsxs)(jd,{value:"trips",className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:b("project_management")}),(0,ae.jsxs)("p",{className:"text-gray-600",children:["Manage trips and project data with full CRUD functionality","agent"===v.role&&" (Your trips only)"]})]}),!w&&(0,ae.jsxs)(Ra,{open:Q,onOpenChange:Z,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),b("create_trip")]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:b("create_new_trip")}),(0,ae.jsx)(qa,{children:b("create_trip_desc")})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"tripName",children:[b("trip_name")," *"]}),(0,ae.jsx)(ie,{id:"tripName",value:_t.name,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{name:e.target.value})),placeholder:"Enter trip name"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"tripDescription",children:b("description")}),(0,ae.jsx)($t,{id:"tripDescription",value:_t.description,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{description:e.target.value})),placeholder:"Trip description"})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"startDate",children:[b("start_date")," *"]}),(0,ae.jsx)(ie,{id:"startDate",type:"date",value:_t.date,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{date:e.target.value}))})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"endDate",children:b("end_date")}),(0,ae.jsx)(ie,{id:"endDate",type:"date",value:_t.endDate,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{endDate:e.target.value}))})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"venue",children:"Venue"}),(0,ae.jsx)(ie,{id:"venue",value:_t.venue,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{venue:e.target.value})),placeholder:"Casino venue"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"budget",children:"Budget (HK$)"}),(0,ae.jsx)(ie,{id:"budget",type:"number",value:_t.budget,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{budget:e.target.value})),placeholder:"Enter trip budget"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"status",children:"Status"}),(0,ae.jsxs)(gu,{value:_t.status,onValueChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{status:e})),children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"active",children:"Active"}),(0,ae.jsx)(bu,{value:"in-progress",children:"In Progress"}),(0,ae.jsx)(bu,{value:"completed",children:"Completed"}),(0,ae.jsx)(bu,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"currency",children:"Currency"}),(0,ae.jsxs)(gu,{value:_t.currency,onValueChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{currency:e})),children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{placeholder:"Select currency"})}),(0,ae.jsx)(xu,{children:Yh.map(e=>(0,ae.jsx)(bu,{value:e.value,children:e.label},e.value))})]})]}),(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsx)(Ne,{children:"Exchange Rates (Manual Input)"}),(0,ae.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"ratePeso",className:"text-sm",children:"Peso Rate"}),(0,ae.jsx)(ie,{id:"ratePeso",type:"number",step:"0.0001",value:_t.exchange_rate_peso,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{exchange_rate_peso:parseFloat(e.target.value)||1})),placeholder:"1.0000"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"rateHKD",className:"text-sm",children:"HKD Rate"}),(0,ae.jsx)(ie,{id:"rateHKD",type:"number",step:"0.0001",value:_t.exchange_rate_hkd,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{exchange_rate_hkd:parseFloat(e.target.value)||1})),placeholder:"1.0000"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"rateMYR",className:"text-sm",children:"MYR Rate"}),(0,ae.jsx)(ie,{id:"rateMYR",type:"number",step:"0.0001",value:_t.exchange_rate_myr,onChange:e=>Nt((0,o.A)((0,o.A)({},_t),{},{exchange_rate_myr:parseFloat(e.target.value)||1})),placeholder:"1.0000"})]})]}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:["Set exchange rates for currency conversion. Current selection: ",Jh(_t.currency)]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>Z(!1),disabled:B,children:b("cancel")}),(0,ae.jsx)(Vt,{onClick:async()=>{if(_t.name.trim()&&_t.date&&_t.venue)try{U(!0);const e={trip_name:_t.name,destination:_t.venue,start_date:_t.date,end_date:_t.endDate||_t.date,total_budget:parseFloat(_t.budget)||0,description:_t.description||"",status:_t.status,currency:_t.currency,exchange_rate_peso:_t.exchange_rate_peso,exchange_rate_hkd:_t.exchange_rate_hkd,exchange_rate_myr:_t.exchange_rate_myr};console.log("Creating trip with data:",e);const t=await Fe.apiClient.post("/trips",e);if(!t.success)throw new Error(t.error||"Failed to create trip");console.log("\u2705 Trip created successfully:",t.data),await Xt(),Z(!1),Nt({name:"",description:"",date:"",endDate:"",venue:"",budget:"",status:"active",currency:"HKD",exchange_rate_peso:1,exchange_rate_hkd:1,exchange_rate_myr:1}),console.log("\u2705 Trip created successfully:",t.data.trip_name)}catch(e){console.error("\u274c Error creating trip:",e);const t=e instanceof Error?e.message:"Unknown error occurred";x("Failed to create trip: ".concat(t))}finally{U(!1)}else x("Please fill in all required fields (Name, Date, Venue)")},disabled:B,children:b(B?"creating":"create_trip")})]})]})]})]})]}),F?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:b("loading_trips")})]})}):0===((null===nn||void 0===nn?void 0:nn.length)||0)?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(Ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:H?"No trips found":"Loading trips..."}),(0,ae.jsx)("p",{className:"text-gray-500 mb-4",children:H?"Create your first trip to start managing projects and customer rolling amounts.":"Please wait while we load your trip data from Supabase."}),H&&(qt||Ht)&&(0,ae.jsxs)(Vt,{onClick:()=>Z(!0),children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Create First Trip"]}),!H&&(0,ae.jsxs)(Vt,{onClick:()=>Xt(!0),variant:"outline",children:[(0,ae.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Retry Loading"]})]})}):(0,ae.jsxs)("div",{className:"space-y-4",children:[(console.log("\ud83d\udd0d Rendering trips:",null===nn||void 0===nn?void 0:nn.length,nn),null),(nn||[]).map(e=>{var t,n,r,a,o,i,s;return(0,ae.jsx)(Te,{className:"overflow-hidden hover:shadow-md transition-shadow",children:(0,ae.jsxs)(De,{children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ie,{className:"text-xl",children:e.name}),(0,ae.jsxs)(Me,{className:"mt-1",children:[e.description," \u2022 ",e.date]})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ku,{variant:"completed"===e.status?"default":"in-progress"===e.status?"secondary":"outline",children:(null===(t=e.status)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(n=e.status)||void 0===n?void 0:n.slice(1))}),(0,ae.jsxs)(Vt,{size:"sm",variant:"outline",onClick:()=>Qt(e),children:[(0,ae.jsx)(Vd,{className:"w-4 h-4 mr-1"}),"View Details"]})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"text-gray-500 text-xs",children:"Customers"}),(0,ae.jsx)("div",{className:"font-medium",children:(null===(r=e.customers)||void 0===r?void 0:r.length)||0})]}),j&&(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"text-gray-500 text-xs",children:"Total Rolling"}),(0,ae.jsxs)("div",{className:"font-medium text-blue-600",children:["HK$",Wt((null===(a=e.sharing)||void 0===a?void 0:a.total_rolling)||0)]})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"text-gray-500 text-xs",children:"Expenses"}),(0,ae.jsxs)("div",{className:"font-medium text-red-600",children:["HK$",Wt(Math.abs((null===(o=e.sharing)||void 0===o?void 0:o.total_expenses)||0))]})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"text-gray-500 text-xs",children:"Profit"}),(0,ae.jsxs)("div",{className:"font-medium ".concat(((null===(i=e.sharing)||void 0===i?void 0:i.net_result)||0)>0?"text-green-600":"text-red-600"),children:["HK$",Wt(Math.abs((null===(s=e.sharing)||void 0===s?void 0:s.net_result)||0))]})]})]})]})]})},e.id)})]})]}),(0,ae.jsx)(jd,{value:"trip-details",className:"space-y-4",children:T?(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:T.name}),(0,ae.jsx)("p",{className:"text-gray-600",children:T.description})]}),(0,ae.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)("span",{className:"text-sm text-gray-600",children:b("view_in")}),(0,ae.jsxs)(gu,{value:St,onValueChange:e=>{console.log("\ud83d\udd04 Currency selector changed:",{from:St,to:e,tripData:T?{id:T.id,currency:T.currency,rates:{peso:T.exchange_rate_peso,hkd:T.exchange_rate_hkd,myr:T.exchange_rate_myr}}:null}),Pt(e)},children:[(0,ae.jsx)(yu,{className:"w-24",children:(0,ae.jsx)(vu,{})}),(0,ae.jsx)(xu,{children:Yh.map(e=>(0,ae.jsx)(bu,{value:e.value,children:e.symbol},e.value))})]})]}),(0,ae.jsxs)(Vt,{variant:"outline",onClick:()=>M("trips"),children:[(0,ae.jsx)(Ct,{className:"w-4 h-4 mr-2"}),b("back_to_trips")]})]})]}),(0,ae.jsxs)(xd,{value:R,onValueChange:L,className:"space-y-4",children:[(0,ae.jsxs)(bd,{className:"w-full flex flex-wrap sm:grid sm:grid-cols-6 gap-1 sm:gap-0 h-auto sm:h-10 p-1",children:[(0,ae.jsxs)(wd,{value:"overview",className:"flex items-center gap-1 text-xs sm:text-sm px-1.5 sm:px-3 py-1.5 sm:py-2 min-w-0 flex-shrink-0",children:[(0,ae.jsx)(ef,{className:"w-3 h-3 flex-shrink-0"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Overview"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Over"})]}),(0,ae.jsxs)(wd,{value:"customers",className:"flex items-center gap-1 text-xs sm:text-sm px-1.5 sm:px-3 py-1.5 sm:py-2 min-w-0 flex-shrink-0",children:[(0,ae.jsx)(At,{className:"w-3 h-3 flex-shrink-0"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Customers"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Cust"})]}),(0,ae.jsxs)(wd,{value:"agents",className:"flex items-center gap-1 text-xs sm:text-sm px-1.5 sm:px-3 py-1.5 sm:py-2 min-w-0 flex-shrink-0",children:[(0,ae.jsx)(Ot,{className:"w-3 h-3 flex-shrink-0"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Agents"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Agt"})]}),(0,ae.jsxs)(wd,{value:"staff",className:"flex items-center gap-1 text-xs sm:text-sm px-1.5 sm:px-3 py-1.5 sm:py-2 min-w-0 flex-shrink-0",children:[(0,ae.jsx)(At,{className:"w-3 h-3 flex-shrink-0"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Staff"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Staff"})]}),(0,ae.jsxs)(wd,{value:"expenses",className:"flex items-center gap-1 text-xs sm:text-sm px-1.5 sm:px-3 py-1.5 sm:py-2 min-w-0 flex-shrink-0",children:[(0,ae.jsx)(kt,{className:"w-3 h-3 flex-shrink-0"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Expenses"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Exp"})]}),(0,ae.jsxs)(wd,{value:"sharing",className:"flex items-center gap-1 text-xs sm:text-sm px-1.5 sm:px-3 py-1.5 sm:py-2 min-w-0 flex-shrink-0",children:[(0,ae.jsx)(tf,{className:"w-3 h-3 flex-shrink-0"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Financials"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Fin"})]})]}),(0,ae.jsx)(jd,{value:"overview",className:"space-y-4",children:(0,ae.jsx)("div",{className:"space-y-6",children:((e,t,n,r,a,o,i,s,l,c,u,d,h,f,p,m,g,v,y,x,b)=>{const j=((null===T||void 0===T?void 0:T.expenses)||[]).reduce((e,t)=>e+_(t.amount),0);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Buy-in"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold text-green-600",children:Qh((null===T||void 0===T||null===(e=T.backendData)||void 0===e?void 0:e.totalBuyIn)||0,St,T)}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===T||void 0===T?void 0:T.activeCustomersCount)||(null===T||void 0===T||null===(t=T.customers)||void 0===t?void 0:t.length)||0," customers"]}),(0,ae.jsx)("p",{className:"text-xs text-green-500",children:"From transactions"})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Buy-out"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Qh(Math.abs((null===T||void 0===T||null===(n=T.backendData)||void 0===n?void 0:n.totalCashOut)||0),St,T)}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"Customer withdrawals"}),(0,ae.jsx)("p",{className:"text-xs text-red-500",children:"From transactions"})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Expenses"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Qh(Math.abs(j),St,T)}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"After all expenses"}),(0,ae.jsx)("p",{className:"text-xs text-red-500",children:"House perspective"})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Profit"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold ".concat(((null===T||void 0===T||null===(r=T.sharing)||void 0===r?void 0:r.net_result)||(null===T||void 0===T||null===(a=T.backendData)||void 0===a?void 0:a.netProfit)||0)>0?"text-green-600":"text-red-600"),children:Qh(Math.abs((null===T||void 0===T||null===(o=T.sharing)||void 0===o?void 0:o.net_result)||(null===T||void 0===T||null===(i=T.backendData)||void 0===i?void 0:i.netProfit)||0),St,T)}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"House perspective"}),(0,ae.jsx)("p",{className:"text-xs ".concat(((null===T||void 0===T||null===(s=T.sharing)||void 0===s?void 0:s.net_result)||(null===T||void 0===T||null===(l=T.backendData)||void 0===l?void 0:l.netProfit)||0)>0?"text-green-500":"text-red-500"),children:"After all expenses"})]})]})]}),!w&&(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsx)(Ie,{className:"text-sm",children:"Quick Actions"})}),(0,ae.jsx)(Re,{children:(0,ae.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,ae.jsxs)(Vt,{size:"sm",variant:"outline",onClick:()=>L("expenses"),children:[(0,ae.jsx)(kt,{className:"w-4 h-4 mr-2"}),"Manage Expenses"]}),(0,ae.jsxs)(Vt,{size:"sm",variant:"outline",onClick:()=>L("sharing"),children:[(0,ae.jsx)(nf,{className:"w-4 h-4 mr-2"}),"Manage Sharing"]})]})})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsx)(Ie,{className:"text-sm",children:"Backend Data Status"})}),(0,ae.jsx)(Re,{className:"space-y-2",children:(0,ae.jsxs)("div",{className:"text-xs space-y-1",children:[(0,ae.jsxs)("div",{className:"flex justify-between",children:[(0,ae.jsx)("span",{children:"Customer Stats:"}),(0,ae.jsx)("span",{className:"font-medium ".concat(null!==T&&void 0!==T&&null!==(c=T.backendData)&&void 0!==c&&c.customerStatsLoaded?"text-green-600":"text-red-600"),children:null!==T&&void 0!==T&&null!==(u=T.backendData)&&void 0!==u&&u.customerStatsLoaded?"\u2713 Loaded":"\u2717 Missing"})]}),(0,ae.jsxs)("div",{className:"flex justify-between",children:[(0,ae.jsx)("span",{children:"Agents:"}),(0,ae.jsx)("span",{className:"font-medium ".concat(null!==T&&void 0!==T&&null!==(d=T.backendData)&&void 0!==d&&d.agentsLoaded?"text-green-600":"text-red-600"),children:null!==T&&void 0!==T&&null!==(h=T.backendData)&&void 0!==h&&h.agentsLoaded?"\u2713 Loaded":"\u2717 Missing"})]}),(0,ae.jsxs)("div",{className:"flex justify-between",children:[(0,ae.jsx)("span",{children:"Expenses:"}),(0,ae.jsx)("span",{className:"font-medium ".concat(null!==T&&void 0!==T&&null!==(f=T.backendData)&&void 0!==f&&f.expensesLoaded?"text-green-600":"text-red-600"),children:null!==T&&void 0!==T&&null!==(p=T.backendData)&&void 0!==p&&p.expensesLoaded?"\u2713 Loaded":"\u2717 Missing"})]}),(0,ae.jsxs)("div",{className:"flex justify-between",children:[(0,ae.jsx)("span",{children:"Sharing:"}),(0,ae.jsx)("span",{className:"font-medium ".concat(null!==T&&void 0!==T&&null!==(m=T.backendData)&&void 0!==m&&m.sharingLoaded?"text-green-600":"text-red-600"),children:null!==T&&void 0!==T&&null!==(g=T.backendData)&&void 0!==g&&g.sharingLoaded?"\u2713 Loaded":"\u2717 Missing"})]}),(0,ae.jsxs)("div",{className:"flex justify-between",children:[(0,ae.jsx)("span",{children:"Statistics:"}),(0,ae.jsx)("span",{className:"font-medium ".concat(null!==T&&void 0!==T&&null!==(v=T.backendData)&&void 0!==v&&v.statisticsLoaded?"text-green-600":"text-red-600"),children:null!==T&&void 0!==T&&null!==(y=T.backendData)&&void 0!==y&&y.statisticsLoaded?"\u2713 Loaded":"\u2717 Missing"})]}),(0,ae.jsxs)("div",{className:"flex justify-between",children:[(0,ae.jsx)("span",{children:"Transactions:"}),(0,ae.jsx)("span",{className:"font-medium ".concat(null!==T&&void 0!==T&&null!==(x=T.backendData)&&void 0!==x&&x.transactionsLoaded?"text-green-600":"text-red-600"),children:null!==T&&void 0!==T&&null!==(b=T.backendData)&&void 0!==b&&b.transactionsLoaded?"\u2713 Loaded":"\u2717 Missing"})]})]})})]})]})})()})}),(0,ae.jsxs)(jd,{value:"customers",className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("h3",{className:"text-lg font-medium",children:["Trip Customers (",(null===T||void 0===T?void 0:T.activeCustomersCount)||(null===T||void 0===T||null===(n=T.customers)||void 0===n?void 0:n.length)||0,")"]}),!w&&(0,ae.jsxs)(Ra,{open:ee,onOpenChange:te,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{size:"sm",children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Add Customer"]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Add Customer to Trip"}),(0,ae.jsx)(qa,{children:"Search and select from available customers"})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsx)(Ne,{htmlFor:"customer-search",children:"Search Customers"}),(0,ae.jsx)(ie,{id:"customer-search",type:"text",placeholder:"Search by name, email, or agent...",value:Et,onChange:e=>Tt(e.target.value),className:"w-full"})]}),(0,ae.jsx)("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:(()=>{const e=(S||[]).filter(e=>!((null===T||void 0===T?void 0:T.customers)||[]).some(t=>t.customerId===e.id||t.customer_id===e.id)),t=((e,t)=>{if(!t.trim())return e;const n=t.toLowerCase().trim();return e.filter(e=>{var t,r,a;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(n))||(null===(a=e.agentName)||void 0===a?void 0:a.toLowerCase().includes(n))})})(e,Et);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)("div",{className:"text-sm text-gray-500 px-1",children:["Showing ",t.length," of ",e.length," available customers"]}),t.map(e=>(0,ae.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-medium",children:e.name}),(0,ae.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,ae.jsxs)("div",{className:"text-xs text-gray-400",children:["Agent: ",e.agentName]})]}),!w&&(0,ae.jsx)(Vt,{size:"sm",onClick:()=>(async e=>{if(!T)return;const t=S.find(t=>t.id===e);if(t)if(T.customers.some(t=>t.customerId===e||t.customer_id===e))x("Customer is already added to this trip");else{U(!0);try{const n=await Fe.apiClient.post("/trips/".concat(T.id,"/customers"),{customer_id:e});if(!n.success)throw new Error(n.error||"Failed to add customer to trip");console.log("\u2705 Customer added to trip via API:",t.name),await Qt(T),te(!1)}catch(n){console.error("\u274c Error adding customer to trip:",n);const e=n instanceof Error?n.message:"Unknown error occurred";x("Failed to add customer to trip: ".concat(e))}finally{U(!1)}}})(e.id),disabled:B,children:B?"Adding...":"Add"})]},e.id)),0===t.length&&e.length>0&&(0,ae.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No customers match your search"}),0===e.length&&(0,ae.jsx)("p",{className:"text-center text-gray-500 py-8",children:"All customers are already added to this trip"})]})})()})]})]})]})]}),0===((null===T||void 0===T||null===(r=T.customers)||void 0===r?void 0:r.length)||0)?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)(At,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No customers added to this trip"}),!w&&(0,ae.jsxs)(Vt,{className:"mt-4",onClick:()=>te(!0),children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Add First Customer"]})]})}):(0,ae.jsx)("div",{className:"space-y-4",children:((null===T||void 0===T?void 0:T.customers)||[]).map(e=>{var t,n,r,a;return(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"pt-4",children:[(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsx)("h4",{className:"font-medium text-base",children:e.customerName||(null===(t=e.customer)||void 0===t?void 0:t.name)}),(0,ae.jsxs)(ku,{variant:"outline",className:"text-xs",children:["VIP: ",(null===(n=e.customer)||void 0===n?void 0:n.vip_level)||"Standard"]})]}),(0,ae.jsxs)("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 lg:grid-cols-5 sm:gap-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between sm:block",children:[(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:"Buy-in:"}),(0,ae.jsx)("div",{className:"font-medium text-blue-600 text-right sm:text-left",children:Qh(e.total_buy_in||e.buyInAmount||0,St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between sm:block",children:[(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:"Cash-out:"}),(0,ae.jsx)("div",{className:"font-medium text-purple-600 text-right sm:text-left",children:Qh(e.total_cash_out||e.buyOutAmount||0,St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between sm:block",children:[(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:"Rolling:"}),(0,ae.jsx)("div",{className:"font-medium text-orange-600 text-right sm:text-left",children:Qh(e.rolling_amount||e.rollingAmount||0,St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between sm:block",children:[(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:"Win/Loss:"}),(0,ae.jsx)("div",{className:"font-medium text-right sm:text-left ".concat((e.total_buy_in||0)-(e.total_cash_out||0)>0?"text-green-600":"text-red-600"),children:Qh(Math.abs((e.total_buy_in||0)-(e.total_cash_out||0)),St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between sm:block",children:[(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:"Net Result:"}),(0,ae.jsx)("div",{className:"font-medium text-right sm:text-left ".concat((e.net_result||0)>0?"text-green-600":"text-red-600"),children:Qh(Math.abs(e.net_result||0),St,T)})]})]}),(0,ae.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-2",children:[(0,ae.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",onClick:()=>{me(e),de(!0)},disabled:B,children:[(0,ae.jsx)(uh,{className:"w-3 h-3 mr-1"}),"Transaction"]}),(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",onClick:()=>{ve(e),fe(!0)},disabled:B,children:[(0,ae.jsx)(uh,{className:"w-3 h-3 mr-1"}),"Rolling"]})]}),(0,ae.jsxs)("div",{className:"flex gap-2",children:[(0,ae.jsx)(Vt,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",onClick:()=>(async e=>{const t=Ae[e];Oe(n=>(0,o.A)((0,o.A)({},n),{},{[e]:!t})),!t&&T&&(await en(e,T.id),await tn(e,T.id))})(e.customerId||e.customer_id),disabled:B,children:(0,ae.jsx)(lu,{className:"w-3 h-3 transition-transform ".concat(Ae[e.customerId||e.customer_id]?"rotate-180":"")})}),(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",onClick:()=>(async e=>{if(!T)return;const t=e.customerId||e.customer_id;lt(e),it(!0),await Jt(t,T.id)})(e),disabled:B,children:[(0,ae.jsx)(Ih,{className:"w-3 h-3 mr-1"}),"Photos"]}),(0,ae.jsx)(Vt,{variant:"outline",size:"sm",className:"flex-1 sm:flex-none",onClick:()=>{pt(e),ht(!0)},disabled:B,children:(0,ae.jsx)(Ze,{className:"w-4 h-4"})})]})]})]}),Ae[e.customerId||e.customer_id]&&(0,ae.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,ae.jsxs)("div",{className:"mb-4",children:[(0,ae.jsx)("h5",{className:"font-medium mb-2 text-blue-600",children:"Transaction History"}),null===(r=Ce[e.customerId||e.customer_id])||void 0===r?void 0:r.map(e=>(0,ae.jsxs)("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded border mb-2",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ku,{variant:"buy-in"===e.transaction_type?"default":"secondary",children:"buy-in"===e.transaction_type?"Buy-in":"Cash-out"}),(0,ae.jsx)("span",{className:"font-medium",children:Qh(e.amount,St,T)}),(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:e.venue})]}),(0,ae.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:new Date(e.created_at).toLocaleString()})]}),!w&&(0,ae.jsxs)("div",{className:"flex gap-1",children:[(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(e=>{_e(e),bt({type:e.transaction_type||e.type,amount:String(e.amount||""),venue:e.venue||"",datetime:e.created_at?new Date(e.created_at).toISOString().slice(0,16):(new Date).toISOString().slice(0,16)}),xe(!0)})(e),children:(0,ae.jsx)(tf,{className:"w-3 h-3"})}),(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(T&&window.confirm("Are you sure you want to delete this transaction?")){U(!0);try{if((await Fe.apiClient.deleteTransaction(e.id)).success){await Qt(T);const t=e.customer_id||e.customerId;t&&await en(t,T.id)}else x("Failed to delete transaction")}catch(t){console.error("Error deleting transaction:",t),x("Failed to delete transaction")}finally{U(!1)}}})(e),className:"text-red-600",children:(0,ae.jsx)($d,{className:"w-3 h-3"})})]})]},e.id))]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h5",{className:"font-medium mb-2 text-orange-600",children:"Rolling History"}),null===(a=Ee[e.customerId||e.customer_id])||void 0===a?void 0:a.map(e=>(0,ae.jsxs)("div",{className:"flex items-center justify-between p-2 bg-orange-50 rounded border mb-2",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(ku,{variant:"outline",className:"bg-orange-100 text-orange-700",children:"Rolling"}),(0,ae.jsx)("span",{className:"font-medium",children:Qh(e.rolling_amount||e.amount,St,T)}),(0,ae.jsx)("span",{className:"text-sm text-gray-500",children:e.venue}),(0,ae.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.game_type,")"]})]}),(0,ae.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:new Date(e.created_at).toLocaleString()})]}),!w&&(0,ae.jsxs)("div",{className:"flex gap-1",children:[(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(e=>{Se(e),jt({amount:String(e.rolling_amount||e.amount||""),staff_id:e.staff_id||"",game_type:e.game_type||"baccarat",venue:e.venue||"",datetime:e.created_at?new Date(e.created_at).toISOString().slice(0,16):(new Date).toISOString().slice(0,16)}),we(!0)})(e),children:(0,ae.jsx)(tf,{className:"w-3 h-3"})}),(0,ae.jsx)(Vt,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(T&&window.confirm("Are you sure you want to delete this rolling record?")){U(!0);try{if((await Fe.apiClient.deleteRolling(e.id)).success){await Qt(T);const t=e.customer_id||e.customerId;t&&await tn(t,T.id)}else x("Failed to delete rolling")}catch(t){console.error("Error deleting rolling:",t),x("Failed to delete rolling")}finally{U(!1)}}})(e),className:"text-red-600",children:(0,ae.jsx)($d,{className:"w-3 h-3"})})]})]},e.id))]})]})]})},e.customerId||e.customer_id)})}),!w&&(0,ae.jsx)(Lo,{open:dt,onOpenChange:ht,children:(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Remove Customer from Trip"}),(0,ae.jsxs)(Vo,{children:["Are you sure you want to remove ",(0,ae.jsx)("strong",{children:(null===ft||void 0===ft?void 0:ft.customerName)||(null===ft||void 0===ft||null===(a=ft.customer)||void 0===a?void 0:a.name)})," from this trip?",(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),"This will permanently remove all their transaction history, rolling records, and financial data associated with this trip.",(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),(0,ae.jsx)("strong",{children:"This action cannot be undone."})]})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{onClick:()=>{ht(!1),pt(null)},disabled:B,children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:async()=>{if(!ft)return;const e=ft.customerId||ft.customer_id;ht(!1),pt(null),await Zt(e)},disabled:B,className:"bg-red-600 hover:bg-red-700",children:B?"Removing...":"Remove Customer"})]})]})})]}),(0,ae.jsxs)(jd,{value:"agents",className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsx)("h3",{className:"text-lg font-medium",children:"Agent Profit Sharing Summary"}),(0,ae.jsxs)(Vt,{size:"sm",variant:"outline",onClick:()=>{T&&(console.log("\ud83d\udd04 Manual refresh clicked for trip:",T.id),Yt(T.id))},disabled:F,children:[(0,ae.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),F?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"Loading agent summary..."})]})}):J&&0!==J.length?(0,ae.jsx)("div",{className:"space-y-6",children:J.map(e=>{var t;return(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ie,{className:"text-lg",children:e.agent_name}),(0,ae.jsxs)(Me,{children:["Base Commission Rate: ",e.agent_commission_rate,"%"]})]}),(0,ae.jsxs)("div",{className:"text-right",children:[(0,ae.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:Qh(e.agent_profit_share||0,St,T)}),(0,ae.jsx)("p",{className:"text-sm text-gray-500",children:"Agent Profit Share"})]})]})}),(0,ae.jsx)(Re,{children:(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,ae.jsxs)("div",{className:"p-3 bg-blue-50 rounded",children:[(0,ae.jsx)("div",{className:"text-sm text-gray-600",children:"Total Win/Loss"}),(0,ae.jsx)("div",{className:"text-lg font-bold ".concat(e.total_win_loss>=0?"text-green-600":"text-red-600"),children:Zh(e.total_win_loss||0,St,T)})]}),(0,ae.jsxs)("div",{className:"p-3 bg-green-50 rounded",children:[(0,ae.jsx)("div",{className:"text-sm text-gray-600",children:"Total Commission"}),(0,ae.jsx)("div",{className:"text-lg font-bold text-gray-800",children:Qh(e.total_commission||0,St,T)})]}),(0,ae.jsxs)("div",{className:"p-3 bg-purple-50 rounded",children:[(0,ae.jsx)("div",{className:"text-sm text-gray-600",children:"Total Profit"}),(0,ae.jsx)("div",{className:"text-lg font-bold ".concat(e.total_profit>=0?"text-green-600":"text-red-600"),children:Zh(e.total_profit||0,St,T)})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("h4",{className:"font-medium mb-3",children:["Customer Details (",e.customer_count||(null===(t=e.customers)||void 0===t?void 0:t.length)||0," customers)"]}),(0,ae.jsx)("div",{className:"space-y-3",children:e.customers&&e.customers.map(t=>(0,ae.jsxs)("div",{className:"border rounded p-3",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-medium",children:t.customer_name}),(0,ae.jsxs)("div",{className:"text-sm text-gray-500",children:["Net Result: ",(0,ae.jsx)("span",{className:"font-medium ".concat((t.net_result||0)>=0?"text-green-600":"text-red-600"),children:Qh(Math.abs(t.net_result||0),St,T)})]})]}),(0,ae.jsxs)("div",{className:"text-right",children:[(0,ae.jsxs)("div",{className:"font-bold text-blue-600",children:[t.profit_sharing_rate,"%"]}),(0,ae.jsx)("div",{className:"text-sm text-gray-500",children:"Profit Sharing Rate"})]})]}),!w&&(0,ae.jsx)("div",{className:"flex justify-center pt-2 border-t",children:(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>((e,t,n)=>{qe({agentId:e,customerId:t.customer_id,customerName:t.customer_name,agentName:n,currentRate:t.profit_sharing_rate||0,customerNetResult:0}),Ve(t.profit_sharing_rate||0),Ue(!0)})(e.agent_id,t,e.agent_name),className:"text-sm",children:[(0,ae.jsx)(tf,{className:"w-4 h-4 mr-1"}),"Edit Profit Sharing Rate"]})})]},t.customer_id))})]}),(0,ae.jsx)("div",{className:"bg-gray-50 p-3 rounded",children:(0,ae.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,ae.jsxs)("div",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,ae.jsxs)("div",{children:["Last Updated: ",new Date(e.updated_at).toLocaleDateString()]})]})})]})})]},e.agent_id)})}):(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)(Ot,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No agent profit sharing data available"}),(0,ae.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Agent summaries are created when trip sharing is calculated"})]})}),(0,ae.jsx)(Te,{className:"border-yellow-200 bg-yellow-50",children:(0,ae.jsxs)(Re,{className:"pt-4",children:[(0,ae.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Debug Information"}),(0,ae.jsxs)("div",{className:"text-sm text-yellow-700 space-y-1",children:[(0,ae.jsxs)("div",{children:["Trip ID: ",null===T||void 0===T?void 0:T.id]}),(0,ae.jsxs)("div",{children:["Customers in trip: ",(null===T||void 0===T||null===(i=T.customers)||void 0===i?void 0:i.length)||0]}),(0,ae.jsxs)("div",{children:["Agents in trip: ",(null===T||void 0===T||null===(s=T.agents)||void 0===s?void 0:s.length)||0]}),(0,ae.jsxs)("div",{children:["Agent summary loaded: ",(null===J||void 0===J?void 0:J.length)||0]}),(0,ae.jsxs)("div",{children:["Agent summary state: ",JSON.stringify(J)]})]})]})})]}),(0,ae.jsx)(Ra,{open:ne,onOpenChange:re,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Edit Agent Share"}),(0,ae.jsxs)(qa,{children:["Update ",null===Ft||void 0===Ft?void 0:Ft.agentName,"'s share percentage"]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editSharePercentage",children:"Share Percentage *"}),(0,ae.jsx)(ie,{id:"editSharePercentage",type:"number",value:Mt,onChange:e=>Rt(parseFloat(e.target.value)||0),placeholder:"Enter percentage (e.g., 25)",min:"0.1",max:"100",step:"0.1"}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter a value between 0.1 and 100"})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>re(!1),disabled:B,children:"Cancel"}),!w&&(0,ae.jsx)(Vt,{onClick:async()=>{if(T&&Ft)if(Mt<=0||Mt>100)x("Please enter a valid share percentage between 1 and 100");else try{const e=(0,o.A)((0,o.A)({},T),{},{agents:(T.agents||[]).map(e=>e.agentId===Ft.agentId?(0,o.A)((0,o.A)({},e),{},{sharePercentage:Mt}):e),lastDataUpdate:(new Date).toISOString()}),t=(N||[]).map(t=>t.id===T.id?e:t);await(async e=>{try{U(!0),await Le.db.save("trips",e),k(e),console.log("\u2705 Trips saved to Supabase")}catch(t){console.error("\u274c Error saving trips:",t);const e=t instanceof Error?t.message:"Unknown error occurred";throw x("Failed to save trips: ".concat(e)),t}finally{U(!1)}})(t),D(e),re(!1),zt(null),Rt(25),console.log("\u2705 Agent share updated:",Ft.agentName)}catch(e){console.error("\u274c Error updating agent share:",e);const t=e instanceof Error?e.message:"Unknown error occurred";x("Failed to update agent share: ".concat(t))}},disabled:B,children:B?"Updating...":"Update Share"})]})]})]})}),(0,ae.jsx)(Lo,{open:oe,onOpenChange:se,children:(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Remove Agent from Trip"}),(0,ae.jsxs)(Vo,{children:["Are you sure you want to remove ",(0,ae.jsx)("strong",{children:null===Bt||void 0===Bt?void 0:Bt.agentName})," from this trip? This will remove their ",null===Bt||void 0===Bt?void 0:Bt.sharePercentage,"% share allocation.",(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),"This action cannot be undone."]})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{disabled:B,children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:async()=>{if(T&&Bt){U(!0);try{const e=Bt.agentId||Bt.agent_id;console.log("\ud83d\uddd1\ufe0f Attempting to delete agent:",{tripId:T.id,agentIdToRemove:e,deletingAgent:Bt,url:"/trips/".concat(T.id,"/agents/").concat(e)});const t=await Fe.apiClient.delete("/trips/".concat(T.id,"/agents/").concat(e));if(!t.success)throw new Error(t.error||"Failed to remove agent from trip");console.log("\u2705 Agent removed from trip via API:",Bt.agentName),await Qt(T),se(!1),Ut(null)}catch(e){console.error("\u274c Error removing agent from trip:",e);const t=e instanceof Error?e.message:"Unknown error occurred";x("Failed to remove agent from trip: ".concat(t))}finally{U(!1)}}},disabled:B,className:"bg-red-600 hover:bg-red-700",children:B?"Removing...":"Remove Agent"})]})]})})]}),(0,ae.jsxs)(jd,{value:"staff",className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("h3",{className:"text-lg font-medium",children:["Trip Staff (",(null===T||void 0===T||null===(l=T.staff)||void 0===l?void 0:l.length)||0,")"]}),!w&&(0,ae.jsxs)(Ra,{open:le,onOpenChange:ce,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{size:"sm",children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Add Staff"]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Add Staff to Trip"}),(0,ae.jsxs)(qa,{children:["Select from available staff members (",(P||[]).filter(e=>!((null===T||void 0===T?void 0:T.staff)||[]).some(t=>t.staffId===e.id||t.staff_id===e.id)).length," available)"]})]}),(0,ae.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[(()=>{console.log("\ud83d\udd0d Debug staff filtering:",{allStaff:P,tripStaff:null===T||void 0===T?void 0:T.staff,staffCount:(null===P||void 0===P?void 0:P.length)||0,tripStaffCount:((null===T||void 0===T?void 0:T.staff)||[]).length});const e=(P||[]).filter(e=>!((null===T||void 0===T?void 0:T.staff)||[]).some(t=>{const n=t.staffId||t.staff_id||t.id,r=n===e.id;return console.log("\ud83d\udd0d Checking staff match:",{staffId:e.id,staffName:e.name,tripStaffId:n,tripStaff:t,match:r}),r}));return console.log("\u2705 Available staff after filtering:",e),e.map(e=>(0,ae.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-medium",children:e.name}),(0,ae.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,ae.jsxs)("div",{className:"text-xs text-gray-400",children:["Position: ",e.position]})]}),(0,ae.jsx)(Vt,{size:"sm",onClick:()=>(async e=>{if(T)try{U(!0);const t=await Fe.apiClient.post("/trips/".concat(T.id,"/staff"),{staff_id:e});t.success?(console.log(" Staff added to trip via API"),await Qt(T),ce(!1)):x(t.error||"Failed to add staff to trip")}catch(t){console.error("Error adding staff to trip:",t),x("Failed to add staff to trip")}finally{U(!1)}else x("No trip selected")})(e.id),disabled:B,children:B?"Adding...":"Add"})]},e.id))})(),(()=>{const e=(P||[]).filter(e=>!((null===T||void 0===T?void 0:T.staff)||[]).some(t=>(t.staffId||t.staff_id||t.id)===e.id));return 0===e.length&&(0,ae.jsx)("p",{className:"text-center text-gray-500 py-8",children:"All staff members are already assigned to this trip"})})()]})]})]})]}),T&&T.staff&&Array.isArray(T.staff)&&0!==T.staff.length?(0,ae.jsx)("div",{className:"space-y-4",children:(T.staff||[]).map(e=>(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"p-4",children:(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ae.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ae.jsx)(At,{className:"w-5 h-5 text-blue-600"})}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-medium",children:e.name||e.staffName}),(0,ae.jsx)("div",{className:"text-sm text-gray-500",children:e.email||e.staffEmail}),(0,ae.jsxs)("div",{className:"text-xs text-gray-400",children:["Position: ",e.position||e.staffPosition]}),e.created_at&&(0,ae.jsxs)("div",{className:"text-xs text-gray-400",children:["Added: ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,ae.jsx)("div",{className:"flex items-center space-x-2",children:!w&&(0,ae.jsx)(Vt,{size:"sm",variant:"outline",onClick:()=>(async e=>{if(T)try{U(!0);const t=await Fe.apiClient.delete("/trips/".concat(T.id,"/staff/").concat(e));t.success?(console.log(" Staff removed from trip via API"),await Qt(T)):x(t.error||"Failed to remove staff from trip")}catch(t){console.error("Error removing staff from trip:",t),x("Failed to remove staff from trip")}finally{U(!1)}else x("No trip selected")})(e.staff_id||e.id),disabled:B,children:(0,ae.jsx)($d,{className:"w-4 h-4"})})})]}),(()=>{e.shifts||(async()=>{try{const t=await Fe.apiClient.get("/staffs/".concat(e.staff_id||e.staffId,"/shifts"));t.success&&(e.shifts=t.data||[])}catch(t){console.error("\u274c Error loading staff shifts:",t)}})();const t=e.shifts||[],n=[];return t.forEach(e=>{e.check_in_photo&&n.push({type:"Check-in Photo",photo:e.check_in_photo,date:new Date(e.check_in_time).toLocaleString(),shift_id:e.id,timestamp:new Date(e.check_in_time).getTime()}),e.check_out_photo&&n.push({type:"Check-out Photo",photo:e.check_out_photo,date:new Date(e.check_out_time).toLocaleString(),shift_id:e.id,timestamp:new Date(e.check_out_time).getTime()})}),n.sort((e,t)=>t.timestamp-e.timestamp),0===n.length?(0,ae.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,ae.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,ae.jsx)(Ye,{className:"w-4 h-4 mr-2"}),"Check-in/out Photos (0)"]}),(0,ae.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,ae.jsx)("p",{className:"text-sm",children:"No check-in/out photos available"}),(0,ae.jsx)("p",{className:"text-xs mt-1",children:"Photos will appear here when staff check in/out"})]})]}):(0,ae.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,ae.jsxs)("h5",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,ae.jsx)(Ye,{className:"w-4 h-4 mr-2"}),"Check-in/out Photos (",n.length,")"]}),(0,ae.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.map((e,t)=>(0,ae.jsx)(Te,{className:"overflow-hidden",children:(0,ae.jsx)(Re,{className:"p-3",children:(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsx)(ku,{variant:e.type.includes("Check-in")?"default":"secondary",className:"text-xs",children:e.type}),(0,ae.jsx)(Vd,{className:"w-3 h-3 text-gray-400"})]}),(0,ae.jsx)("div",{className:"aspect-square relative",children:(0,ae.jsx)("img",{src:e.photo,alt:e.type,className:"w-full h-full object-cover rounded border cursor-pointer hover:opacity-80",onClick:()=>window.open(e.photo,"_blank")})}),(0,ae.jsx)("div",{children:(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:e.date})})]})})},"photo-".concat(e.shift_id,"-").concat(t)))})]})})()]})})},e.id||e.staff_id))}):(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)(At,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No staff assigned to this trip"}),(0,ae.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Add staff members to help manage this trip"})]})})]}),(0,ae.jsxs)(jd,{value:"expenses",className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("h3",{className:"text-lg font-medium",children:["Trip Expenses (",(null===K||void 0===K?void 0:K.length)||0,")"]}),!w&&(0,ae.jsxs)(Ra,{open:Ke,onOpenChange:$e,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{size:"sm",children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Add Expense"]})}),(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Add Expense"}),(0,ae.jsx)(qa,{children:"Record a new expense for this trip"})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"expenseDescription",children:"Description"}),(0,ae.jsx)(ie,{id:"expenseDescription",value:Dt.description,onChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{description:e.target.value})),placeholder:"Expense description"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"expenseAmount",children:["Amount (",Jh((null===T||void 0===T?void 0:T.currency)||"HKD"),")"]}),(0,ae.jsx)(ie,{id:"expenseAmount",type:"number",value:Dt.amount,onChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{amount:parseFloat(e.target.value)||0})),placeholder:"0.00",min:"0"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"expenseDateTime",children:"Date & Time"}),(0,ae.jsx)(ie,{id:"expenseDateTime",type:"datetime-local",value:Dt.datetime,onChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{datetime:e.target.value})),required:!0})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"expenseCategory",children:"Category"}),(0,ae.jsxs)(gu,{value:Dt.category,onValueChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{category:e})),children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"accommodation",children:"Accommodation"}),(0,ae.jsx)(bu,{value:"transportation",children:"Transportation"}),(0,ae.jsx)(bu,{value:"entertainment",children:"Entertainment"}),(0,ae.jsx)(bu,{value:"food_beverage",children:"Food & Beverage"}),(0,ae.jsx)(bu,{value:"other",children:"Other"})]})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>$e(!1),children:"Cancel"}),!w&&(0,ae.jsx)(Vt,{onClick:async()=>{if(!T||!Dt.description.trim()||Dt.amount<=0)return void x("Please fill in all expense fields");const e={expense_type:Dt.category,amount:Dt.amount,description:Dt.description,updated_at:new Date(Dt.datetime).toISOString()},t=await(async(e,t)=>{try{return U(!0),!(!(await Fe.apiClient.post("/trips/".concat(e,"/expenses"),t)).success||!T)&&(await Qt(T),!0)}catch(n){return console.error("Error adding trip expense:",n),x("Failed to add trip expense"),!1}finally{U(!1)}})(T.id,e);t&&($e(!1),It({description:"",amount:0,category:"flight",datetime:(new Date).toISOString().slice(0,16)}),console.log("\u2705 Expense added to trip via API"))},children:"Add Expense"})]})]})]})]})]}),!w&&(0,ae.jsx)(Ra,{open:Ge,onOpenChange:Je,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Edit Expense"}),(0,ae.jsx)(qa,{children:"Update the expense details"})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editExpenseDescription",children:"Description"}),(0,ae.jsx)(ie,{id:"editExpenseDescription",value:Dt.description,onChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{description:e.target.value})),placeholder:"Expense description"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"editExpenseAmount",children:["Amount (",Jh((null===T||void 0===T?void 0:T.currency)||"HKD"),")"]}),(0,ae.jsx)(ie,{id:"editExpenseAmount",type:"number",value:Dt.amount,onChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{amount:parseFloat(e.target.value)||0})),placeholder:"0.00",min:"0"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editExpenseDateTime",children:"Date & Time"}),(0,ae.jsx)(ie,{id:"editExpenseDateTime",type:"datetime-local",value:Dt.datetime,onChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{datetime:e.target.value})),required:!0})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editExpenseCategory",children:"Category"}),(0,ae.jsxs)(gu,{value:Dt.category,onValueChange:e=>It((0,o.A)((0,o.A)({},Dt),{},{category:e})),children:[(0,ae.jsx)(yu,{children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"accommodation",children:"Accommodation"}),(0,ae.jsx)(bu,{value:"transportation",children:"Transportation"}),(0,ae.jsx)(bu,{value:"entertainment",children:"Entertainment"}),(0,ae.jsx)(bu,{value:"food_beverage",children:"Food & Beverage"}),(0,ae.jsx)(bu,{value:"other",children:"Other"})]})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>{Je(!1),et(null),It({description:"",amount:0,category:"flight",datetime:(new Date).toISOString().slice(0,16)})},children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(T&&Qe&&Dt.description.trim()&&!(Dt.amount<=0))try{U(!0);const e={expense_type:Dt.category,amount:Dt.amount,description:Dt.description,expense_date:new Date(Dt.datetime).toISOString()};(await Fe.apiClient.put("/trips/".concat(T.id,"/expenses/").concat(Qe.id),e)).success?(await Qt(T),Je(!1),et(null),It({description:"",amount:0,category:"flight",datetime:(new Date).toISOString().slice(0,16)}),console.log("\u2705 Expense updated successfully")):x("Failed to update expense")}catch(e){console.error("Error updating expense:",e),x("Failed to update expense")}finally{U(!1)}else x("Please fill in all expense fields")},disabled:B,children:B?"Updating...":"Update Expense"})]})]})]})}),!w&&(0,ae.jsx)(Lo,{open:tt,onOpenChange:nt,children:(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Delete Expense"}),(0,ae.jsxs)(Vo,{children:["Are you sure you want to delete this expense? This action cannot be undone.",(0,ae.jsx)("br",{}),(0,ae.jsx)("br",{}),(0,ae.jsx)("strong",{children:"Expense:"})," ",null===rt||void 0===rt?void 0:rt.description,(0,ae.jsx)("br",{}),(0,ae.jsx)("strong",{children:"Amount:"})," ",rt&&Qh(rt.amount,St,T)]})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{onClick:()=>{nt(!1),at(null)},children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:async()=>{if(T&&rt)try{U(!0);(await Fe.apiClient.delete("/trips/".concat(T.id,"/expenses/").concat(rt.id))).success?(await Qt(T),nt(!1),at(null),console.log("\u2705 Expense deleted successfully")):x("Failed to delete expense")}catch(e){console.error("Error deleting expense:",e),x("Failed to delete expense")}finally{U(!1)}},disabled:B,className:"bg-red-600 hover:bg-red-700",children:B?"Deleting...":"Delete Expense"})]})]})}),mt?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"Loading expenses..."})]})}):0===((null===K||void 0===K?void 0:K.length)||0)?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)(kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No expenses recorded for this trip"}),!w&&(0,ae.jsxs)(Vt,{className:"mt-4",onClick:()=>$e(!0),children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Add First Expense"]})]})}):(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsx)(Ie,{className:"text-lg",children:"Expenses Summary"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Qh((K||[]).reduce((e,t)=>e+(t.amount||0),0),St,T)}),(0,ae.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===K||void 0===K?void 0:K.length)||0," expense items"]})]})]}),(0,ae.jsx)(Te,{children:(0,ae.jsx)(Re,{className:"p-0",children:(0,ae.jsxs)(qh,{children:[(0,ae.jsx)(Hh,{children:(0,ae.jsxs)(Kh,{children:[(0,ae.jsx)($h,{children:"Description"}),(0,ae.jsx)($h,{children:"Type"}),(0,ae.jsx)($h,{children:"Date"}),(0,ae.jsx)($h,{className:"text-right",children:"Amount"}),!w&&(0,ae.jsx)($h,{className:"text-center",children:"Actions"})]})}),(0,ae.jsx)(Vh,{children:(K||[]).map(e=>{var t;return(0,ae.jsxs)(Kh,{children:[(0,ae.jsx)(Gh,{className:"font-medium",children:e.description}),(0,ae.jsx)(Gh,{className:"capitalize",children:null===(t=e.expense_type)||void 0===t?void 0:t.replace("_"," ")}),(0,ae.jsx)(Gh,{children:e.expense_date}),(0,ae.jsx)(Gh,{className:"text-right font-medium text-red-600",children:Qh(e.amount,St,T)}),!w&&(0,ae.jsx)(Gh,{className:"text-center",children:(0,ae.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,ae.jsx)(Vt,{size:"sm",variant:"outline",onClick:()=>(e=>{et(e),It({description:e.description,amount:e.amount,category:e.expense_type,datetime:e.expense_date?new Date(e.expense_date).toISOString().slice(0,16):(new Date).toISOString().slice(0,16)}),Je(!0)})(e),disabled:B,children:(0,ae.jsx)(tf,{className:"w-4 h-4"})}),(0,ae.jsx)(Vt,{size:"sm",variant:"outline",onClick:()=>(e=>{at(e),nt(!0)})(e),disabled:B,className:"text-red-600 hover:text-red-700",children:(0,ae.jsx)($d,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})]})]}),(0,ae.jsxs)(jd,{value:"sharing",className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsx)("h3",{className:"text-lg font-medium",children:"Financial Overview & Profit Sharing"}),G&&(0,ae.jsxs)(Vt,{size:"sm",variant:"outline",onClick:()=>T&&Gt(T.id),disabled:vt,children:[(0,ae.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),vt?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"Loading sharing data..."})]})}):G?(0,ae.jsxs)("div",{className:"space-y-6",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Net Result"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold ".concat(G.net_result>=0?"text-green-600":"text-red-600"),children:Qh(Math.abs(G.net_result),St,T)}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"After all expenses and commissions"})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Agent Share"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold ".concat(G.total_agent_share>=0?"text-green-600":"text-red-600"),children:Qh(Math.abs(G.total_agent_share),St,T)}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[G.agent_share_percentage,"% of net result"]})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{className:"pb-2",children:(0,ae.jsx)(Ie,{className:"text-sm text-gray-600",children:"Company Share"})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold ".concat(G.company_share>=0?"text-green-600":"text-red-600"),children:Qh(Math.abs(G.company_share),St,T)}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500",children:[G.company_share_percentage,"% of net result"]})]})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsx)(Ie,{children:"Financial Breakdown"})}),(0,ae.jsx)(Re,{children:(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Total Buy-in"}),(0,ae.jsx)("span",{className:"text-green-600 font-bold",children:Qh(G.total_buy_in,St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Total Cash-out"}),(0,ae.jsx)("span",{className:"text-red-600 font-bold",children:Qh(Math.abs(G.total_buy_out),St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-100 rounded",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Gross Profit"}),(0,ae.jsx)("span",{className:"font-bold ".concat(G.total_win_loss>0?"text-green-600":"text-red-600"),children:Qh(Math.abs(G.total_win_loss),St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Rolling Commission"}),(0,ae.jsx)("span",{className:"text-purple-600 font-bold",children:Qh(Math.abs(G.total_rolling_commission),St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Total Expenses"}),(0,ae.jsx)("span",{className:"text-red-600 font-bold",children:Qh(Math.abs(G.total_expenses),St,T)})]}),(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[(0,ae.jsx)("span",{className:"font-medium",children:"Net Result"}),(0,ae.jsx)("span",{className:"font-bold ".concat(G.net_result>=0?"text-green-600":"text-red-600"),children:Qh(Math.abs(G.net_result),St,T)})]})]})})]}),G.agent_breakdown&&Object.keys(G.agent_breakdown).length>0&&(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsx)(Ie,{children:"Agent Share Breakdown"})}),(0,ae.jsx)(Re,{children:(0,ae.jsx)("div",{className:"space-y-3",children:Object.entries((null===G||void 0===G?void 0:G.agent_breakdown)||{}).map(e=>{let[t,n]=e;return(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-medium",children:n.agent_name}),(0,ae.jsxs)("div",{className:"text-sm text-gray-500",children:["Profit Sharing Rate: ",n.profit_sharing_rate,"%"]})]}),(0,ae.jsxs)("div",{className:"font-bold ".concat(n.share_amount>=0?"text-green-600":"text-red-600"),children:["HK$",Wt(Math.abs(n.share_amount))]})]},t)})})})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{children:[(0,ae.jsx)(Ie,{children:"Sharing Configuration"}),(0,ae.jsx)(Me,{children:"Adjust the profit sharing percentages between agents and company"})]}),(0,ae.jsx)(Re,{children:(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{children:"Agent Share Percentage"}),(0,ae.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[G.agent_share_percentage,"%"]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{children:"Company Share Percentage"}),(0,ae.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[G.company_share_percentage,"%"]})]})]}),(0,ae.jsxs)("div",{className:"pt-4 border-t",children:[(0,ae.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Current sharing model: ",G.agent_share_percentage,"% to agents, ",G.company_share_percentage,"% to company"]}),(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>{x("Sharing configuration will be available in the next update")},children:[(0,ae.jsx)(tf,{className:"w-4 h-4 mr-2"}),"Configure Sharing"]})]})]})})]})]}):(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-8",children:[(0,ae.jsx)(tf,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No sharing data available"}),(0,ae.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Sharing data will be calculated automatically when trip has transactions"})]})})]})]})]}):(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(Vd,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,ae.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Trip Selected"}),(0,ae.jsx)("p",{className:"text-gray-500 mb-4",children:"Please select a trip from the trips list to view detailed information."}),(0,ae.jsxs)(Vt,{onClick:()=>M("trips"),children:[(0,ae.jsx)(Ct,{className:"w-4 h-4 mr-2"}),"Go to Trips List"]})]})})})]}),(0,ae.jsx)(Ra,{open:ue,onOpenChange:de,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Add Transaction"}),(0,ae.jsxs)(qa,{children:["Add a new transaction for ",(null===pe||void 0===pe?void 0:pe.customerName)||(null===pe||void 0===pe||null===(c=pe.customer)||void 0===c?void 0:c.name)]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"transactionType",children:"Transaction Type"}),(0,ae.jsxs)(gu,{value:xt.type,onValueChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{type:e})),children:[(0,ae.jsx)(yu,{id:"transactionType",children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"buy-in",children:"Buy In"}),(0,ae.jsx)(bu,{value:"cash-out",children:"Cash Out"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"transactionAmount",children:"Amount (HK$)"}),(0,ae.jsx)(ie,{id:"transactionAmount",type:"number",placeholder:"Enter amount",value:xt.amount,onChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{amount:e.target.value})),required:!0}),!xt.amount&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Amount is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"transactionVenue",className:"flex items-center",children:["Venue ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsxs)(gu,{value:xt.venue,onValueChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{venue:e})),required:!0,children:[(0,ae.jsx)(yu,{id:"transactionVenue",className:xt.venue?"":"border-red-300",children:(0,ae.jsx)(vu,{placeholder:"Select venue"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"Hoe Win VIP",children:"Hoe Win VIP"}),(0,ae.jsx)(bu,{value:"House Casino",children:"House Casino"}),(0,ae.jsx)(bu,{value:"Competition",children:"Competition"})]})]}),!xt.venue&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Venue is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"transactionDateTime",children:"Date & Time"}),(0,ae.jsx)(ie,{id:"transactionDateTime",type:"datetime-local",value:xt.datetime,onChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{datetime:e.target.value}))})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>de(!1),children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(T&&pe){U(!0);try{if(!localStorage.getItem("casinoUser"))return void x("Please login first to add transactions");const e={buy_in:"buy-in",cash_out:"cash-out","buy-in":"buy-in","cash-out":"cash-out"}[xt.type]||xt.type,t=pe.customerId||pe.customer_id||pe.id;if(!t)return void x("Customer ID is required for transaction");const n={customer_id:t,transaction_type:e,amount:parseFloat(xt.amount),status:"completed",venue:xt.venue||null,updated_at:new Date(xt.datetime).toISOString()};console.log("\ud83d\udd04 Adding transaction:",n);(await Fe.apiClient.post("/trips/".concat(T.id,"/transactions"),n)).success?(await Qt(T),de(!1),bt({type:"buy-in",amount:"",venue:"",datetime:(new Date).toISOString().slice(0,16)}),me(null)):x("Failed to add transaction")}catch(e){console.error("Error adding transaction:",e),x("Failed to add transaction")}finally{U(!1)}}},disabled:B||!xt.amount||!xt.venue,children:B?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):"Add Transaction"})]})]})}),(0,ae.jsx)(Ra,{open:he,onOpenChange:fe,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Add Rolling"}),(0,ae.jsxs)(qa,{children:["Add rolling amount for ",(null===ge||void 0===ge?void 0:ge.customerName)||(null===ge||void 0===ge||null===(u=ge.customer)||void 0===u?void 0:u.name)]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"staffMember",children:["Staff Member ",(0,ae.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ae.jsxs)(gu,{value:wt.staff_id,onValueChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{staff_id:e})),children:[(0,ae.jsx)(yu,{id:"staffMember",className:wt.staff_id?"":"border-red-300",children:(0,ae.jsx)(vu,{placeholder:"Select staff member"})}),(0,ae.jsx)(xu,{children:null===T||void 0===T||null===(d=T.staff)||void 0===d?void 0:d.map(e=>{var t;return(0,ae.jsx)(bu,{value:e.staffId||e.staff_id,children:e.staffName||(null===(t=e.staff)||void 0===t?void 0:t.name)},e.staffId||e.staff_id)})})]}),!wt.staff_id&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Staff member is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"gameType",children:["Game Type ",(0,ae.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ae.jsxs)(gu,{value:wt.game_type,onValueChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{game_type:e})),children:[(0,ae.jsx)(yu,{id:"gameType",children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"baccarat",children:"Baccarat"}),(0,ae.jsx)(bu,{value:"blackjack",children:"Blackjack"}),(0,ae.jsx)(bu,{value:"roulette",children:"Roulette"}),(0,ae.jsx)(bu,{value:"poker",children:"Poker"}),(0,ae.jsx)(bu,{value:"slots",children:"Slots"}),(0,ae.jsx)(bu,{value:"other",children:"Other"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"rollingAmount",children:["Rolling Amount (HK$) ",(0,ae.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,ae.jsx)(ie,{id:"rollingAmount",type:"number",placeholder:"Enter rolling amount",value:wt.amount,onChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{amount:e.target.value})),className:wt.amount?"":"border-red-300",required:!0}),!wt.amount&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Rolling amount is required"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"rollingDateTime",children:"Date & Time"}),(0,ae.jsx)(ie,{id:"rollingDateTime",type:"datetime-local",value:wt.datetime,onChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{datetime:e.target.value})),required:!0})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ne,{htmlFor:"rollingVenue",className:"flex items-center",children:["Venue ",(0,ae.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,ae.jsxs)(gu,{value:wt.venue,onValueChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{venue:e})),required:!0,children:[(0,ae.jsx)(yu,{id:"rollingVenue",className:wt.venue?"":"border-red-300",children:(0,ae.jsx)(vu,{placeholder:"Select venue"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"Hoe Win VIP",children:"Hoe Win VIP"}),(0,ae.jsx)(bu,{value:"House Casino",children:"House Casino"}),(0,ae.jsx)(bu,{value:"Competition",children:"Competition"})]})]}),!wt.venue&&(0,ae.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"Venue is required"})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>fe(!1),disabled:B,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(T&&ge){U(!0);try{console.log("\ud83c\udfaf Rolling request data:",{customer_id:ge.customerId||ge.customer_id,staff_id:wt.staff_id,game_type:wt.game_type,rolling_amount:parseFloat(wt.amount),venue:wt.venue});(await Fe.apiClient.post("/trips/".concat(T.id,"/rolling-records"),{customer_id:ge.customerId||ge.customer_id,staff_id:wt.staff_id,game_type:wt.game_type,rolling_amount:parseFloat(wt.amount),venue:wt.venue,updated_at:new Date(wt.datetime).toISOString()})).success?(await Qt(T),fe(!1),jt({amount:"",staff_id:"",game_type:"baccarat",venue:"",datetime:(new Date).toISOString().slice(0,16)}),ve(null)):x("Failed to add rolling")}catch(e){console.error("Error adding rolling:",e),x("Failed to add rolling")}finally{U(!1)}}},disabled:B||!wt.amount||!wt.staff_id||!wt.venue,children:B?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Adding..."]}):"Add Rolling"})]})]})}),(0,ae.jsx)(Ra,{open:ot,onOpenChange:it,children:(0,ae.jsxs)(Ba,{className:"max-w-4xl max-h-[90vh]",children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsxs)(Wa,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ih,{className:"w-5 h-5"}),(0,ae.jsxs)("span",{children:["Customer Photos - ",(null===st||void 0===st?void 0:st.customerName)||(null===st||void 0===st||null===(h=st.customer)||void 0===h?void 0:h.name)]})]}),(0,ae.jsx)(qa,{children:"Transaction and Rolling photos uploaded by staff"})]}),(0,ae.jsx)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:0===ct.length?(0,ae.jsxs)("div",{className:"text-center py-8",children:[(0,ae.jsx)(rf,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),(0,ae.jsx)("p",{className:"text-gray-500",children:"No photos available for this customer"}),(0,ae.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Staff can upload transaction and rolling photos during operations"})]}):(0,ae.jsxs)("div",{className:"space-y-6",children:[ct.filter(e=>"transaction"===e.type||"transaction"===e.photo_type).length>0&&(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("h4",{className:"text-lg font-medium mb-3 flex items-center",children:[(0,ae.jsx)("span",{className:"mr-2",children:"\ud83d\udcb0"}),"Transaction Photos"]}),(0,ae.jsx)(ih,{photos:ct.filter(e=>"transaction"===e.type||"transaction"===e.photo_type).map(e=>{var t,n,r,a;return{id:e.id,photo:{data:e.file_data||(null===(t=e.photo)||void 0===t?void 0:t.data),filename:e.file_name||(null===(n=e.photo)||void 0===n?void 0:n.filename),size:e.file_size||(null===(r=e.photo)||void 0===r?void 0:r.size),type:e.file_type||(null===(a=e.photo)||void 0===a?void 0:a.type)},status:e.status,upload_date:e.uploaded_at||e.upload_date,transaction_date:e.transaction_date}}),type:"transaction",size:"large",maxPhotos:6,showDownload:!0,userRole:v.role,customerName:(null===st||void 0===st?void 0:st.customerName)||(null===st||void 0===st||null===(f=st.customer)||void 0===f?void 0:f.name)||(null===st||void 0===st?void 0:st.name)})]}),ct.filter(e=>"rolling"===e.type||"rolling"===e.photo_type).length>0&&(0,ae.jsxs)("div",{children:[(0,ae.jsxs)("h4",{className:"text-lg font-medium mb-3 flex items-center",children:[(0,ae.jsx)("span",{className:"mr-2",children:"\ud83c\udfb2"}),"Rolling Photos"]}),(0,ae.jsx)(ih,{photos:ct.filter(e=>"rolling"===e.type||"rolling"===e.photo_type).map(e=>{var t,n,r,a;return{id:e.id,photo:{data:e.file_data||(null===(t=e.photo)||void 0===t?void 0:t.data),filename:e.file_name||(null===(n=e.photo)||void 0===n?void 0:n.filename),size:e.file_size||(null===(r=e.photo)||void 0===r?void 0:r.size),type:e.file_type||(null===(a=e.photo)||void 0===a?void 0:a.type)},status:e.status,upload_date:e.uploaded_at||e.upload_date,transaction_date:e.transaction_date}}),type:"rolling",size:"large",maxPhotos:6,showDownload:!0,userRole:v.role,customerName:(null===st||void 0===st?void 0:st.customerName)||(null===st||void 0===st||null===(p=st.customer)||void 0===p?void 0:p.name)||(null===st||void 0===st?void 0:st.name)})]})]})}),(0,ae.jsx)("div",{className:"flex justify-end mt-4",children:(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>it(!1),children:"Close"})})]})}),(0,ae.jsx)(Ra,{open:ye,onOpenChange:xe,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Edit Transaction"}),(0,ae.jsx)(qa,{children:"Edit transaction details"})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editTransactionType",children:"Transaction Type"}),(0,ae.jsxs)(gu,{value:xt.type,onValueChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{type:e})),children:[(0,ae.jsx)(yu,{id:"editTransactionType",children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"buy-in",children:"Buy In"}),(0,ae.jsx)(bu,{value:"cash-out",children:"Cash Out"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editTransactionAmount",children:"Amount (HK$)"}),(0,ae.jsx)(ie,{id:"editTransactionAmount",type:"number",placeholder:"Enter amount",value:xt.amount,onChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{amount:e.target.value})),required:!0})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editTransactionVenue",children:"Venue"}),(0,ae.jsxs)(gu,{value:xt.venue,onValueChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{venue:e})),children:[(0,ae.jsx)(yu,{id:"editTransactionVenue",children:(0,ae.jsx)(vu,{placeholder:"Select venue"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"Hoe Win VIP",children:"Hoe Win VIP"}),(0,ae.jsx)(bu,{value:"House Casino",children:"House Casino"}),(0,ae.jsx)(bu,{value:"Competition",children:"Competition"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editTransactionDateTime",children:"Date & Time"}),(0,ae.jsx)(ie,{id:"editTransactionDateTime",type:"datetime-local",value:xt.datetime,onChange:e=>bt((0,o.A)((0,o.A)({},xt),{},{datetime:e.target.value}))})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>xe(!1),children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(je&&T){U(!0);try{const e={transaction_type:xt.type,amount:parseFloat(xt.amount),venue:xt.venue||null,updated_at:(new Date).toISOString()};if((await Fe.apiClient.updateTransaction(je.id,e)).success){await Qt(T);const e=je.customer_id||je.customerId;e&&await en(e,T.id),xe(!1),_e(null),bt({type:"buy-in",amount:"",venue:"",datetime:(new Date).toISOString().slice(0,16)})}else x("Failed to update transaction")}catch(e){console.error("Error updating transaction:",e),x("Failed to update transaction")}finally{U(!1)}}},disabled:B||!xt.amount,children:B?"Updating...":"Update Transaction"})]})]})}),(0,ae.jsx)(Ra,{open:be,onOpenChange:we,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Edit Rolling"}),(0,ae.jsx)(qa,{children:"Edit rolling record details"})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editRollingAmount",children:"Amount (HK$)"}),(0,ae.jsx)(ie,{id:"editRollingAmount",type:"number",placeholder:"Enter amount",value:wt.amount,onChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{amount:e.target.value})),required:!0})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editRollingStaff",children:"Staff Member"}),(0,ae.jsxs)(gu,{value:wt.staff_id,onValueChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{staff_id:e})),children:[(0,ae.jsx)(yu,{id:"editRollingStaff",children:(0,ae.jsx)(vu,{placeholder:"Select staff member"})}),(0,ae.jsx)(xu,{children:null===T||void 0===T||null===(m=T.staff)||void 0===m?void 0:m.map(e=>{var t;return(0,ae.jsx)(bu,{value:e.staffId||e.staff_id,children:e.staffName||(null===(t=e.staff)||void 0===t?void 0:t.name)},e.staffId||e.staff_id)})})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editRollingGameType",children:"Game Type"}),(0,ae.jsxs)(gu,{value:wt.game_type,onValueChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{game_type:e})),children:[(0,ae.jsx)(yu,{id:"editRollingGameType",children:(0,ae.jsx)(vu,{})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"baccarat",children:"Baccarat"}),(0,ae.jsx)(bu,{value:"blackjack",children:"Blackjack"}),(0,ae.jsx)(bu,{value:"roulette",children:"Roulette"}),(0,ae.jsx)(bu,{value:"poker",children:"Poker"}),(0,ae.jsx)(bu,{value:"other",children:"Other"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editRollingVenue",children:"Venue"}),(0,ae.jsxs)(gu,{value:wt.venue,onValueChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{venue:e})),children:[(0,ae.jsx)(yu,{id:"editRollingVenue",children:(0,ae.jsx)(vu,{placeholder:"Select venue"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"Hoe Win VIP",children:"Hoe Win VIP"}),(0,ae.jsx)(bu,{value:"House Casino",children:"House Casino"}),(0,ae.jsx)(bu,{value:"Competition",children:"Competition"})]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"editRollingDateTime",children:"Date & Time"}),(0,ae.jsx)(ie,{id:"editRollingDateTime",type:"datetime-local",value:wt.datetime,onChange:e=>jt((0,o.A)((0,o.A)({},wt),{},{datetime:e.target.value}))})]})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>we(!1),children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{if(ke&&T){U(!0);try{const e={rolling_amount:parseFloat(wt.amount),staff_id:wt.staff_id,game_type:wt.game_type,venue:wt.venue||null,updated_at:(new Date).toISOString()};if((await Fe.apiClient.updateRolling(ke.id,e)).success){await Qt(T);const e=ke.customer_id||ke.customerId;e&&await tn(e,T.id),we(!1),Se(null),jt({amount:"",staff_id:"",game_type:"baccarat",venue:"",datetime:(new Date).toISOString().slice(0,16)})}else x("Failed to update rolling")}catch(e){console.error("Error updating rolling:",e),x("Failed to update rolling")}finally{U(!1)}}},disabled:B||!wt.amount,children:B?"Updating...":"Update Rolling"})]})]})}),(0,ae.jsx)(Ra,{open:Be,onOpenChange:Ue,children:(0,ae.jsxs)(Ba,{children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsx)(Wa,{children:"Edit Profit Sharing Rate"}),(0,ae.jsx)(qa,{children:"Adjust the profit sharing rate for this agent-customer relationship"})]}),We&&(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsx)("div",{className:"bg-gray-50 p-3 rounded",children:(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("span",{className:"font-medium text-gray-700",children:"Agent:"}),(0,ae.jsx)("div",{children:We.agentName})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("span",{className:"font-medium text-gray-700",children:"Customer:"}),(0,ae.jsx)("div",{children:We.customerName})]})]})}),(0,ae.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[(0,ae.jsx)("span",{className:"font-medium text-blue-800",children:"Current Rate:"}),(0,ae.jsxs)("span",{className:"text-xl font-bold text-blue-600",children:[We.currentRate,"%"]})]}),(0,ae.jsxs)("div",{className:"space-y-2",children:[(0,ae.jsx)(Ne,{htmlFor:"newRate",children:"New Profit Sharing Rate (%)"}),(0,ae.jsx)(ie,{id:"newRate",type:"number",value:He,onChange:e=>Ve(parseFloat(e.target.value)||0),min:"0",max:"100",step:"0.1",className:"text-lg"})]}),(e=>{const t=null===T||void 0===T||null===(e=T.customers)||void 0===e?void 0:e.find(e=>e.customer_id===We.customerId||e.customerId===We.customerId),n=(null===t||void 0===t?void 0:t.net_result)||0,r=(o=He,(a=n)<=0?0:a*o/100);var a,o;return(0,ae.jsxs)("div",{className:"space-y-3",children:[(0,ae.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ae.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,ae.jsx)("div",{className:"text-sm text-gray-600",children:"Customer Net Result"}),(0,ae.jsx)("div",{className:"text-lg font-bold ".concat(n>=0?"text-green-600":"text-red-600"),children:Zh(n,St,T)})]}),(0,ae.jsxs)("div",{className:"p-3 bg-green-50 rounded",children:[(0,ae.jsx)("div",{className:"text-sm text-gray-600",children:"Projected Profit Share"}),(0,ae.jsx)("div",{className:"text-lg font-bold text-green-600",children:Qh(r,St,T)})]})]}),n<=0&&(0,ae.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:(0,ae.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,ae.jsx)("strong",{children:"Note:"})," Customer has negative or zero net result. Profit sharing only applies to positive customer profits."]})})]})})(),(0,ae.jsx)("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded",children:(0,ae.jsxs)("div",{className:"text-sm text-indigo-800",children:[(0,ae.jsx)("strong",{children:"Rate Change:"})," ",We.currentRate,"% \u2192 ",He,"%",(0,ae.jsxs)("span",{className:"ml-2",children:["(",He>We.currentRate?"+":"",(He-We.currentRate).toFixed(1),"%)"]})]})})]}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,ae.jsx)(Vt,{variant:"outline",onClick:()=>Ue(!1),disabled:B,children:"Cancel"}),(0,ae.jsx)(Vt,{onClick:async()=>{We&&(await(async(e,t,n)=>{try{if(!T)return;U(!0),(await Fe.apiClient.put("/trips/".concat(T.id,"/agents/").concat(e,"/commission"),{customer_id:t,profit_sharing_rate:n})).success?(await Yt(T.id),console.log("Commission rate updated successfully")):x("Failed to update commission rate")}catch(r){console.error("Error updating commission rate:",r),x("Failed to update commission rate")}finally{U(!1)}})(We.agentId,We.customerId,He),Ue(!1),qe(null),Ve(0))},disabled:B||!We,children:B?"Updating...":"Update Rate"})]})]})})]})},of=$e("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),sf=$e("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const lf=rh(function(e){let{user:n,showError:r,clearError:a}=e;const[i,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(null),[h,f]=(0,t.useState)(null),[p,m]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!1),[y,x]=(0,t.useState)(!1),[b,w]=(0,t.useState)({username:"",password:"",confirmPassword:""}),j=(0,t.useCallback)(async()=>{try{m(!0),a(),console.log("\ud83d\udd04 Loading admin accounts from Supabase...");const e=await Le.db.get("users",[]),t=e.filter(e=>"admin"===e.role).map(e=>({id:e.id,username:e.username,password:e.password||"",role:"admin",isActive:!1!==e.isActive,createdAt:e.createdAt||(new Date).toISOString().split("T")[0],lastLogin:e.lastLogin,createdBy:e.createdBy}));s(t),console.log("\u2705 Loaded ".concat(t.length," admin accounts from Supabase"))}catch(e){console.error("\u274c Error loading admin data:",e),r("Failed to load admin data: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{m(!1)}},[a,r]);(0,t.useEffect)(()=>{j()},[j]);const _=async e=>{try{v(!0),a(),console.log("\ud83d\udcbe Saving admin accounts to Supabase...");const t=(await Le.db.get("users",[])).filter(e=>"admin"!==e.role),n=e.map(e=>({id:e.id,username:e.username,password:e.password,role:e.role,isActive:e.isActive,createdAt:e.createdAt,lastLogin:e.lastLogin,createdBy:e.createdBy})),r=[...t,...n];await Le.db.save("users",r),s(e),console.log("\u2705 Successfully saved admin accounts to Supabase")}catch(t){throw console.error("\u274c Error saving admin accounts:",t),r("Failed to save admin data: ".concat(t instanceof Error?t.message:"Unknown error occurred")),t}finally{v(!1)}},N=e=>{d(e),w({username:e.username,password:e.password,confirmPassword:e.password}),c(!0)},k=async e=>{try{const t=i.find(t=>t.id===e);if((null===t||void 0===t?void 0:t.username)===n.username)return void r("Cannot deactivate your own admin account!");const a=i.filter(t=>t.isActive&&t.id!==e);if(0===a.length)return void r("Cannot deactivate the last active admin account!");console.log("\ud83d\udd04 Toggling admin status: ".concat(null===t||void 0===t?void 0:t.username));const s=i.map(t=>t.id===e?(0,o.A)((0,o.A)({},t),{},{isActive:!t.isActive}):t);await _(s)}catch(t){}},S=()=>{w({username:"",password:"",confirmPassword:""}),d(null),c(!1),x(!1)};return p?(0,ae.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:"Loading admin accounts from Supabase..."})]})}):(0,ae.jsxs)("div",{className:"space-y-6",children:[(0,ae.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,ae.jsxs)("div",{className:"flex items-center",children:[(0,ae.jsx)(th,{className:"w-4 h-4 text-green-600 mr-2"}),(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsx)("p",{className:"text-sm font-medium text-green-800",children:"\u2705 Admin Login CRUD - Supabase Connected"}),(0,ae.jsx)("p",{className:"text-xs text-green-600",children:"All admin login changes are immediately saved to Supabase database. These credentials control system access."})]}),g&&(0,ae.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-1 animate-pulse"}),(0,ae.jsx)("span",{className:"text-xs",children:"Saving..."})]})]})}),(0,ae.jsxs)(Qd,{className:"border-blue-200 bg-blue-50",children:[(0,ae.jsx)(Ch,{className:"w-4 h-4 text-blue-600"}),(0,ae.jsxs)(Zd,{className:"text-blue-800",children:[(0,ae.jsx)("strong",{children:"Admin Login Management:"})," This section controls the login credentials for admin access. The system starts with ",(0,ae.jsx)("code",{className:"bg-blue-100 px-1 rounded text-blue-900",children:"admin / admin123"})," as the default credentials. You can Create, Read, Update, and Delete admin accounts here. All changes are stored in Supabase.",(0,ae.jsxs)(Vt,{onClick:j,size:"sm",variant:"outline",className:"ml-3 text-blue-800 border-blue-300 hover:bg-blue-100",children:[(0,ae.jsx)(eh,{className:"w-3 h-3 mr-1"}),"Refresh"]})]})]}),(0,ae.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,ae.jsxs)("div",{className:"flex items-start",children:[(0,ae.jsx)(of,{className:"w-5 h-5 text-amber-600 mr-2 flex-shrink-0 mt-0.5"}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm font-medium text-amber-800",children:"Security Notice"}),(0,ae.jsx)("p",{className:"text-xs text-amber-600 mt-1",children:"Admin accounts have full system access including customer data, financial records, and system settings. Ensure passwords are strong and only share credentials with authorized administrators."})]})]})}),(0,ae.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:"Admin Login Credentials (CRUD)"}),(0,ae.jsx)("p",{className:"text-gray-600",children:"Create, Read, Update, and Delete admin login credentials stored in Supabase"}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Default admin credentials: admin / admin123 (can be modified)"})]}),(0,ae.jsxs)(Ra,{open:l,onOpenChange:c,children:[(0,ae.jsx)(La,{asChild:!0,children:(0,ae.jsxs)(Vt,{onClick:()=>c(!0),disabled:g,children:[(0,ae.jsx)(uh,{className:"w-4 h-4 mr-2"}),"Create Admin"]})}),(0,ae.jsxs)(Ba,{className:"max-w-lg",children:[(0,ae.jsxs)(Ua,{children:[(0,ae.jsxs)(Wa,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ch,{className:"w-5 h-5"}),(0,ae.jsx)("span",{children:u?"Update Admin Credentials":"Create New Admin Account"})]}),(0,ae.jsx)(qa,{children:u?"Update administrator login credentials in Supabase":"Create a new administrator account with login credentials"})]}),(0,ae.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(!b.username.trim())return void r("Username is required!");if(!b.password.trim())return void r("Password is required!");if(b.password!==b.confirmPassword)return void r("Passwords do not match!");if(i.find(e=>e.username===b.username&&e.id!==(null===u||void 0===u?void 0:u.id)))return void r("Username already exists! Please choose a different username.");let e;if(u)e=i.map(e=>e.id===u.id?(0,o.A)((0,o.A)({},e),{},{username:b.username,password:b.password}):e),console.log("\ud83d\udd04 Updating admin account: ".concat(u.username," -> ").concat(b.username));else{const t={id:"admin_".concat(Date.now()),username:b.username,password:b.password,role:"admin",isActive:!0,createdAt:(new Date).toISOString().split("T")[0],createdBy:n.username};e=[...i,t],console.log("\u2795 Creating new admin account: ".concat(b.username))}await _(e),S()}catch(t){}},className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"username",children:"Username *"}),(0,ae.jsx)(ie,{id:"username",value:b.username,onChange:e=>w((0,o.A)((0,o.A)({},b),{},{username:e.target.value})),placeholder:"Enter admin username",required:!0,disabled:g}),(0,ae.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This username will be used to login to the admin portal"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"password",children:"Password *"}),(0,ae.jsxs)("div",{className:"relative",children:[(0,ae.jsx)(ie,{id:"password",type:y?"text":"password",value:b.password,onChange:e=>w((0,o.A)((0,o.A)({},b),{},{password:e.target.value})),placeholder:"Enter secure password",required:!0,disabled:g}),(0,ae.jsx)(Vt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!y),disabled:g,children:y?(0,ae.jsx)(Sh,{className:"w-4 h-4"}):(0,ae.jsx)(Vd,{className:"w-4 h-4"})})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let t="";for(let n=0;n<12;n++)t+=e.charAt(Math.floor(70*Math.random()));w((0,o.A)((0,o.A)({},b),{},{password:t,confirmPassword:t}))},className:"text-xs",disabled:g,children:"Generate Password"}),(0,ae.jsx)("p",{className:"text-xs text-gray-500",children:"Minimum 8 characters recommended"})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{htmlFor:"confirmPassword",children:"Confirm Password *"}),(0,ae.jsx)(ie,{id:"confirmPassword",type:y?"text":"password",value:b.confirmPassword,onChange:e=>w((0,o.A)((0,o.A)({},b),{},{confirmPassword:e.target.value})),placeholder:"Confirm password",required:!0,disabled:g})]}),(0,ae.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,ae.jsxs)("p",{className:"text-xs text-red-700",children:[(0,ae.jsx)("strong",{children:"Security Warning:"})," Admin credentials provide full system access. Changes are immediately saved to Supabase and will affect login access."]})}),(0,ae.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,ae.jsx)(Vt,{type:"button",variant:"outline",onClick:S,disabled:g,children:"Cancel"}),(0,ae.jsx)(Vt,{type:"submit",disabled:g,children:g?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(dh,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving to Supabase..."]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ch,{className:"w-4 h-4 mr-2"}),u?"Update":"Create"," Admin"]})})]})]})]})]})]}),(0,ae.jsx)("div",{className:"grid gap-6",children:0===i.length?(0,ae.jsx)(Te,{children:(0,ae.jsxs)(Re,{className:"text-center py-12",children:[(0,ae.jsx)(Ch,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,ae.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Admin Accounts Found"}),(0,ae.jsx)("p",{className:"text-gray-500 mb-4",children:"The default admin account (admin/admin123) should be present. Try refreshing the data."}),(0,ae.jsxs)(Vt,{onClick:j,disabled:p,children:[(0,ae.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})}):i.map(e=>{const t=h===e.id,a=e.username===n.username,o="admin"===e.username&&"admin123"===e.password;return(0,ae.jsx)(Bd,{open:t,onOpenChange:()=>{return t=e.id,void f(h===t?null:t);var t},children:(0,ae.jsxs)(Te,{className:"overflow-hidden",children:[(0,ae.jsx)(Ud,{asChild:!0,children:(0,ae.jsx)(De,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:(0,ae.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ae.jsxs)("div",{className:"flex-1",children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)("span",{children:e.username}),(0,ae.jsx)(ku,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"}),(0,ae.jsxs)(ku,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:[(0,ae.jsx)(of,{className:"w-3 h-3 mr-1"}),"Admin"]}),a&&(0,ae.jsxs)(ku,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[(0,ae.jsx)(Eh,{className:"w-3 h-3 mr-1"}),"You"]}),o&&(0,ae.jsxs)(ku,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[(0,ae.jsx)(sf,{className:"w-3 h-3 mr-1"}),"Default"]})]}),(0,ae.jsxs)(Me,{children:["Created ",e.createdAt,e.createdBy&&" \u2022 Created by ".concat(e.createdBy),o&&" \u2022 Default admin credentials (editable)"]})]}),(0,ae.jsx)("div",{className:"flex items-center space-x-2",children:t?(0,ae.jsx)(uu,{className:"w-5 h-5 text-gray-400"}):(0,ae.jsx)(lu,{className:"w-5 h-5 text-gray-400"})})]})})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>N(e),disabled:g,children:[(0,ae.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Update Credentials"]}),!a&&e.isActive?(0,ae.jsxs)(Lo,{children:[(0,ae.jsx)(Fo,{asChild:!0,children:(0,ae.jsx)(Vt,{variant:"outline",size:"sm",disabled:g,children:"Deactivate"})}),(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Deactivate Admin Account"}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to deactivate the admin account for "',e.username,'"? Deactivated administrators will not be able to login to the system.']})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:()=>k(e.id),className:"bg-yellow-600 text-white hover:bg-yellow-700",disabled:g,children:g?"Saving...":"Deactivate Account"})]})]})]}):a||e.isActive?null:(0,ae.jsx)(Vt,{variant:"default",size:"sm",onClick:()=>k(e.id),disabled:g,children:g?"Saving...":"Activate"}),!a&&i.length>1&&(0,ae.jsxs)(Lo,{children:[(0,ae.jsx)(Fo,{asChild:!0,children:(0,ae.jsxs)(Vt,{variant:"destructive",size:"sm",disabled:g,children:[(0,ae.jsx)($d,{className:"w-4 h-4 mr-2"}),"Delete"]})}),(0,ae.jsxs)(Uo,{children:[(0,ae.jsxs)(Wo,{children:[(0,ae.jsx)(Ho,{children:"Delete Admin Account"}),(0,ae.jsxs)(Vo,{children:['Are you sure you want to permanently delete the admin account for "',e.username,'"? This action cannot be undone and will immediately revoke all system access.']})]}),(0,ae.jsxs)(qo,{children:[(0,ae.jsx)($o,{children:"Cancel"}),(0,ae.jsx)(Ko,{onClick:()=>(async e=>{try{if(i.length<=1)return void r("Cannot delete the last admin account!");const t=i.find(t=>t.id===e);if((null===t||void 0===t?void 0:t.username)===n.username)return void r("Cannot delete your own admin account!");console.log("\ud83d\uddd1\ufe0f Deleting admin account: ".concat(null===t||void 0===t?void 0:t.username));const a=i.filter(t=>t.id!==e);await _(a)}catch(t){}})(e.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:g,children:g?"Deleting...":"Delete Account"})]})]})]})]}),a&&(0,ae.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:(0,ae.jsxs)("p",{className:"text-xs text-blue-700",children:[(0,ae.jsx)("strong",{children:"Current Account:"})," This is your active admin account. You cannot deactivate or delete your own account for security reasons, but you can update the credentials."]})}),o&&(0,ae.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg mb-4",children:(0,ae.jsxs)("p",{className:"text-xs text-green-700",children:[(0,ae.jsx)("strong",{children:"Default Admin:"}),' This is the system default admin account with preset credentials. You can update both the username and password using the "Update Credentials" button above. Changes are saved to Supabase immediately.']})}),(0,ae.jsx)(Wd,{className:"mt-6",children:(0,ae.jsxs)(xd,{defaultValue:"info",className:"w-full",children:[(0,ae.jsxs)(bd,{className:"grid w-full grid-cols-2",children:[(0,ae.jsxs)(wd,{value:"info",className:"flex items-center space-x-2",children:[(0,ae.jsx)(Ch,{className:"w-4 h-4"}),(0,ae.jsx)("span",{children:"Account Information"})]}),(0,ae.jsxs)(wd,{value:"security",className:"flex items-center space-x-2",children:[(0,ae.jsx)(kh,{className:"w-4 h-4"}),(0,ae.jsx)("span",{children:"Security & CRUD"})]})]}),(0,ae.jsx)(jd,{value:"info",className:"space-y-4 mt-6",children:(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Username"}),(0,ae.jsx)("p",{className:"text-lg font-mono",children:e.username})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,ae.jsxs)(ku,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:[(0,ae.jsx)(of,{className:"w-3 h-3 mr-1"}),"Administrator"]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Account Status"}),(0,ae.jsx)(ku,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]})]}),(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Created Date"}),(0,ae.jsx)("p",{children:e.createdAt})]}),e.createdBy&&(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Created By"}),(0,ae.jsx)("p",{children:e.createdBy})]}),e.lastLogin&&(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Last Login"}),(0,ae.jsx)("p",{children:new Date(e.lastLogin).toLocaleString()})]})]})]})}),(0,ae.jsx)(jd,{value:"security",className:"space-y-4 mt-6",children:(0,ae.jsxs)("div",{className:"space-y-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)(Ne,{className:"text-sm font-medium text-gray-500",children:"Login Credentials (CRUD)"}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsxs)("p",{className:"text-sm font-mono bg-gray-100 p-2 rounded flex-1",children:[e.username," / \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"]}),(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:()=>N(e),disabled:g,children:[(0,ae.jsx)(mh,{className:"w-4 h-4 mr-2"}),"Update"]})]}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,ae.jsx)(Ye,{className:"w-3 h-3 inline mr-1 text-green-600"}),"Full CRUD operations available - Create, Read, Update, Delete admin credentials stored in Supabase"]})]}),(0,ae.jsx)("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:(0,ae.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,ae.jsx)(Xe,{className:"w-4 h-4 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Admin Permissions"}),(0,ae.jsxs)("ul",{className:"text-xs text-gray-600 mt-2 space-y-1",children:[(0,ae.jsx)("li",{children:"\u2022 Full CRUD access to admin login credentials"}),(0,ae.jsx)("li",{children:"\u2022 Complete system administration access"}),(0,ae.jsx)("li",{children:"\u2022 Customer and agent management"}),(0,ae.jsx)("li",{children:"\u2022 Staff administration and monitoring"}),(0,ae.jsx)("li",{children:"\u2022 Financial reports and analytics"}),(0,ae.jsx)("li",{children:"\u2022 Database management and backups"}),(0,ae.jsx)("li",{children:"\u2022 System configuration and settings"})]})]})]})}),(0,ae.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,ae.jsxs)("p",{className:"text-xs text-green-700",children:[(0,ae.jsx)("strong",{children:"Supabase Integration:"})," All admin credentials are stored securely in Supabase with real-time synchronization. Changes to login credentials take effect immediately and are reflected across all system components."]})})]})})]})})]})]})},e.id)})})]})}),cf=$e("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);function uf(e){let{user:n}=e;const[r,a]=(0,t.useState)({});(0,t.useEffect)(()=>{o()},[]);const o=async()=>{try{const t=["users","customers","agents","staff","trips"],n={};for(const r of t)try{const e=await Le.db.get(r,[]);n[r]=e.length}catch(e){console.warn("Could not load ".concat(r,":"),e),n[r]=0}a(n)}catch(e){console.error("Error loading data overview:",e)}};return(0,ae.jsxs)("div",{className:"space-y-6",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:"Data Management"}),(0,ae.jsx)("p",{className:"text-gray-600",children:"System administration and database overview"})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(cf,{className:"w-5 h-5"}),(0,ae.jsx)("span",{children:"Current Data Overview"})]}),(0,ae.jsx)(Me,{children:"Overview of your stored data in Supabase"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(r).map(e=>{let[t,n]=e;return(0,ae.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[(0,ae.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n}),(0,ae.jsx)("div",{className:"text-xs text-gray-600 capitalize",children:t})]},t)})}),(0,ae.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,ae.jsxs)("p",{className:"text-sm text-gray-600",children:["Total records: ",Object.values(r).reduce((e,t)=>e+t,0)]}),(0,ae.jsxs)(Vt,{onClick:o,size:"sm",variant:"outline",children:[(0,ae.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(th,{className:"w-5 h-5"}),(0,ae.jsx)("span",{children:"Database Status"})]}),(0,ae.jsx)(Me,{children:"System operates with Supabase cloud database"})]}),(0,ae.jsx)(Re,{children:(0,ae.jsx)("div",{className:"flex items-center space-x-4",children:(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)(th,{className:"w-4 h-4 text-blue-500"}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"text-sm text-gray-600",children:"Database Mode"}),(0,ae.jsx)("p",{className:"font-medium text-blue-600",children:"Supabase Cloud"})]})]})})})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(of,{className:"w-5 h-5"}),(0,ae.jsx)("span",{children:"Admin Accounts"})]}),(0,ae.jsx)(Me,{children:"Manage administrator accounts and permissions"})]}),(0,ae.jsx)(Re,{children:(0,ae.jsx)(lf,{user:n,showError:()=>{},clearError:()=>{}})})]})]})}var df=n(492),hf=n.n(df),ff=n(6801),pf=n.n(ff),mf=n(1099),gf=n.n(mf),vf=n(7946),yf=n.n(vf),xf=n(9853),bf=n.n(xf),wf=n(821),jf=n.n(wf),_f=function(e){return 0===e?0:e>0?1:-1},Nf=function(e){return pf()(e)&&e.indexOf("%")===e.length-1},kf=function(e){return bf()(e)&&!gf()(e)},Sf=function(e){return kf(e)||pf()(e)},Af=0,Of=function(e){var t=++Af;return"".concat(e||"").concat(t)},Cf=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!kf(e)&&!pf()(e))return r;if(Nf(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return gf()(n)&&(n=r),a&&n>t&&(n=t),n},Pf=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Ef=function(e,t){return kf(e)&&kf(t)?function(n){return e+n*(t-e)}:function(){return t}};function Tf(e,t,n){return e&&e.length?e.find(function(e){return e&&("function"===typeof t?t(e):yf()(e,t))===n}):null}var Df=function(e,t){return kf(e)&&kf(t)?e-t:pf()(e)&&pf()(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))},If=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a]},Mf=n(3008),Rf=n.n(Mf),Lf=n(4567),Ff=n.n(Lf),zf=n(6429);function Bf(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Uf(e){return Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(e)}var Wf=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qf=["points","pathLength"],Hf={svg:["viewBox","children"],polygon:qf,polyline:qf},Vf=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Kf=function(e,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,t.isValidElement)(e)&&(r=e.props),!Ff()(r))return null;var a={};return Object.keys(r).forEach(function(e){Vf.includes(e)&&(a[e]=n||function(t){return r[e](r,t)})}),a},$f=function(e,t,n){if(!Ff()(e)||"object"!==Uf(e))return null;var r=null;return Object.keys(e).forEach(function(a){var o=e[a];Vf.includes(a)&&"function"===typeof o&&(r||(r={}),r[a]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))}),r},Gf=["children"],Yf=["children"];function Jf(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Xf(e){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(e)}var Qf={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Zf=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},ep=null,tp=null,np=function e(n){if(n===ep&&Array.isArray(tp))return tp;var r=[];return t.Children.forEach(n,function(t){jf()(t)||((0,zf.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))}),tp=r,ep=n,r};function rp(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(function(e){return Zf(e)}):[Zf(t)],np(e).forEach(function(e){var t=yf()(e,"type.displayName")||yf()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}function ap(e,t){var n=rp(e,t);return n&&n[0]}var op=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!kf(n)||n<=0||!kf(r)||r<=0)},ip=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sp=function(e){return e&&e.type&&pf()(e.type)&&ip.indexOf(e.type)>=0},lp=function(e){return e&&"object"===Xf(e)&&"clipDot"in e},cp=function(e,n,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var a=e;if((0,t.isValidElement)(e)&&(a=e.props),!Ff()(a))return null;var o={};return Object.keys(a).forEach(function(e){var t;(function(e,t,n,r){var a,o=null!==(a=null===Hf||void 0===Hf?void 0:Hf[r])&&void 0!==a?a:[];return t.startsWith("data-")||!Rf()(e)&&(r&&o.includes(t)||Wf.includes(t))||n&&Vf.includes(t)})(null===(t=a)||void 0===t?void 0:t[e],e,n,r)&&(o[e]=a[e])}),o},up=function e(n,r){if(n===r)return!0;var a=t.Children.count(n);if(a!==t.Children.count(r))return!1;if(0===a)return!0;if(1===a)return dp(Array.isArray(n)?n[0]:n,Array.isArray(r)?r[0]:r);for(var o=0;o<a;o++){var i=n[o],s=r[o];if(Array.isArray(i)||Array.isArray(s)){if(!e(i,s))return!1}else if(!dp(i,s))return!1}return!0},dp=function(e,t){if(jf()(e)&&jf()(t))return!0;if(!jf()(e)&&!jf()(t)){var n=e.props||{},r=n.children,a=Jf(n,Gf),o=t.props||{},i=o.children,s=Jf(o,Yf);return r&&i?Bf(a,s)&&up(r,i):!r&&!i&&Bf(a,s)}return!1},hp=function(e,t){var n=[],r={};return np(e).forEach(function(e,a){if(sp(e))n.push(e);else if(e){var o=Zf(e.type),i=t[o]||{},s=i.handler,l=i.once;if(s&&(!l||!r[o])){var c=s(e,o,a);n.push(c),r[o]=!0}}}),n};function fp(e){return fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(e)}function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach(function(t){gp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gp(e,t,n){return t=function(e){var t=function(e,t){if("object"!=fp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xp=(0,t.forwardRef)(function(e,n){var r=e.aspect,a=e.initialDimension,o=void 0===a?{width:-1,height:-1}:a,i=e.width,s=void 0===i?"100%":i,l=e.height,u=void 0===l?"100%":l,d=e.minWidth,h=void 0===d?0:d,f=e.minHeight,p=e.maxHeight,m=e.children,g=e.debounce,v=void 0===g?0:g,y=e.id,x=e.className,b=e.onResize,w=e.style,j=void 0===w?{}:w,_=(0,t.useRef)(null),N=(0,t.useRef)();N.current=b,(0,t.useImperativeHandle)(n,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var k=vp((0,t.useState)({containerWidth:o.width,containerHeight:o.height}),2),S=k[0],A=k[1],O=(0,t.useCallback)(function(e,t){A(function(n){var r=Math.round(e),a=Math.round(t);return n.containerWidth===r&&n.containerHeight===a?n:{containerWidth:r,containerHeight:a}})},[]);(0,t.useEffect)(function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,a=n.height;O(r,a),null===(t=N.current)||void 0===t||t.call(N,r,a)};v>0&&(e=hf()(e,v,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=_.current.getBoundingClientRect(),r=n.width,a=n.height;return O(r,a),t.observe(_.current),function(){t.disconnect()}},[O,v]);var C=(0,t.useMemo)(function(){var e=S.containerWidth,n=S.containerHeight;if(e<0||n<0)return null;If(Nf(s)||Nf(u),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,u),If(!r||r>0,"The aspect(%s) must be greater than zero.",r);var a=Nf(s)?e:s,o=Nf(u)?n:u;r&&r>0&&(a?o=a/r:o&&(a=o*r),p&&o>p&&(o=p)),If(a>0||o>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",a,o,s,u,h,f,r);var i=!Array.isArray(m)&&Zf(m.type).endsWith("Chart");return t.Children.map(m,function(e){return t.isValidElement(e)?(0,t.cloneElement)(e,mp({width:a,height:o},i?{style:mp({height:"100%",width:"100%",maxHeight:o,maxWidth:a},e.props.style)}:{})):e})},[r,m,u,p,f,h,S,s]);return t.createElement("div",{id:y?"".concat(y):void 0,className:c("recharts-responsive-container",x),style:mp(mp({},j),{},{width:s,height:u,minWidth:h,minHeight:f,maxHeight:p}),ref:_},C)}),bp=n(9939),wp=n.n(bp),jp=n(1261),_p=n.n(jp),Np="Invariant failed";function kp(e,t){if(!e)throw new Error(Np)}var Sp=["children","width","height","viewBox","className","style","title","desc"];function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ap.apply(this,arguments)}function Op(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Cp(e){var n=e.children,r=e.width,a=e.height,o=e.viewBox,i=e.className,s=e.style,l=e.title,u=e.desc,d=Op(e,Sp),h=o||{width:r,height:a,x:0,y:0},f=c("recharts-surface",i);return t.createElement("svg",Ap({},cp(d,!0,"svg"),{className:f,width:r,height:a,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),t.createElement("title",null,l),t.createElement("desc",null,u),n)}var Pp=["children","className"];function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ep.apply(this,arguments)}function Tp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Dp=t.forwardRef(function(e,n){var r=e.children,a=e.className,o=Tp(e,Pp),i=c("recharts-layer",a);return t.createElement("g",Ep({className:i},cp(o,!0),{ref:n}),r)});function Ip(e){return Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(e)}function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mp.apply(this,arguments)}function Rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fp(Object(n),!0).forEach(function(t){Bp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bp(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ip(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ip(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Up(e){return Array.isArray(e)&&Sf(e[0])&&Sf(e[1])?e.join(" ~ "):e}var Wp=function(e){var n=e.separator,r=void 0===n?" : ":n,a=e.contentStyle,o=void 0===a?{}:a,i=e.itemStyle,s=void 0===i?{}:i,l=e.labelStyle,u=void 0===l?{}:l,d=e.payload,h=e.formatter,f=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,g=e.label,v=e.labelFormatter,y=e.accessibilityLayer,x=void 0!==y&&y,b=zp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=zp({margin:0},u),j=!jf()(g),_=j?g:"",N=c("recharts-default-tooltip",p),k=c("recharts-tooltip-label",m);j&&v&&void 0!==d&&null!==d&&(_=v(g,d));var S=x?{role:"status","aria-live":"assertive"}:{};return t.createElement("div",Mp({className:N,style:b},S),t.createElement("p",{className:k,style:w},t.isValidElement(_)?_:"".concat(_)),function(){if(d&&d.length){var e=(f?_p()(d,f):d).map(function(e,n){if("none"===e.type)return null;var a=zp({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s),o=e.formatter||h||Up,i=e.value,l=e.name,c=i,u=l;if(o&&null!=c&&null!=u){var f=o(i,l,e,n,d);if(Array.isArray(f)){var p=Rp(f,2);c=p[0],u=p[1]}else c=f}return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:a},Sf(u)?t.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Sf(u)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},c),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function qp(e){return qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(e)}function Hp(e,t,n){return t=function(e){var t=function(e,t){if("object"!=qp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vp="recharts-tooltip-wrapper",Kp={visibility:"hidden"};function $p(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return c(Vp,Hp(Hp(Hp(Hp({},"".concat(Vp,"-right"),kf(n)&&t&&kf(t.x)&&n>=t.x),"".concat(Vp,"-left"),kf(n)&&t&&kf(t.x)&&n<t.x),"".concat(Vp,"-bottom"),kf(r)&&t&&kf(t.y)&&r>=t.y),"".concat(Vp,"-top"),kf(r)&&t&&kf(t.y)&&r<t.y))}function Gp(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,o=e.position,i=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(o&&kf(o[r]))return o[r];var u=n[r]-s-a,d=n[r]+a;return t[r]?i[r]?u:d:i[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+s>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function Yp(e){return Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(e)}function Jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(n),!0).forEach(function(t){rm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,am(r.key),r)}}function Zp(e,t,n){return t=tm(t),function(e,t){if(t&&("object"===Yp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,em()?Reflect.construct(t,n||[],tm(e).constructor):t.apply(e,n))}function em(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(em=function(){return!!e})()}function tm(e){return tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tm(e)}function nm(e,t){return nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nm(e,t)}function rm(e,t,n){return(t=am(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function am(e){var t=function(e,t){if("object"!=Yp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yp(t)?t:t+""}var om=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return rm(e=Zp(this,n,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),rm(e,"handleKeyDown",function(t){var n,r,a,o;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(a=null===(o=e.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==a?a:0}})}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nm(e,t)}(n,e),r=n,a=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,n=this.props,r=n.active,a=n.allowEscapeViewBox,o=n.animationDuration,i=n.animationEasing,s=n.children,l=n.coordinate,c=n.hasPayload,u=n.isAnimationActive,d=n.offset,h=n.position,f=n.reverseDirection,p=n.useTranslate3d,m=n.viewBox,g=n.wrapperStyle,v=function(e){var t,n,r=e.allowEscapeViewBox,a=e.coordinate,o=e.offsetTopLeft,i=e.position,s=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&a?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=Gp({allowEscapeViewBox:r,coordinate:a,key:"x",offsetTopLeft:o,position:i,reverseDirection:s,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=Gp({allowEscapeViewBox:r,coordinate:a,key:"y",offsetTopLeft:o,position:i,reverseDirection:s,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):Kp,cssClasses:$p({translateX:t,translateY:n,coordinate:a})}}({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),y=v.cssClasses,x=v.cssProperties,b=Xp(Xp({transition:u&&r?"transform ".concat(o,"ms ").concat(i):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return t.createElement("div",{tabIndex:-1,className:y,style:b,ref:function(t){e.wrapperNode=t}},s)}}],a&&Qp(r.prototype,a),o&&Qp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent),im={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return im[e]},set:function(e,t){if("string"===typeof e)im[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(t){im[t]=e[t]})}}},sm=n(5420),lm=n.n(sm);function cm(e,t,n){return!0===t?lm()(e,n):Rf()(t)?lm()(e,t):e}function um(e){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(e)}function dm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dm(Object(n),!0).forEach(function(t){ym(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xm(r.key),r)}}function pm(e,t,n){return t=gm(t),function(e,t){if(t&&("object"===um(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mm()?Reflect.construct(t,n||[],gm(e).constructor):t.apply(e,n))}function mm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mm=function(){return!!e})()}function gm(e){return gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gm(e)}function vm(e,t){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vm(e,t)}function ym(e,t,n){return(t=xm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xm(e){var t=function(e,t){if("object"!=um(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=um(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==um(t)?t:t+""}function bm(e){return e.dataKey}var wm=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),pm(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vm(e,t)}(n,e),r=n,a=[{key:"render",value:function(){var e=this,n=this.props,r=n.active,a=n.allowEscapeViewBox,o=n.animationDuration,i=n.animationEasing,s=n.content,l=n.coordinate,c=n.filterNull,u=n.isAnimationActive,d=n.offset,h=n.payload,f=n.payloadUniqBy,p=n.position,m=n.reverseDirection,g=n.useTranslate3d,v=n.viewBox,y=n.wrapperStyle,x=null!==h&&void 0!==h?h:[];c&&x.length&&(x=cm(h.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),f,bm));var b=x.length>0;return t.createElement(om,{allowEscapeViewBox:a,animationDuration:o,animationEasing:i,isAnimationActive:u,active:r,coordinate:l,hasPayload:b,offset:d,position:p,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:y},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):"function"===typeof e?t.createElement(e,n):t.createElement(Wp,n)}(s,hm(hm({},this.props),{},{payload:x})))}}],a&&fm(r.prototype,a),o&&fm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);ym(wm,"displayName","Tooltip"),ym(wm,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!im.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var jm=n(3414),_m=n.n(jm);Math.abs,Math.atan2;const Nm=Math.cos,km=(Math.max,Math.min,Math.sin),Sm=Math.sqrt,Am=Math.PI,Om=2*Am;const Cm={draw(e,t){const n=Sm(t/Am);e.moveTo(n,0),e.arc(0,0,n,0,Om)}},Pm={draw(e,t){const n=Sm(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Em=Sm(1/3),Tm=2*Em,Dm={draw(e,t){const n=Sm(t/Tm),r=n*Em;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Im={draw(e,t){const n=Sm(t),r=-n/2;e.rect(r,r,n,n)}},Mm=km(Am/10)/km(7*Am/10),Rm=km(Om/10)*Mm,Lm=-Nm(Om/10)*Mm,Fm={draw(e,t){const n=Sm(.8908130915292852*t),r=Rm*n,a=Lm*n;e.moveTo(0,-n),e.lineTo(r,a);for(let o=1;o<5;++o){const t=Om*o/5,i=Nm(t),s=km(t);e.lineTo(s*n,-i*n),e.lineTo(i*r-s*a,s*r+i*a)}e.closePath()}},zm=Sm(3),Bm={draw(e,t){const n=-Sm(t/(3*zm));e.moveTo(0,2*n),e.lineTo(-zm*n,-n),e.lineTo(zm*n,-n),e.closePath()}},Um=-.5,Wm=Sm(3)/2,qm=1/Sm(12),Hm=3*(qm/2+1),Vm={draw(e,t){const n=Sm(t/Hm),r=n/2,a=n*qm,o=r,i=n*qm+n,s=-o,l=i;e.moveTo(r,a),e.lineTo(o,i),e.lineTo(s,l),e.lineTo(Um*r-Wm*a,Wm*r+Um*a),e.lineTo(Um*o-Wm*i,Wm*o+Um*i),e.lineTo(Um*s-Wm*l,Wm*s+Um*l),e.lineTo(Um*r+Wm*a,Um*a-Wm*r),e.lineTo(Um*o+Wm*i,Um*i-Wm*o),e.lineTo(Um*s+Wm*l,Um*l-Wm*s),e.closePath()}};function Km(e){return function(){return e}}function $m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gm,Ym,Jm,Xm,Qm,Zm,eg,tg,ng,rg,ag,og,ig,sg;const lg=Math.PI,cg=2*lg,ug=1e-6,dg=cg-ug;function hg(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class fg{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?hg:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return hg;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(Gm||(Gm=$m(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Ym||(Ym=$m(["Z"]))))}lineTo(e,t){this._append(Jm||(Jm=$m(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(Xm||(Xm=$m(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,a,o){this._append(Qm||(Qm=$m(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+a,this._y1=+o)}arcTo(e,t,n,r,a){if(e=+e,t=+t,n=+n,r=+r,(a=+a)<0)throw new Error("negative radius: ".concat(a));let o=this._x1,i=this._y1,s=n-e,l=r-t,c=o-e,u=i-t,d=c*c+u*u;if(null===this._x1)this._append(Zm||(Zm=$m(["M",",",""])),this._x1=e,this._y1=t);else if(d>ug)if(Math.abs(u*s-l*c)>ug&&a){let h=n-o,f=r-i,p=s*s+l*l,m=h*h+f*f,g=Math.sqrt(p),v=Math.sqrt(d),y=a*Math.tan((lg-Math.acos((p+d-m)/(2*g*v)))/2),x=y/v,b=y/g;Math.abs(x-1)>ug&&this._append(tg||(tg=$m(["L",",",""])),e+x*c,t+x*u),this._append(ng||(ng=$m(["A",",",",0,0,",",",",",""])),a,a,+(u*h>c*f),this._x1=e+b*s,this._y1=t+b*l)}else this._append(eg||(eg=$m(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,a,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));let i=n*Math.cos(r),s=n*Math.sin(r),l=e+i,c=t+s,u=1^o,d=o?r-a:a-r;null===this._x1?this._append(rg||(rg=$m(["M",",",""])),l,c):(Math.abs(this._x1-l)>ug||Math.abs(this._y1-c)>ug)&&this._append(ag||(ag=$m(["L",",",""])),l,c),n&&(d<0&&(d=d%cg+cg),d>dg?this._append(og||(og=$m(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-i,t-s,n,n,u,this._x1=l,this._y1=c):d>ug&&this._append(ig||(ig=$m(["A",",",",0,",",",",",",",""])),n,n,+(d>=lg),u,this._x1=e+n*Math.cos(a),this._y1=t+n*Math.sin(a)))}rect(e,t,n,r){this._append(sg||(sg=$m(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function pg(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new fg(t)}Sm(3),Sm(3);function mg(e){return mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(e)}var gg=["type","size","sizeType"];function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vg.apply(this,arguments)}function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(Object(n),!0).forEach(function(t){bg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bg(e,t,n){return t=function(e){var t=function(e,t){if("object"!=mg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mg(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wg(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var jg={symbolCircle:Cm,symbolCross:Pm,symbolDiamond:Dm,symbolSquare:Im,symbolStar:Fm,symbolTriangle:Bm,symbolWye:Vm},_g=Math.PI/180,Ng=function(e){var n=e.type,r=void 0===n?"circle":n,a=e.size,o=void 0===a?64:a,i=e.sizeType,s=void 0===i?"area":i,l=xg(xg({},wg(e,gg)),{},{type:r,size:o,sizeType:s}),u=l.className,d=l.cx,h=l.cy,f=cp(l,!0);return d===+d&&h===+h&&o===+o?t.createElement("path",vg({},f,{className:c("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:function(){var e=function(e){var t="symbol".concat(_m()(e));return jg[t]||Cm}(r),t=function(e,t){let n=null,r=pg(a);function a(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"===typeof e?e:Km(e||Cm),t="function"===typeof t?t:Km(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"===typeof t?t:Km(t),a):e},a.size=function(e){return arguments.length?(t="function"===typeof e?e:Km(+e),a):t},a.context=function(e){return arguments.length?(n=null==e?null:e,a):n},a}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*_g;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(o,s,r));return t()}()})):null};function kg(e){return kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(e)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sg.apply(this,arguments)}function Ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ig(r.key),r)}}function Cg(e,t,n){return t=Eg(t),function(e,t){if(t&&("object"===kg(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pg()?Reflect.construct(t,n||[],Eg(e).constructor):t.apply(e,n))}function Pg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Pg=function(){return!!e})()}function Eg(e){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eg(e)}function Tg(e,t){return Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tg(e,t)}function Dg(e,t,n){return(t=Ig(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ig(e){var t=function(e,t){if("object"!=kg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kg(t)?t:t+""}Ng.registerSymbol=function(e,t){jg["symbol".concat(_m()(e))]=t};var Mg=32,Rg=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Cg(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tg(e,t)}(n,e),r=n,a=[{key:"renderIcon",value:function(e){var n=this.props.inactiveColor,r=16,a=Mg/6,o=Mg/3,i=e.inactive?n:e.color;if("plainline"===e.type)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:i,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:Mg,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:i,d:"M0,".concat(r,"h").concat(o,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(r,"\n            H").concat(Mg,"M").concat(2*o,",").concat(r,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return t.createElement("path",{stroke:"none",fill:i,d:"M0,".concat(4,"h").concat(Mg,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(n),!0).forEach(function(t){Dg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ag(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete s.legendIcon,t.cloneElement(e.legendIcon,s)}return t.createElement(Ng,{fill:i,cx:r,cy:r,size:Mg,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,n=this.props,r=n.payload,a=n.iconSize,o=n.layout,i=n.formatter,s=n.inactiveColor,l={x:0,y:0,width:Mg,height:Mg},u={display:"horizontal"===o?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(n,r){var o=n.formatter||i,h=c(Dg(Dg({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",n.inactive));if("none"===n.type)return null;var f=Rf()(n.value)?null:n.value;If(!Rf()(n.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=n.inactive?s:n.color;return t.createElement("li",Sg({className:h,style:u,key:"legend-item-".concat(r)},$f(e.props,n,r)),t.createElement(Cp,{width:a,height:a,viewBox:l,style:d},e.renderIcon(n)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},o?o(f,n,r):f))})}},{key:"render",value:function(){var e=this.props,n=e.payload,r=e.layout,a=e.align;if(!n||!n.length)return null;var o={padding:0,margin:0,textAlign:"horizontal"===r?a:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}],a&&Og(r.prototype,a),o&&Og(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);function Lg(e){return Lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(e)}Dg(Rg,"displayName","Legend"),Dg(Rg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Fg=["ref"];function zg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zg(Object(n),!0).forEach(function(t){Kg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ug(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$g(r.key),r)}}function Wg(e,t,n){return t=Hg(t),function(e,t){if(t&&("object"===Lg(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qg()?Reflect.construct(t,n||[],Hg(e).constructor):t.apply(e,n))}function qg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(qg=function(){return!!e})()}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hg(e)}function Vg(e,t){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vg(e,t)}function Kg(e,t,n){return(t=$g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $g(e){var t=function(e,t){if("object"!=Lg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lg(t)?t:t+""}function Gg(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Yg(e){return e.value}var Jg=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Kg(e=Wg(this,n,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vg(e,t)}(n,e),r=n,o=[{key:"getWithHeight",value:function(e,t){var n=Bg(Bg({},this.defaultProps),e.props).layout;return"vertical"===n&&kf(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(a=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Bg({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,a=r.layout,o=r.align,i=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===i?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Bg(Bg({},t),n)}},{key:"render",value:function(){var e=this,n=this.props,r=n.content,a=n.width,o=n.height,i=n.wrapperStyle,s=n.payloadUniqBy,l=n.payload,c=Bg(Bg({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(i)),i);return t.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,n){if(t.isValidElement(e))return t.cloneElement(e,n);if("function"===typeof e)return t.createElement(e,n);n.ref;var r=Gg(n,Fg);return t.createElement(Rg,r)}(r,Bg(Bg({},this.props),{},{payload:cm(l,s,Yg)})))}}])&&Ug(r.prototype,a),o&&Ug(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);function Xg(){return Xg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xg.apply(this,arguments)}Kg(Jg,"displayName","Legend"),Kg(Jg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Qg=function(e){var n=e.cx,r=e.cy,a=e.r,o=e.className,i=c("recharts-dot",o);return n===+n&&r===+r&&a===+a?t.createElement("circle",Xg({},cp(e,!1),Kf(e),{className:i,cx:n,cy:r,r:a})):null},Zg=n(1942),ev=n.n(Zg),tv=Object.getOwnPropertyNames,nv=Object.getOwnPropertySymbols,rv=Object.prototype.hasOwnProperty;function av(e,t){return function(n,r,a){return e(n,r,a)&&t(n,r,a)}}function ov(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var a=r.cache,o=a.get(t),i=a.get(n);if(o&&i)return o===n&&i===t;a.set(t,n),a.set(n,t);var s=e(t,n,r);return a.delete(t),a.delete(n),s}}function iv(e){return tv(e).concat(nv(e))}var sv=Object.hasOwn||function(e,t){return rv.call(e,t)};function lv(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var cv=Object.getOwnPropertyDescriptor,uv=Object.keys;function dv(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function hv(e,t){return lv(e.getTime(),t.getTime())}function fv(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function pv(e,t){return e===t}function mv(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,o,i=new Array(r),s=e.entries(),l=0;(a=s.next())&&!a.done;){for(var c=t.entries(),u=!1,d=0;(o=c.next())&&!o.done;)if(i[d])d++;else{var h=a.value,f=o.value;if(n.equals(h[0],f[0],l,d,e,t,n)&&n.equals(h[1],f[1],h[0],f[0],e,t,n)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var gv=lv;function vv(e,t,n){var r=uv(e),a=r.length;if(uv(t).length!==a)return!1;for(;a-- >0;)if(!Nv(e,t,n,r[a]))return!1;return!0}function yv(e,t,n){var r,a,o,i=iv(e),s=i.length;if(iv(t).length!==s)return!1;for(;s-- >0;){if(!Nv(e,t,n,r=i[s]))return!1;if(a=cv(e,r),o=cv(t,r),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable))return!1}return!0}function xv(e,t){return lv(e.valueOf(),t.valueOf())}function bv(e,t){return e.source===t.source&&e.flags===t.flags}function wv(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a,o,i=new Array(r),s=e.values();(a=s.next())&&!a.done;){for(var l=t.values(),c=!1,u=0;(o=l.next())&&!o.done;){if(!i[u]&&n.equals(a.value,o.value,a.value,o.value,e,t,n)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function jv(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function _v(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Nv(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||sv(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var kv=Array.isArray,Sv="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Av=Object.assign,Ov=Object.prototype.toString.call.bind(Object.prototype.toString);var Cv=Pv();Pv({strict:!0}),Pv({circular:!0}),Pv({circular:!0,strict:!0}),Pv({createInternalComparator:function(){return lv}}),Pv({strict:!0,createInternalComparator:function(){return lv}}),Pv({circular:!0,createInternalComparator:function(){return lv}}),Pv({circular:!0,createInternalComparator:function(){return lv},strict:!0});function Pv(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,a=e.createInternalComparator,o=e.createState,i=e.strict,s=void 0!==i&&i,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?yv:dv,areDatesEqual:hv,areErrorsEqual:fv,areFunctionsEqual:pv,areMapsEqual:r?av(mv,yv):mv,areNumbersEqual:gv,areObjectsEqual:r?yv:vv,arePrimitiveWrappersEqual:xv,areRegExpsEqual:bv,areSetsEqual:r?av(wv,yv):wv,areTypedArraysEqual:r?yv:jv,areUrlsEqual:_v};if(n&&(a=Av({},a,n(a))),t){var o=ov(a.areArraysEqual),i=ov(a.areMapsEqual),s=ov(a.areObjectsEqual),l=ov(a.areSetsEqual);a=Av({},a,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:l})}return a}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,o=e.areMapsEqual,i=e.areNumbersEqual,s=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,u=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,f,p){if(e===f)return!0;if(null==e||null==f)return!1;var m=typeof e;if(m!==typeof f)return!1;if("object"!==m)return"number"===m?i(e,f,p):"function"===m&&a(e,f,p);var g=e.constructor;if(g!==f.constructor)return!1;if(g===Object)return s(e,f,p);if(kv(e))return t(e,f,p);if(null!=Sv&&Sv(e))return d(e,f,p);if(g===Date)return n(e,f,p);if(g===RegExp)return c(e,f,p);if(g===Map)return o(e,f,p);if(g===Set)return u(e,f,p);var v=Ov(e);return"[object Date]"===v?n(e,f,p):"[object RegExp]"===v?c(e,f,p):"[object Map]"===v?o(e,f,p):"[object Set]"===v?u(e,f,p):"[object Object]"===v?"function"!==typeof e.then&&"function"!==typeof f.then&&s(e,f,p):"[object URL]"===v?h(e,f,p):"[object Error]"===v?r(e,f,p):"[object Arguments]"===v?s(e,f,p):("[object Boolean]"===v||"[object Number]"===v||"[object String]"===v)&&l(e,f,p)}}(l),u=a?a(c):(t=c,function(e,n,r,a,o,i,s){return t(e,n,s)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,o=e.strict;if(r)return function(e,i){var s=r(),l=s.cache,c=void 0===l?t?new WeakMap:void 0:l,u=s.meta;return n(e,i,{cache:c,equals:a,meta:u,strict:o})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var i={cache:void 0,equals:a,meta:void 0,strict:o};return function(e,t){return n(e,t,i)}}({circular:r,comparator:c,createState:o,equals:u,strict:s})}function Ev(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame(function r(a){n<0&&(n=a),a-n>t?(e(a),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function Tv(e){return Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(e)}function Dv(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Iv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Iv(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mv(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var a=Dv(r),o=a[0],i=a.slice(1);return"number"===typeof o?void Ev(n.bind(null,i),o):(n(o),void Ev(n.bind(null,i)))}"object"===Tv(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Rv(e){return Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(e)}function Lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lv(Object(n),!0).forEach(function(t){zv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zv(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Rv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Rv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Rv(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bv=function(e){return e},Uv=function(e,t){return Object.keys(t).reduce(function(n,r){return Fv(Fv({},n),{},zv({},r,e(r,t[r])))},{})},Wv=function(e,t,n){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(n);var r}).join(",")};function qv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||Vv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hv(e){return function(e){if(Array.isArray(e))return Kv(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vv(e,t){if(e){if("string"===typeof e)return Kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kv(e,t):void 0}}function Kv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $v=1e-4,Gv=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Yv=function(e,t){return e.map(function(e,n){return e*Math.pow(t,n)}).reduce(function(e,t){return e+t})},Jv=function(e,t){return function(n){var r=Gv(e,t);return Yv(r,n)}},Xv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],o=t[2],i=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,a=0,o=1,i=1;break;case"ease":r=.25,a=.1,o=.25,i=1;break;case"ease-in":r=.42,a=0,o=1,i=1;break;case"ease-out":r=.42,a=0,o=.58,i=1;break;case"ease-in-out":r=0,a=0,o=.58,i=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=qv(s[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);r=l[0],a=l[1],o=l[2],i=l[3]}}[r,o,a,i].every(function(e){return"number"===typeof e&&e>=0&&e<=1});var c,u,d=Jv(r,o),h=Jv(a,i),f=(c=r,u=o,function(e){var t=Gv(c,u),n=[].concat(Hv(t.map(function(e,t){return e*t}).slice(1)),[0]);return Yv(n,e)}),p=function(e){return e>1?1:e<0?0:e},m=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var a=d(n)-t,o=f(n);if(Math.abs(a-t)<$v||o<$v)return h(n);n=p(n-a/o)}return h(n)};return m.isStepper=!1,m},Qv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Xv(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,a=void 0===r?8:r,o=e.dt,i=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*a)*i/1e3,s=r*i/1e3+e;return Math.abs(s-t)<$v&&Math.abs(o)<$v?[t,0]:[s,o]};return s.isStepper=!0,s.dt=i,s}();default:if("cubic-bezier"===r.split("(")[0])return Xv(r)}return"function"===typeof r?r:null};function Zv(e){return Zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(e)}function ey(e){return function(e){if(Array.isArray(e))return iy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ty(Object(n),!0).forEach(function(t){ry(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ty(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ry(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Zv(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Zv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Zv(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ay(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||oy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oy(e,t){if(e){if("string"===typeof e)return iy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iy(e,t):void 0}}function iy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sy=function(e,t,n){return e+(t-e)*n},ly=function(e){return e.from!==e.to},cy=function e(t,n,r){var a=Uv(function(e,n){if(ly(n)){var r=ay(t(n.from,n.to,n.velocity),2),a=r[0],o=r[1];return ny(ny({},n),{},{from:a,velocity:o})}return n},n);return r<1?Uv(function(e,t){return ly(t)?ny(ny({},t),{},{velocity:sy(t.velocity,a[e].velocity,r),from:sy(t.from,a[e].from,r)}):t},n):e(t,a,r-1)};const uy=function(e,t,n,r,a){var o,i,s,l,c=(o=e,i=t,[Object.keys(o),Object.keys(i)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),u=c.reduce(function(n,r){return ny(ny({},n),{},ry({},r,[e[r],t[r]]))},{}),d=c.reduce(function(n,r){return ny(ny({},n),{},ry({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,f=function(){return null};return f=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;d=cy(n,d,o),a(ny(ny(ny({},e),t),Uv(function(e,t){return t.from},d))),s=r,Object.values(d).filter(ly).length&&(h=requestAnimationFrame(f))}:function(o){l||(l=o);var i=(o-l)/r,s=Uv(function(e,t){return sy.apply(void 0,ey(t).concat([n(i)]))},u);if(a(ny(ny(ny({},e),t),s)),i<1)h=requestAnimationFrame(f);else{var c=Uv(function(e,t){return sy.apply(void 0,ey(t).concat([n(1)]))},u);a(ny(ny(ny({},e),t),c))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(h)}}};function dy(e){return dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(e)}var hy=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function fy(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function py(e){return function(e){if(Array.isArray(e))return my(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return my(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return my(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function my(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gy(Object(n),!0).forEach(function(t){yy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yy(e,t,n){return(t=by(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,by(r.key),r)}}function by(e){var t=function(e,t){if("object"!==dy(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==dy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===dy(t)?t:String(t)}function wy(e,t){return wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wy(e,t)}function jy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=ky(e);if(t){var a=ky(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _y(this,n)}}function _y(e,t){if(t&&("object"===dy(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ny(e)}function Ny(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ky(e){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ky(e)}var Sy=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wy(e,t)}(i,e);var n,r,a,o=jy(i);function i(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=(n=o.call(this,e,t)).props,a=r.isActive,s=r.attributeName,l=r.from,c=r.to,u=r.steps,d=r.children,h=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(Ny(n)),n.changeStyle=n.changeStyle.bind(Ny(n)),!a||h<=0)return n.state={style:{}},"function"===typeof d&&(n.state={style:c}),_y(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof d)return n.state={style:l},_y(n);n.state={style:s?yy({},s,l):l}}else n.state={style:{}};return n}return n=i,r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,a=t.attributeName,o=t.shouldReAnimate,i=t.to,s=t.from,l=this.state.style;if(r)if(n){if(!(Cv(e.to,i)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||o?s:e.to;if(this.state&&l){var d={style:a?yy({},a,u):u};(a&&l[a]!==u||!a&&l!==u)&&this.setState(d)}this.runAnimation(vy(vy({},this.props),{},{from:u,begin:0}))}}else{var h={style:a?yy({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,a=e.duration,o=e.easing,i=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,c=uy(n,r,Qv(o),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=c()},a,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,a=e.onAnimationStart,o=n[0],i=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([a].concat(py(n.reduce(function(e,r,a){if(0===a)return e;var o=r.duration,i=r.easing,s=void 0===i?"ease":i,l=r.style,c=r.properties,u=r.onAnimationEnd,d=a>0?n[a-1]:r,h=c||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(py(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:o,easing:s}),o]);var f=Wv(h,o,s),p=vy(vy(vy({},d.style),l),{},{transition:f});return[].concat(py(e),[p,o,u]).filter(Bv)},[i,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Mv());var t=e.begin,n=e.duration,r=e.attributeName,a=e.to,o=e.easing,i=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var d=r?yy({},r,a):a,h=Wv(Object.keys(d),n,o);u.start([i,t,vy(vy({},d),{},{transition:h}),n,s])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,n=e.children,r=(e.begin,e.duration),a=(e.attributeName,e.easing,e.isActive),o=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,fy(e,hy)),i=t.Children.count(n),s=this.state.style;if("function"===typeof n)return n(s);if(!a||0===i||r<=0)return n;var l=function(e){var n=e.props,r=n.style,a=void 0===r?{}:r,i=n.className;return(0,t.cloneElement)(e,vy(vy({},o),{},{style:vy(vy({},a),s),className:i}))};return 1===i?l(t.Children.only(n)):t.createElement("div",null,t.Children.map(n,function(e){return l(e)}))}}],r&&xy(n.prototype,r),a&&xy(n,a),Object.defineProperty(n,"prototype",{writable:!1}),i}(t.PureComponent);Sy.displayName="Animate",Sy.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},Sy.propTypes={from:ev().oneOfType([ev().object,ev().string]),to:ev().oneOfType([ev().object,ev().string]),attributeName:ev().string,duration:ev().number,begin:ev().number,easing:ev().oneOfType([ev().string,ev().func]),steps:ev().arrayOf(ev().shape({duration:ev().number.isRequired,style:ev().object.isRequired,easing:ev().oneOfType([ev().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ev().func]),properties:ev().arrayOf("string"),onAnimationEnd:ev().func})),children:ev().oneOfType([ev().node,ev().func]),isActive:ev().bool,canBegin:ev().bool,onAnimationEnd:ev().func,shouldReAnimate:ev().bool,onAnimationStart:ev().func,onAnimationReStart:ev().func};const Ay=Sy;function Oy(e){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(e)}function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cy.apply(this,arguments)}function Py(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ey(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ey(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ey(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ty(Object(n),!0).forEach(function(t){Iy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ty(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Iy(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Oy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oy(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var My=function(e,t,n,r,a){var o,i=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(i>0&&a instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=a[d]>i?i:a[d];o="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*u[1])),o+="L ".concat(e+n,",").concat(t+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),o+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*u[3])),o+="Z"}else if(i>0&&a===+a&&a>0){var h=Math.min(i,a);o="M ".concat(e,",").concat(t+s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*h,"\n            L ").concat(e+n,",").concat(t+r-s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*h," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},Ry=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,a=t.x,o=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var l=Math.min(a,a+i),c=Math.max(a,a+i),u=Math.min(o,o+s),d=Math.max(o,o+s);return n>=l&&n<=c&&r>=u&&r<=d}return!1},Ly={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fy=function(e){var n=Dy(Dy({},Ly),e),r=(0,t.useRef)(),a=Py((0,t.useState)(-1),2),o=a[0],i=a[1];(0,t.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(YD){}},[]);var s=n.x,l=n.y,u=n.width,d=n.height,h=n.radius,f=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,v=n.isAnimationActive,y=n.isUpdateAnimationActive;if(s!==+s||l!==+l||u!==+u||d!==+d||0===u||0===d)return null;var x=c("recharts-rectangle",f);return y?t.createElement(Ay,{canBegin:o>0,from:{width:u,height:d,x:s,y:l},to:{width:u,height:d,x:s,y:l},duration:m,animationEasing:p,isActive:y},function(e){var a=e.width,i=e.height,s=e.x,l=e.y;return t.createElement(Ay,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:v,easing:p},t.createElement("path",Cy({},cp(n,!0),{className:x,d:My(s,l,a,i,h),ref:r})))}):t.createElement("path",Cy({},cp(n,!0),{className:x,d:My(s,l,u,d,h)}))};function zy(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function By(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Uy extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vy;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Wy(this,e))}has(e){return super.has(Wy(this,e))}set(e,t){return super.set(qy(this,e),t)}delete(e){return super.delete(Hy(this,e))}}Set;function Wy(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):t}function qy(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)?n.get(a):(n.set(a,t),t)}function Hy(e,t){let{_intern:n,_key:r}=e;const a=r(t);return n.has(a)&&(t=n.get(a),n.delete(a)),t}function Vy(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Ky=Symbol("implicit");function $y(){var e=new Uy,t=[],n=[],r=Ky;function a(a){let o=e.get(a);if(void 0===o){if(r!==Ky)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Uy;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return $y(t,n).unknown(r)},zy.apply(a,arguments),a}function Gy(){var e,t,n=$y().unknown(void 0),r=n.domain,a=n.range,o=0,i=1,s=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=i<o,h=d?i:o,f=d?o:i;e=(f-h)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),h+=(f-h-e*(n-l))*u,t=e*(1-l),s&&(h=Math.round(h),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e+r*n;return o}(n).map(function(t){return h+e*t});return a(d?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([o,i]=e,o=+o,i=+i,d()):[o,i]},n.rangeRound=function(e){return[o,i]=e,o=+o,i=+i,s=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,d()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return Gy(r(),[o,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},zy.apply(d(),arguments)}function Yy(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Yy(t())},e}function Jy(){return Yy(Gy.apply(null,arguments).paddingInner(1))}function Xy(e){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(e)}function Qy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qy(Object(n),!0).forEach(function(t){ex(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ex(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Xy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xy(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tx={widthCache:{},cacheCount:0},nx={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rx="recharts_measurement_span";var ax=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||im.isSsr)return{width:0,height:0};var n=function(e){var t=Zy({},e);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(tx.widthCache[r])return tx.widthCache[r];try{var a=document.getElementById(rx);a||((a=document.createElement("span")).setAttribute("id",rx),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=Zy(Zy({},nx),n);Object.assign(a.style,o),a.textContent="".concat(e);var i=a.getBoundingClientRect(),s={width:i.width,height:i.height};return tx.widthCache[r]=s,++tx.cacheCount>2e3&&(tx.cacheCount=0,tx.widthCache={}),s}catch(l){return{width:0,height:0}}};function ox(e){return ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ox(e)}function ix(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return sx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cx(r.key),r)}}function cx(e){var t=function(e,t){if("object"!=ox(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ox(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ox(t)?t:t+""}var ux=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dx=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hx=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fx=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,px={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},mx=Object.keys(px),gx="NaN";var vx=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||hx.test(n)||(this.num=NaN,this.unit=""),mx.includes(n)&&(this.num=function(e,t){return e*px[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=ix(null!==(n=fx.exec(t))&&void 0!==n?n:[],3),a=r[1],o=r[2];return new e(parseFloat(a),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&lx(t.prototype,n),r&&lx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function yx(e){if(e.includes(gx))return gx;for(var t=e;t.includes("*")||t.includes("/");){var n,r=ix(null!==(n=ux.exec(t))&&void 0!==n?n:[],4),a=r[1],o=r[2],i=r[3],s=vx.parse(null!==a&&void 0!==a?a:""),l=vx.parse(null!==i&&void 0!==i?i:""),c="*"===o?s.multiply(l):s.divide(l);if(c.isNaN())return gx;t=t.replace(ux,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=ix(null!==(u=dx.exec(t))&&void 0!==u?u:[],4),h=d[1],f=d[2],p=d[3],m=vx.parse(null!==h&&void 0!==h?h:""),g=vx.parse(null!==p&&void 0!==p?p:""),v="+"===f?m.add(g):m.subtract(g);if(v.isNaN())return gx;t=t.replace(dx,v.toString())}return t}var xx=/\(([^()]*)\)/;function bx(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=ix(xx.exec(t),2)[1];t=t.replace(xx,yx(n))}return t}(t),t=yx(t)}function wx(e){var t=function(e){try{return bx(e)}catch(t){return gx}}(e.slice(5,-1));return t===gx?"":t}var jx=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_x=["dx","dy","angle","className","breakAll"];function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nx.apply(this,arguments)}function kx(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Sx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ax(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ax(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ax(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ox=/[ \f\n\r\t\v\u2028\u2029]+/,Cx=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var a=[];return jf()(t)||(a=n?t.toString().split(""):t.toString().split(Ox)),{wordsWithComputedWidth:a.map(function(e){return{word:e,width:ax(e,r).width}}),spaceWidth:n?0:ax("\xa0",r).width}}catch(o){return null}},Px=function(e){return[{words:jf()(e)?[]:e.toString().split(Ox)}]},Ex=function(e){var t=e.width,n=e.scaleToFit,r=e.children,a=e.style,o=e.breakAll,i=e.maxLines;if((t||n)&&!im.isSsr){var s=Cx({breakAll:o,children:r,style:a});return s?function(e,t,n,r,a){var o=e.maxLines,i=e.children,s=e.style,l=e.breakAll,c=kf(o),u=i,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var o=t.word,i=t.width,s=e[e.length-1];if(s&&(null==r||a||s.width+i+n<Number(r)))s.words.push(o),s.width+=i+n;else{var l={words:[o],width:i};e.push(l)}return e},[])},h=d(t);if(!c)return h;for(var f,p=function(e){var t=u.slice(0,e),n=Cx({breakAll:l,style:s,children:t+"\u2026"}).wordsWithComputedWidth,a=d(n),i=a.length>o||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(a).width>Number(r);return[i,a]},m=0,g=u.length-1,v=0;m<=g&&v<=u.length-1;){var y=Math.floor((m+g)/2),x=Sx(p(y-1),2),b=x[0],w=x[1],j=Sx(p(y),1)[0];if(b||j||(m=y+1),b&&j&&(g=y-1),!b&&j){f=w;break}v++}return f||h}({breakAll:o,children:r,maxLines:i,style:a},s.wordsWithComputedWidth,s.spaceWidth,t,n):Px(r)}return Px(r)},Tx="#808080",Dx=function(e){var n=e.x,r=void 0===n?0:n,a=e.y,o=void 0===a?0:a,i=e.lineHeight,s=void 0===i?"1em":i,l=e.capHeight,u=void 0===l?"0.71em":l,d=e.scaleToFit,h=void 0!==d&&d,f=e.textAnchor,p=void 0===f?"start":f,m=e.verticalAnchor,g=void 0===m?"end":m,v=e.fill,y=void 0===v?Tx:v,x=kx(e,jx),b=(0,t.useMemo)(function(){return Ex({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),w=x.dx,j=x.dy,_=x.angle,N=x.className,k=x.breakAll,S=kx(x,_x);if(!Sf(r)||!Sf(o))return null;var A,O=r+(kf(w)?w:0),C=o+(kf(j)?j:0);switch(g){case"start":A=wx("calc(".concat(u,")"));break;case"middle":A=wx("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:A=wx("calc(".concat(b.length-1," * -").concat(s,")"))}var P=[];if(h){var E=b[0].width,T=x.width;P.push("scale(".concat((kf(T)?T/E:1)/E,")"))}return _&&P.push("rotate(".concat(_,", ").concat(O,", ").concat(C,")")),P.length&&(S.transform=P.join(" ")),t.createElement("text",Nx({},cp(S,!0),{x:O,y:C,className:c("recharts-text",N),textAnchor:p,fill:y.includes("url")?Tx:y}),b.map(function(e,n){var r=e.words.join(k?"":" ");return t.createElement("tspan",{x:O,dy:0===n?A:s,key:"".concat(r,"-").concat(n)},r)}))};const Ix=Math.sqrt(50),Mx=Math.sqrt(10),Rx=Math.sqrt(2);function Lx(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),o=r/Math.pow(10,a),i=o>=Ix?10:o>=Mx?5:o>=Rx?2:1;let s,l,c;return a<0?(c=Math.pow(10,-a)/i,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,a)*i,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?Lx(e,t,2*n):[s,l,c]}function Fx(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[a,o,i]=r?Lx(t,e,n):Lx(e,t,n);if(!(o>=a))return[];const s=o-a+1,l=new Array(s);if(r)if(i<0)for(let c=0;c<s;++c)l[c]=(o-c)/-i;else for(let c=0;c<s;++c)l[c]=(o-c)*i;else if(i<0)for(let c=0;c<s;++c)l[c]=(a+c)/-i;else for(let c=0;c<s;++c)l[c]=(a+c)*i;return l}function zx(e,t,n){return Lx(e=+e,t=+t,n=+n)[2]}function Bx(e,t,n){n=+n;const r=(t=+t)<(e=+e),a=r?zx(t,e,n):zx(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function Ux(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wx(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qx(e){let t,n,r;function a(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==t(r,r))return o;do{const t=a+o>>>1;n(e[t],r)<0?a=t+1:o=t}while(a<o)}return a}return 2!==e.length?(t=Ux,n=(t,n)=>Ux(e(t),n),r=(t,n)=>e(t)-n):(t=e===Ux||e===Wx?e:Hx,n=e,r=e),{left:a,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=a(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==t(r,r))return o;do{const t=a+o>>>1;n(e[t],r)<=0?a=t+1:o=t}while(a<o)}return a}}}function Hx(){return 0}function Vx(e){return null===e?NaN:+e}const Kx=qx(Ux),$x=Kx.right,Gx=(Kx.left,qx(Vx).center,$x);function Yx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Jx(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xx(){}var Qx=.7,Zx=1/Qx,eb="\\s*([+-]?\\d+)\\s*",tb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rb=/^#([0-9a-f]{3,8})$/,ab=new RegExp("^rgb\\(".concat(eb,",").concat(eb,",").concat(eb,"\\)$")),ob=new RegExp("^rgb\\(".concat(nb,",").concat(nb,",").concat(nb,"\\)$")),ib=new RegExp("^rgba\\(".concat(eb,",").concat(eb,",").concat(eb,",").concat(tb,"\\)$")),sb=new RegExp("^rgba\\(".concat(nb,",").concat(nb,",").concat(nb,",").concat(tb,"\\)$")),lb=new RegExp("^hsl\\(".concat(tb,",").concat(nb,",").concat(nb,"\\)$")),cb=new RegExp("^hsla\\(".concat(tb,",").concat(nb,",").concat(nb,",").concat(tb,"\\)$")),ub={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function db(){return this.rgb().formatHex()}function hb(){return this.rgb().formatRgb()}function fb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?pb(t):3===n?new vb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?mb(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?mb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ab.exec(e))?new vb(t[1],t[2],t[3],1):(t=ob.exec(e))?new vb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ib.exec(e))?mb(t[1],t[2],t[3],t[4]):(t=sb.exec(e))?mb(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=lb.exec(e))?_b(t[1],t[2]/100,t[3]/100,1):(t=cb.exec(e))?_b(t[1],t[2]/100,t[3]/100,t[4]):ub.hasOwnProperty(e)?pb(ub[e]):"transparent"===e?new vb(NaN,NaN,NaN,0):null}function pb(e){return new vb(e>>16&255,e>>8&255,255&e,1)}function mb(e,t,n,r){return r<=0&&(e=t=n=NaN),new vb(e,t,n,r)}function gb(e,t,n,r){return 1===arguments.length?((a=e)instanceof Xx||(a=fb(a)),a?new vb((a=a.rgb()).r,a.g,a.b,a.opacity):new vb):new vb(e,t,n,null==r?1:r);var a}function vb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function yb(){return"#".concat(jb(this.r)).concat(jb(this.g)).concat(jb(this.b))}function xb(){const e=bb(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(wb(this.r),", ").concat(wb(this.g),", ").concat(wb(this.b)).concat(1===e?")":", ".concat(e,")"))}function bb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wb(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jb(e){return((e=wb(e))<16?"0":"")+e.toString(16)}function _b(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kb(e,t,n,r)}function Nb(e){if(e instanceof kb)return new kb(e.h,e.s,e.l,e.opacity);if(e instanceof Xx||(e=fb(e)),!e)return new kb;if(e instanceof kb)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,l=(o+a)/2;return s?(i=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new kb(i,s,l,e.opacity)}function kb(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Sb(e){return(e=(e||0)%360)<0?e+360:e}function Ab(e){return Math.max(0,Math.min(1,e||0))}function Ob(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Cb(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}Yx(Xx,fb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:db,formatHex:db,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Nb(this).formatHsl()},formatRgb:hb,toString:hb}),Yx(vb,gb,Jx(Xx,{brighter(e){return e=null==e?Zx:Math.pow(Zx,e),new vb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Qx:Math.pow(Qx,e),new vb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vb(wb(this.r),wb(this.g),wb(this.b),bb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yb,formatHex:yb,formatHex8:function(){return"#".concat(jb(this.r)).concat(jb(this.g)).concat(jb(this.b)).concat(jb(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:xb,toString:xb})),Yx(kb,function(e,t,n,r){return 1===arguments.length?Nb(e):new kb(e,t,n,null==r?1:r)},Jx(Xx,{brighter(e){return e=null==e?Zx:Math.pow(Zx,e),new kb(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Qx:Math.pow(Qx,e),new kb(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new vb(Ob(e>=240?e-240:e+120,a,r),Ob(e,a,r),Ob(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new kb(Sb(this.h),Ab(this.s),Ab(this.l),bb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bb(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Sb(this.h),", ").concat(100*Ab(this.s),"%, ").concat(100*Ab(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Pb=e=>()=>e;function Eb(e,t){return function(n){return e+n*t}}function Tb(e){return 1===(e=+e)?Db:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Pb(isNaN(t)?n:t)}}function Db(e,t){var n=t-e;return n?Eb(e,n):Pb(isNaN(e)?t:e)}const Ib=function e(t){var n=Tb(t);function r(e,t){var r=n((e=gb(e)).r,(t=gb(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=Db(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Mb(e){return function(t){var n,r,a=t.length,o=new Array(a),i=new Array(a),s=new Array(a);for(n=0;n<a;++n)r=gb(t[n]),o[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return o=e(o),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=s(e),r+""}}}Mb(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,s=r<t-1?e[r+2]:2*o-a;return Cb((n-r/t)*t,i,a,o,s)}}),Mb(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return Cb((n-r/t)*t,a,o,i,s)}});function Rb(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=Hb(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function Lb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Fb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function zb(e,t){var n,r={},a={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Hb(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var Bb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ub=new RegExp(Bb.source,"g");function Wb(e,t){var n,r,a,o=Bb.lastIndex=Ub.lastIndex=0,i=-1,s=[],l=[];for(e+="",t+="";(n=Bb.exec(e))&&(r=Ub.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,l.push({i:i,x:Fb(n,r)})),o=Ub.lastIndex;return o<t.length&&(a=t.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function qb(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<r;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function Hb(e,t){var n,r,a=typeof t;return null==t||"boolean"===a?Pb(t):("number"===a?Fb:"string"===a?(n=fb(t))?(t=n,Ib):Wb:t instanceof fb?Ib:t instanceof Date?Lb:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Rb:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?zb:Fb:qb))(e,t)}function Vb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Kb(e){return+e}var $b=[0,1];function Gb(e){return e}function Yb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Jb(e,t,n){var r=e[0],a=e[1],o=t[0],i=t[1];return a<r?(r=Yb(a,r),o=n(i,o)):(r=Yb(r,a),o=n(o,i)),function(e){return o(r(e))}}function Xb(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)a[i]=Yb(e[i],e[i+1]),o[i]=n(t[i],t[i+1]);return function(t){var n=Gx(e,t,1,r)-1;return o[n](a[n](t))}}function Qb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zb(){var e,t,n,r,a,o,i=$b,s=$b,l=Hb,c=Gb;function u(){var e=Math.min(i.length,s.length);return c!==Gb&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(i[0],i[e-1])),r=e>2?Xb:Jb,a=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(a||(a=r(i.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((o||(o=r(s,i.map(e),Fb)))(n)))},d.domain=function(e){return arguments.length?(i=Array.from(e,Kb),u()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=Vb,u()},d.clamp=function(e){return arguments.length?(c=!!e||Gb,u()):c!==Gb},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function ew(){return Zb()(Gb,Gb)}var tw,nw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rw(e){if(!(t=nw.exec(e)))throw new Error("invalid format: "+e);var t;return new aw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function aw(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ow(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function iw(e){return(e=ow(Math.abs(e)))?e[1]:NaN}function sw(e,t){var n=ow(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}rw.prototype=aw.prototype,aw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const lw={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sw(100*e,t),r:sw,s:function(e,t){var n=ow(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(tw=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ow(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cw(e){return e}var uw,dw,hw,fw=Array.prototype.map,pw=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function mw(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?cw:(t=fw.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var a=e.length,o=[],i=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(a-=s,a+s)),!((l+=s+1)>r));)s=t[i=(i+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?cw:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(fw.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=rw(e)).fill,n=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):lw[y]||(void 0===g&&(g=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var x="$"===h?a:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?o:/[%p]/.test(y)?l:"",w=lw[y],j=/[defgprs%]/.test(y);function _(e){var a,o,l,h=x,_=b;if("c"===y)_=w(e)+_,e="";else{var N=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,a=-1;r<n;++r)switch(e[r]){case".":a=t=r;break;case"0":0===a&&(a=r),t=r;break;default:if(!+e[r])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),N&&0===+e&&"+"!==d&&(N=!1),h=(N?"("===d?d:c:"-"===d||"("===d?"":d)+h,_=("s"===y?pw[8+tw/3]:"")+_+(N&&"("===d?")":""),j)for(a=-1,o=e.length;++a<o;)if(48>(l=e.charCodeAt(a))||l>57){_=(46===l?i+e.slice(a+1):e.slice(a))+_,e=e.slice(0,a);break}}m&&!f&&(e=r(e,1/0));var k=h.length+e.length+_.length,S=k<p?new Array(p-k+1).join(t):"";switch(m&&f&&(e=r(S+e,S.length?p-_.length:1/0),S=""),n){case"<":e=h+e+_+S;break;case"=":e=h+S+e+_;break;case"^":e=S.slice(0,k=S.length>>1)+h+e+_+S.slice(k);break;default:e=S+h+e+_}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return e+""},_}return{format:d,formatPrefix:function(e,t){var n=d(((e=rw(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(iw(t)/3))),a=Math.pow(10,-r),o=pw[8+r/3];return function(e){return n(a*e)+o}}}}function gw(e,t,n,r){var a,o=Bx(e,t,n);switch((r=rw(null==r?",f":r)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(iw(t)/3)))-iw(Math.abs(e)))}(o,i))||(r.precision=a),hw(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,iw(t)-iw(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=function(e){return Math.max(0,-iw(Math.abs(e)))}(o))||(r.precision=a-2*("%"===r.type))}return dw(r)}function vw(e){var t=e.domain;return e.ticks=function(e){var n=t();return Fx(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return gw(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,a,o=t(),i=0,s=o.length-1,l=o[i],c=o[s],u=10;for(c<l&&(a=l,l=c,c=a,a=i,i=s,s=a);u-- >0;){if((a=zx(l,c,n))===r)return o[i]=l,o[s]=c,t(o);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}r=a}return e},e}function yw(){var e=ew();return e.copy=function(){return Qb(e,yw())},zy.apply(e,arguments),vw(e)}function xw(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,Kb),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return xw(e).unknown(t)},e=arguments.length?Array.from(e,Kb):[0,1],vw(n)}function bw(e,t){var n,r=0,a=(e=e.slice()).length-1,o=e[r],i=e[a];return i<o&&(n=r,r=a,a=n,n=o,o=i,i=n),e[r]=t.floor(o),e[a]=t.ceil(i),e}function ww(e){return Math.log(e)}function jw(e){return Math.exp(e)}function _w(e){return-Math.log(-e)}function Nw(e){return-Math.exp(-e)}function kw(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Sw(e){return(t,n)=>-e(-t,n)}function Aw(e){const t=e(ww,jw),n=t.domain;let r,a,o=10;function i(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),a=function(e){return 10===e?kw:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=Sw(r),a=Sw(a),e(_w,Nw)):e(ww,jw),t}return t.base=function(e){return arguments.length?(o=+e,i()):o},t.domain=function(e){return arguments.length?(n(e),i()):n()},t.ticks=e=>{const t=n();let i=t[0],s=t[t.length-1];const l=s<i;l&&([i,s]=[s,i]);let c,u,d=r(i),h=r(s);const f=null==e?10:+e;let p=[];if(!(o%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),i>0){for(;d<=h;++d)for(c=1;c<o;++c)if(u=d<0?c/a(-d):c*a(d),!(u<i)){if(u>s)break;p.push(u)}}else for(;d<=h;++d)for(c=o-1;c>=1;--c)if(u=d>0?c/a(-d):c*a(d),!(u<i)){if(u>s)break;p.push(u)}2*p.length<f&&(p=Fx(i,s,f))}else p=Fx(d,h,Math.min(h-d,f)).map(a);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=rw(n)).precision||(n.trim=!0),n=dw(n)),e===1/0)return n;const i=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/a(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=i?n(e):""}},t.nice=()=>n(bw(n(),{floor:e=>a(Math.floor(r(e))),ceil:e=>a(Math.ceil(r(e)))})),t}function Ow(){const e=Aw(Zb()).domain([1,10]);return e.copy=()=>Qb(e,Ow()).base(e.base()),zy.apply(e,arguments),e}function Cw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Pw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ew(e){var t=1,n=e(Cw(t),Pw(t));return n.constant=function(n){return arguments.length?e(Cw(t=+n),Pw(t)):t},vw(n)}function Tw(){var e=Ew(Zb());return e.copy=function(){return Qb(e,Tw()).constant(e.constant())},zy.apply(e,arguments)}function Dw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Iw(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Mw(e){return e<0?-e*e:e*e}function Rw(e){var t=e(Gb,Gb),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Gb,Gb):.5===n?e(Iw,Mw):e(Dw(n),Dw(1/n)):n},vw(t)}function Lw(){var e=Rw(Zb());return e.copy=function(){return Qb(e,Lw()).exponent(e.exponent())},zy.apply(e,arguments),e}function Fw(){return Lw.apply(null,arguments).exponent(.5)}function zw(e){return Math.sign(e)*e*e}function Bw(){var e,t=ew(),n=[0,1],r=!1;function a(n){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(a)?e:r?Math.round(a):a}return a.invert=function(e){return t.invert(zw(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain()},a.range=function(e){return arguments.length?(t.range((n=Array.from(e,Kb)).map(zw)),a):n.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(r=!!e,a):r},a.clamp=function(e){return arguments.length?(t.clamp(e),a):t.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Bw(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},zy.apply(a,arguments),vw(a)}function Uw(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n<a||void 0===n&&a>=a)&&(n=a)}return n}function Ww(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let a of e)null!=(a=t(a,++r,e))&&(n>a||void 0===n&&a>=a)&&(n=a)}return n}function qw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ux;if(e===Ux)return Hw;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function Hw(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Vw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=void 0===a?Hw:qw(a);r>n;){if(r-n>600){const o=r-n+1,i=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(i-o/2<0?-1:1);Vw(e,t,Math.max(n,Math.floor(t-i*l/o+c)),Math.min(r,Math.floor(t+(o-i)*l/o+c)),a)}const o=e[t];let i=n,s=r;for(Kw(e,n,t),a(e[r],o)>0&&Kw(e,n,r);i<s;){for(Kw(e,i,s),++i,--s;a(e[i],o)<0;)++i;for(;a(e[s],o)>0;)--s}0===a(e[n],o)?Kw(e,n,s):(++s,Kw(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Kw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $w(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return Ww(e);if(t>=1)return Uw(e);var r,a=(r-1)*t,o=Math.floor(a),i=Uw(Vw(e,o).subarray(0,o+1));return i+(Ww(e.subarray(o+1))-i)*(a-o)}}function Gw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vx;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),i=+n(e[o],o,e);return i+(+n(e[o+1],o+1,e)-i)*(a-o)}}function Yw(){var e,t=[],n=[],r=[];function a(){var e=0,a=Math.max(1,n.length);for(r=new Array(a-1);++e<a;)r[e-1]=Gw(t,e/a);return o}function o(t){return null==t||isNaN(t=+t)?e:n[Gx(r,t)]}return o.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?r[a-1]:t[0],a<r.length?r[a]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Ux),a()},o.range=function(e){return arguments.length?(n=Array.from(e),a()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return Yw().domain(t).range(n).unknown(e)},zy.apply(o,arguments)}function Jw(){var e,t=0,n=1,r=1,a=[.5],o=[0,1];function i(t){return null!=t&&t<=t?o[Gx(a,t,0,r)]:e}function s(){var e=-1;for(a=new Array(r);++e<r;)a[e]=((e+1)*n-(e-r)*t)/(r+1);return i}return i.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},i.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},i.invertExtent=function(e){var i=o.indexOf(e);return i<0?[NaN,NaN]:i<1?[t,a[0]]:i>=r?[a[r-1],n]:[a[i-1],a[i]]},i.unknown=function(t){return arguments.length?(e=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return Jw().domain([t,n]).range(o).unknown(e)},zy.apply(vw(i),arguments)}function Xw(){var e,t=[.5],n=[0,1],r=1;function a(a){return null!=a&&a<=a?n[Gx(t,a,0,r)]:e}return a.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),a):t.slice()},a.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),a):n.slice()},a.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return Xw().domain(t).range(n).unknown(e)},zy.apply(a,arguments)}uw=mw({thousands:",",grouping:[3],currency:["$",""]}),dw=uw.format,hw=uw.formatPrefix;const Qw=1e3,Zw=6e4,ej=36e5,tj=864e5,nj=6048e5,rj=2592e6,aj=31536e6,oj=new Date,ij=new Date;function sj(e,t,n,r){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),a.range=(n,r,o)=>{const i=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return i;let s;do{i.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return i},a.filter=n=>sj(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(a.count=(t,r)=>(oj.setTime(+t),ij.setTime(+r),e(oj),e(ij),Math.floor(n(oj,ij))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?t=>r(t)%e===0:t=>a.count(0,t)%e===0):a:null)),a}const lj=sj(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lj.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?sj(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lj:null);lj.range;const cj=sj(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qw)},(e,t)=>(t-e)/Qw,e=>e.getUTCSeconds()),uj=(cj.range,sj(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qw)},(e,t)=>{e.setTime(+e+t*Zw)},(e,t)=>(t-e)/Zw,e=>e.getMinutes())),dj=(uj.range,sj(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zw)},(e,t)=>(t-e)/Zw,e=>e.getUTCMinutes())),hj=(dj.range,sj(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qw-e.getMinutes()*Zw)},(e,t)=>{e.setTime(+e+t*ej)},(e,t)=>(t-e)/ej,e=>e.getHours())),fj=(hj.range,sj(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ej)},(e,t)=>(t-e)/ej,e=>e.getUTCHours())),pj=(fj.range,sj(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zw)/tj,e=>e.getDate()-1)),mj=(pj.range,sj(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tj,e=>e.getUTCDate()-1)),gj=(mj.range,sj(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/tj,e=>Math.floor(e/tj)));gj.range;function vj(e){return sj(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zw)/nj)}const yj=vj(0),xj=vj(1),bj=vj(2),wj=vj(3),jj=vj(4),_j=vj(5),Nj=vj(6);yj.range,xj.range,bj.range,wj.range,jj.range,_j.range,Nj.range;function kj(e){return sj(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/nj)}const Sj=kj(0),Aj=kj(1),Oj=kj(2),Cj=kj(3),Pj=kj(4),Ej=kj(5),Tj=kj(6),Dj=(Sj.range,Aj.range,Oj.range,Cj.range,Pj.range,Ej.range,Tj.range,sj(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Ij=(Dj.range,sj(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Mj=(Ij.range,sj(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Mj.every=e=>isFinite(e=Math.floor(e))&&e>0?sj(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;Mj.range;const Rj=sj(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rj.every=e=>isFinite(e=Math.floor(e))&&e>0?sj(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;Rj.range;function Lj(e,t,n,r,a,o){const i=[[cj,1,Qw],[cj,5,5e3],[cj,15,15e3],[cj,30,3e4],[o,1,Zw],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,ej],[a,3,108e5],[a,6,216e5],[a,12,432e5],[r,1,tj],[r,2,1728e5],[n,1,nj],[t,1,rj],[t,3,7776e6],[e,1,aj]];function s(t,n,r){const a=Math.abs(n-t)/r,o=qx(e=>{let[,,t]=e;return t}).right(i,a);if(o===i.length)return e.every(Bx(t/aj,n/aj,r));if(0===o)return lj.every(Math.max(Bx(t,n,r),1));const[s,l]=i[a/i[o-1][2]<i[o][2]/a?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const a=n&&"function"===typeof n.range?n:s(e,t,n),o=a?a.range(e,+t+1):[];return r?o.reverse():o},s]}const[Fj,zj]=Lj(Rj,Ij,Sj,gj,fj,dj),[Bj,Uj]=Lj(Mj,Dj,yj,pj,hj,uj);function Wj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hj(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Vj,Kj,$j,Gj={"-":"",_:" ",0:"0"},Yj=/^\s*\d+/,Jj=/^%/,Xj=/[\\^$*+?|[\]().{}]/g;function Qj(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function Zj(e){return e.replace(Xj,"\\$&")}function e_(e){return new RegExp("^(?:"+e.map(Zj).join("|")+")","i")}function t_(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function n_(e,t,n){var r=Yj.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function r_(e,t,n){var r=Yj.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function a_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function o_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function i_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function s_(e,t,n){var r=Yj.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function l_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function c_(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function u_(e,t,n){var r=Yj.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function d_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function h_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function f_(e,t,n){var r=Yj.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function p_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function m_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function g_(e,t,n){var r=Yj.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function v_(e,t,n){var r=Yj.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function y_(e,t,n){var r=Yj.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function x_(e,t,n){var r=Jj.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function b_(e,t,n){var r=Yj.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function w_(e,t,n){var r=Yj.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function j_(e,t){return Qj(e.getDate(),t,2)}function __(e,t){return Qj(e.getHours(),t,2)}function N_(e,t){return Qj(e.getHours()%12||12,t,2)}function k_(e,t){return Qj(1+pj.count(Mj(e),e),t,3)}function S_(e,t){return Qj(e.getMilliseconds(),t,3)}function A_(e,t){return S_(e,t)+"000"}function O_(e,t){return Qj(e.getMonth()+1,t,2)}function C_(e,t){return Qj(e.getMinutes(),t,2)}function P_(e,t){return Qj(e.getSeconds(),t,2)}function E_(e){var t=e.getDay();return 0===t?7:t}function T_(e,t){return Qj(yj.count(Mj(e)-1,e),t,2)}function D_(e){var t=e.getDay();return t>=4||0===t?jj(e):jj.ceil(e)}function I_(e,t){return e=D_(e),Qj(jj.count(Mj(e),e)+(4===Mj(e).getDay()),t,2)}function M_(e){return e.getDay()}function R_(e,t){return Qj(xj.count(Mj(e)-1,e),t,2)}function L_(e,t){return Qj(e.getFullYear()%100,t,2)}function F_(e,t){return Qj((e=D_(e)).getFullYear()%100,t,2)}function z_(e,t){return Qj(e.getFullYear()%1e4,t,4)}function B_(e,t){var n=e.getDay();return Qj((e=n>=4||0===n?jj(e):jj.ceil(e)).getFullYear()%1e4,t,4)}function U_(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qj(t/60|0,"0",2)+Qj(t%60,"0",2)}function W_(e,t){return Qj(e.getUTCDate(),t,2)}function q_(e,t){return Qj(e.getUTCHours(),t,2)}function H_(e,t){return Qj(e.getUTCHours()%12||12,t,2)}function V_(e,t){return Qj(1+mj.count(Rj(e),e),t,3)}function K_(e,t){return Qj(e.getUTCMilliseconds(),t,3)}function $_(e,t){return K_(e,t)+"000"}function G_(e,t){return Qj(e.getUTCMonth()+1,t,2)}function Y_(e,t){return Qj(e.getUTCMinutes(),t,2)}function J_(e,t){return Qj(e.getUTCSeconds(),t,2)}function X_(e){var t=e.getUTCDay();return 0===t?7:t}function Q_(e,t){return Qj(Sj.count(Rj(e)-1,e),t,2)}function Z_(e){var t=e.getUTCDay();return t>=4||0===t?Pj(e):Pj.ceil(e)}function eN(e,t){return e=Z_(e),Qj(Pj.count(Rj(e),e)+(4===Rj(e).getUTCDay()),t,2)}function tN(e){return e.getUTCDay()}function nN(e,t){return Qj(Aj.count(Rj(e)-1,e),t,2)}function rN(e,t){return Qj(e.getUTCFullYear()%100,t,2)}function aN(e,t){return Qj((e=Z_(e)).getUTCFullYear()%100,t,2)}function oN(e,t){return Qj(e.getUTCFullYear()%1e4,t,4)}function iN(e,t){var n=e.getUTCDay();return Qj((e=n>=4||0===n?Pj(e):Pj.ceil(e)).getUTCFullYear()%1e4,t,4)}function sN(){return"+0000"}function lN(){return"%"}function cN(e){return+e}function uN(e){return Math.floor(+e/1e3)}function dN(e){return new Date(e)}function hN(e){return e instanceof Date?+e:+new Date(+e)}function fN(e,t,n,r,a,o,i,s,l,c){var u=ew(),d=u.invert,h=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),b=c("%Y");function w(e){return(l(e)<e?f:s(e)<e?p:i(e)<e?m:o(e)<e?g:r(e)<e?a(e)<e?v:y:n(e)<e?x:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,hN)):h().map(dN)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(bw(n,e)):u},u.copy=function(){return Qb(u,fN(e,t,n,r,a,o,i,s,l,c))},u}function pN(){return zy.apply(fN(Bj,Uj,Mj,Dj,yj,pj,hj,uj,cj,Kj).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mN(){return zy.apply(fN(Fj,zj,Rj,Ij,Sj,mj,fj,dj,cj,$j).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gN(){var e,t,n,r,a,o=0,i=1,s=Gb,l=!1;function c(t){return null==t||isNaN(t=+t)?a:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(a){return arguments.length?([o,i]=a,e=r(o=+o),t=r(i=+i),n=e===t?0:1/(t-e),c):[o,i]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(Hb),c.rangeRound=u(Vb),c.unknown=function(e){return arguments.length?(a=e,c):a},function(a){return r=a,e=a(o),t=a(i),n=e===t?0:1/(t-e),c}}function vN(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yN(){var e=vw(gN()(Gb));return e.copy=function(){return vN(e,yN())},By.apply(e,arguments)}function xN(){var e=Aw(gN()).domain([1,10]);return e.copy=function(){return vN(e,xN()).base(e.base())},By.apply(e,arguments)}function bN(){var e=Ew(gN());return e.copy=function(){return vN(e,bN()).constant(e.constant())},By.apply(e,arguments)}function wN(){var e=Rw(gN());return e.copy=function(){return vN(e,wN()).exponent(e.exponent())},By.apply(e,arguments)}function jN(){return wN.apply(null,arguments).exponent(.5)}function _N(){var e=[],t=Gb;function n(n){if(null!=n&&!isNaN(n=+n))return t((Gx(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Ux),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>$w(e,r/t))},n.copy=function(){return _N(t).domain(e)},By.apply(n,arguments)}function NN(){var e,t,n,r,a,o,i,s=0,l=.5,c=1,u=1,d=Gb,h=!1;function f(e){return isNaN(e=+e)?i:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:a),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,a;return arguments.length?([n,r,a]=t,d=function(e,t){void 0===t&&(t=e,e=Hb);for(var n=0,r=t.length-1,a=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,a]),f):[d(0),d(.5),d(1)]}}return f.domain=function(i){return arguments.length?([s,l,c]=i,e=o(s=+s),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,f):[s,l,c]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(Hb),f.rangeRound=p(Vb),f.unknown=function(e){return arguments.length?(i=e,f):i},function(i){return o=i,e=i(s),t=i(l),n=i(c),r=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function kN(){var e=vw(NN()(Gb));return e.copy=function(){return vN(e,kN())},By.apply(e,arguments)}function SN(){var e=Aw(NN()).domain([.1,1,10]);return e.copy=function(){return vN(e,SN()).base(e.base())},By.apply(e,arguments)}function AN(){var e=Ew(NN());return e.copy=function(){return vN(e,AN()).constant(e.constant())},By.apply(e,arguments)}function ON(){var e=Rw(NN());return e.copy=function(){return vN(e,ON()).exponent(e.exponent())},By.apply(e,arguments)}function CN(){return ON.apply(null,arguments).exponent(.5)}function PN(e,t){if((a=e.length)>1)for(var n,r,a,o=1,i=e[t[0]],s=i.length;o<a;++o)for(r=i,i=e[t[o]],n=0;n<s;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){Vj=function(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,l=e.shortMonths,c=e_(a),u=t_(a),d=e_(o),h=t_(o),f=e_(i),p=t_(i),m=e_(s),g=t_(s),v=e_(l),y=t_(l),x={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:j_,e:j_,f:A_,g:F_,G:B_,H:__,I:N_,j:k_,L:S_,m:O_,M:C_,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:cN,s:uN,S:P_,u:E_,U:T_,V:I_,w:M_,W:R_,x:null,X:null,y:L_,Y:z_,Z:U_,"%":lN},b={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:W_,e:W_,f:$_,g:aN,G:iN,H:q_,I:H_,j:V_,L:K_,m:G_,M:Y_,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:cN,s:uN,S:J_,u:X_,U:Q_,V:eN,w:tN,W:nN,x:null,X:null,y:rN,Y:oN,Z:sN,"%":lN},w={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return N(e,t,n,r)},d:h_,e:h_,f:y_,g:l_,G:s_,H:p_,I:p_,j:f_,L:v_,m:d_,M:m_,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:u_,Q:b_,s:w_,S:g_,u:r_,U:a_,V:o_,w:n_,W:i_,x:function(e,t,r){return N(e,n,t,r)},X:function(e,t,n){return N(e,r,t,n)},y:l_,Y:s_,Z:c_,"%":x_};function j(e,t){return function(n){var r,a,o,i=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(i.push(e.slice(l,s)),null!=(a=Gj[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),l=s+1);return i.push(e.slice(l,s)),i.join("")}}function _(e,t){return function(n){var r,a,o=Hj(1900,void 0,1);if(N(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(r=qj(Hj(o.y,0,1))).getUTCDay(),r=a>4||0===a?Aj.ceil(r):Aj(r),r=mj.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(a=(r=Wj(Hj(o.y,0,1))).getDay(),r=a>4||0===a?xj.ceil(r):xj(r),r=pj.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?qj(Hj(o.y,0,1)).getUTCDay():Wj(Hj(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,qj(o)):Wj(o)}}function N(e,t,n,r){for(var a,o,i=0,s=t.length,l=n.length;i<s;){if(r>=l)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=w[a in Gj?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return x.x=j(n,x),x.X=j(r,x),x.c=j(t,x),b.x=j(n,b),b.X=j(r,b),b.c=j(t,b),{format:function(e){var t=j(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}(e),Kj=Vj.format,Vj.parse,$j=Vj.utcFormat,Vj.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function EN(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function TN(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function DN(e,t){return e[t]}function IN(e){const t=[];return t.key=e,t}var MN=n(2780),RN=n.n(MN),LN=n(7282),FN=n.n(LN),zN=n(9113),BN=n.n(zN),UN=n(9418),WN=n.n(UN),qN=n(4441),HN=n.n(qN);function VN(e){return function(e){if(Array.isArray(e))return KN(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return KN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KN(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $N=function(e){return e},GN={"@@functional/placeholder":!0},YN=function(e){return e===GN},JN=function(e){return function t(){return 0===arguments.length||1===arguments.length&&YN(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},XN=function e(t,n){return 1===t?n:JN(function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=a.filter(function(e){return e!==GN}).length;return i>=t?n.apply(void 0,a):e(t-i,JN(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=a.map(function(e){return YN(e)?t.shift():e});return n.apply(void 0,VN(o).concat(t))}))})},QN=function(e){return XN(e.length,e)},ZN=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},ek=QN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),tk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return $N;var r=t.reverse(),a=r[0],o=r.slice(1);return function(){return o.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}},nk=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},rk=function(e){var t=null,n=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t&&a.every(function(e,n){return e===t[n]})?n:(t=a,n=e.apply(void 0,a))}};var ak=QN(function(e,t,n){var r=+e;return r+n*(+t-r)}),ok=QN(function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)}),ik=QN(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const sk={rangeStep:function(e,t,n){for(var r=new(HN())(e),a=0,o=[];r.lt(t)&&a<1e5;)o.push(r.toNumber()),r=r.add(n),a++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new(HN())(e).abs().log(10).toNumber())+1},interpolateNumber:ak,uninterpolateNumber:ok,uninterpolateTruncation:ik};function lk(e){return function(e){if(Array.isArray(e))return dk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||uk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ck(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(YD){a=!0,o=YD}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||uk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uk(e,t){if(e){if("string"===typeof e)return dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dk(e,t):void 0}}function dk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hk(e){var t=ck(e,2),n=t[0],r=t[1],a=n,o=r;return n>r&&(a=r,o=n),[a,o]}function fk(e,t,n){if(e.lte(0))return new(HN())(0);var r=sk.getDigitCount(e.toNumber()),a=new(HN())(10).pow(r),o=e.div(a),i=1!==r?.05:.1,s=new(HN())(Math.ceil(o.div(i).toNumber())).add(n).mul(i).mul(a);return t?s:new(HN())(Math.ceil(s))}function pk(e,t,n){var r=1,a=new(HN())(e);if(!a.isint()&&n){var o=Math.abs(e);o<1?(r=new(HN())(10).pow(sk.getDigitCount(e)-1),a=new(HN())(Math.floor(a.div(r).toNumber())).mul(r)):o>1&&(a=new(HN())(Math.floor(e)))}else 0===e?a=new(HN())(Math.floor((t-1)/2)):n||(a=new(HN())(Math.floor(e)));var i=Math.floor((t-1)/2);return tk(ek(function(e){return a.add(new(HN())(e-i).mul(r)).toNumber()}),ZN)(0,t)}function mk(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(HN())(0),tickMin:new(HN())(0),tickMax:new(HN())(0)};var o,i=fk(new(HN())(t).sub(e).div(n-1),r,a);o=e<=0&&t>=0?new(HN())(0):(o=new(HN())(e).add(t).div(2)).sub(new(HN())(o).mod(i));var s=Math.ceil(o.sub(e).div(i).toNumber()),l=Math.ceil(new(HN())(t).sub(o).div(i).toNumber()),c=s+l+1;return c>n?mk(e,t,n,r,a+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:i,tickMin:o.sub(new(HN())(s).mul(i)),tickMax:o.add(new(HN())(l).mul(i))})}var gk=rk(function(e){var t=ck(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),s=ck(hk([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(lk(ZN(0,a-1).map(function(){return 1/0}))):[].concat(lk(ZN(0,a-1).map(function(){return-1/0})),[c]);return n>r?nk(u):u}if(l===c)return pk(l,a,o);var d=mk(l,c,i,o),h=d.step,f=d.tickMin,p=d.tickMax,m=sk.rangeStep(f,p.add(new(HN())(.1).mul(h)),h);return n>r?nk(m):m}),vk=(rk(function(e){var t=ck(e,2),n=t[0],r=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Math.max(a,2),s=ck(hk([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return pk(l,a,o);var u=fk(new(HN())(c).sub(l).div(i-1),o,0),d=tk(ek(function(e){return new(HN())(l).add(new(HN())(e).mul(u)).toNumber()}),ZN)(0,i).filter(function(e){return e>=l&&e<=c});return n>r?nk(d):d}),rk(function(e,t){var n=ck(e,2),r=n[0],a=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=ck(hk([r,a]),2),s=i[0],l=i[1];if(s===-1/0||l===1/0)return[r,a];if(s===l)return[s];var c=Math.max(t,2),u=fk(new(HN())(l).sub(s).div(c-1),o,0),d=[].concat(lk(sk.rangeStep(new(HN())(s),new(HN())(l).sub(new(HN())(.99).mul(u)),u)),[l]);return r>a?nk(d):d})),yk=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xk(e){return xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xk(e)}function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bk.apply(this,arguments)}function wk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _k(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pk(r.key),r)}}function kk(e,t,n){return t=Ak(t),function(e,t){if(t&&("object"===xk(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sk()?Reflect.construct(t,n||[],Ak(e).constructor):t.apply(e,n))}function Sk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Sk=function(){return!!e})()}function Ak(e){return Ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ak(e)}function Ok(e,t){return Ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ok(e,t)}function Ck(e,t,n){return(t=Pk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pk(e){var t=function(e,t){if("object"!=xk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xk(t)?t:t+""}var Ek=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),kk(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ok(e,t)}(n,e),r=n,a=[{key:"render",value:function(){var e=this.props,n=e.offset,r=e.layout,a=e.width,o=e.dataKey,i=e.data,s=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=_k(e,yk),d=cp(u,!1);"x"===this.props.direction&&"number"!==l.type&&kp(!1);var h=i.map(function(e){var i=s(e,o),u=i.x,h=i.y,f=i.value,p=i.errorVal;if(!p)return null;var m,g,v=[];if(Array.isArray(p)){var y=wk(p,2);m=y[0],g=y[1]}else m=g=p;if("vertical"===r){var x=l.scale,b=h+n,w=b+a,j=b-a,_=x(f-m),N=x(f+g);v.push({x1:N,y1:w,x2:N,y2:j}),v.push({x1:_,y1:b,x2:N,y2:b}),v.push({x1:_,y1:w,x2:_,y2:j})}else if("horizontal"===r){var k=c.scale,S=u+n,A=S-a,O=S+a,C=k(f-m),P=k(f+g);v.push({x1:A,y1:P,x2:O,y2:P}),v.push({x1:S,y1:C,x2:S,y2:P}),v.push({x1:A,y1:C,x2:O,y2:C})}return t.createElement(Dp,bk({className:"recharts-errorBar",key:"bar-".concat(v.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),v.map(function(e){return t.createElement("line",bk({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return t.createElement(Dp,{className:"recharts-errorBars"},h)}}],a&&Nk(r.prototype,a),o&&Nk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);function Tk(e){return Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tk(e)}function Dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ik(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dk(Object(n),!0).forEach(function(t){Mk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mk(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Tk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tk(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ck(Ek,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Ck(Ek,"displayName","ErrorBar");var Rk=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,a=e.legendContent,o=ap(t,Jg);if(!o)return null;var i,s=Jg.defaultProps,l=void 0!==s?Ik(Ik({},s),o.props):{};return i=o.props&&o.props.payload?o.props&&o.props.payload:"children"===a?(n||[]).reduce(function(e,t){var n=t.item,r=t.props,a=r.sectors||r.data||[];return e.concat(a.map(function(e){return{type:o.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?Ik(Ik({},n),t.props):{},a=r.dataKey,o=r.name,i=r.legendType;return{inactive:r.hide,dataKey:a,type:l.iconType||i||"square",color:Vk(t),value:o||a,payload:r}}),Ik(Ik(Ik({},l),Jg.getWithHeight(o,r)),{},{payload:i,item:o})};function Lk(e){return Lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lk(e)}function Fk(e){return function(e){if(Array.isArray(e))return zk(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return zk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bk(Object(n),!0).forEach(function(t){Wk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wk(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Lk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lk(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qk(e,t,n){return jf()(e)||jf()(t)?n:Sf(t)?yf()(e,t,n):Rf()(t)?t(e):n}function Hk(e,t,n,r){var a=BN()(e,function(e){return qk(e,t)});if("number"===n){var o=a.filter(function(e){return kf(e)||parseFloat(e)});return o.length?[FN()(o),RN()(o)]:[1/0,-1/0]}return(r?a.filter(function(e){return!jf()(e)}):a).map(function(e){return Sf(e)||e instanceof Date?e:""})}var Vk=function(e){var t,n,r=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?Uk(Uk({},e.type.defaultProps),e.props):e.props,o=a.stroke,i=a.fill;switch(r){case"Line":n=o;break;case"Area":case"Radar":n=o&&"none"!==o?o:i;break;default:n=i}return n},Kk=function(e,t,n,r,a){var o=rp(t.props.children,Ek).filter(function(e){return function(e,t,n){return!!jf()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,a,e.props.direction)});if(o&&o.length){var i=o.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=qk(t,n);if(jf()(r))return e;var a=Array.isArray(r)?[FN()(r),RN()(r)]:[r,r],o=i.reduce(function(e,n){var r=qk(t,n,0),o=a[0]-Math.abs(Array.isArray(r)?r[0]:r),i=a[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]},[1/0,-1/0])}return null},$k=function(e,t,n,r,a){var o=t.map(function(t){var o=t.props.dataKey;return"number"===n&&o&&Kk(e,t,o,r)||Hk(e,o,n,a)});if("number"===n)return o.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return o.reduce(function(e,t){for(var n=0,r=t.length;n<r;n++)i[t[n]]||(i[t[n]]=!0,e.push(t[n]));return e},[])},Gk=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Yk=function(e,t,n,r){if(r)return e.map(function(e){return e.coordinate});var a,o,i=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===n&&(o=!0),e.coordinate});return a||i.push(t),o||i.push(n),i},Jk=function(e,t,n){if(!e)return null;var r=e.scale,a=e.duplicateDomain,o=e.type,i=e.range,s="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===e.axisType&&(null===i||void 0===i?void 0:i.length)>=2?2*_f(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=a?a.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!gf()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:a?a[e]:e,index:t,offset:l}})},Xk=new WeakMap,Qk=function(e,t){if("function"!==typeof t)return e;Xk.has(e)||Xk.set(e,new WeakMap);var n=Xk.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Zk=1e-4,eS={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,o=0,i=0;i<t;++i){var s=gf()(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1]):(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,a,o=0,i=e[0].length;o<i;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}PN(e,t)}},none:PN,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,a=e[t[0]],o=a.length;r<o;++r){for(var i=0,s=0;i<n;++i)s+=e[i][r][1]||0;a[r][1]+=a[r][0]=-s/2}PN(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,a,o=0,i=1;i<r;++i){for(var s=0,l=0,c=0;s<a;++s){for(var u=e[t[s]],d=u[i][1]||0,h=(d-(u[i-1][1]||0))/2,f=0;f<s;++f){var p=e[t[f]];h+=(p[i][1]||0)-(p[i-1][1]||0)}l+=d,c+=h*d}n[i-1][1]+=n[i-1][0]=o,l&&(o-=c/l)}n[i-1][1]+=n[i-1][0]=o,PN(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var a=0,o=0;o<t;++o){var i=gf()(e[o][n][1])?e[o][n][0]:e[o][n][1];i>=0?(e[o][n][0]=a,e[o][n][1]=a+i,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},tS=function(e,t,n){var r=t.map(function(e){return e.props.dataKey}),a=eS[n],o=function(){var e=Km([]),t=TN,n=PN,r=DN;function a(a){var o,i,s=Array.from(e.apply(this,arguments),IN),l=s.length,c=-1;for(const e of a)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(e,s[o].key,c,a)]).data=e;for(o=0,i=EN(t(s));o<l;++o)s[i[o]].index=o;return n(s,i),s}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:Km(Array.from(t)),a):e},a.value=function(e){return arguments.length?(r="function"===typeof e?e:Km(+e),a):r},a.order=function(e){return arguments.length?(t=null==e?TN:"function"===typeof e?e:Km(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(n=null==e?PN:e,a):n},a}().keys(r).value(function(e,t){return+qk(e,t,0)}).order(TN).offset(a);return o(e)};function nS(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,o=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!jf()(a[t.dataKey])){var s=Tf(n,"value",a[t.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=qk(a,jf()(i)?t.dataKey:i);return jf()(l)?null:t.scale(l)}var rS=function(e){var t=e.axis,n=e.ticks,r=e.offset,a=e.bandSize,o=e.entry,i=e.index;if("category"===t.type)return n[i]?n[i].coordinate+r:null;var s=qk(o,t.dataKey,t.domain[i]);return jf()(s)?null:t.scale(s)-a/2+r},aS=function(e,t,n){return Object.keys(e).reduce(function(r,a){var o=e[a].stackedData.reduce(function(e,r){var a=r.slice(t,n+1).reduce(function(e,t){return[FN()(t.concat([e[0]]).filter(kf)),RN()(t.concat([e[1]]).filter(kf))]},[1/0,-1/0]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},oS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sS=function(e,t,n){if(Rf()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(kf(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(oS.test(e[0])){var a=+oS.exec(e[0])[1];r[0]=t[0]-a}else Rf()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(kf(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(iS.test(e[1])){var o=+iS.exec(e[1])[1];r[1]=t[1]+o}else Rf()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},lS=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var a=_p()(t,function(e){return e.coordinate}),o=1/0,i=1,s=a.length;i<s;i++){var l=a[i],c=a[i-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},cS=function(e,t,n){return e&&e.length?WN()(e,yf()(n,"type.defaultProps.domain"))?t:e:t},uS=function(e,t){var n=e.type.defaultProps?Uk(Uk({},e.type.defaultProps),e.props):e.props,r=n.dataKey,a=n.name,o=n.unit,i=n.formatter,s=n.tooltipType,l=n.chartType,c=n.hide;return Uk(Uk({},cp(e,!1)),{},{dataKey:r,unit:o,formatter:i,name:a||r,color:Vk(e),value:qk(t,r),type:s,payload:t,chartType:l,hide:c})};function dS(e){return dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dS(e)}function hS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hS(Object(n),!0).forEach(function(t){pS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pS(e,t,n){return t=function(e){var t=function(e,t){if("object"!=dS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dS(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mS=["Webkit","Moz","O","ms"];function gS(e){return gS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gS(e)}function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vS.apply(this,arguments)}function yS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yS(Object(n),!0).forEach(function(t){kS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SS(r.key),r)}}function wS(e,t,n){return t=_S(t),function(e,t){if(t&&("object"===gS(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jS()?Reflect.construct(t,n||[],_S(e).constructor):t.apply(e,n))}function jS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(jS=function(){return!!e})()}function _S(e){return _S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_S(e)}function NS(e,t){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},NS(e,t)}function kS(e,t,n){return(t=SS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SS(e){var t=function(e,t){if("object"!=gS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gS(t)?t:t+""}var AS=function(e){return e.changedTouches&&!!e.changedTouches.length},OS=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),kS(t=wS(this,n,[e]),"handleDrag",function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)}),kS(t,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])}),kS(t,"handleDragEnd",function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=t.props,n=e.endIndex,r=e.onDragEnd,a=e.startIndex;null===r||void 0===r||r({endIndex:n,startIndex:a})}),t.detachDragEndListener()}),kS(t,"handleLeaveWrapper",function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))}),kS(t,"handleEnterSlideOrTraveller",function(){t.setState({isTextActive:!0})}),kS(t,"handleLeaveSlideOrTraveller",function(){t.setState({isTextActive:!1})}),kS(t,"handleSlideDragStart",function(e){var n=AS(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()}),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state={},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NS(e,t)}(n,e),r=n,a=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,r=e.endX,a=this.state.scaleValues,o=this.props,i=o.gap,s=o.data.length-1,l=Math.min(t,r),c=Math.max(t,r),u=n.getIndexInRange(a,l),d=n.getIndexInRange(a,c);return{startIndex:u-u%i,endIndex:d===s?s:d-d%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,a=t.dataKey,o=qk(n[e],a,e);return Rf()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,a=t.endX,o=this.props,i=o.x,s=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,d=o.onChange,h=e.pageX-n;h>0?h=Math.min(h,i+s-l-a,i+s-l-r):h<0&&(h=Math.max(h,i-r,i-a));var f=this.getIndex({startX:r+h,endX:a+h});f.startIndex===c&&f.endIndex===u||!d||d(f),this.setState({startX:r+h,endX:a+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=AS(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,a=t.endX,o=t.startX,i=this.state[r],s=this.props,l=s.x,c=s.width,u=s.travellerWidth,d=s.onChange,h=s.gap,f=s.data,p={startX:this.state.startX,endX:this.state.endX},m=e.pageX-n;m>0?m=Math.min(m,l+c-u-i):m<0&&(m=Math.max(m,l-i)),p[r]=i+m;var g=this.getIndex(p),v=g.startIndex,y=g.endIndex;this.setState(kS(kS({},r,i+m),"brushMoveStartX",e.pageX),function(){d&&function(){var e=f.length-1;return"startX"===r&&(a>o?v%h===0:y%h===0)||a<o&&y===e||"endX"===r&&(a>o?y%h===0:v%h===0)||a>o&&y===e}()&&d(g)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,a=r.scaleValues,o=r.startX,i=r.endX,s=this.state[t],l=a.indexOf(s);if(-1!==l){var c=l+e;if(!(-1===c||c>=a.length)){var u=a[c];"startX"===t&&u>=i||"endX"===t&&u<=o||this.setState(kS({},t,u),function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,n=e.x,r=e.y,a=e.width,o=e.height,i=e.fill,s=e.stroke;return t.createElement("rect",{stroke:s,fill:i,x:n,y:r,width:a,height:o})}},{key:"renderPanorama",value:function(){var e=this.props,n=e.x,r=e.y,a=e.width,o=e.height,i=e.data,s=e.children,l=e.padding,c=t.Children.only(s);return c?t.cloneElement(c,{x:n,y:r,width:a,height:o,margin:l,compact:!0,data:i}):null}},{key:"renderTravellerLayer",value:function(e,r){var a,o,i=this,s=this.props,l=s.y,c=s.travellerWidth,u=s.height,d=s.traveller,h=s.ariaLabel,f=s.data,p=s.startIndex,m=s.endIndex,g=Math.max(e,this.props.x),v=xS(xS({},cp(this.props,!1)),{},{x:g,y:l,width:c,height:u}),y=h||"Min value: ".concat(null===(a=f[p])||void 0===a?void 0:a.name,", Max value: ").concat(null===(o=f[m])||void 0===o?void 0:o.name);return t.createElement(Dp,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),i.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(d,v))}},{key:"renderSlide",value:function(e,n){var r=this.props,a=r.y,o=r.height,i=r.stroke,s=r.travellerWidth,l=Math.min(e,n)+s,c=Math.max(Math.abs(n-e)-s,0);return t.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:i,fillOpacity:.2,x:l,y:a,width:c,height:o})}},{key:"renderText",value:function(){var e=this.props,n=e.startIndex,r=e.endIndex,a=e.y,o=e.height,i=e.travellerWidth,s=e.stroke,l=this.state,c=l.startX,u=l.endX,d={pointerEvents:"none",fill:s};return t.createElement(Dp,{className:"recharts-brush-texts"},t.createElement(Dx,vS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:a+o/2},d),this.getTextOfTick(n)),t.createElement(Dx,vS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+i+5,y:a+o/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,n=e.data,r=e.className,a=e.children,o=e.x,i=e.y,s=e.width,l=e.height,u=e.alwaysShowText,d=this.state,h=d.startX,f=d.endX,p=d.isTextActive,m=d.isSlideMoving,g=d.isTravellerMoving,v=d.isTravellerFocused;if(!n||!n.length||!kf(o)||!kf(i)||!kf(s)||!kf(l)||s<=0||l<=0)return null;var y=c("recharts-brush",r),x=1===t.Children.count(a),b=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,function(e){return e.toUpperCase()}),r=mS.reduce(function(e,r){return fS(fS({},e),{},pS({},r+n,t))},{});return r[e]=t,r}("userSelect","none");return t.createElement(Dp,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(h,f),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(f,"endX"),(p||m||g||v||u)&&this.renderText())}}],o=[{key:"renderDefaultTraveller",value:function(e){var n=e.x,r=e.y,a=e.width,o=e.height,i=e.stroke,s=Math.floor(r+o/2)-1;return t.createElement(t.Fragment,null,t.createElement("rect",{x:n,y:r,width:a,height:o,fill:i,stroke:"none"}),t.createElement("line",{x1:n+1,y1:s,x2:n+a-1,y2:s,fill:"none",stroke:"#fff"}),t.createElement("line",{x1:n+1,y1:s+2,x2:n+a-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):Rf()(e)?e(r):n.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,a=e.x,o=e.travellerWidth,i=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||i!==t.prevUpdateId)return xS({prevData:n,prevTravellerWidth:o,prevUpdateId:i,prevX:a,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,a=e.x,o=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=Jy().domain(wp()(0,s)).range([a,a+o-i]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:a,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||a!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([a,a+r-o]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:n,prevTravellerWidth:o,prevUpdateId:i,prevX:a,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var a=Math.floor((n+r)/2);e[a]>t?r=a:n=a}return t>=e[r]?r:n}}],a&&bS(r.prototype,a),o&&bS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);function CS(e){return CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CS(e)}function PS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ES(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PS(Object(n),!0).forEach(function(t){TS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function TS(e,t,n){return t=function(e){var t=function(e,t){if("object"!=CS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=CS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CS(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}kS(OS,"displayName","Brush"),kS(OS,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var DS=Math.PI/180,IS=function(e){return 180*e/Math.PI},MS=function(e,t,n,r){return{x:e+Math.cos(-DS*r)*n,y:t+Math.sin(-DS*r)*n}},RS=function(e,t){var n=e.x,r=e.y,a=t.cx,o=t.cy,i=function(e,t){var n=e.x,r=e.y,a=t.x,o=t.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-o,2))}({x:n,y:r},{x:a,y:o});if(i<=0)return{radius:i};var s=(n-a)/i,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:i,angle:IS(l),angleInRadian:l}},LS=function(e,t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(a,o)},FS=function(e,t){var n=e.x,r=e.y,a=RS({x:n,y:r},t),o=a.radius,i=a.angle,s=t.innerRadius,l=t.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),a=Math.floor(n/360),o=Math.min(r,a);return{startAngle:t-360*o,endAngle:n-360*o}}(t),d=u.startAngle,h=u.endAngle,f=i;if(d<=h){for(;f>h;)f-=360;for(;f<d;)f+=360;c=f>=d&&f<=h}else{for(;f>d;)f-=360;for(;f<h;)f+=360;c=f>=h&&f<=d}return c?ES(ES({},t),{},{radius:o,angle:LS(f,t)}):null};function zS(e){return zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zS(e)}var BS=["offset"];function US(e){return function(e){if(Array.isArray(e))return WS(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return WS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qS(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function HS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HS(Object(n),!0).forEach(function(t){KS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KS(e,t,n){return t=function(e){var t=function(e,t){if("object"!=zS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zS(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $S(){return $S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$S.apply(this,arguments)}var GS=function(e,n,r){var a,o,i=e.position,s=e.viewBox,l=e.offset,u=e.className,d=s,h=d.cx,f=d.cy,p=d.innerRadius,m=d.outerRadius,g=d.startAngle,v=d.endAngle,y=d.clockWise,x=(p+m)/2,b=function(e,t){return _f(t-e)*Math.min(Math.abs(t-e),360)}(g,v),w=b>=0?1:-1;"insideStart"===i?(a=g+w*l,o=y):"insideEnd"===i?(a=v-w*l,o=!y):"end"===i&&(a=v+w*l,o=y),o=b<=0?o:!o;var j=MS(h,f,x,a),_=MS(h,f,x,a+359*(o?1:-1)),N="M".concat(j.x,",").concat(j.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(o?0:1,",\n    ").concat(_.x,",").concat(_.y),k=jf()(e.id)?Of("recharts-radial-line-"):e.id;return t.createElement("text",$S({},r,{dominantBaseline:"central",className:c("recharts-radial-bar-label",u)}),t.createElement("defs",null,t.createElement("path",{id:k,d:N})),t.createElement("textPath",{xlinkHref:"#".concat(k)},n))};function YS(e){var n,r=e.offset,a=VS({offset:void 0===r?5:r},qS(e,BS)),o=a.viewBox,i=a.position,s=a.value,l=a.children,u=a.content,d=a.className,h=void 0===d?"":d,f=a.textBreakAll;if(!o||jf()(s)&&jf()(l)&&!(0,t.isValidElement)(u)&&!Rf()(u))return null;if((0,t.isValidElement)(u))return(0,t.cloneElement)(u,a);if(Rf()(u)){if(n=(0,t.createElement)(u,a),(0,t.isValidElement)(n))return n}else n=function(e){var t=e.value,n=e.formatter,r=jf()(e.children)?t:e.children;return Rf()(n)?n(r):r}(a);var p=function(e){return"cx"in e&&kf(e.cx)}(o),m=cp(a,!0);if(p&&("insideStart"===i||"insideEnd"===i||"end"===i))return GS(a,n,m);var g=p?function(e){var t=e.viewBox,n=e.offset,r=e.position,a=t,o=a.cx,i=a.cy,s=a.innerRadius,l=a.outerRadius,c=(a.startAngle+a.endAngle)/2;if("outside"===r){var u=MS(o,i,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=MS(o,i,(s+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(a):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,a=e.position,o=t,i=o.x,s=o.y,l=o.width,c=o.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,m=p*r,g=p>0?"end":"start",v=p>0?"start":"end";if("top"===a)return VS(VS({},{x:i+l/2,y:s-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===a)return VS(VS({},{x:i+l/2,y:s+c+d,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===a){var y={x:i-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return VS(VS({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===a){var x={x:i+l+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"};return VS(VS({},x),n?{width:Math.max(n.x+n.width-x.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===a?VS({x:i+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"},b):"insideRight"===a?VS({x:i+l-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===a?VS({x:i+l/2,y:s+d,textAnchor:"middle",verticalAnchor:f},b):"insideBottom"===a?VS({x:i+l/2,y:s+c-d,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===a?VS({x:i+m,y:s+d,textAnchor:v,verticalAnchor:f},b):"insideTopRight"===a?VS({x:i+l-m,y:s+d,textAnchor:g,verticalAnchor:f},b):"insideBottomLeft"===a?VS({x:i+m,y:s+c-d,textAnchor:v,verticalAnchor:h},b):"insideBottomRight"===a?VS({x:i+l-m,y:s+c-d,textAnchor:g,verticalAnchor:h},b):Ff()(a)&&(kf(a.x)||Nf(a.x))&&(kf(a.y)||Nf(a.y))?VS({x:i+Cf(a.x,l),y:s+Cf(a.y,c),textAnchor:"end",verticalAnchor:"end"},b):VS({x:i+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(a);return t.createElement(Dx,$S({className:c("recharts-label",h)},m,g,{breakAll:f}),n)}YS.displayName="Label";var JS=function(e){var t=e.cx,n=e.cy,r=e.angle,a=e.startAngle,o=e.endAngle,i=e.r,s=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,f=e.left,p=e.width,m=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(kf(p)&&kf(m)){if(kf(u)&&kf(d))return{x:u,y:d,width:p,height:m};if(kf(h)&&kf(f))return{x:h,y:f,width:p,height:m}}return kf(u)&&kf(d)?{x:u,y:d,width:0,height:0}:kf(t)&&kf(n)?{cx:t,cy:n,startAngle:a||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||s||i||0,clockWise:g}:e.viewBox?e.viewBox:{}};YS.parseViewBox=JS,YS.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var a=e.children,o=JS(e),i=rp(a,YS).map(function(e,r){return(0,t.cloneElement)(e,{viewBox:n||o,key:"label-".concat(r)})});if(!r)return i;var s=function(e,n){return e?!0===e?t.createElement(YS,{key:"label-implicit",viewBox:n}):Sf(e)?t.createElement(YS,{key:"label-implicit",viewBox:n,value:e}):(0,t.isValidElement)(e)?e.type===YS?(0,t.cloneElement)(e,{key:"label-implicit",viewBox:n}):t.createElement(YS,{key:"label-implicit",content:e,viewBox:n}):Rf()(e)?t.createElement(YS,{key:"label-implicit",content:e,viewBox:n}):Ff()(e)?t.createElement(YS,$S({viewBox:n},e,{key:"label-implicit"})):null:null}(e.label,n||o);return[s].concat(US(i))};var XS=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},QS=n(6638),ZS=n.n(QS),eA=n(8829),tA=n.n(eA),nA=function(e){return null};nA.displayName="Cell";var rA=n(7988),aA=n.n(rA);function oA(e){return oA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oA(e)}var iA=["valueAccessor"],sA=["data","dataKey","clockWise","id","textBreakAll"];function lA(e){return function(e){if(Array.isArray(e))return cA(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return cA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cA(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uA(){return uA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uA.apply(this,arguments)}function dA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dA(Object(n),!0).forEach(function(t){fA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fA(e,t,n){return t=function(e){var t=function(e,t){if("object"!=oA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oA(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pA(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var mA=function(e){return Array.isArray(e.value)?aA()(e.value):e.value};function gA(e){var n=e.valueAccessor,r=void 0===n?mA:n,a=pA(e,iA),o=a.data,i=a.dataKey,s=a.clockWise,l=a.id,c=a.textBreakAll,u=pA(a,sA);return o&&o.length?t.createElement(Dp,{className:"recharts-label-list"},o.map(function(e,n){var a=jf()(i)?r(e,n):qk(e&&e.payload,i),o=jf()(l)?{}:{id:"".concat(l,"-").concat(n)};return t.createElement(YS,uA({},cp(e,!0),u,o,{parentViewBox:e.parentViewBox,value:a,textBreakAll:c,viewBox:YS.parseViewBox(jf()(s)?e:hA(hA({},e),{},{clockWise:s})),key:"label-".concat(n),index:n}))})):null}gA.displayName="LabelList",gA.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var a=rp(e.children,gA).map(function(e,r){return(0,t.cloneElement)(e,{data:n,key:"labelList-".concat(r)})});return r?[function(e,n){return e?!0===e?t.createElement(gA,{key:"labelList-implicit",data:n}):t.isValidElement(e)||Rf()(e)?t.createElement(gA,{key:"labelList-implicit",data:n,content:e}):Ff()(e)?t.createElement(gA,uA({data:n},e,{key:"labelList-implicit"})):null:null}(e.label,n)].concat(lA(a)):a};var vA=n(5461),yA=n.n(vA),xA=n(5410),bA=n.n(xA);function wA(e){return wA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wA(e)}function jA(){return jA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jA.apply(this,arguments)}function _A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return NA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function SA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kA(Object(n),!0).forEach(function(t){AA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function AA(e,t,n){return t=function(e){var t=function(e,t){if("object"!=wA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wA(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var OA=function(e,t,n,r,a){var o,i=n-r;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-i/2,",").concat(t+a),o+="L ".concat(e+n-i/2-r,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z")},CA={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PA=function(e){var n=SA(SA({},CA),e),r=(0,t.useRef)(),a=_A((0,t.useState)(-1),2),o=a[0],i=a[1];(0,t.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(YD){}},[]);var s=n.x,l=n.y,u=n.upperWidth,d=n.lowerWidth,h=n.height,f=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,v=n.isUpdateAnimationActive;if(s!==+s||l!==+l||u!==+u||d!==+d||h!==+h||0===u&&0===d||0===h)return null;var y=c("recharts-trapezoid",f);return v?t.createElement(Ay,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:s,y:l},to:{upperWidth:u,lowerWidth:d,height:h,x:s,y:l},duration:m,animationEasing:p,isActive:v},function(e){var a=e.upperWidth,i=e.lowerWidth,s=e.height,l=e.x,c=e.y;return t.createElement(Ay,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:p},t.createElement("path",jA({},cp(n,!0),{className:y,d:OA(l,c,a,i,s),ref:r})))}):t.createElement("g",null,t.createElement("path",jA({},cp(n,!0),{className:y,d:OA(s,l,u,d,h)})))};function EA(e){return EA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EA(e)}function TA(){return TA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TA.apply(this,arguments)}function DA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DA(Object(n),!0).forEach(function(t){MA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MA(e,t,n){return t=function(e){var t=function(e,t){if("object"!=EA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=EA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EA(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RA=function(e){var t=e.cx,n=e.cy,r=e.radius,a=e.angle,o=e.sign,i=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,c=s*(i?1:-1)+r,u=Math.asin(s/c)/DS,d=l?a:a+o*u,h=l?a-o*u:a;return{center:MS(t,n,c,d),circleTangency:MS(t,n,r,d),lineTangency:MS(t,n,c*Math.cos(u*DS),h),theta:u}},LA=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,o=e.startAngle,i=function(e,t){return _f(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+i,l=MS(t,n,a,o),c=MS(t,n,a,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(o>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=MS(t,n,r,o),h=MS(t,n,r,s);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(o<=s),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},FA={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zA=function(e){var n=IA(IA({},FA),e),r=n.cx,a=n.cy,o=n.innerRadius,i=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(i<o||d===h)return null;var p,m=c("recharts-sector",f),g=i-o,v=Cf(s,g,0,!0);return p=v>0&&Math.abs(d-h)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=_f(c-l),d=RA({cx:t,cy:n,radius:a,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),h=d.circleTangency,f=d.lineTangency,p=d.theta,m=RA({cx:t,cy:n,radius:a,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,v=m.lineTangency,y=m.theta,x=s?Math.abs(l-c):Math.abs(l-c)-p-y;if(x<0)return i?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):LA({cx:t,cy:n,innerRadius:r,outerRadius:a,startAngle:l,endAngle:c});var b="M ".concat(f.x,",").concat(f.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var w=RA({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),j=w.circleTangency,_=w.lineTangency,N=w.theta,k=RA({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),S=k.circleTangency,A=k.lineTangency,O=k.theta,C=s?Math.abs(l-c):Math.abs(l-c)-N-O;if(C<0&&0===o)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(A.x,",").concat(A.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(C>180),",").concat(+(u>0),",").concat(j.x,",").concat(j.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:r,cy:a,innerRadius:o,outerRadius:i,cornerRadius:Math.min(v,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):LA({cx:r,cy:a,innerRadius:o,outerRadius:i,startAngle:d,endAngle:h}),t.createElement("path",TA({},cp(n,!0),{className:m,d:p,role:"img"}))},BA=["option","shapeType","propTransformer","activeClassName","isActive"];function UA(e){return UA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UA(e)}function WA(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(t){VA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function VA(e,t,n){return t=function(e){var t=function(e,t){if("object"!=UA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UA(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KA(e,t){return HA(HA({},t),e)}function $A(e){var n=e.shapeType,r=e.elementProps;switch(n){case"rectangle":return t.createElement(Fy,r);case"trapezoid":return t.createElement(PA,r);case"sector":return t.createElement(zA,r);case"symbols":if(function(e){return"symbols"===e}(n))return t.createElement(Ng,r);break;default:return null}}function GA(e){var n,r=e.option,a=e.shapeType,o=e.propTransformer,i=void 0===o?KA:o,s=e.activeClassName,l=void 0===s?"recharts-active-shape":s,c=e.isActive,u=WA(e,BA);if((0,t.isValidElement)(r))n=(0,t.cloneElement)(r,HA(HA({},u),function(e){return(0,t.isValidElement)(e)?e.props:e}(r)));else if(Rf()(r))n=r(u);else if(yA()(r)&&!bA()(r)){var d=i(r,u);n=t.createElement($A,{shapeType:a,elementProps:d})}else{var h=u;n=t.createElement($A,{shapeType:a,elementProps:h})}return c?t.createElement(Dp,{className:l},n):n}function YA(e,t){return null!=t&&"trapezoids"in e.props}function JA(e,t){return null!=t&&"sectors"in e.props}function XA(e,t){return null!=t&&"points"in e.props}function QA(e,t){var n,r,a=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,o=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return a&&o}function ZA(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function eO(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function tO(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=function(e,t){var n;return YA(e,t)?n="trapezoids":JA(e,t)?n="sectors":XA(e,t)&&(n="points"),n}(n,t),o=function(e,t){var n,r;return YA(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:JA(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:XA(e,t)?t.payload:{}}(n,t),i=r.filter(function(e,r){var i=WN()(o,e),s=n.props[a].filter(function(e){var r=function(e,t){var n;return YA(e,t)?n=QA:JA(e,t)?n=ZA:XA(e,t)&&(n=eO),n}(n,t);return r(e,t)}),l=n.props[a].indexOf(s[s.length-1]);return i&&r===l});return r.indexOf(i[i.length-1])}var nO=["x","y"];function rO(e){return rO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rO(e)}function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aO.apply(this,arguments)}function oO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oO(Object(n),!0).forEach(function(t){sO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sO(e,t,n){return t=function(e){var t=function(e,t){if("object"!=rO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rO(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lO(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function cO(e,t){var n=e.x,r=e.y,a=lO(e,nO),o="".concat(n),i=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(t.height||a.height),u=parseInt(c,10),d="".concat(t.width||a.width),h=parseInt(d,10);return iO(iO(iO(iO(iO({},t),a),i?{x:i}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function uO(e){return t.createElement(GA,aO({shapeType:"rectangle",propTransformer:cO,activeClassName:"recharts-active-bar"},e))}var dO,hO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof e)return e;var a=kf(n)||function(e){return jf()(e)}(n);return a?e(n,r):(a||kp(!1),t)}},fO=["value","background"];function pO(e){return pO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pO(e)}function mO(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gO.apply(this,arguments)}function vO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vO(Object(n),!0).forEach(function(t){NO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kO(r.key),r)}}function bO(e,t,n){return t=jO(t),function(e,t){if(t&&("object"===pO(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wO()?Reflect.construct(t,n||[],jO(e).constructor):t.apply(e,n))}function wO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wO=function(){return!!e})()}function jO(e){return jO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jO(e)}function _O(e,t){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_O(e,t)}function NO(e,t,n){return(t=kO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kO(e){var t=function(e,t){if("object"!=pO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pO(t)?t:t+""}var SO=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return NO(e=bO(this,n,[].concat(r)),"state",{isAnimationFinished:!1}),NO(e,"id",Of("recharts-bar-")),NO(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),NO(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_O(e,t)}(n,e),r=n,a=[{key:"renderRectanglesStatically",value:function(e){var n=this,r=this.props,a=r.shape,o=r.dataKey,i=r.activeIndex,s=r.activeBar,l=cp(this.props,!1);return e&&e.map(function(e,r){var c=r===i,u=c?s:a,d=yO(yO(yO({},l),e),{},{isActive:c,option:u,index:r,dataKey:o,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return t.createElement(Dp,gO({className:"recharts-bar-rectangle"},$f(n.props,e,r),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(r)}),t.createElement(uO,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,n=this.props,r=n.data,a=n.layout,o=n.isAnimationActive,i=n.animationBegin,s=n.animationDuration,l=n.animationEasing,c=n.animationId,u=this.state.prevData;return t.createElement(Ay,{begin:i,duration:s,isActive:o,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var o=n.t,i=r.map(function(e,t){var n=u&&u[t];if(n){var r=Ef(n.x,e.x),i=Ef(n.y,e.y),s=Ef(n.width,e.width),l=Ef(n.height,e.height);return yO(yO({},e),{},{x:r(o),y:i(o),width:s(o),height:l(o)})}if("horizontal"===a){var c=Ef(0,e.height)(o);return yO(yO({},e),{},{y:e.y+e.height-c,height:c})}var d=Ef(0,e.width)(o);return yO(yO({},e),{},{width:d})});return t.createElement(Dp,null,e.renderRectanglesStatically(i))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&WN()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,n=this.props,r=n.data,a=n.dataKey,o=n.activeIndex,i=cp(this.props.background,!1);return r.map(function(n,r){n.value;var s=n.background,l=mO(n,fO);if(!s)return null;var c=yO(yO(yO(yO(yO({},l),{},{fill:"#eee"},s),i),$f(e.props,n,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:a,index:r,className:"recharts-bar-background-rectangle"});return t.createElement(uO,gO({key:"background-bar-".concat(r),option:e.props.background,isActive:r===o},c))})}},{key:"renderErrorBar",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.data,o=r.xAxis,i=r.yAxis,s=r.layout,l=rp(r.children,Ek);if(!l)return null;var c="vertical"===s?a[0].height/2:a[0].width/2,u=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:qk(e,t)}},d={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement(Dp,d,l.map(function(e){return t.cloneElement(e,{key:"error-bar-".concat(n,"-").concat(e.props.dataKey),data:a,xAxis:o,yAxis:i,layout:s,offset:c,dataPointFormatter:u})}))}},{key:"render",value:function(){var e=this.props,n=e.hide,r=e.data,a=e.className,o=e.xAxis,i=e.yAxis,s=e.left,l=e.top,u=e.width,d=e.height,h=e.isAnimationActive,f=e.background,p=e.id;if(n||!r||!r.length)return null;var m=this.state.isAnimationFinished,g=c("recharts-bar",a),v=o&&o.allowDataOverflow,y=i&&i.allowDataOverflow,x=v||y,b=jf()(p)?this.id:p;return t.createElement(Dp,{className:g},v||y?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(b)},t.createElement("rect",{x:v?s:s-u/2,y:y?l:l-d/2,width:v?u:2*u,height:y?d:2*d}))):null,t.createElement(Dp,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(b,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,b),(!h||m)&&gA.renderCallByParent(this.props,r))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],a&&xO(r.prototype,a),o&&xO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);function AO(e){return AO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AO(e)}function OO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TO(r.key),r)}}function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function PO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CO(Object(n),!0).forEach(function(t){EO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function EO(e,t,n){return(t=TO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TO(e){var t=function(e,t){if("object"!=AO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=AO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AO(t)?t:t+""}dO=SO,NO(SO,"displayName","Bar"),NO(SO,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!im.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),NO(SO,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,o=e.xAxis,i=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,d=e.displayedData,h=e.offset,f=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!f)return null;var p=t.layout,m=n.type.defaultProps,g=void 0!==m?yO(yO({},m),n.props):n.props,v=g.dataKey,y=g.children,x=g.minPointSize,b="horizontal"===p?i:o,w=c?b.scale.domain():null,j=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return r<=0&&a>=0?0:a<0?a:r}return n[0]}({numericAxis:b}),_=rp(y,nA),N=d.map(function(e,t){var r,d,h,m,g,y;c?r=function(e,t){if(!t||2!==t.length||!kf(t[0])||!kf(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!kf(e[0])||e[0]<n)&&(a[0]=n),(!kf(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<n&&(a[1]=n),a}(c[u+t],w):(r=qk(e,v),Array.isArray(r)||(r=[j,r]));var b=hO(x,dO.defaultProps.minPointSize)(r[1],t);if("horizontal"===p){var N,k=[i.scale(r[0]),i.scale(r[1])],S=k[0],A=k[1];d=rS({axis:o,ticks:s,bandSize:a,offset:f.offset,entry:e,index:t}),h=null!==(N=null!==A&&void 0!==A?A:S)&&void 0!==N?N:void 0,m=f.size;var O=S-A;if(g=Number.isNaN(O)?0:O,y={x:d,y:i.y,width:m,height:i.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var C=_f(g||b)*(Math.abs(b)-Math.abs(g));h-=C,g+=C}}else{var P=[o.scale(r[0]),o.scale(r[1])],E=P[0],T=P[1];if(d=E,h=rS({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:e,index:t}),m=T-E,g=f.size,y={x:o.x,y:h,width:o.width,height:g},Math.abs(b)>0&&Math.abs(m)<Math.abs(b))m+=_f(m||b)*(Math.abs(b)-Math.abs(m))}return yO(yO(yO({},e),{},{x:d,y:h,width:m,height:g,value:c?r:r[1],payload:e,background:y},_&&_[t]&&_[t].props),{},{tooltipPayload:[uS(n,e)],tooltipPosition:{x:d+m/2,y:h+g/2}})});return yO({data:N,layout:p},h)});var DO=function(e,t){var n=e.x,r=e.y,a=t.x,o=t.y;return{x:Math.min(n,a),y:Math.min(r,o),width:Math.abs(a-n),height:Math.abs(o-r)}},IO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&OO(t.prototype,n),r&&OO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();EO(IO,"EPS",1e-4);var MO=function(e){var t=Object.keys(e).reduce(function(t,n){return PO(PO({},t),{},EO({},n,IO.create(e[n])))},{});return PO(PO({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,a=n.position;return ZS()(e,function(e,n){return t[n].apply(e,{bandAware:r,position:a})})},isInRange:function(e){return tA()(e,function(e,n){return t[n].isInRange(e)})}})};function RO(){return RO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RO.apply(this,arguments)}function LO(e){return LO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},LO(e)}function FO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FO(Object(n),!0).forEach(function(t){VO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function BO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KO(r.key),r)}}function UO(e,t,n){return t=qO(t),function(e,t){if(t&&("object"===LO(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,WO()?Reflect.construct(t,n||[],qO(e).constructor):t.apply(e,n))}function WO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(WO=function(){return!!e})()}function qO(e){return qO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qO(e)}function HO(e,t){return HO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},HO(e,t)}function VO(e,t,n){return(t=KO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KO(e){var t=function(e,t){if("object"!=LO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=LO(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LO(t)?t:t+""}var $O=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),UO(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HO(e,t)}(n,e),r=n,a=[{key:"render",value:function(){var e=this.props,r=e.x,a=e.y,o=e.r,i=e.alwaysShow,s=e.clipPathId,l=Sf(r),u=Sf(a);if(If(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!u)return null;var d=function(e){var t=e.x,n=e.y,r=e.xAxis,a=e.yAxis,o=MO({x:r.scale,y:a.scale}),i=o.apply({x:t,y:n},{bandAware:!0});return XS(e,"discard")&&!o.isInRange(i)?null:i}(this.props);if(!d)return null;var h=d.x,f=d.y,p=this.props,m=p.shape,g=p.className,v=zO(zO({clipPath:XS(this.props,"hidden")?"url(#".concat(s,")"):void 0},cp(this.props,!0)),{},{cx:h,cy:f});return t.createElement(Dp,{className:c("recharts-reference-dot",g)},n.renderDot(m,v),YS.renderCallByParent(this.props,{x:h-o,y:f-o,width:2*o,height:2*o}))}}],a&&BO(r.prototype,a),o&&BO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);VO($O,"displayName","ReferenceDot"),VO($O,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),VO($O,"renderDot",function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Rf()(e)?e(n):t.createElement(Qg,RO({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"}))});var GO=n(1032),YO=n.n(GO),JO=n(5915),XO=n.n(JO),QO=n(2434),ZO=n.n(QO)()(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")});var eC=(0,t.createContext)(void 0),tC=(0,t.createContext)(void 0),nC=(0,t.createContext)(void 0),rC=(0,t.createContext)({}),aC=(0,t.createContext)(void 0),oC=(0,t.createContext)(0),iC=(0,t.createContext)(0),sC=function(e){var n=e.state,r=n.xAxisMap,a=n.yAxisMap,o=n.offset,i=e.clipPathId,s=e.children,l=e.width,c=e.height,u=ZO(o);return t.createElement(eC.Provider,{value:r},t.createElement(tC.Provider,{value:a},t.createElement(rC.Provider,{value:o},t.createElement(nC.Provider,{value:u},t.createElement(aC.Provider,{value:i},t.createElement(oC.Provider,{value:c},t.createElement(iC.Provider,{value:l},s)))))))};var lC=function(e){var n=(0,t.useContext)(eC);null==n&&kp(!1);var r=n[e];return null==r&&kp(!1),r},cC=function(e){var n=(0,t.useContext)(tC);null==n&&kp(!1);var r=n[e];return null==r&&kp(!1),r},uC=function(){return(0,t.useContext)(iC)},dC=function(){return(0,t.useContext)(oC)};function hC(e){return hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hC(e)}function fC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wC(r.key),r)}}function pC(e,t,n){return t=gC(t),function(e,t){if(t&&("object"===hC(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mC()?Reflect.construct(t,n||[],gC(e).constructor):t.apply(e,n))}function mC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(mC=function(){return!!e})()}function gC(e){return gC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gC(e)}function vC(e,t){return vC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vC(e,t)}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yC(Object(n),!0).forEach(function(t){bC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bC(e,t,n){return(t=wC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wC(e){var t=function(e,t){if("object"!=hC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hC(t)?t:t+""}function jC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NC(){return NC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NC.apply(this,arguments)}function kC(e){var n=e.x,r=e.y,a=e.segment,o=e.xAxisId,i=e.yAxisId,s=e.shape,l=e.className,u=e.alwaysShow,d=(0,t.useContext)(aC),h=lC(o),f=cC(i),p=(0,t.useContext)(nC);if(!d||!p)return null;If(void 0===u,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=function(e,t,n,r,a,o,i,s,l){var c=a.x,u=a.y,d=a.width,h=a.height;if(n){var f=l.y,p=e.y.apply(f,{position:o});if(XS(l,"discard")&&!e.y.isInRange(p))return null;var m=[{x:c+d,y:p},{x:c,y:p}];return"left"===s?m.reverse():m}if(t){var g=l.x,v=e.x.apply(g,{position:o});if(XS(l,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:u+h},{x:v,y:u}];return"top"===i?y.reverse():y}if(r){var x=l.segment.map(function(t){return e.apply(t,{position:o})});return XS(l,"discard")&&YO()(x,function(t){return!e.isInRange(t)})?null:x}return null}(MO({x:h.scale,y:f.scale}),Sf(n),Sf(r),a&&2===a.length,p,e.position,h.orientation,f.orientation,e);if(!m)return null;var g=jC(m,2),v=g[0],y=v.x,x=v.y,b=g[1],w=b.x,j=b.y,_=xC(xC({clipPath:XS(e,"hidden")?"url(#".concat(d,")"):void 0},cp(e,!0)),{},{x1:y,y1:x,x2:w,y2:j});return t.createElement(Dp,{className:c("recharts-reference-line",l)},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Rf()(e)?e(n):t.createElement("line",NC({},n,{className:"recharts-reference-line-line"}))}(s,_),YS.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2;return DO({x:t,y:n},{x:r,y:a})}({x1:y,y1:x,x2:w,y2:j})))}var SC=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),pC(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vC(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){return t.createElement(kC,this.props)}}])&&fC(r.prototype,a),o&&fC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);function AC(){return AC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AC.apply(this,arguments)}function OC(e){return OC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OC(e)}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CC(Object(n),!0).forEach(function(t){RC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function EC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LC(r.key),r)}}function TC(e,t,n){return t=IC(t),function(e,t){if(t&&("object"===OC(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,DC()?Reflect.construct(t,n||[],IC(e).constructor):t.apply(e,n))}function DC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(DC=function(){return!!e})()}function IC(e){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IC(e)}function MC(e,t){return MC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},MC(e,t)}function RC(e,t,n){return(t=LC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LC(e){var t=function(e,t){if("object"!=OC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OC(t)?t:t+""}bC(SC,"displayName","ReferenceLine"),bC(SC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var FC=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),TC(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MC(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){var e=this.props,r=e.x1,a=e.x2,o=e.y1,i=e.y2,s=e.className,l=e.alwaysShow,u=e.clipPathId;If(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Sf(r),h=Sf(a),f=Sf(o),p=Sf(i),m=this.props.shape;if(!d&&!h&&!f&&!p&&!m)return null;var g=function(e,t,n,r,a){var o=a.x1,i=a.x2,s=a.y1,l=a.y2,c=a.xAxis,u=a.yAxis;if(!c||!u)return null;var d=MO({x:c.scale,y:u.scale}),h={x:e?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!XS(a,"discard")||d.isInRange(h)&&d.isInRange(f)?DO(h,f):null}(d,h,f,p,this.props);if(!g&&!m)return null;var v=XS(this.props,"hidden")?"url(#".concat(u,")"):void 0;return t.createElement(Dp,{className:c("recharts-reference-area",s)},n.renderRect(m,PC(PC({clipPath:v},cp(this.props,!0)),g)),YS.renderCallByParent(this.props,g))}}])&&EC(r.prototype,a),o&&EC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);function zC(e){return function(e){if(Array.isArray(e))return BC(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return BC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BC(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}RC(FC,"displayName","ReferenceArea"),RC(FC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),RC(FC,"renderRect",function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):Rf()(e)?e(n):t.createElement(Fy,AC({},n,{className:"recharts-reference-area-rect"}))});var UC=function(e,t,n,r,a){var o=rp(e,SC),i=rp(e,$O),s=[].concat(zC(o),zC(i)),l=rp(e,FC),c="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(e,t){if(t.props[c]===n&&XS(t.props,"extendDomain")&&kf(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},d)),l.length){var h="".concat(u,"1"),f="".concat(u,"2");d=l.reduce(function(e,t){if(t.props[c]===n&&XS(t.props,"extendDomain")&&kf(t.props[h])&&kf(t.props[f])){var r=t.props[h],a=t.props[f];return[Math.min(e[0],r,a),Math.max(e[1],r,a)]}return e},d)}return a&&a.length&&(d=a.reduce(function(e,t){return kf(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},WC=n(5438),qC=new(n.n(WC)()),HC="recharts.syncMouseEvents";function VC(e){return VC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VC(e)}function KC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GC(r.key),r)}}function $C(e,t,n){return(t=GC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GC(e){var t=function(e,t){if("object"!=VC(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VC(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VC(t)?t:t+""}var YC=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$C(this,"activeIndex",0),$C(this,"coordinateList",[]),$C(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,a=e.container,o=void 0===a?null:a,i=e.layout,s=void 0===i?null:i,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,a=n.y,o=n.height,i=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+i+s,u=a+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],t&&KC(e.prototype,t),n&&KC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function JC(){}function XC(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function QC(e){this._context=e}function ZC(e){this._context=e}function eP(e){this._context=e}QC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:XC(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:XC(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ZC.prototype={areaStart:JC,areaEnd:JC,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:XC(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},eP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:XC(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class tP{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function nP(e){this._context=e}function rP(e){this._context=e}function aP(e){return new rP(e)}function oP(e){return e<0?-1:1}function iP(e,t,n){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),i=(n-e._y1)/(a||r<0&&-0),s=(o*a+i*r)/(r+a);return(oP(o)+oP(i))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs(s))||0}function sP(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function lP(e,t,n){var r=e._x0,a=e._y0,o=e._x1,i=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,a+s*t,o-s,i-s*n,o,i)}function cP(e){this._context=e}function uP(e){this._context=new dP(e)}function dP(e){this._context=e}function hP(e){this._context=e}function fP(e){var t,n,r=e.length-1,a=new Array(r),o=new Array(r),i=new Array(r);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,o[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/o[t-1],o[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/o[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(o[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function pP(e,t){this._context=e,this._t=t}function mP(e){return e[0]}function gP(e){return e[1]}function vP(e,t){var n=Km(!0),r=null,a=aP,o=null,i=pg(s);function s(s){var l,c,u,d=(s=EN(s)).length,h=!1;for(null==r&&(o=a(u=i())),l=0;l<=d;++l)!(l<d&&n(c=s[l],l,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,l,s),+t(c,l,s));if(u)return o=null,u+""||null}return e="function"===typeof e?e:void 0===e?mP:Km(e),t="function"===typeof t?t:void 0===t?gP:Km(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:Km(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:Km(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:Km(!!e),s):n},s.curve=function(e){return arguments.length?(a=e,null!=r&&(o=a(r)),s):a},s.context=function(e){return arguments.length?(null==e?r=o=null:o=a(r=e),s):r},s}function yP(e,t,n){var r=null,a=Km(!0),o=null,i=aP,s=null,l=pg(c);function c(c){var u,d,h,f,p,m=(c=EN(c)).length,g=!1,v=new Array(m),y=new Array(m);for(null==o&&(s=i(p=l())),u=0;u<=m;++u){if(!(u<m&&a(f=c[u],u,c))===g)if(g=!g)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=d;--h)s.point(v[h],y[h]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+e(f,u,c),y[u]=+t(f,u,c),s.point(r?+r(f,u,c):v[u],n?+n(f,u,c):y[u]))}if(p)return s=null,p+""||null}function u(){return vP().defined(a).curve(i).context(o)}return e="function"===typeof e?e:void 0===e?mP:Km(+e),t="function"===typeof t?t:Km(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?gP:Km(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:Km(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:Km(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:Km(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:Km(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:Km(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:Km(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(a="function"===typeof e?e:Km(!!e),c):a},c.curve=function(e){return arguments.length?(i=e,null!=o&&(s=i(o)),c):i},c.context=function(e){return arguments.length?(null==e?o=s=null:s=i(o=e),c):o},c}function xP(e){return xP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xP(e)}function bP(){return bP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bP.apply(this,arguments)}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wP(Object(n),!0).forEach(function(t){_P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _P(e,t,n){return t=function(e){var t=function(e,t){if("object"!=xP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xP(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}nP.prototype={areaStart:JC,areaEnd:JC,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},rP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},cP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lP(this,this._t0,sP(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lP(this,sP(this,n=iP(this,e,t)),n);break;default:lP(this,this._t0,n=iP(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(uP.prototype=Object.create(cP.prototype)).point=function(e,t){cP.prototype.point.call(this,t,e)},dP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,o){this._context.bezierCurveTo(t,e,r,n,o,a)}},hP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=fP(e),a=fP(t),o=0,i=1;i<n;++o,++i)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[i],t[i]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},pP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var NP={curveBasisClosed:function(e){return new ZC(e)},curveBasisOpen:function(e){return new eP(e)},curveBasis:function(e){return new QC(e)},curveBumpX:function(e){return new tP(e,!0)},curveBumpY:function(e){return new tP(e,!1)},curveLinearClosed:function(e){return new nP(e)},curveLinear:aP,curveMonotoneX:function(e){return new cP(e)},curveMonotoneY:function(e){return new uP(e)},curveNatural:function(e){return new hP(e)},curveStep:function(e){return new pP(e,.5)},curveStepAfter:function(e){return new pP(e,1)},curveStepBefore:function(e){return new pP(e,0)}},kP=function(e){return e.x===+e.x&&e.y===+e.y},SP=function(e){return e.x},AP=function(e){return e.y},OP=function(e){var t,n=e.type,r=void 0===n?"linear":n,a=e.points,o=void 0===a?[]:a,i=e.baseLine,s=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(Rf()(e))return e;var n="curve".concat(_m()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?NP[n]||aP:NP["".concat(n).concat("vertical"===t?"Y":"X")]}(r,s),d=c?o.filter(function(e){return kP(e)}):o;if(Array.isArray(i)){var h=c?i.filter(function(e){return kP(e)}):i,f=d.map(function(e,t){return jP(jP({},e),{},{base:h[t]})});return(t="vertical"===s?yP().y(AP).x1(SP).x0(function(e){return e.base.x}):yP().x(SP).y1(AP).y0(function(e){return e.base.y})).defined(kP).curve(u),t(f)}return(t="vertical"===s&&kf(i)?yP().y(AP).x1(SP).x0(i):kf(i)?yP().x(SP).y1(AP).y0(i):vP().x(SP).y(AP)).defined(kP).curve(u),t(d)},CP=function(e){var n=e.className,r=e.points,a=e.path,o=e.pathRef;if((!r||!r.length)&&!a)return null;var i=r&&r.length?OP(e):a;return t.createElement("path",bP({},cp(e,!1),Kf(e),{className:c("recharts-curve",n),d:i,ref:o}))};function PP(e){return PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PP(e)}var EP=["x","y","top","left","width","height","className"];function TP(){return TP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TP.apply(this,arguments)}function DP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IP(e,t,n){return t=function(e){var t=function(e,t){if("object"!=PP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PP(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MP(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var RP=function(e,t,n,r,a,o){return"M".concat(e,",").concat(a,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)},LP=function(e){var n=e.x,r=void 0===n?0:n,a=e.y,o=void 0===a?0:a,i=e.top,s=void 0===i?0:i,l=e.left,u=void 0===l?0:l,d=e.width,h=void 0===d?0:d,f=e.height,p=void 0===f?0:f,m=e.className,g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DP(Object(n),!0).forEach(function(t){IP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:r,y:o,top:s,left:u,width:h,height:p},MP(e,EP));return kf(r)&&kf(o)&&kf(h)&&kf(p)&&kf(s)&&kf(u)?t.createElement("path",TP({},cp(g,!0),{className:c("recharts-cross",m),d:RP(r,o,h,p,s,u)})):null};function FP(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,o=e.endAngle;return{points:[MS(t,n,r,a),MS(t,n,r,o)],cx:t,cy:n,radius:r,startAngle:a,endAngle:o}}function zP(e,t,n){var r,a,o,i;if("horizontal"===e)o=r=t.x,a=n.top,i=n.top+n.height;else if("vertical"===e)i=a=t.y,r=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return FP(t);var s=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=MS(s,l,c,d),f=MS(s,l,u,d);r=h.x,a=h.y,o=f.x,i=f.y}return[{x:r,y:a},{x:o,y:i}]}function BP(e){return BP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BP(e)}function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function WP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UP(Object(n),!0).forEach(function(t){qP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qP(e,t,n){return t=function(e){var t=function(e,t){if("object"!=BP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BP(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HP(e){var n,r,a,o=e.element,i=e.tooltipEventType,s=e.isActive,l=e.activeCoordinate,u=e.activePayload,d=e.offset,h=e.activeTooltipIndex,f=e.tooltipAxisBandSize,p=e.layout,m=e.chartName,g=null!==(n=o.props.cursor)&&void 0!==n?n:null===(r=o.type.defaultProps)||void 0===r?void 0:r.cursor;if(!o||!g||!s||!l||"ScatterChart"!==m&&"axis"!==i)return null;var v=CP;if("ScatterChart"===m)a=l,v=LP;else if("BarChart"===m)a=function(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(p,l,d,f),v=Fy;else if("radial"===p){var y=FP(l),x=y.cx,b=y.cy,w=y.radius;a={cx:x,cy:b,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:w,outerRadius:w},v=zA}else a={points:zP(p,l,d)},v=CP;var j=WP(WP(WP(WP({stroke:"#ccc",pointerEvents:"none"},d),a),cp(g,!1)),{},{payload:u,payloadIndex:h,className:c("recharts-tooltip-cursor",g.className)});return(0,t.isValidElement)(g)?(0,t.cloneElement)(g,j):(0,t.createElement)(v,j)}var VP=["item"],KP=["children","className","width","height","style","compact","title","desc"];function $P(e){return $P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$P(e)}function GP(){return GP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GP.apply(this,arguments)}function YP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||rE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JP(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function XP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lE(r.key),r)}}function QP(e,t,n){return t=eE(t),function(e,t){if(t&&("object"===$P(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ZP()?Reflect.construct(t,n||[],eE(e).constructor):t.apply(e,n))}function ZP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ZP=function(){return!!e})()}function eE(e){return eE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eE(e)}function tE(e,t){return tE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tE(e,t)}function nE(e){return function(e){if(Array.isArray(e))return aE(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rE(e,t){if(e){if("string"===typeof e)return aE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aE(e,t):void 0}}function aE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oE(Object(n),!0).forEach(function(t){sE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sE(e,t,n){return(t=lE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lE(e){var t=function(e,t){if("object"!=$P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$P(t)?t:t+""}var cE={xAxis:["bottom","top"],yAxis:["left","right"]},uE={width:"100%",height:"100%"},dE={x:0,y:0};function hE(e){return e}var fE=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,a=t.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce(function(e,t){var n=t.props.data;return n&&n.length?[].concat(nE(e),nE(n)):e},[]);return o.length>0?o:e&&e.length&&kf(r)&&kf(a)?e.slice(r,a+1):[]};function pE(e){return"number"===e?[0,"auto"]:void 0}var mE,gE=function(e,t,n,r){var a=e.graphicalItems,o=e.tooltipAxis,i=fE(t,e);return n<0||!a||!a.length||n>=i.length?null:a.reduce(function(a,s){var l,c,u=null!==(l=s.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?c=Tf(void 0===u?i:u,o.dataKey,r):c=u&&u[n]||i[n];return c?[].concat(nE(a),[uS(s,c)]):a},[])},vE=function(e,t,n,r){var a=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(a,n),i=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,i=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var s=a.range,l=0;l<i;l++){var c=l>0?r[l-1].coordinate:r[i-1].coordinate,u=r[l].coordinate,d=l>=i-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(_f(u-c)!==_f(d-u)){var f=[];if(_f(d-u)===_f(s[1]-s[0])){h=d;var p=u+s[1]-s[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{h=c;var m=d+s[1]-s[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){o=r[l].index;break}}else{var v=Math.min(c,d),y=Math.max(c,d);if(e>(v+u)/2&&e<=(y+u)/2){o=r[l].index;break}}}else for(var x=0;x<i;x++)if(0===x&&e<=(n[x].coordinate+n[x+1].coordinate)/2||x>0&&x<i-1&&e>(n[x].coordinate+n[x-1].coordinate)/2&&e<=(n[x].coordinate+n[x+1].coordinate)/2||x===i-1&&e>(n[x].coordinate+n[x-1].coordinate)/2){o=n[x].index;break}return o}(o,i,l,s);if(c>=0&&l){var u=l[c]&&l[c].value,d=gE(e,t,c,u),h=function(e,t,n,r){var a=t.find(function(e){return e&&e.index===n});if(a){if("horizontal"===e)return{x:a.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:a.coordinate};if("centric"===e){var o=a.coordinate,i=r.radius;return iE(iE(iE({},r),MS(r.cx,r.cy,i,o)),{},{angle:o,radius:i})}var s=a.coordinate,l=r.angle;return iE(iE(iE({},r),MS(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return dE}(n,i,c,a);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},yE=function(e,t){var n=t.axes,r=t.graphicalItems,a=t.axisType,o=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=Gk(c,a);return n.reduce(function(t,n){var f,p=void 0!==n.type.defaultProps?iE(iE({},n.type.defaultProps),n.props):n.props,m=p.type,g=p.dataKey,v=p.allowDataOverflow,y=p.allowDuplicatedCategory,x=p.scale,b=p.ticks,w=p.includeHidden,j=p[o];if(t[j])return t;var _,N,k,S=fE(e.data,{graphicalItems:r.filter(function(e){var t;return(o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o])===j}),dataStartIndex:s,dataEndIndex:l}),A=S.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],a=null===e||void 0===e?void 0:e[1];if(r&&a&&kf(r)&&kf(a))return!0}return!1})(p.domain,v,m)&&(_=sS(p.domain,null,v),!h||"number"!==m&&"auto"===x||(k=Hk(S,g,"category")));var O=pE(m);if(!_||0===_.length){var C,P=null!==(C=p.domain)&&void 0!==C?C:O;if(g){if(_=Hk(S,g,m),"category"===m&&h){var E=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(_);y&&E?(N=_,_=wp()(0,A)):y||(_=cS(P,_,n).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(nE(e),[t])},[]))}else if("category"===m)_=y?_.filter(function(e){return""!==e&&!jf()(e)}):cS(P,_,n).reduce(function(e,t){return e.indexOf(t)>=0||""===t||jf()(t)?e:[].concat(nE(e),[t])},[]);else if("number"===m){var T=function(e,t,n,r,a){var o=t.map(function(t){return Kk(e,t,n,a,r)}).filter(function(e){return!jf()(e)});return o&&o.length?o.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(S,r.filter(function(e){var t,n,r=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],a="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===j&&(w||!a)}),g,a,c);T&&(_=T)}!h||"number"!==m&&"auto"===x||(k=Hk(S,g,"category"))}else _=h?wp()(0,A):i&&i[j]&&i[j].hasStack&&"number"===m?"expand"===d?[0,1]:aS(i[j].stackGroups,s,l):$k(S,r.filter(function(e){var t=o in e.props?e.props[o]:e.type.defaultProps[o],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===j&&(w||!n)}),m,c,!0);if("number"===m)_=UC(u,_,j,a,b),P&&(_=sS(P,_,v));else if("category"===m&&P){var D=P;_.every(function(e){return D.indexOf(e)>=0})&&(_=D)}}return iE(iE({},t),{},sE({},j,iE(iE({},p),{},{axisType:a,domain:_,categoricalDomain:k,duplicateDomain:N,originalDomain:null!==(f=p.domain)&&void 0!==f?f:O,isCategorical:h,layout:c})))},{})},xE=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,a=t.AxisComp,o=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=rp(c,a),h={};return d&&d.length?h=yE(e,{axes:d,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,a=t.axisType,o=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=fE(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),h=d.length,f=Gk(c,a),p=-1;return n.reduce(function(e,t){var m,g=(void 0!==t.type.defaultProps?iE(iE({},t.type.defaultProps),t.props):t.props)[o],v=pE("number");return e[g]?e:(p++,f?m=wp()(0,h):i&&i[g]&&i[g].hasStack?(m=aS(i[g].stackGroups,s,l),m=UC(u,m,g,a)):(m=sS(v,$k(d,n.filter(function(e){var t,n,r=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],a="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!a}),"number",c),r.defaultProps.allowDataOverflow),m=UC(u,m,g,a)),iE(iE({},e),{},sE({},g,iE(iE({axisType:a},r.defaultProps),{},{hide:!0,orientation:yf()(cE,"".concat(a,".").concat(p%2),null),domain:m,originalDomain:v,isCategorical:f,layout:c}))))},{})}(e,{Axis:a,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:l})),h},bE=function(e){var t=e.children,n=e.defaultShowTooltip,r=ap(t,OS),a=0,o=0;return e.data&&0!==e.data.length&&(o=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(a=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},wE=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},jE=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),a=void 0===r?{}:r,o=e.yAxisMap,i=void 0===o?{}:o,s=n.width,l=n.height,c=n.children,u=n.margin||{},d=ap(c,OS),h=ap(c,Jg),f=Object.keys(i).reduce(function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:iE(iE({},e),{},sE({},r,e[r]+n.width))},{left:u.left||0,right:u.right||0}),p=Object.keys(a).reduce(function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:iE(iE({},e),{},sE({},r,yf()(e,"".concat(r))+n.height))},{top:u.top||0,bottom:u.bottom||0}),m=iE(iE({},p),f),g=m.bottom;d&&(m.bottom+=d.props.height||OS.defaultProps.height),h&&t&&(m=function(e,t,n,r){var a=n.children,o=n.width,i=n.margin,s=o-(i.left||0)-(i.right||0),l=Rk({children:a,legendWidth:s});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,f=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===f)&&"center"!==h&&kf(e[h]))return Uk(Uk({},e),{},Wk({},h,e[h]+(u||0)));if(("horizontal"===p||"vertical"===p&&"center"===h)&&"middle"!==f&&kf(e[f]))return Uk(Uk({},e),{},Wk({},f,e[f]+(d||0)))}return e}(m,0,n,t));var v=s-m.left-m.right,y=l-m.top-m.bottom;return iE(iE({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(y,0)})},_E=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},NE=["layout","type","stroke","connectNulls","isRange","ref"],kE=["key"];function SE(e){return SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SE(e)}function AE(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(this,arguments)}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function PE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(t){RE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function EE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LE(r.key),r)}}function TE(e,t,n){return t=IE(t),function(e,t){if(t&&("object"===SE(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,DE()?Reflect.construct(t,n||[],IE(e).constructor):t.apply(e,n))}function DE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(DE=function(){return!!e})()}function IE(e){return IE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IE(e)}function ME(e,t){return ME=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ME(e,t)}function RE(e,t,n){return(t=LE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LE(e){var t=function(e,t){if("object"!=SE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SE(t)?t:t+""}var FE=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return RE(e=TE(this,n,[].concat(r)),"state",{isAnimationFinished:!0}),RE(e,"id",Of("recharts-area-")),RE(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),Rf()(t)&&t()}),RE(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),Rf()(t)&&t()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ME(e,t)}(n,e),r=n,a=[{key:"renderDots",value:function(e,r,a){var o=this.props.isAnimationActive,i=this.state.isAnimationFinished;if(o&&!i)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,d=cp(this.props,!1),h=cp(l,!0),f=c.map(function(e,t){var r=PE(PE(PE({key:"dot-".concat(t),r:3},d),h),{},{index:t,cx:e.x,cy:e.y,dataKey:u,value:e.value,payload:e.payload,points:c});return n.renderDotItem(l,r)}),p={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(a,")"):null};return t.createElement(Dp,OE({className:"recharts-area-dots"},p),f)}},{key:"renderHorizontalRect",value:function(e){var n=this.props,r=n.baseLine,a=n.points,o=n.strokeWidth,i=a[0].x,s=a[a.length-1].x,l=e*Math.abs(i-s),c=RN()(a.map(function(e){return e.y||0}));return kf(r)&&"number"===typeof r?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(RN()(r.map(function(e){return e.y||0})),c)),kf(c)?t.createElement("rect",{x:i<s?i:i-l,y:0,width:l,height:Math.floor(c+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var n=this.props,r=n.baseLine,a=n.points,o=n.strokeWidth,i=a[0].y,s=a[a.length-1].y,l=e*Math.abs(i-s),c=RN()(a.map(function(e){return e.x||0}));return kf(r)&&"number"===typeof r?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(RN()(r.map(function(e){return e.x||0})),c)),kf(c)?t.createElement("rect",{x:0,y:i<s?i:i-l,width:c+(o?parseInt("".concat(o),10):1),height:Math.floor(l)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,n,r,a){var o=this.props,i=o.layout,s=o.type,l=o.stroke,c=o.connectNulls,u=o.isRange,d=(o.ref,AE(o,NE));return t.createElement(Dp,{clipPath:r?"url(#clipPath-".concat(a,")"):null},t.createElement(CP,OE({},cp(d,!0),{points:e,connectNulls:c,type:s,baseLine:n,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==l&&t.createElement(CP,OE({},cp(this.props,!1),{className:"recharts-area-curve",layout:i,type:s,connectNulls:c,fill:"none",points:e})),"none"!==l&&u&&t.createElement(CP,OE({},cp(this.props,!1),{className:"recharts-area-curve",layout:i,type:s,connectNulls:c,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(e,n){var r=this,a=this.props,o=a.points,i=a.baseLine,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,f=h.prevPoints,p=h.prevBaseLine;return t.createElement(Ay,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(a){var s=a.t;if(f){var l,c=f.length/o.length,u=o.map(function(e,t){var n=Math.floor(t*c);if(f[n]){var r=f[n],a=Ef(r.x,e.x),o=Ef(r.y,e.y);return PE(PE({},e),{},{x:a(s),y:o(s)})}return e});return l=kf(i)&&"number"===typeof i?Ef(p,i)(s):jf()(i)||gf()(i)?Ef(p,0)(s):i.map(function(e,t){var n=Math.floor(t*c);if(p[n]){var r=p[n],a=Ef(r.x,e.x),o=Ef(r.y,e.y);return PE(PE({},e),{},{x:a(s),y:o(s)})}return e}),r.renderAreaStatically(u,l,e,n)}return t.createElement(Dp,null,t.createElement("defs",null,t.createElement("clipPath",{id:"animationClipPath-".concat(n)},r.renderClipRect(s))),t.createElement(Dp,{clipPath:"url(#animationClipPath-".concat(n,")")},r.renderAreaStatically(o,i,e,n)))})}},{key:"renderArea",value:function(e,t){var n=this.props,r=n.points,a=n.baseLine,o=n.isAnimationActive,i=this.state,s=i.prevPoints,l=i.prevBaseLine,c=i.totalLength;return o&&r&&r.length&&(!s&&c>0||!WN()(s,r)||!WN()(l,a))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(r,a,e,t)}},{key:"render",value:function(){var e,n=this.props,r=n.hide,a=n.dot,o=n.points,i=n.className,s=n.top,l=n.left,u=n.xAxis,d=n.yAxis,h=n.width,f=n.height,p=n.isAnimationActive,m=n.id;if(r||!o||!o.length)return null;var g=this.state.isAnimationFinished,v=1===o.length,y=c("recharts-area",i),x=u&&u.allowDataOverflow,b=d&&d.allowDataOverflow,w=x||b,j=jf()(m)?this.id:m,_=null!==(e=cp(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},N=_.r,k=void 0===N?3:N,S=_.strokeWidth,A=void 0===S?2:S,O=(lp(a)?a:{}).clipDot,C=void 0===O||O,P=2*k+A;return t.createElement(Dp,{className:y},x||b?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(j)},t.createElement("rect",{x:x?l:l-h/2,y:b?s:s-f/2,width:x?h:2*h,height:b?f:2*f})),!C&&t.createElement("clipPath",{id:"clipPath-dots-".concat(j)},t.createElement("rect",{x:l-P/2,y:s-P/2,width:h+P,height:f+P}))):null,v?null:this.renderArea(w,j),(a||v)&&this.renderDots(w,C,j),(!p||g)&&gA.renderCallByParent(this.props,o))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],a&&EE(r.prototype,a),o&&EE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);mE=FE,RE(FE,"displayName","Area"),RE(FE,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!im.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),RE(FE,"getBaseValue",function(e,t,n,r){var a=e.layout,o=e.baseValue,i=t.props.baseValue,s=null!==i&&void 0!==i?i:o;if(kf(s)&&"number"===typeof s)return s;var l="horizontal"===a?r:n,c=l.scale.domain();if("number"===l.type){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return"dataMin"===s?d:"dataMax"===s||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===s?c[0]:"dataMax"===s?c[1]:c[0]}),RE(FE,"getComposedData",function(e){var t,n=e.props,r=e.item,a=e.xAxis,o=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,p=n.layout,m=u&&u.length,g=mE.getBaseValue(n,r,a,o),v="horizontal"===p,y=!1,x=h.map(function(e,t){var n;m?n=u[d+t]:(n=qk(e,c),Array.isArray(n)?y=!0:n=[g,n]);var r=null==n[1]||m&&null==qk(e,c);return v?{x:nS({axis:a,ticks:i,bandSize:l,entry:e,index:t}),y:r?null:o.scale(n[1]),value:n,payload:e}:{x:r?null:a.scale(n[1]),y:nS({axis:o,ticks:s,bandSize:l,entry:e,index:t}),value:n,payload:e}});return t=m||y?x.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return v?{x:e.x,y:null!=t&&null!=e.y?o.scale(t):null}:{x:null!=t?a.scale(t):null,y:e.y}}):v?o.scale(g):a.scale(g),PE({points:x,baseLine:t,layout:p,isRange:y},f)}),RE(FE,"renderDotItem",function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(Rf()(e))r=e(n);else{var a=c("recharts-area-dot","boolean"!==typeof e?e.className:""),o=n.key,i=AE(n,kE);r=t.createElement(Qg,OE({},i,{key:o,className:a}))}return r});var zE=["type","layout","connectNulls","ref"],BE=["key"];function UE(e){return UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UE(e)}function WE(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qE.apply(this,arguments)}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(t){ZE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function KE(e){return function(e){if(Array.isArray(e))return $E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return $E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eT(r.key),r)}}function YE(e,t,n){return t=XE(t),function(e,t){if(t&&("object"===UE(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,JE()?Reflect.construct(t,n||[],XE(e).constructor):t.apply(e,n))}function JE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(JE=function(){return!!e})()}function XE(e){return XE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},XE(e)}function QE(e,t){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},QE(e,t)}function ZE(e,t,n){return(t=eT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eT(e){var t=function(e,t){if("object"!=UE(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=UE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UE(t)?t:t+""}var tT=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return ZE(e=YE(this,n,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),ZE(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),ZE(e,"getStrokeDasharray",function(t,r,a){var o=a.reduce(function(e,t){return e+t});if(!o)return e.generateSimpleStrokeDasharray(r,t);for(var i=Math.floor(t/o),s=t%o,l=r-t,c=[],u=0,d=0;u<a.length;d+=a[u],++u)if(d+a[u]>s){c=[].concat(KE(a.slice(0,u)),[s-d]);break}var h=c.length%2===0?[0,l]:[l];return[].concat(KE(n.repeat(a,i)),KE(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),ZE(e,"id",Of("recharts-line-")),ZE(e,"pathRef",function(t){e.mainCurve=t}),ZE(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),ZE(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QE(e,t)}(n,e),r=n,a=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(YD){return 0}}},{key:"renderErrorBar",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,a=r.points,o=r.xAxis,i=r.yAxis,s=r.layout,l=rp(r.children,Ek);if(!l)return null;var c=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:qk(e.payload,t)}},u={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement(Dp,u,l.map(function(e){return t.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:a,xAxis:o,yAxis:i,layout:s,dataPointFormatter:c})}))}},{key:"renderDots",value:function(e,r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.dot,s=o.points,l=o.dataKey,c=cp(this.props,!1),u=cp(i,!0),d=s.map(function(e,t){var r=VE(VE(VE({key:"dot-".concat(t),r:3},c),u),{},{index:t,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:s});return n.renderDotItem(i,r)}),h={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(a,")"):null};return t.createElement(Dp,qE({className:"recharts-line-dots",key:"dots"},h),d)}},{key:"renderCurveStatically",value:function(e,n,r,a){var o=this.props,i=o.type,s=o.layout,l=o.connectNulls,c=(o.ref,WE(o,zE)),u=VE(VE(VE({},cp(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(r,")"):null,points:e},a),{},{type:i,layout:s,connectNulls:l});return t.createElement(CP,qE({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,n){var r=this,a=this.props,o=a.points,i=a.strokeDasharray,s=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=a.animateNewValues,f=a.width,p=a.height,m=this.state,g=m.prevPoints,v=m.totalLength;return t.createElement(Ay,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a=t.t;if(g){var s=g.length/o.length,l=o.map(function(e,t){var n=Math.floor(t*s);if(g[n]){var r=g[n],o=Ef(r.x,e.x),i=Ef(r.y,e.y);return VE(VE({},e),{},{x:o(a),y:i(a)})}if(h){var l=Ef(2*f,e.x),c=Ef(p/2,e.y);return VE(VE({},e),{},{x:l(a),y:c(a)})}return VE(VE({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,n)}var c,u=Ef(0,v)(a);if(i){var d="".concat(i).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(u,v,d)}else c=r.generateSimpleStrokeDasharray(v,u);return r.renderCurveStatically(o,e,n,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,a=n.isAnimationActive,o=this.state,i=o.prevPoints,s=o.totalLength;return a&&r&&r.length&&(!i&&s>0||!WN()(i,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,n=this.props,r=n.hide,a=n.dot,o=n.points,i=n.className,s=n.xAxis,l=n.yAxis,u=n.top,d=n.left,h=n.width,f=n.height,p=n.isAnimationActive,m=n.id;if(r||!o||!o.length)return null;var g=this.state.isAnimationFinished,v=1===o.length,y=c("recharts-line",i),x=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,w=x||b,j=jf()(m)?this.id:m,_=null!==(e=cp(a,!1))&&void 0!==e?e:{r:3,strokeWidth:2},N=_.r,k=void 0===N?3:N,S=_.strokeWidth,A=void 0===S?2:S,O=(lp(a)?a:{}).clipDot,C=void 0===O||O,P=2*k+A;return t.createElement(Dp,{className:y},x||b?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(j)},t.createElement("rect",{x:x?d:d-h/2,y:b?u:u-f/2,width:x?h:2*h,height:b?f:2*f})),!C&&t.createElement("clipPath",{id:"clipPath-dots-".concat(j)},t.createElement("rect",{x:d-P/2,y:u-P/2,width:h+P,height:f+P}))):null,!v&&this.renderCurve(w,j),this.renderErrorBar(w,j),(v||a)&&this.renderDots(w,C,j),(!p||g)&&gA.renderCallByParent(this.props,o))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!==0?[].concat(KE(e),[0]):e,r=[],a=0;a<t;++a)r=[].concat(KE(r),KE(n));return r}},{key:"renderDotItem",value:function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(Rf()(e))r=e(n);else{var a=n.key,o=WE(n,BE),i=c("recharts-line-dot","boolean"!==typeof e?e.className:"");r=t.createElement(Qg,qE({key:a},o,{className:i}))}return r}}],a&&GE(r.prototype,a),o&&GE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);function nT(e){return nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nT(e)}function rT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cT(r.key),r)}}function aT(e,t,n){return t=iT(t),function(e,t){if(t&&("object"===nT(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oT()?Reflect.construct(t,n||[],iT(e).constructor):t.apply(e,n))}function oT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(oT=function(){return!!e})()}function iT(e){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},iT(e)}function sT(e,t){return sT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sT(e,t)}function lT(e,t,n){return(t=cT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cT(e){var t=function(e,t){if("object"!=nT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nT(t)?t:t+""}ZE(tT,"displayName","Line"),ZE(tT,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!im.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),ZE(tT,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,s=e.bandSize,l=e.displayedData,c=e.offset,u=t.layout,d=l.map(function(e,t){var l=qk(e,i);return"horizontal"===u?{x:nS({axis:n,ticks:a,bandSize:s,entry:e,index:t}),y:jf()(l)?null:r.scale(l),value:l,payload:e}:{x:jf()(l)?null:n.scale(l),y:nS({axis:r,ticks:o,bandSize:s,entry:e,index:t}),value:l,payload:e}});return VE({points:d,layout:u},c)});var uT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aT(this,t,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return null}}])&&rT(n.prototype,r),a&&rT(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(t.Component);lT(uT,"displayName","ZAxis"),lT(uT,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var dT=["option","isActive"];function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hT.apply(this,arguments)}function fT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function pT(e){var n=e.option,r=e.isActive,a=fT(e,dT);return"string"===typeof n?t.createElement(GA,hT({option:t.createElement(Ng,hT({type:n},a)),isActive:r,shapeType:"symbols"},a)):t.createElement(GA,hT({option:n,isActive:r,shapeType:"symbols"},a))}function mT(e){return mT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mT(e)}function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gT.apply(this,arguments)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(t){NT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function xT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kT(r.key),r)}}function bT(e,t,n){return t=jT(t),function(e,t){if(t&&("object"===mT(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wT()?Reflect.construct(t,n||[],jT(e).constructor):t.apply(e,n))}function wT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wT=function(){return!!e})()}function jT(e){return jT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jT(e)}function _T(e,t){return _T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_T(e,t)}function NT(e,t,n){return(t=kT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kT(e){var t=function(e,t){if("object"!=mT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mT(t)?t:t+""}var ST=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return NT(e=bT(this,n,[].concat(r)),"state",{isAnimationFinished:!1}),NT(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0})}),NT(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1})}),NT(e,"id",Of("recharts-scatter-")),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_T(e,t)}(n,e),r=n,a=[{key:"renderSymbolsStatically",value:function(e){var n=this,r=this.props,a=r.shape,o=r.activeShape,i=r.activeIndex,s=cp(this.props,!1);return e.map(function(e,r){var l=i===r,c=l?o:a,u=yT(yT({},s),e);return t.createElement(Dp,gT({className:"recharts-scatter-symbol",key:"symbol-".concat(null===e||void 0===e?void 0:e.cx,"-").concat(null===e||void 0===e?void 0:e.cy,"-").concat(null===e||void 0===e?void 0:e.size,"-").concat(r)},$f(n.props,e,r),{role:"img"}),t.createElement(pT,gT({option:c,isActive:l,key:"symbol-".concat(r)},u)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,n=this.props,r=n.points,a=n.isAnimationActive,o=n.animationBegin,i=n.animationDuration,s=n.animationEasing,l=n.animationId,c=this.state.prevPoints;return t.createElement(Ay,{begin:o,duration:i,isActive:a,easing:s,from:{t:0},to:{t:1},key:"pie-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var a=n.t,o=r.map(function(e,t){var n=c&&c[t];if(n){var r=Ef(n.cx,e.cx),o=Ef(n.cy,e.cy),i=Ef(n.size,e.size);return yT(yT({},e),{},{cx:r(a),cy:o(a),size:i(a)})}var s=Ef(0,e.size);return yT(yT({},e),{},{size:s(a)})});return t.createElement(Dp,null,e.renderSymbolsStatically(o))})}},{key:"renderSymbols",value:function(){var e=this.props,t=e.points,n=e.isAnimationActive,r=this.state.prevPoints;return!(n&&t&&t.length)||r&&WN()(r,t)?this.renderSymbolsStatically(t):this.renderSymbolsWithAnimation()}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,n=e.points,r=e.xAxis,a=e.yAxis,o=rp(e.children,Ek);return o?o.map(function(e,o){var i=e.props,s=i.direction,l=i.dataKey;return t.cloneElement(e,{key:"".concat(s,"-").concat(l,"-").concat(n[o]),data:n,xAxis:r,yAxis:a,layout:"x"===s?"vertical":"horizontal",dataPointFormatter:function(e,t){return{x:e.cx,y:e.cy,value:"x"===s?+e.node.x:+e.node.y,errorVal:qk(e,t)}}})}):null}},{key:"renderLine",value:function(){var e,n,r=this.props,a=r.points,o=r.line,i=r.lineType,s=r.lineJointType,l=cp(this.props,!1),c=cp(o,!1);if("joint"===i)e=a.map(function(e){return{x:e.cx,y:e.cy}});else if("fitting"===i){var u=function(e){if(!e||!e.length)return null;for(var t=e.length,n=0,r=0,a=0,o=0,i=1/0,s=-1/0,l=0,c=0,u=0;u<t;u++)n+=l=e[u].cx||0,r+=c=e[u].cy||0,a+=l*c,o+=l*l,i=Math.min(i,l),s=Math.max(s,l);var d=t*o!==n*n?(t*a-n*r)/(t*o-n*n):0;return{xmin:i,xmax:s,a:d,b:(r-d*n)/t}}(a),d=u.xmin,h=u.xmax,f=u.a,p=u.b,m=function(e){return f*e+p};e=[{x:d,y:m(d)},{x:h,y:m(h)}]}var g=yT(yT(yT({},l),{},{fill:"none",stroke:l&&l.fill},c),{},{points:e});return n=t.isValidElement(o)?t.cloneElement(o,g):Rf()(o)?o(g):t.createElement(CP,gT({},g,{type:s})),t.createElement(Dp,{className:"recharts-scatter-line",key:"recharts-scatter-line"},n)}},{key:"render",value:function(){var e=this.props,n=e.hide,r=e.points,a=e.line,o=e.className,i=e.xAxis,s=e.yAxis,l=e.left,u=e.top,d=e.width,h=e.height,f=e.id,p=e.isAnimationActive;if(n||!r||!r.length)return null;var m=this.state.isAnimationFinished,g=c("recharts-scatter",o),v=i&&i.allowDataOverflow,y=s&&s.allowDataOverflow,x=v||y,b=jf()(f)?this.id:f;return t.createElement(Dp,{className:g,clipPath:x?"url(#clipPath-".concat(b,")"):null},v||y?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(b)},t.createElement("rect",{x:v?l:l-d/2,y:y?u:u-h/2,width:v?d:2*d,height:y?h:2*h}))):null,a&&this.renderLine(),this.renderErrorBar(),t.createElement(Dp,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!p||m)&&gA.renderCallByParent(this.props,r))}}],o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}}],a&&xT(r.prototype,a),o&&xT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.PureComponent);function AT(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],a=0;a<e.length;a+=t){if(void 0!==n&&!0!==n(e[a]))return;r.push(e[a])}return r}function OT(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=r*Math.PI/180,o=Math.atan(n/t),i=a>o&&a<Math.PI-o?n/Math.sin(a):t/Math.cos(a);return Math.abs(i)}({width:e.width+t.width,height:e.height+t.height},n)}function CT(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-a)<=0}function PT(e){return PT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(e)}function ET(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function TT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ET(Object(n),!0).forEach(function(t){DT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function DT(e,t,n){return t=function(e){var t=function(e,t){if("object"!=PT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PT(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IT(e,t,n){var r=e.tick,a=e.ticks,o=e.viewBox,i=e.minTickGap,s=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(kf(l)||im.isSsr)return function(e,t){return AT(e,t+1)}(a,"number"===typeof l&&kf(l)?l:0);var h=[],f="top"===s||"bottom"===s?"width":"height",p=u&&"width"===f?ax(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(e,r){var a=Rf()(c)?c(e.value,r):e.value;return"width"===f?OT(ax(a,{fontSize:t,letterSpacing:n}),p,d):ax(a,{fontSize:t,letterSpacing:n})[f]},g=a.length>=2?_f(a[1].coordinate-a[0].coordinate):1,v=function(e,t,n){var r="width"===n,a=e.x,o=e.y,i=e.width,s=e.height;return 1===t?{start:r?a:o,end:r?a+i:o+s}:{start:r?a+i:o+s,end:r?a:o}}(o,g,f);return"equidistantPreserveStart"===l?function(e,t,n,r,a){for(var o,i=(r||[]).slice(),s=t.start,l=t.end,c=0,u=1,d=s,h=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:AT(r,u)};var o,i=c,h=function(){return void 0===o&&(o=n(t,i)),o},f=t.coordinate,p=0===c||CT(e,f,h,d,l);p||(c=0,d=s,u+=1),p&&(d=f+e*(h()/2+a),c+=u)};u<=i.length;)if(o=h())return o.v;return[]}(g,v,m,a,i):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,a,o){var i=(r||[]).slice(),s=i.length,l=t.start,c=t.end;if(o){var u=r[s-1],d=n(u,s-1),h=e*(u.coordinate+e*d/2-c);i[s-1]=u=TT(TT({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),CT(e,u.tickCoord,function(){return d},l,c)&&(c=u.tickCoord-e*(d/2+a),i[s-1]=TT(TT({},u),{},{isShow:!0}))}for(var f=o?s-1:s,p=function(t){var r,o=i[t],s=function(){return void 0===r&&(r=n(o,t)),r};if(0===t){var u=e*(o.coordinate-e*s()/2-l);i[t]=o=TT(TT({},o),{},{tickCoord:u<0?o.coordinate-u*e:o.coordinate})}else i[t]=o=TT(TT({},o),{},{tickCoord:o.coordinate});CT(e,o.tickCoord,s,l,c)&&(l=o.tickCoord+e*(s()/2+a),i[t]=TT(TT({},o),{},{isShow:!0}))},m=0;m<f;m++)p(m);return i}(g,v,m,a,i,"preserveStartEnd"===l):function(e,t,n,r,a){for(var o=(r||[]).slice(),i=o.length,s=t.start,l=t.end,c=function(t){var r,c=o[t],u=function(){return void 0===r&&(r=n(c,t)),r};if(t===i-1){var d=e*(c.coordinate+e*u()/2-l);o[t]=c=TT(TT({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else o[t]=c=TT(TT({},c),{},{tickCoord:c.coordinate});CT(e,c.tickCoord,u,s,l)&&(l=c.tickCoord-e*(u()/2+a),o[t]=TT(TT({},c),{},{isShow:!0}))},u=i-1;u>=0;u--)c(u);return o}(g,v,m,a,i),h.filter(function(e){return e.isShow}))}NT(ST,"displayName","Scatter"),NT(ST,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!im.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),NT(ST,"getComposedData",function(e){var t=e.xAxis,n=e.yAxis,r=e.zAxis,a=e.item,o=e.displayedData,i=e.xAxisTicks,s=e.yAxisTicks,l=e.offset,c=a.props.tooltipType,u=rp(a.props.children,nA),d=jf()(t.dataKey)?a.props.dataKey:t.dataKey,h=jf()(n.dataKey)?a.props.dataKey:n.dataKey,f=r&&r.dataKey,p=r?r.range:uT.defaultProps.range,m=p&&p[0],g=t.scale.bandwidth?t.scale.bandwidth():0,v=n.scale.bandwidth?n.scale.bandwidth():0,y=o.map(function(e,o){var l=qk(e,d),p=qk(e,h),y=!jf()(f)&&qk(e,f)||"-",x=[{name:jf()(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:l,payload:e,dataKey:d,type:c},{name:jf()(n.dataKey)?a.props.name:n.name||n.dataKey,unit:n.unit||"",value:p,payload:e,dataKey:h,type:c}];"-"!==y&&x.push({name:r.name||r.dataKey,unit:r.unit||"",value:y,payload:e,dataKey:f,type:c});var b=nS({axis:t,ticks:i,bandSize:g,entry:e,index:o,dataKey:d}),w=nS({axis:n,ticks:s,bandSize:v,entry:e,index:o,dataKey:h}),j="-"!==y?r.scale(y):m,_=Math.sqrt(Math.max(j,0)/Math.PI);return yT(yT({},e),{},{cx:b,cy:w,x:b-_,y:w-_,xAxis:t,yAxis:n,zAxis:r,width:2*_,height:2*_,size:j,node:{x:l,y:p,z:y},tooltipPayload:x,tooltipPosition:{x:b,y:w},payload:e},u&&u[o]&&u[o].props)});return yT({points:y},l)});var MT=["viewBox"],RT=["viewBox"],LT=["ticks"];function FT(e){return FT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FT(e)}function zT(){return zT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zT.apply(this,arguments)}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(t){GT(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function WT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function qT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YT(r.key),r)}}function HT(e,t,n){return t=KT(t),function(e,t){if(t&&("object"===FT(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,VT()?Reflect.construct(t,n||[],KT(e).constructor):t.apply(e,n))}function VT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(VT=function(){return!!e})()}function KT(e){return KT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},KT(e)}function $T(e,t){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$T(e,t)}function GT(e,t,n){return(t=YT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YT(e){var t=function(e,t){if("object"!=FT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=FT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==FT(t)?t:t+""}var JT=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=HT(this,n,[e])).state={fontSize:"",letterSpacing:""},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$T(e,t)}(n,e),r=n,a=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=WT(e,MT),a=this.props,o=a.viewBox,i=WT(a,RT);return!Bf(n,o)||!Bf(r,i)||!Bf(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,a,o,i,s=this.props,l=s.x,c=s.y,u=s.width,d=s.height,h=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,g=p?-1:1,v=e.tickSize||f,y=kf(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,i=(r=(a=c+ +!p*d)-g*v)-g*m,o=y;break;case"left":r=a=e.coordinate,o=(t=(n=l+ +!p*u)-g*v)-g*m,i=y;break;case"right":r=a=e.coordinate,o=(t=(n=l+ +p*u)+g*v)+g*m,i=y;break;default:t=n=e.coordinate,i=(r=(a=c+ +p*d)+g*v)+g*m,o=y}return{line:{x1:t,y1:r,x2:n,y2:a},tick:{x:o,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.x,r=e.y,a=e.width,o=e.height,i=e.orientation,s=e.mirror,l=e.axisLine,u=UT(UT(UT({},cp(this.props,!1)),cp(l,!1)),{},{fill:"none"});if("top"===i||"bottom"===i){var d=+("top"===i&&!s||"bottom"===i&&s);u=UT(UT({},u),{},{x1:n,y1:r+d*o,x2:n+a,y2:r+d*o})}else{var h=+("left"===i&&!s||"right"===i&&s);u=UT(UT({},u),{},{x1:n+h*a,y1:r,x2:n+h*a,y2:r+o})}return t.createElement("line",zT({},u,{className:c("recharts-cartesian-axis-line",yf()(l,"className"))}))}},{key:"renderTicks",value:function(e,r,a){var o=this,i=this.props,s=i.tickLine,l=i.stroke,u=i.tick,d=i.tickFormatter,h=i.unit,f=IT(UT(UT({},this.props),{},{ticks:e}),r,a),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=cp(this.props,!1),v=cp(u,!1),y=UT(UT({},g),{},{fill:"none"},cp(s,!1)),x=f.map(function(e,r){var a=o.getTickLineCoord(e),i=a.line,x=a.tick,b=UT(UT(UT(UT({textAnchor:p,verticalAnchor:m},g),{},{stroke:"none",fill:l},v),x),{},{index:r,payload:e,visibleTicksCount:f.length,tickFormatter:d});return t.createElement(Dp,zT({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},$f(o.props,e,r)),s&&t.createElement("line",zT({},y,i,{className:c("recharts-cartesian-axis-tick-line",yf()(s,"className"))})),u&&n.renderTickItem(u,b,"".concat(Rf()(d)?d(e.value,r):e.value).concat(h||"")))});return t.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var e=this,n=this.props,r=n.axisLine,a=n.width,o=n.height,i=n.ticksGenerator,s=n.className;if(n.hide)return null;var l=this.props,u=l.ticks,d=WT(l,LT),h=u;return Rf()(i)&&(h=u&&u.length>0?i(this.props):i(d)),a<=0||o<=0||!h||!h.length?null:t.createElement(Dp,{className:c("recharts-cartesian-axis",s),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),YS.renderCallByParent(this.props))}}],o=[{key:"renderTickItem",value:function(e,n,r){var a=c(n.className,"recharts-cartesian-axis-tick-value");return t.isValidElement(e)?t.cloneElement(e,UT(UT({},n),{},{className:a})):Rf()(e)?e(UT(UT({},n),{},{className:a})):t.createElement(Dx,zT({},n,{className:"recharts-cartesian-axis-tick-value"}),r)}}],a&&qT(r.prototype,a),o&&qT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);function XT(e){return XT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XT(e)}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aD(r.key),r)}}function ZT(e,t,n){return t=tD(t),function(e,t){if(t&&("object"===XT(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eD()?Reflect.construct(t,n||[],tD(e).constructor):t.apply(e,n))}function eD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eD=function(){return!!e})()}function tD(e){return tD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tD(e)}function nD(e,t){return nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nD(e,t)}function rD(e,t,n){return(t=aD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aD(e){var t=function(e,t){if("object"!=XT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=XT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XT(t)?t:t+""}function oD(){return oD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oD.apply(this,arguments)}function iD(e){var n=e.xAxisId,r=uC(),a=dC(),o=lC(n);return null==o?null:t.createElement(JT,oD({},o,{className:c("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(e){return Jk(e,!0)}}))}GT(JT,"displayName","CartesianAxis"),GT(JT,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var sD=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ZT(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nD(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){return t.createElement(iD,this.props)}}])&&QT(r.prototype,a),o&&QT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);function lD(e){return lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lD(e)}function cD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mD(r.key),r)}}function uD(e,t,n){return t=hD(t),function(e,t){if(t&&("object"===lD(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dD()?Reflect.construct(t,n||[],hD(e).constructor):t.apply(e,n))}function dD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dD=function(){return!!e})()}function hD(e){return hD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hD(e)}function fD(e,t){return fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fD(e,t)}function pD(e,t,n){return(t=mD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mD(e){var t=function(e,t){if("object"!=lD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lD(t)?t:t+""}function gD(){return gD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gD.apply(this,arguments)}rD(sD,"displayName","XAxis"),rD(sD,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var vD=function(e){var n=e.yAxisId,r=uC(),a=dC(),o=cC(n);return null==o?null:t.createElement(JT,gD({},o,{className:c("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(e){return Jk(e,!0)}}))},yD=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),uD(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fD(e,t)}(n,e),r=n,(a=[{key:"render",value:function(){return t.createElement(vD,this.props)}}])&&cD(r.prototype,a),o&&cD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,o}(t.Component);pD(yD,"displayName","YAxis"),pD(yD,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var xD=function(e){var n=e.chartName,r=e.GraphicalChild,a=e.defaultTooltipEventType,o=void 0===a?"axis":a,i=e.validateTooltipEventTypes,s=void 0===i?["axis"]:i,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(e,t){var n=t.graphicalItems,r=t.stackGroups,a=t.offset,o=t.updateId,i=t.dataStartIndex,s=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,f=e.maxBarSize,p=wE(u),m=p.numericAxisName,g=p.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some(function(e){var t=Zf(e&&e.type);return t&&t.indexOf("Bar")>=0})}(n),y=[];return n.forEach(function(n,p){var x=fE(e.data,{graphicalItems:[n],dataStartIndex:i,dataEndIndex:s}),b=void 0!==n.type.defaultProps?iE(iE({},n.type.defaultProps),n.props):n.props,w=b.dataKey,j=b.maxBarSize,_=b["".concat(m,"Id")],N=b["".concat(g,"Id")],k=l.reduce(function(e,n){var r=t["".concat(n.axisType,"Map")],a=b["".concat(n.axisType,"Id")];r&&r[a]||"zAxis"===n.axisType||kp(!1);var o=r[a];return iE(iE({},e),{},sE(sE({},n.axisType,o),"".concat(n.axisType,"Ticks"),Jk(o)))},{}),S=k[g],A=k["".concat(g,"Ticks")],O=r&&r[_]&&r[_].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?Uk(Uk({},e.type.defaultProps),e.props):e.props).stackId;if(Sf(r)){var a=t[r];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null}(n,r[_].stackGroups),C=Zf(n.type).indexOf("Bar")>=0,P=lS(S,A),E=[],T=v&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,a=void 0===r?{}:r;if(!a)return{};for(var o={},i=Object.keys(a),s=0,l=i.length;s<l;s++)for(var c=a[i[s]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var f=c[u[d]],p=f.items,m=f.cateAxisId,g=p.filter(function(e){return Zf(e.type).indexOf("Bar")>=0});if(g&&g.length){var v=g[0].type.defaultProps,y=void 0!==v?Uk(Uk({},v),g[0].props):g[0].props,x=y.barSize,b=y[m];o[b]||(o[b]=[]);var w=jf()(x)?t:x;o[b].push({item:g[0],stackList:g.slice(1),barSize:jf()(w)?void 0:Cf(w,n,0)})}}return o}({barSize:c,stackGroups:r,totalSize:_E(k,g)});if(C){var D,I,M=jf()(j)?f:j,R=null!==(D=null!==(I=lS(S,A,!0))&&void 0!==I?I:M)&&void 0!==D?D:0;E=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,a=e.sizeList,o=void 0===a?[]:a,i=e.maxBarSize,s=o.length;if(s<1)return null;var l,c=Cf(t,r,0,!0),u=[];if(o[0].barSize===+o[0].barSize){var d=!1,h=r/s,f=o.reduce(function(e,t){return e+t.barSize||0},0);(f+=(s-1)*c)>=r&&(f-=(s-1)*c,c=0),f>=r&&h>0&&(d=!0,f=s*(h*=.9));var p={offset:((r-f)/2|0)-c,size:0};l=o.reduce(function(e,t){var n={item:t.item,position:{offset:p.offset+p.size+c,size:d?h:t.barSize}},r=[].concat(Fk(e),[n]);return p=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:p})}),r},u)}else{var m=Cf(n,r,0,!0);r-2*m-(s-1)*c<=0&&(c=0);var g=(r-2*m-(s-1)*c)/s;g>1&&(g>>=0);var v=i===+i?Math.min(g,i):g;l=o.reduce(function(e,t,n){var r=[].concat(Fk(e),[{item:t.item,position:{offset:m+(g+c)*n+(g-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},u)}return l}({barGap:d,barCategoryGap:h,bandSize:R!==P?R:P,sizeList:T[N],maxBarSize:M}),R!==P&&(E=E.map(function(e){return iE(iE({},e),{},{position:iE(iE({},e.position),{},{offset:e.position.offset-R/2})})}))}var L,F,z=n&&n.type&&n.type.getComposedData;z&&y.push({props:iE(iE({},z(iE(iE({},k),{},{displayedData:x,props:e,dataKey:w,item:n,bandSize:P,barPosition:E,offset:a,stackedData:O,layout:u,dataStartIndex:i,dataEndIndex:s}))),{},sE(sE(sE({key:n.key||"item-".concat(p)},m,k[m]),g,k[g]),"animationId",o)),childIndex:(L=n,F=e.children,np(F).indexOf(L)),item:n})}),y},p=function(e,t){var a=e.props,o=e.dataStartIndex,i=e.dataEndIndex,s=e.updateId;if(!op({props:a}))return null;var c=a.children,u=a.layout,h=a.stackOffset,p=a.data,m=a.reverseStackOrder,g=wE(u),v=g.numericAxisName,y=g.cateAxisName,x=rp(c,r),b=function(e,t,n,r,a,o){if(!e)return null;var i=(o?t.reverse():t).reduce(function(e,t){var a,o=null!==(a=t.type)&&void 0!==a&&a.defaultProps?Uk(Uk({},t.type.defaultProps),t.props):t.props,i=o.stackId;if(o.hide)return e;var s=o[n],l=e[s]||{hasStack:!1,stackGroups:{}};if(Sf(i)){var c=l.stackGroups[i]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[i]=c}else l.stackGroups[Of("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return Uk(Uk({},e),{},Wk({},s,l))},{});return Object.keys(i).reduce(function(t,o){var s=i[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce(function(t,o){var i=s.stackGroups[o];return Uk(Uk({},t),{},Wk({},o,{numericAxisId:n,cateAxisId:r,items:i.items,stackedData:tS(e,i.items,a)}))},{})),Uk(Uk({},t),{},Wk({},o,s))},{})}(p,x,"".concat(v,"Id"),"".concat(y,"Id"),h,m),w=l.reduce(function(e,t){var n="".concat(t.axisType,"Map");return iE(iE({},e),{},sE({},n,xE(a,iE(iE({},t),{},{graphicalItems:x,stackGroups:t.axisType===v&&b,dataStartIndex:o,dataEndIndex:i}))))},{}),j=jE(iE(iE({},w),{},{props:a,graphicalItems:x}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(w).forEach(function(e){w[e]=d(a,w[e],j,e.replace("Map",""),n)});var _=function(e){var t=Pf(e),n=Jk(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:_p()(n,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:lS(t,n)}}(w["".concat(y,"Map")]),N=f(a,iE(iE({},w),{},{dataStartIndex:o,dataEndIndex:i,updateId:s,graphicalItems:x,stackGroups:b,offset:j}));return iE(iE({formattedGraphicalItems:N,graphicalItems:x,offset:j,stackGroups:b},_),w)},m=function(e){function r(e){var a,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),sE(i=QP(this,r,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),sE(i,"accessibilityManager",new YC),sE(i,"handleLegendBBoxUpdate",function(e){if(e){var t=i.state,n=t.dataStartIndex,r=t.dataEndIndex,a=t.updateId;i.setState(iE({legendBBox:e},p({props:i.props,dataStartIndex:n,dataEndIndex:r,updateId:a},iE(iE({},i.state),{},{legendBBox:e}))))}}),sE(i,"handleReceiveSyncEvent",function(e,t,n){if(i.props.syncId===e){if(n===i.eventEmitterSymbol&&"function"!==typeof i.props.syncMethod)return;i.applySyncEvent(t)}}),sE(i,"handleBrushChange",function(e){var t=e.startIndex,n=e.endIndex;if(t!==i.state.dataStartIndex||n!==i.state.dataEndIndex){var r=i.state.updateId;i.setState(function(){return iE({dataStartIndex:t,dataEndIndex:n},p({props:i.props,dataStartIndex:t,dataEndIndex:n,updateId:r},i.state))}),i.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}}),sE(i,"handleMouseEnter",function(e){var t=i.getMouseInfo(e);if(t){var n=iE(iE({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseEnter;Rf()(r)&&r(n,e)}}),sE(i,"triggeredAfterMouseMove",function(e){var t=i.getMouseInfo(e),n=t?iE(iE({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};i.setState(n),i.triggerSyncEvent(n);var r=i.props.onMouseMove;Rf()(r)&&r(n,e)}),sE(i,"handleItemMouseEnter",function(e){i.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),sE(i,"handleItemMouseLeave",function(){i.setState(function(){return{isTooltipActive:!1}})}),sE(i,"handleMouseMove",function(e){e.persist(),i.throttleTriggeredAfterMouseMove(e)}),sE(i,"handleMouseLeave",function(e){i.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};i.setState(t),i.triggerSyncEvent(t);var n=i.props.onMouseLeave;Rf()(n)&&n(t,e)}),sE(i,"handleOuterEvent",function(e){var t,n=function(e){var t=e&&e.type;return t&&Qf[t]?Qf[t]:null}(e),r=yf()(i.props,"".concat(n));n&&Rf()(r)&&r(null!==(t=/.*touch.*/i.test(n)?i.getMouseInfo(e.changedTouches[0]):i.getMouseInfo(e))&&void 0!==t?t:{},e)}),sE(i,"handleClick",function(e){var t=i.getMouseInfo(e);if(t){var n=iE(iE({},t),{},{isTooltipActive:!0});i.setState(n),i.triggerSyncEvent(n);var r=i.props.onClick;Rf()(r)&&r(n,e)}}),sE(i,"handleMouseDown",function(e){var t=i.props.onMouseDown;Rf()(t)&&t(i.getMouseInfo(e),e)}),sE(i,"handleMouseUp",function(e){var t=i.props.onMouseUp;Rf()(t)&&t(i.getMouseInfo(e),e)}),sE(i,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),sE(i,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseDown(e.changedTouches[0])}),sE(i,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&i.handleMouseUp(e.changedTouches[0])}),sE(i,"handleDoubleClick",function(e){var t=i.props.onDoubleClick;Rf()(t)&&t(i.getMouseInfo(e),e)}),sE(i,"handleContextMenu",function(e){var t=i.props.onContextMenu;Rf()(t)&&t(i.getMouseInfo(e),e)}),sE(i,"triggerSyncEvent",function(e){void 0!==i.props.syncId&&qC.emit(HC,i.props.syncId,e,i.eventEmitterSymbol)}),sE(i,"applySyncEvent",function(e){var t=i.props,n=t.layout,r=t.syncMethod,a=i.state.updateId,o=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)i.setState(iE({dataStartIndex:o,dataEndIndex:s},p({props:i.props,dataStartIndex:o,dataEndIndex:s,updateId:a},i.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=i.state,h=d.offset,f=d.tooltipTicks;if(!h)return;if("function"===typeof r)u=r(f,e);else if("value"===r){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===e.activeLabel){u=m;break}}var g=iE(iE({},h),{},{x:h.left,y:h.top}),v=Math.min(l,g.x+g.width),y=Math.min(c,g.y+g.height),x=f[u]&&f[u].value,b=gE(i.state,i.props.data,u),w=f[u]?{x:"horizontal"===n?f[u].coordinate:v,y:"horizontal"===n?y:f[u].coordinate}:dE;i.setState(iE(iE({},e),{},{activeLabel:x,activeCoordinate:w,activePayload:b,activeTooltipIndex:u}))}else i.setState(e)}),sE(i,"renderCursor",function(e){var r,a=i.state,o=a.isTooltipActive,s=a.activeCoordinate,l=a.activePayload,c=a.offset,u=a.activeTooltipIndex,d=a.tooltipAxisBandSize,h=i.getTooltipEventType(),f=null!==(r=e.props.active)&&void 0!==r?r:o,p=i.props.layout,m=e.key||"_recharts-cursor";return t.createElement(HP,{key:m,activeCoordinate:s,activePayload:l,activeTooltipIndex:u,chartName:n,element:e,isActive:f,layout:p,offset:c,tooltipAxisBandSize:d,tooltipEventType:h})}),sE(i,"renderPolarAxis",function(e,n,r){var a=yf()(e,"type.axisType"),o=yf()(i.state,"".concat(a,"Map")),s=e.type.defaultProps,l=void 0!==s?iE(iE({},s),e.props):e.props,u=o&&o[l["".concat(a,"Id")]];return(0,t.cloneElement)(e,iE(iE({},u),{},{className:c(a,u.className),key:e.key||"".concat(n,"-").concat(r),ticks:Jk(u,!0)}))}),sE(i,"renderPolarGrid",function(e){var n=e.props,r=n.radialLines,a=n.polarAngles,o=n.polarRadius,s=i.state,l=s.radiusAxisMap,c=s.angleAxisMap,u=Pf(l),d=Pf(c),h=d.cx,f=d.cy,p=d.innerRadius,m=d.outerRadius;return(0,t.cloneElement)(e,{polarAngles:Array.isArray(a)?a:Jk(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(o)?o:Jk(u,!0).map(function(e){return e.coordinate}),cx:h,cy:f,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:r})}),sE(i,"renderLegend",function(){var e=i.state.formattedGraphicalItems,n=i.props,r=n.children,a=n.width,o=n.height,s=i.props.margin||{},l=a-(s.left||0)-(s.right||0),c=Rk({children:r,formattedGraphicalItems:e,legendWidth:l,legendContent:u});if(!c)return null;var d=c.item,h=JP(c,VP);return(0,t.cloneElement)(d,iE(iE({},h),{},{chartWidth:a,chartHeight:o,margin:s,onBBoxUpdate:i.handleLegendBBoxUpdate}))}),sE(i,"renderTooltip",function(){var e,n=i.props,r=n.children,a=n.accessibilityLayer,o=ap(r,wm);if(!o)return null;var s=i.state,l=s.isTooltipActive,c=s.activeCoordinate,u=s.activePayload,d=s.activeLabel,h=s.offset,f=null!==(e=o.props.active)&&void 0!==e?e:l;return(0,t.cloneElement)(o,{viewBox:iE(iE({},h),{},{x:h.left,y:h.top}),active:f,label:d,payload:f?u:[],coordinate:c,accessibilityLayer:a})}),sE(i,"renderBrush",function(e){var n=i.props,r=n.margin,a=n.data,o=i.state,s=o.offset,l=o.dataStartIndex,c=o.dataEndIndex,u=o.updateId;return(0,t.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:Qk(i.handleBrushChange,e.props.onChange),data:a,x:kf(e.props.x)?e.props.x:s.left,y:kf(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(r.bottom||0),width:kf(e.props.width)?e.props.width:s.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})}),sE(i,"renderReferenceElement",function(e,n,r){if(!e)return null;var a=i.clipPathId,o=i.state,s=o.xAxisMap,l=o.yAxisMap,c=o.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,f=void 0===h?u.xAxisId:h,p=d.yAxisId,m=void 0===p?u.yAxisId:p;return(0,t.cloneElement)(e,{key:e.key||"".concat(n,"-").concat(r),xAxis:s[f],yAxis:l[m],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:a})}),sE(i,"renderActivePoints",function(e){var t=e.item,n=e.activePoint,a=e.basePoint,o=e.childIndex,i=e.isRange,s=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?iE(iE({},t.item.type.defaultProps),t.item.props):t.item.props,u=c.activeDot,d=iE(iE({index:o,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:Vk(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},cp(u,!1)),Kf(u));return s.push(r.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(o))),a?s.push(r.renderActiveDot(u,iE(iE({},d),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(o))):i&&s.push(null),s}),sE(i,"renderGraphicChild",function(e,n,r){var a=i.filterFormatItem(e,n,r);if(!a)return null;var o=i.getTooltipEventType(),s=i.state,l=s.isTooltipActive,c=s.tooltipAxis,u=s.activeTooltipIndex,d=s.activeLabel,h=ap(i.props.children,wm),f=a.props,p=f.points,m=f.isRange,g=f.baseLine,v=void 0!==a.item.type.defaultProps?iE(iE({},a.item.type.defaultProps),a.item.props):a.item.props,y=v.activeDot,x=v.hide,b=v.activeBar,w=v.activeShape,j=Boolean(!x&&l&&h&&(y||b||w)),_={};"axis"!==o&&h&&"click"===h.props.trigger?_={onClick:Qk(i.handleItemMouseEnter,e.props.onClick)}:"axis"!==o&&(_={onMouseLeave:Qk(i.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:Qk(i.handleItemMouseEnter,e.props.onMouseEnter)});var N=(0,t.cloneElement)(e,iE(iE({},a.props),_));if(j){if(!(u>=0)){var k,S=(null!==(k=i.getItemByXY(i.state.activeCoordinate))&&void 0!==k?k:{graphicalItem:N}).graphicalItem,A=S.item,O=void 0===A?e:A,C=S.childIndex,P=iE(iE(iE({},a.props),_),{},{activeIndex:C});return[(0,t.cloneElement)(O,P),null,null]}var E,T;if(c.dataKey&&!c.allowDuplicatedCategory){var D="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());E=Tf(p,D,d),T=m&&g&&Tf(g,D,d)}else E=null===p||void 0===p?void 0:p[u],T=m&&g&&g[u];if(w||b){var I=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,t.cloneElement)(e,iE(iE(iE({},a.props),_),{},{activeIndex:I})),null,null]}if(!jf()(E))return[N].concat(nE(i.renderActivePoints({item:a,activePoint:E,basePoint:T,childIndex:u,isRange:m})))}return m?[N,null,null]:[N,null]}),sE(i,"renderCustomized",function(e,n,r){return(0,t.cloneElement)(e,iE(iE({key:"recharts-customized-".concat(r)},i.props),i.state))}),sE(i,"renderMap",{CartesianGrid:{handler:hE,once:!0},ReferenceArea:{handler:i.renderReferenceElement},ReferenceLine:{handler:hE},ReferenceDot:{handler:i.renderReferenceElement},XAxis:{handler:hE},YAxis:{handler:hE},Brush:{handler:i.renderBrush,once:!0},Bar:{handler:i.renderGraphicChild},Line:{handler:i.renderGraphicChild},Area:{handler:i.renderGraphicChild},Radar:{handler:i.renderGraphicChild},RadialBar:{handler:i.renderGraphicChild},Scatter:{handler:i.renderGraphicChild},Pie:{handler:i.renderGraphicChild},Funnel:{handler:i.renderGraphicChild},Tooltip:{handler:i.renderCursor,once:!0},PolarGrid:{handler:i.renderPolarGrid,once:!0},PolarAngleAxis:{handler:i.renderPolarAxis},PolarRadiusAxis:{handler:i.renderPolarAxis},Customized:{handler:i.renderCustomized}}),i.clipPathId="".concat(null!==(a=e.id)&&void 0!==a?a:Of("recharts"),"-clip"),i.throttleTriggeredAfterMouseMove=hf()(i.triggeredAfterMouseMove,null!==(o=e.throttleDelay)&&void 0!==o?o:1e3/60),i.state={},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tE(e,t)}(r,e),a=r,i=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,a=e.layout,o=ap(t,wm);if(o){var i=o.props.defaultIndex;if(!("number"!==typeof i||i<0||i>this.state.tooltipTicks.length-1)){var s=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=gE(this.state,n,i,s),c=this.state.tooltipTicks[i].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===a?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(d=iE(iE({},d),h.props.points[i].tooltipPosition),l=h.props.points[i].tooltipPayload);var f={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:d};this.setState(f),this.renderCursor(o),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){up([ap(e.children,wm)],[ap(this.props.children,wm)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=ap(this.props.children,wm);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:o}return o}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),a={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(e.pageX-a.left),chartY:Math.round(e.pageY-a.top)},i=r.width/n.offsetWidth||1,s=this.inRange(o.chartX,o.chartY,i);if(!s)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap,d=this.getTooltipEventType(),h=vE(this.state,this.props.data,this.props.layout,s);if("axis"!==d&&c&&u){var f=Pf(c).scale,p=Pf(u).scale,m=f&&f.invert?f.invert(o.chartX):null,g=p&&p.invert?p.invert(o.chartY):null;return iE(iE({},o),{},{xValue:m,yValue:g},h)}return h?iE(iE({},o),h):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,a=e/n,o=t/n;if("horizontal"===r||"vertical"===r){var i=this.state.offset;return a>=i.left&&a<=i.left+i.width&&o>=i.top&&o<=i.top+i.height?{x:a,y:o}:null}var s=this.state,l=s.angleAxisMap,c=s.radiusAxisMap;if(l&&c){var u=Pf(l);return FS({x:a,y:o},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=ap(e,wm),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),iE(iE({},Kf(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){qC.on(HC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){qC.removeListener(HC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,a=0,o=r.length;a<o;a++){var i=r[a];if(i.item===e||i.props.key===e.key||t===Zf(i.item.type)&&n===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,n=this.state.offset,r=n.left,a=n.top,o=n.height,i=n.width;return t.createElement("defs",null,t.createElement("clipPath",{id:e},t.createElement("rect",{x:r,y:a,height:o,width:i})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=YP(t,2),r=n[0],a=n[1];return iE(iE({},e),{},sE({},r,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=YP(t,2),r=n[0],a=n[1];return iE(iE({},e),{},sE({},r,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var a=0,o=n.length;a<o;a++){var i=n[a],s=i.props,l=i.item,c=void 0!==l.type.defaultProps?iE(iE({},l.type.defaultProps),l.props):l.props,u=Zf(l.type);if("Bar"===u){var d=(s.data||[]).find(function(t){return Ry(e,t)});if(d)return{graphicalItem:i,payload:d}}else if("RadialBar"===u){var h=(s.data||[]).find(function(t){return FS(e,t)});if(h)return{graphicalItem:i,payload:h}}else if(YA(i,r)||JA(i,r)||XA(i,r)){var f=tO({graphicalItem:i,activeTooltipItem:r,itemData:c.data}),p=void 0===c.activeIndex?f:c.activeIndex;return{graphicalItem:iE(iE({},i),{},{childIndex:p}),payload:XA(i,r)?c.data[f]:i.props.data[f]}}}return null}},{key:"render",value:function(){var e=this;if(!op(this))return null;var n,r,a=this.props,o=a.children,i=a.className,s=a.width,l=a.height,u=a.style,d=a.compact,h=a.title,f=a.desc,p=JP(a,KP),m=cp(p,!1);if(d)return t.createElement(sC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement(Cp,GP({},m,{width:s,height:l,title:h,desc:f}),this.renderClipPath(),hp(o,this.renderMap)));this.props.accessibilityLayer&&(m.tabIndex=null!==(n=this.props.tabIndex)&&void 0!==n?n:0,m.role=null!==(r=this.props.role)&&void 0!==r?r:"application",m.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},m.onFocus=function(){e.accessibilityManager.focus()});var g=this.parseEventsOfWrapper();return t.createElement(sC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement("div",GP({className:c("recharts-wrapper",i),style:iE({position:"relative",cursor:"default",width:s,height:l},u)},g,{ref:function(t){e.container=t}}),t.createElement(Cp,GP({},m,{width:s,height:l,title:h,desc:f,style:uE}),this.renderClipPath(),hp(o,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],i&&XP(a.prototype,i),l&&XP(a,l),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,l}(t.Component);sE(m,"displayName",n),sE(m,"defaultProps",iE({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),sE(m,"getDerivedStateFromProps",function(e,t){var n=e.dataKey,r=e.data,a=e.children,o=e.width,i=e.height,s=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=bE(e);return iE(iE(iE({},h),{},{updateId:0},p(iE(iE({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:i,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(n!==t.prevDataKey||r!==t.prevData||o!==t.prevWidth||i!==t.prevHeight||s!==t.prevLayout||l!==t.prevStackOffset||!Bf(c,t.prevMargin)){var f=bE(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=iE(iE({},vE(t,r,s)),{},{updateId:t.updateId+1}),v=iE(iE(iE({},f),m),g);return iE(iE(iE({},v),p(iE({props:e},v),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:i,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:a})}if(!up(a,t.prevChildren)){var y,x,b,w,j=ap(a,OS),_=j&&null!==(y=null===(x=j.props)||void 0===x?void 0:x.startIndex)&&void 0!==y?y:u,N=j&&null!==(b=null===(w=j.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:d,k=_!==u||N!==d,S=!jf()(r)&&!k?t.updateId:t.updateId+1;return iE(iE({updateId:S},p(iE(iE({props:e},t),{},{updateId:S,dataStartIndex:_,dataEndIndex:N}),t)),{},{prevChildren:a,dataStartIndex:_,dataEndIndex:N})}return null}),sE(m,"renderActiveDot",function(e,n,r){var a;return a=(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):Rf()(e)?e(n):t.createElement(Qg,n),t.createElement(Dp,{className:"recharts-active-dot",key:r},a)});var g=(0,t.forwardRef)(function(e,n){return t.createElement(m,GP({},e,{ref:n}))});return g.displayName=m.displayName,g}({chartName:"ComposedChart",GraphicalChild:[tT,FE,SO,ST],axisComponents:[{axisType:"xAxis",AxisComp:sD},{axisType:"yAxis",AxisComp:yD},{axisType:"zAxis",AxisComp:uT}],formatAxisMap:function(t,n,r,a,o){var i=t.width,s=t.height,l=t.layout,c=t.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:i-r.right,rightMirror:i-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!ap(c,SO);return u.reduce(function(i,s){var c,u,f,p,m,g=n[s],v=g.orientation,y=g.domain,x=g.padding,b=void 0===x?{}:x,w=g.mirror,j=g.reversed,_="".concat(v).concat(w?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var N=y[1]-y[0],k=1/0,S=g.categoricalDomain.sort(Df);if(S.forEach(function(e,t){t>0&&(k=Math.min((e||0)-(S[t-1]||0),k))}),Number.isFinite(k)){var A=k/N,O="vertical"===g.layout?r.height:r.width;if("gap"===g.padding&&(c=A*O/2),"no-gap"===g.padding){var C=Cf(t.barCategoryGap,A*O),P=A*O/2;c=P-C-(P-C)/O*C}}}u="xAxis"===a?[r.left+(b.left||0)+(c||0),r.left+r.width-(b.right||0)-(c||0)]:"yAxis"===a?"horizontal"===l?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(c||0),r.top+r.height-(b.bottom||0)-(c||0)]:g.range,j&&(u=[u[1],u[0]]);var E=function(t,n,r){var a=t.scale,o=t.type,i=t.layout,s=t.axisType;if("auto"===a)return"radial"===i&&"radiusAxis"===s?{scale:Gy(),realScaleType:"band"}:"radial"===i&&"angleAxis"===s?{scale:yw(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Jy(),realScaleType:"point"}:"category"===o?{scale:Gy(),realScaleType:"band"}:{scale:yw(),realScaleType:"linear"};if(pf()(a)){var l="scale".concat(_m()(a));return{scale:(e[l]||Jy)(),realScaleType:e[l]?l:"point"}}return Rf()(a)?{scale:a}:{scale:Jy(),realScaleType:"point"}}(g,o,h),T=E.scale,D=E.realScaleType;T.domain(y).range(u),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),a=Math.min(r[0],r[1])-Zk,o=Math.max(r[0],r[1])+Zk,i=e(t[0]),s=e(t[n-1]);(i<a||i>o||s<a||s>o)&&e.domain([t[0],t[n-1]])}}(T);var I=function(e,t){var n=t.realScaleType,r=t.type,a=t.tickCount,o=t.originalDomain,i=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(a&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var c=gk(l,a,i);return e.domain([FN()(c),RN()(c)]),{niceTicks:c}}if(a&&"number"===r){var u=e.domain();return{niceTicks:vk(u,a,i)}}return null}(T,PO(PO({},g),{},{realScaleType:D}));"xAxis"===a?(m="top"===v&&!w||"bottom"===v&&w,f=r.left,p=d[_]-m*g.height):"yAxis"===a&&(m="left"===v&&!w||"right"===v&&w,f=d[_]-m*g.width,p=r.top);var M=PO(PO(PO({},g),I),{},{realScaleType:D,x:f,y:p,scale:T,width:"xAxis"===a?r.width:g.width,height:"yAxis"===a?r.height:g.height});return M.bandSize=lS(M,I),g.hide||"xAxis"!==a?g.hide||(d[_]+=(m?-1:1)*M.width):d[_]+=(m?-1:1)*M.height,PO(PO({},i),{},EO({},s,M))},{})}}),bD=["x1","y1","x2","y2","key"],wD=["offset"];function jD(e){return jD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jD(e)}function _D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ND(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_D(Object(n),!0).forEach(function(t){kD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kD(e,t,n){return t=function(e){var t=function(e,t){if("object"!=jD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jD(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SD(){return SD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SD.apply(this,arguments)}function AD(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var OD=function(e){var n=e.fill;if(!n||"none"===n)return null;var r=e.fillOpacity,a=e.x,o=e.y,i=e.width,s=e.height,l=e.ry;return t.createElement("rect",{x:a,y:o,ry:l,width:i,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function CD(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(Rf()(e))r=e(n);else{var a=n.x1,o=n.y1,i=n.x2,s=n.y2,l=n.key,c=AD(n,bD),u=cp(c,!1),d=(u.offset,AD(u,wD));r=t.createElement("line",SD({},d,{x1:a,y1:o,x2:i,y2:s,fill:"none",key:l}))}return r}function PD(e){var n=e.x,r=e.width,a=e.horizontal,o=void 0===a||a,i=e.horizontalPoints;if(!o||!i||!i.length)return null;var s=i.map(function(t,a){var i=ND(ND({},e),{},{x1:n,y1:t,x2:n+r,y2:t,key:"line-".concat(a),index:a});return CD(o,i)});return t.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function ED(e){var n=e.y,r=e.height,a=e.vertical,o=void 0===a||a,i=e.verticalPoints;if(!o||!i||!i.length)return null;var s=i.map(function(t,a){var i=ND(ND({},e),{},{x1:t,y1:n,x2:t,y2:n+r,key:"line-".concat(a),index:a});return CD(o,i)});return t.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function TD(e){var n=e.horizontalFill,r=e.fillOpacity,a=e.x,o=e.y,i=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal;if(!(void 0===c||c)||!n||!n.length)return null;var u=l.map(function(e){return Math.round(e+o-o)}).sort(function(e,t){return e-t});o!==u[0]&&u.unshift(0);var d=u.map(function(e,l){var c=!u[l+1]?o+s-e:u[l+1]-e;if(c<=0)return null;var d=l%n.length;return t.createElement("rect",{key:"react-".concat(l),y:e,x:a,height:c,width:i,stroke:"none",fill:n[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return t.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function DD(e){var n=e.vertical,r=void 0===n||n,a=e.verticalFill,o=e.fillOpacity,i=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!a||!a.length)return null;var d=u.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==d[0]&&d.unshift(0);var h=d.map(function(e,n){var r=!d[n+1]?i+l-e:d[n+1]-e;if(r<=0)return null;var u=n%a.length;return t.createElement("rect",{key:"react-".concat(n),x:e,y:s,width:r,height:c,stroke:"none",fill:a[u],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return t.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var ID=function(e,t){var n=e.xAxis,r=e.width,a=e.height,o=e.offset;return Yk(IT(ND(ND(ND({},JT.defaultProps),n),{},{ticks:Jk(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),o.left,o.left+o.width,t)},MD=function(e,t){var n=e.yAxis,r=e.width,a=e.height,o=e.offset;return Yk(IT(ND(ND(ND({},JT.defaultProps),n),{},{ticks:Jk(n,!0),viewBox:{x:0,y:0,width:r,height:a}})),o.top,o.top+o.height,t)},RD={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function LD(e){var n,r,a,o,i,s,l=uC(),c=dC(),u=(0,t.useContext)(rC),d=ND(ND({},e),{},{stroke:null!==(n=e.stroke)&&void 0!==n?n:RD.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:RD.fill,horizontal:null!==(a=e.horizontal)&&void 0!==a?a:RD.horizontal,horizontalFill:null!==(o=e.horizontalFill)&&void 0!==o?o:RD.horizontalFill,vertical:null!==(i=e.vertical)&&void 0!==i?i:RD.vertical,verticalFill:null!==(s=e.verticalFill)&&void 0!==s?s:RD.verticalFill,x:kf(e.x)?e.x:u.left,y:kf(e.y)?e.y:u.top,width:kf(e.width)?e.width:u.width,height:kf(e.height)?e.height:u.height}),h=d.x,f=d.y,p=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,y=d.verticalValues,x=function(){var e=(0,t.useContext)(eC);return Pf(e)}(),b=function(){var e=(0,t.useContext)(tC);return XO()(e,function(e){return tA()(e.domain,Number.isFinite)})||Pf(e)}();if(!kf(p)||p<=0||!kf(m)||m<=0||!kf(h)||h!==+h||!kf(f)||f!==+f)return null;var w=d.verticalCoordinatesGenerator||ID,j=d.horizontalCoordinatesGenerator||MD,_=d.horizontalPoints,N=d.verticalPoints;if((!_||!_.length)&&Rf()(j)){var k=v&&v.length,S=j({yAxis:b?ND(ND({},b),{},{ticks:k?v:b.ticks}):void 0,width:l,height:c,offset:u},!!k||g);If(Array.isArray(S),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(jD(S),"]")),Array.isArray(S)&&(_=S)}if((!N||!N.length)&&Rf()(w)){var A=y&&y.length,O=w({xAxis:x?ND(ND({},x),{},{ticks:A?y:x.ticks}):void 0,width:l,height:c,offset:u},!!A||g);If(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(jD(O),"]")),Array.isArray(O)&&(N=O)}return t.createElement("g",{className:"recharts-cartesian-grid"},t.createElement(OD,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),t.createElement(PD,SD({},d,{offset:u,horizontalPoints:_,xAxis:x,yAxis:b})),t.createElement(ED,SD({},d,{offset:u,verticalPoints:N,xAxis:x,yAxis:b})),t.createElement(TD,SD({},d,{horizontalPoints:_})),t.createElement(DD,SD({},d,{verticalPoints:N})))}LD.displayName="CartesianGrid";const FD=$e("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),zD=$e("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),BD=$e("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),UD=e=>{let{user:n}=e;const{t:r}=Lt(),[a,i]=(0,t.useState)([]),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)("all"),[v,y]=(0,t.useState)("30"),[x,b]=(0,t.useState)("overview"),[w,j]=(0,t.useState)(!0),[_,N]=(0,t.useState)(""),k=!0,[S,A]=(0,t.useState)(new Set),[O,C]=(0,t.useState)("totalRolling"),[P,E]=(0,t.useState)("desc"),T=e=>void 0===e||null===e||isNaN(e)?"0":e.toLocaleString(),D=e=>void 0===e||null===e||isNaN(e)?0:e,I=(0,t.useCallback)(async()=>{try{N(""),console.log("\ud83d\udcca Loading real-time reports data from backend API...");const t="http://localhost:3001/api",n=await Rh.b.getToken();if(console.log("\ud83d\udd0d API Connection Debug:",{API_URL:t,hasToken:!!n,tokenLength:(null===n||void 0===n?void 0:n.length)||0}),!n)throw new Error("No authentication token found. Please log in again.");const[r,a,s,c,d]=await Promise.all([fetch("".concat(t,"/agents"),{headers:{Authorization:"Bearer ".concat(n)}}),fetch("".concat(t,"/customers"),{headers:{Authorization:"Bearer ".concat(n)}}),fetch("".concat(t,"/trips"),{headers:{Authorization:"Bearer ".concat(n)}}),fetch("".concat(t,"/rolling-records"),{headers:{Authorization:"Bearer ".concat(n)}}),fetch("".concat(t,"/transactions"),{headers:{Authorization:"Bearer ".concat(n)}})]);if(!r.ok||!a.ok||!s.ok||!c.ok||!d.ok){console.error("\u274c API Request Failed:",{agents:{ok:r.ok,status:r.status,statusText:r.statusText},customers:{ok:a.ok,status:a.status,statusText:a.statusText},trips:{ok:s.ok,status:s.status,statusText:s.statusText},rollingRecords:{ok:c.ok,status:c.status,statusText:c.statusText},transactions:{ok:d.ok,status:d.status,statusText:d.statusText}});try{const e=await r.text();console.error("Agents API Error:",e)}catch(e){console.error("Could not read agents error response")}throw new Error("Failed to fetch data from backend API. Status codes: agents=".concat(r.status,", customers=").concat(a.status,", trips=").concat(s.status,", rolling=").concat(c.status,", transactions=").concat(d.status))}const[f,m,g,v,y]=await Promise.all([r.json(),a.json(),s.json(),c.json(),d.json()]);console.log("\ud83d\udd0d API Response Debug:",{agentsResponse:{ok:r.ok,status:r.status},customersResponse:{ok:a.ok,status:a.status},tripsResponse:{ok:s.ok,status:s.status},rollingRecordsResponse:{ok:c.ok,status:c.status},transactionsResponse:{ok:d.ok,status:d.status}}),console.log("\ud83d\udd0d API Data Debug:",{agentsResult:f,customersResult:m,tripsResult:g,rollingRecordsResult:v,transactionsResult:y});const x=f.data||[],b=m.data||[],w=g.data||[],j=v.data||[],_=y.data||[];console.log("\ud83d\udd0d Extracted Data Counts:",{agentsData:x.length,customersData:b.length,tripsData:w.length,rollingRecordsData:j.length,transactionRecordsData:_.length}),console.log("\ud83d\udcca Loaded transaction data:"),console.log("  - Rolling records:",j.length),console.log("  - Transaction records:",_.length);const k=b.map(e=>(0,o.A)((0,o.A)({},e),{},{totalRolling:e.totalRolling||0,totalWinLoss:e.totalWinLoss||0,totalBuyIn:e.totalBuyIn||0,totalBuyOut:e.totalBuyOut||0,attachments:e.attachments||[],isAgent:e.isAgent||!1,rollingPercentage:e.rollingPercentage||1.4,creditLimit:e.creditLimit||0,availableCredit:e.availableCredit||0})),S=w.map(e=>{const t=e.sharing||{totalWinLoss:0,totalExpenses:0,totalRollingCommission:0,totalBuyIn:0,totalBuyOut:0,netCashFlow:0,netResult:0,totalAgentShare:0,companyShare:0,agentSharePercentage:0,companySharePercentage:100,agentBreakdown:[]},n=null!==t&&void 0!==t&&t.totalRollingCommission?t.totalRollingCommission/.014:0;return(0,o.A)((0,o.A)({},e),{},{totalRolling:n,totalWinLoss:(null===t||void 0===t?void 0:t.totalWinLoss)||0,totalBuyIn:(null===t||void 0===t?void 0:t.totalBuyIn)||0,totalBuyOut:(null===t||void 0===t?void 0:t.totalBuyOut)||0,calculatedTotalRolling:(null===t||void 0===t?void 0:t.totalRollingCommission)||0,attachments:e.attachments||[],sharing:{totalWinLoss:(null===t||void 0===t?void 0:t.totalWinLoss)||0,totalExpenses:(null===t||void 0===t?void 0:t.totalExpenses)||0,totalRollingCommission:(null===t||void 0===t?void 0:t.totalRollingCommission)||0,totalBuyIn:(null===t||void 0===t?void 0:t.totalBuyIn)||0,totalBuyOut:(null===t||void 0===t?void 0:t.totalBuyOut)||0,netCashFlow:(null===t||void 0===t?void 0:t.netCashFlow)||0,netResult:(null===t||void 0===t?void 0:t.netResult)||0,totalAgentShare:(null===t||void 0===t?void 0:t.totalAgentShare)||0,companyShare:(null===t||void 0===t?void 0:t.companyShare)||0,agentSharePercentage:(null===t||void 0===t?void 0:t.agentSharePercentage)||0,companySharePercentage:(null===t||void 0===t?void 0:t.companySharePercentage)||100,agentBreakdown:(null===t||void 0===t?void 0:t.agentBreakdown)||[]}})});l(x),i(k),u(S),h(j),p(_),console.log("\u2705 Real-time reports data loaded from backend API: ".concat(k.length," customers, ").concat(x.length," agents, ").concat(S.length," trips with trip_sharing data"))}catch(t){console.error("\u274c Error loading real-time reports data:",t);const e=t instanceof Error?t.message:"Unknown error occurred";N("Failed to load reports data: ".concat(e))}finally{j(!1)}},[]);(0,t.useEffect)(()=>{let e;return I(),e=setInterval(()=>{console.log("\ud83d\udcca Real-time reports refresh triggered"),I()},3e4),()=>{e&&clearInterval(e)}},[I,k]),(0,t.useEffect)(()=>{console.log("\ud83d\udcc5 Date range changed to:",v,"days"),I()},[v,I]);const{filteredCustomers:M,filteredTrips:R,filteredRollingRecords:L,filteredTransactionRecords:F}=(()=>{console.log("\ud83d\udd0d Original Data Counts:",{customers:a.length,trips:c.length,rollingRecords:d.length,transactionRecords:f.length,agents:s.length,userRole:n.role,selectedAgent:m,dateRange:v});let e=a,t=c,r=d,o=f;if("agent"===n.role&&n.agentId)e=a.filter(e=>e.agentId===n.agentId),t=c.filter(e=>e.agents&&e.agents.some(e=>e.agentId===n.agentId)||e.agentId===n.agentId);else if("staff"===n.role&&n.staffId){t=c.filter(e=>e.staffId===n.staffId);const r=Array.from(new Set(t.flatMap(e=>{var t;return(null===(t=e.customers)||void 0===t?void 0:t.map(e=>e.customerId))||[]})));e=a.filter(e=>r.includes(e.id))}if("admin"===n.role&&"all"!==m&&(e=e.filter(e=>e.agentId===m),t=t.filter(e=>e.agents&&e.agents.some(e=>e.agentId===m)||e.agentId===m),r=r.filter(e=>e.agentId===m),o=o.filter(e=>{const t=a.find(t=>t.id===e.customerId);return(null===t||void 0===t?void 0:t.agentId)===m})),"agent"===n.role&&n.agentId)r=r.filter(e=>e.agentId===n.agentId),o=o.filter(e=>{const t=a.find(t=>t.id===e.customerId);return(null===t||void 0===t?void 0:t.agentId)===n.agentId});else if("staff"===n.role&&n.staffId){const e=t.map(e=>e.id);r=r.filter(t=>t.tripId&&e.includes(t.tripId)),o=o.filter(t=>t.tripId&&e.includes(t.tripId))}const i=new Date;return i.setDate(i.getDate()-parseInt(v)),console.log("\ud83d\udd0d Date Filter Debug:",{dateRange:v,cutoffDate:i.toISOString(),customersBeforeFilter:e.length,tripsBeforeFilter:t.length}),t=t.filter(e=>{const t=e.date||e.start_date||e.created_at;if(!t)return!1;const n=new Date(t);return!isNaN(n.getTime())&&n>=i}),r=r.filter(e=>{const t=e.date||e.created_at;if(!t)return!1;const n=new Date(t);return!isNaN(n.getTime())&&n>=i}),o=o.filter(e=>{const t=e.date||e.created_at;if(!t)return!1;const n=new Date(t);return!isNaN(n.getTime())&&n>=i}),console.log("\ud83d\udd0d After Date Filter:",{tripsAfterFilter:t.length,rollingRecordsAfterFilter:r.length,transactionRecordsAfterFilter:o.length}),{filteredCustomers:e,filteredTrips:t,filteredRollingRecords:r,filteredTransactionRecords:o}})(),z=(()=>{const e=R.reduce((e,t)=>e+(t.totalWinLoss||0),0),t=R.reduce((e,t)=>e+(t.totalRolling||0),0),n=R.reduce((e,t)=>e+(t.totalBuyIn||0),0),r=R.reduce((e,t)=>e+(t.totalBuyOut||0),0),a=R.reduce((e,t)=>{var n;return e+((null===(n=t.sharing)||void 0===n?void 0:n.companyShare)||0)},0),o=a>0,i=R.reduce((e,t)=>{var n;return e+D(null===(n=t.sharing)||void 0===n?void 0:n.total_rolling)},0),l=R.reduce((e,t)=>{var n;return e+D(null===(n=t.sharing)||void 0===n?void 0:n.total_win_loss)},0),c=R.reduce((e,t)=>{var n;return e+D(null===(n=t.sharing)||void 0===n?void 0:n.totalExpenses)},0),u=R.reduce((e,t)=>{var n;return e+D(null===(n=t.sharing)||void 0===n?void 0:n.netResult)},0),d=R.reduce((e,t)=>{var n;return e+D(null===(n=t.sharing)||void 0===n?void 0:n.companyShare)},0),h=R.reduce((e,t)=>{var n,r;const a=(null===(n=t.sharing)||void 0===n?void 0:n.total_rolling_commission)||(null===(r=t.sharing)||void 0===r?void 0:r.totalRollingCommission)||0;return e+D(a)},0),f=M.length,p=M.filter(e=>(e.totalRolling||e.total_rolling||0)>0).length,m=R.reduce((e,t)=>e+D(t.totalRolling),0),g=R.reduce((e,t)=>e+D(t.totalWinLoss),0),v=c,y=Math.abs(u-v),x=Math.abs(d);console.group("\ud83d\udcca Calculated Aggregated Metrics"),console.log("\ud83d\udcb0 Total Win/Loss:",e),console.log("\ud83c\udfb2 Total Rolling:",t),console.log("\ud83d\udcb5 Total Buy-In:",n),console.log("\ud83d\udcb8 Total Buy-Out:",r),console.log("\ud83c\udfe2 Company Profit/Loss:",a),console.log("\ud83d\udcc8 Is Company Profitable:",o),console.log("\ud83d\udd22 Filtered Trips Count:",R.length),console.groupEnd(),console.log("\ud83d\udd0d Company Total Win/Loss (from sharing):",l),console.log("\ud83d\udd0d Total Rolling Commission (from sharing):",h),console.log("\ud83d\udd0d Active Customers (with rolling):",p),console.log("\ud83d\udd0d Total Customers:",f),console.groupEnd();const b=s.length,w=s.filter(e=>"active"===e.status).length,j=R.length,_=R.filter(e=>"completed"===e.status).length,N=R.filter(e=>"in-progress"===e.status).length,k=i>0?x/i*100:0,S=M.length>0?M.reduce((e,t)=>e+t.rollingPercentage,0)/M.length:1.4;return console.log("\ud83d\udd0d Trip Sharing Commission Debug:"),R.forEach((e,t)=>{const n=e.sharing||{};console.log("  Trip ".concat(t+1," (").concat(e.name||e.id,"):"),{total_rolling_commission:n.total_rolling_commission,totalRollingCommission:n.totalRollingCommission,total_rolling:n.total_rolling,totalRolling:n.totalRolling,companyShare:n.companyShare,company_share:n.company_share})}),console.log("\ud83d\udd0d Final Metrics Debug:"),console.log("  - Total Rolling (trip.totalRolling):",t),console.log("  - Company Total Rolling (sharing.total_rolling):",i),console.log("  - Total Rolling Commission (sum of trip_sharing.total_rolling_commission):",h),console.log("  - Company Profit/Loss (sharing.companyShare):",a),console.log("  - Active Customers (with rolling > 0):",p),console.log("  - Total Customers:",f),console.log("\ud83d\udd0d Customer Debug:"),console.log("  - Total Customers Found:",M.length),M.slice(0,5).forEach((e,t)=>{console.log("  Customer ".concat(t+1,":"),{name:e.name,totalRolling:e.totalRolling,total_rolling:e.total_rolling,isActive:e.isActive,hasRolling:(e.totalRolling||e.total_rolling||0)>0})}),{customerTotalRolling:t,customerTotalWinLoss:Math.abs(e),customerTotalBuyIn:n,customerTotalBuyOut:r,tripTotalRolling:m,tripTotalWinLoss:g,totalRollingCommission:h,totalExpenses:v,houseGrossWin:Math.abs(e),houseNetWin:y,houseFinalProfit:x,totalCustomers:f,activeCustomers:p,totalAgents:b,activeAgents:w,totalTrips:j,completedTrips:_,ongoingTrips:N,profitMargin:k,averageRollingPercentage:S,totalRollingRecords:R.length,totalBuyInOutRecords:R.filter(e=>(e.totalBuyIn||0)>0||(e.totalBuyOut||0)>0).length,companyNetResult:u,companyShare:a,isCompanyProfitable:a>0}})(),B=(()=>{console.log("\ud83d\udd0d Starting getAgentHierarchyData calculation..."),console.log("\ud83d\udcca Input data counts:",{filteredCustomers:M.length,filteredTrips:R.length,agents:s.length,rollingRecords:d.length,transactionRecords:f.length}),console.log("\ud83c\udfb2 Sample rolling records:",d.slice(0,3)),console.log("\ud83d\udcb0 Sample transaction records:",f.slice(0,3));const e=new Map;M.forEach((t,n)=>{const r=t.agentId||t.agent_id;if(n<3&&console.log("\ud83d\udc64 Customer ".concat(n+1,":"),{id:t.id,name:t.name,agentId:t.agentId,agent_id:t.agent_id,resolvedAgentId:r,fullCustomerData:t}),!r)return void(n<3&&console.log("\u274c Customer ".concat(t.name," has no agentId, skipping")));e.has(r)||e.set(r,{agent:s.find(e=>e.id===r),customers:[]});let a=0,i=0,l=0,c=0,u=0;n<3&&(console.log("\ud83c\udfaf Processing trips for customer: ".concat(t.name)),console.log("\ud83d\udccb Available trips count: ".concat(R.length))),n<3&&(console.log("\ud83d\udd04 Using customer aggregated data from customers table"),console.log("\ud83d\udc64 Customer data:",{id:t.id,name:t.name,total_rolling:t.total_rolling,total_win_loss:t.total_win_loss,total_buy_in:t.total_buy_in,total_buy_out:t.total_buy_out,totalRolling:t.totalRolling,totalWinLoss:t.totalWinLoss,totalBuyIn:t.totalBuyIn,totalBuyOut:t.totalBuyOut})),i=t.totalRolling||t.total_rolling||0,a=t.totalWinLoss||t.total_win_loss||0,l=t.totalBuyIn||t.total_buy_in||0,c=t.totalBuyOut||t.total_buy_out||0,u=i>0||Math.abs(a)>0||l>0||c>0?1:0,n<3&&console.log("\u2705 Using customer aggregated data:",{customerRolling:i,customerWinLoss:a,customerBuyIn:l,customerBuyOut:c,customerTrips:u}),n<3&&console.log("\ud83d\udcca Final calculations for ".concat(t.name,":"),{customerWinLoss:a,customerRolling:i,customerBuyIn:l,customerBuyOut:c,customerTrips:u,netCashFlow:c-l}),e.get(r).customers.push((0,o.A)((0,o.A)({},t),{},{winLoss:a,rolling:i,buyIn:l,buyOut:c,trips:u,netCashFlow:c-l}))}),console.log("\ud83c\udfe2 Processing ".concat(e.size," agents for final calculations"));const t=Array.from(e.entries()).map((e,t)=>{let[n,r]=e;const a=r.customers.reduce((e,t)=>e+(t.winLoss||0),0),o=r.customers.reduce((e,t)=>e+(t.rolling||0),0),i=r.customers.reduce((e,t)=>e+(t.buyIn||0),0),s=r.customers.reduce((e,t)=>e+(t.buyOut||0),0),l=r.customers.reduce((e,t)=>e+(t.trips||0),0);var c;t<3&&console.log("\ud83c\udfe2 Agent ".concat(t+1," (").concat((null===(c=r.agent)||void 0===c?void 0:c.name)||"Unknown","):"),{agentId:n,customersCount:r.customers.length,customerData:r.customers.map(e=>({name:e.name,rolling:e.rolling,winLoss:e.winLoss,trips:e.trips})),totals:{totalWinLoss:a,totalRolling:o,totalBuyIn:i,totalBuyOut:s,totalTrips:l,averageRollingPerCustomer:r.customers.length>0?o/r.customers.length:0}});return{agentId:n,agent:r.agent,customers:r.customers.sort((e,t)=>(t.rolling||0)-(e.rolling||0)),customerCount:r.customers.length,totalWinLoss:a,totalRolling:o,totalBuyIn:i,totalBuyOut:s,totalTrips:l,netCashFlow:s-i,averageRollingPerCustomer:r.customers.length>0?o/r.customers.length:0}});return console.log("\u2705 Final hierarchy result: ".concat(t.length," agents processed")),t})(),U=((e,t,n)=>[...e].sort((e,r)=>{var a,o;let i,s;switch(t){case"totalRolling":default:i=e.totalRolling||0,s=r.totalRolling||0;break;case"totalWinLoss":i=e.totalWinLoss||0,s=r.totalWinLoss||0;break;case"customerCount":i=e.customerCount||0,s=r.customerCount||0;break;case"averageRolling":i=e.averageRollingPerCustomer||0,s=r.averageRollingPerCustomer||0;break;case"name":return i=(null===(a=e.agent)||void 0===a?void 0:a.name)||"",s=(null===(o=r.agent)||void 0===o?void 0:o.name)||"","asc"===n?i.localeCompare(s):s.localeCompare(i)}return"asc"===n?i-s:s-i}))(B,O,P);console.log("\ud83d\udd0d Hierarchy Debug:",{agentsCount:s.length,customersCount:a.length,filteredCustomersCount:M.length,filteredTripsCount:R.length,hierarchyDataCount:U.length,userRole:n.role,hierarchyData:U.slice(0,2),sampleCustomers:M.slice(0,3).map(e=>({id:e.id,name:e.name,agentId:e.agentId,agent_id:e.agent_id})),sampleAgents:s.slice(0,3).map(e=>({id:e.id,name:e.name})),sampleTrips:R.slice(0,2).map(e=>{var t;return{id:e.id,totalRolling:e.totalRolling,totalWinLoss:e.totalWinLoss,customers:null===(t=e.customers)||void 0===t?void 0:t.map(e=>({customerId:e.customerId,rolling:e.rolling,winLoss:e.winLoss,totalRolling:e.totalRolling})),sharing:e.sharing?{totalWinLoss:e.sharing.totalWinLoss,totalRolling:e.sharing.totalRolling}:null}})});const W=U.length>0?U:[{agentId:"test-agent-1",agent:{name:"Test Agent 1"},customers:[{id:"test-customer-1",name:"Test Customer 1",rolling:1e5,winLoss:5e4,trips:2},{id:"test-customer-2",name:"Test Customer 2",rolling:15e4,winLoss:-2e4,trips:3}],customerCount:2,totalWinLoss:3e4,totalRolling:25e4,averageRollingPerCustomer:125e3},{agentId:"test-agent-2",agent:{name:"Test Agent 2"},customers:[{id:"test-customer-3",name:"Test Customer 3",rolling:8e4,winLoss:15e3,trips:1}],customerCount:1,totalWinLoss:15e3,totalRolling:8e4,averageRollingPerCustomer:8e4}],q=(()=>{const e={};return console.log("\ud83d\udd0d Processing trips for chart data:",R.length),R.forEach((t,n)=>{const r=t.date||t.start_date||t.created_at;if(!r)return void console.warn("Trip ".concat(n+1," has no valid date:"),{id:t.id,name:t.name,date:t.date,start_date:t.start_date,created_at:t.created_at});const a=r.split("T")[0];console.log("Trip ".concat(n+1," date: ").concat(r," -> ").concat(a)),e[a]||(e[a]={date:a,rolling:0,winLoss:0,commission:0,buyIn:0,buyOut:0,netCashFlow:0,expenses:0,companyShare:0,recordCount:0,transactions:0});const o=t.sharing||{};e[a].rolling+=D(t.totalRolling),e[a].winLoss+=D(t.totalWinLoss);const i=D(o.total_rolling_commission)||D(o.totalRollingCommission),s=i>0?i:.014*D(t.totalRolling);e[a].commission+=s,e[a].buyIn+=D(t.totalBuyIn),e[a].buyOut+=D(t.totalBuyOut),e[a].expenses+=D(o.totalExpenses),e[a].companyShare+=D(o.companyShare),e[a].netCashFlow+=D(t.totalBuyOut-t.totalBuyIn),e[a].recordCount+=1,e[a].transactions+=(o.totalBuyIn||0)>0||(o.totalBuyOut||0)>0?1:0}),Object.values(e).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())})(),H=q.map(e=>{const t=L.filter(t=>{const n=t.updated_at||t.created_at||t.recordedAt||t.sessionStartTime||t.createdAt;if(!n)return!1;return n.split("T")[0]===e.date}).length,n=F.filter(t=>{const n=t.updated_at||t.created_at||t.createdAt;if(!n)return!1;return n.split("T")[0]===e.date}).length;return(0,o.A)((0,o.A)({},e),{},{actualTransactionRecords:t+n,rollingRecordsCount:t,transactionRecordsCount:n})});if(console.log("\ud83d\udd0d Enhanced Chart Data Debug:"),console.log("  - Chart data length:",H.length),console.log("  - Total rolling records available:",L.length),console.log("  - Total transaction records available:",F.length),console.log("  - Chart date range:",H.map(e=>e.date)),H.slice(0,3).forEach((e,t)=>{console.log("  Day ".concat(t+1," (").concat(e.date,"):"),{tripCount:e.recordCount,actualTransactionRecords:e.actualTransactionRecords,rollingRecords:e.rollingRecordsCount,transactionRecords:e.transactionRecordsCount})}),console.log("\ud83d\udd0d Sample Transaction Records (date fields):"),F.length>0){const e=F[0];console.log("  Transaction 1 date fields:",{updated_at:e.updated_at,created_at:e.created_at,createdAt:e.createdAt,extractedDate:(e.updated_at||e.created_at||e.createdAt||"").split("T")[0]})}console.log("\ud83d\udd0d Sample Rolling Records (all fields):"),L.length>0&&(console.log("  Rolling 1 all fields:",L[0]),console.log("  Available fields:",Object.keys(L[0])));const V="admin"!==n.role?[]:s.map(e=>{const t=M.filter(t=>t.agentId===e.id),n=L.filter(t=>t.agentId===e.id),r=F.filter(t=>{const n=a.find(e=>e.id===t.customerId);return(null===n||void 0===n?void 0:n.agentId)===e.id}),o=R.filter(t=>t.agents&&t.agents.some(t=>t.agentId===e.id)||t.agentId===e.id),i=n.reduce((e,t)=>e+D(t.rollingAmount),0),s=n.reduce((e,t)=>e+D(t.winLoss),0),l=r.filter(e=>"buy-in"===e.transactionType).reduce((e,t)=>e+t.amount,0),c=r.filter(e=>"buy-out"===e.transactionType).reduce((e,t)=>e+t.amount,0);return{name:e.name,customers:t.length,activeCustomers:t.filter(e=>e.isActive).length,rolling:i,winLoss:s,buyIn:l,buyOut:c,netCashFlow:c-l,commission:.014*i,trips:o.length,rollingRecords:n.length,transactionRecords:o.filter(e=>{var t,n;return((null===(t=e.sharing)||void 0===t?void 0:t.totalBuyIn)||0)>0||((null===(n=e.sharing)||void 0===n?void 0:n.totalBuyOut)||0)>0}).length,averageRollingPercentage:t.length>0?t.reduce((e,t)=>e+t.rollingPercentage,0)/t.length:0}}).filter(e=>e.rolling>0||e.customers>0),K=M.map(e=>{const t=L.filter(t=>t.customerId===e.id),n=F.filter(t=>t.customerId===e.id),r=t.reduce((e,t)=>e+D(t.rollingAmount),0),a=t.reduce((e,t)=>e+D(t.winLoss),0),i=n.filter(e=>"buy-in"===e.transactionType).reduce((e,t)=>e+t.amount,0),s=n.filter(e=>"buy-out"===e.transactionType).reduce((e,t)=>e+t.amount,0);return(0,o.A)((0,o.A)({},e),{},{periodRolling:r,periodWinLoss:a,periodBuyIn:i,periodBuyOut:s,periodNetCashFlow:s-i,periodCommission:r*(e.rollingPercentage/100),recordCount:t.length,transactionCount:n.length})}).filter(e=>e.periodRolling>0).sort((e,t)=>t.periodRolling-e.periodRolling).slice(0,10);return w?(0,ae.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,ae.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Loading real-time reports data from Supabase..."})]})}):(0,ae.jsxs)("div",{className:"space-y-6",children:[_&&(0,ae.jsxs)(Qd,{className:"border-red-200 bg-red-50",children:[(0,ae.jsx)(Xe,{className:"w-4 h-4 text-red-600"}),(0,ae.jsxs)(Zd,{className:"text-red-800",children:[(0,ae.jsx)("strong",{children:"Reports Error:"})," ",_,(0,ae.jsxs)(Vt,{onClick:I,size:"sm",variant:"outline",className:"ml-3 text-red-800 border-red-300 hover:bg-red-100",children:[(0,ae.jsx)(eh,{className:"w-3 h-3 mr-1"}),"Retry"]})]})]}),(0,ae.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h2",{className:"text-2xl font-bold",children:r("reports_title")}),(0,ae.jsxs)("p",{className:"text-gray-600",children:["agent"===n.role?r("agent_performance"):"staff"===n.role?r("reports"):r("reports_subtitle")," \u2022 Live data from Supabase"]}),(0,ae.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Showing data for last ",v," days \u2022 ",z.totalRollingRecords," rolling records \u2022 ",z.totalBuyInOutRecords," buy-in/out transactions"]})]}),(0,ae.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,ae.jsxs)(gu,{value:v,onValueChange:y,children:[(0,ae.jsx)(yu,{className:"w-32",children:(0,ae.jsx)(vu,{placeholder:"Date range"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"7",children:"Last 7 days"}),(0,ae.jsx)(bu,{value:"30",children:"Last 30 days"}),(0,ae.jsx)(bu,{value:"90",children:"Last 90 days"}),(0,ae.jsx)(bu,{value:"365",children:"Last year"})]})]}),"admin"===n.role&&(0,ae.jsxs)(gu,{value:m,onValueChange:g,children:[(0,ae.jsx)(yu,{className:"w-40",children:(0,ae.jsx)(vu,{placeholder:"All agents"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"all",children:"All Agents"}),s.map(e=>(0,ae.jsx)(bu,{value:e.id,children:e.name},e.id))]})]}),(0,ae.jsxs)(gu,{value:x,onValueChange:b,children:[(0,ae.jsx)(yu,{className:"w-36",children:(0,ae.jsx)(vu,{placeholder:"Report type"})}),(0,ae.jsxs)(xu,{children:[(0,ae.jsx)(bu,{value:"overview",children:r("overview_metrics")}),(0,ae.jsx)(bu,{value:"financial",children:r("financial_summary")}),(0,ae.jsx)(bu,{value:"customer",children:r("customer_metrics")}),(0,ae.jsx)(bu,{value:"operational",children:r("operational_metrics")})]})]}),(0,ae.jsxs)(Vt,{variant:"outline",onClick:()=>{const e={generatedAt:(new Date).toISOString(),dateRange:v,selectedAgent:m,userRole:n.role,summary:z,dailyData:q,topCustomers:K,agentPerformance:V,rawData:{customers:M.length,trips:R.length,rollingRecords:L.length,transactionRecords:F.length}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="casino-reports-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},children:[(0,ae.jsx)(Kd,{className:"w-4 h-4 mr-2"}),r("export_data")]})]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("h3",{className:"text-lg font-medium mb-4",children:r("overview_metrics")}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,ae.jsxs)(Te,{className:"bg-gradient-to-r ".concat(z.customerTotalWinLoss>0?"from-red-50 to-red-100 border-red-200":"from-green-50 to-green-100 border-green-200"),children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium ".concat(z.customerTotalWinLoss>0?"text-red-800":"text-green-800"),children:r("win_loss")}),(0,ae.jsx)(Et,{className:"h-4 w-4 ".concat(z.customerTotalWinLoss>0?"text-red-600":"text-green-600")})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-2xl font-bold ".concat(z.customerTotalWinLoss>0?"text-red-600":"text-green-600"),children:["HK$",T(z.customerTotalWinLoss)]}),(0,ae.jsx)("p",{className:"text-xs ".concat(z.customerTotalWinLoss>0?"text-red-600":"text-green-600"),children:z.customerTotalWinLoss>0?"Customer Win (Company Loss)":"Customer Loss (Company Win)"})]})]}),(0,ae.jsxs)(Te,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium text-blue-800",children:r("reports_total_rolling")}),(0,ae.jsx)(kt,{className:"h-4 w-4 text-blue-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:["HK$",T(z.customerTotalRolling)]}),(0,ae.jsxs)("p",{className:"text-xs text-blue-600",children:[z.totalRollingRecords," rolling records \u2022 Last ",v," days"]})]})]}),(0,ae.jsxs)(Te,{className:"bg-gradient-to-r from-purple-50 to-purple-100 border-purple-200",children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium text-purple-800",children:"Rolling Commission"}),(0,ae.jsx)(FD,{className:"h-4 w-4 text-purple-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:["HK$",T(z.totalRollingCommission)]}),(0,ae.jsx)("p",{className:"text-xs text-purple-600",children:"From trip_sharing data"})]})]}),(0,ae.jsxs)(Te,{className:"bg-gradient-to-r ".concat(z.isCompanyProfitable?"from-green-50 to-green-100 border-green-200":"from-red-50 to-red-100 border-red-200"),children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium ".concat(z.isCompanyProfitable?"text-green-800":"text-red-800"),children:r("profit_loss")}),z.isCompanyProfitable?(0,ae.jsx)(Nt,{className:"h-4 w-4 text-green-600"}):(0,ae.jsx)(_t,{className:"h-4 w-4 text-red-600"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsxs)("div",{className:"text-2xl font-bold ".concat(z.isCompanyProfitable?"text-green-600":"text-red-600"),children:["HK$",T(Math.abs(z.companyShare))]}),(0,ae.jsx)("p",{className:"text-xs ".concat(z.isCompanyProfitable?"text-green-600":"text-red-600"),children:z.isCompanyProfitable?"Company Profit (Customer Loss)":"Company Loss (Customer Win)"})]})]}),(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,ae.jsx)(Ie,{className:"text-sm font-medium",children:r("overview_active_customers")}),(0,ae.jsx)(At,{className:"h-4 w-4 text-muted-foreground"})]}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"text-2xl font-bold",children:z.activeCustomers}),(0,ae.jsxs)("p",{className:"text-xs text-muted-foreground",children:[r("of_total_customers")," ",z.totalCustomers]})]})]})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ae.jsxs)(Te,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50",children:[(0,ae.jsx)(De,{className:"pb-4",children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ie,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,ae.jsx)(zD,{className:"w-5 h-5 text-blue-600"}),"Daily Business Overview"]}),(0,ae.jsx)(Me,{className:"text-gray-600 mt-1",children:"Cash flow analysis - Buy-in and Buy-out transactions"})]}),(0,ae.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,ae.jsx)("span",{className:"text-gray-600",children:r("buy_in")})]}),(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),(0,ae.jsx)("span",{className:"text-gray-600",children:r("buy_out")})]})]})]})}),(0,ae.jsx)(Re,{className:"pt-0",children:(0,ae.jsx)(xp,{width:"100%",height:350,children:(0,ae.jsxs)(xD,{data:q,margin:{top:20,right:30,left:20,bottom:5},children:[(0,ae.jsxs)("defs",{children:[(0,ae.jsxs)("linearGradient",{id:"buyInGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,ae.jsx)("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),(0,ae.jsx)("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.3})]}),(0,ae.jsxs)("linearGradient",{id:"buyOutGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,ae.jsx)("stop",{offset:"5%",stopColor:"#F97316",stopOpacity:.8}),(0,ae.jsx)("stop",{offset:"95%",stopColor:"#F97316",stopOpacity:.3})]})]}),(0,ae.jsx)(LD,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,ae.jsx)(sD,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>{const t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate())},label:{value:r("date"),position:"insideBottom",offset:-5,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}}}),(0,ae.jsx)(yD,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString(),label:{value:r("amount_hkd"),angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}}}),(0,ae.jsx)(wm,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"12px"},formatter:(e,t)=>["HK$".concat(Number(e).toLocaleString()),"buyIn"===t?"\ud83d\udcb0 Buy-in":"buyOut"===t?"\ud83d\udcb8 Buy-out":"\ud83d\udcca Data"],labelFormatter:e=>{const t=new Date(e);return"\ud83d\udcc5 ".concat(t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))}}),(0,ae.jsx)(SO,{dataKey:"buyIn",fill:"url(#buyInGradient)",name:"buyIn",radius:[4,4,0,0],maxBarSize:50}),(0,ae.jsx)(SO,{dataKey:"buyOut",fill:"url(#buyOutGradient)",name:"buyOut",radius:[4,4,0,0],maxBarSize:50})]})})})]}),(0,ae.jsxs)(Te,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-gray-50",children:[(0,ae.jsx)(De,{className:"pb-4",children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ie,{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[(0,ae.jsx)(Pt,{className:"w-5 h-5 text-purple-600"}),r("financial_summary")]}),(0,ae.jsx)(Me,{className:"text-gray-600 mt-1",children:"Operating expenses and rolling commission trends"})]}),(0,ae.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,ae.jsx)("span",{className:"text-gray-600",children:r("overview_expenses")})]}),(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,ae.jsx)("span",{className:"text-gray-600",children:r("overview_commission_rate")})]})]})]})}),(0,ae.jsx)(Re,{className:"pt-0",children:(0,ae.jsx)(xp,{width:"100%",height:350,children:(0,ae.jsxs)(xD,{data:q,margin:{top:20,right:30,left:20,bottom:5},children:[(0,ae.jsxs)("defs",{children:[(0,ae.jsxs)("linearGradient",{id:"expensesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,ae.jsx)("stop",{offset:"5%",stopColor:"#EF4444",stopOpacity:.8}),(0,ae.jsx)("stop",{offset:"95%",stopColor:"#EF4444",stopOpacity:.2})]}),(0,ae.jsxs)("linearGradient",{id:"commissionAreaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,ae.jsx)("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),(0,ae.jsx)("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.2})]})]}),(0,ae.jsx)(LD,{strokeDasharray:"3 3",stroke:"#E5E7EB",opacity:.5}),(0,ae.jsx)(sD,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>{const t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate())},label:{value:r("date"),position:"insideBottom",offset:-5,style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}}}),(0,ae.jsx)(yD,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toString(),label:{value:r("amount_hkd"),angle:-90,position:"insideLeft",style:{textAnchor:"middle",fontSize:"12px",fill:"#6B7280"}}}),(0,ae.jsx)(wm,{contentStyle:{backgroundColor:"white",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"12px"},formatter:(e,t)=>["HK$".concat(Number(e).toLocaleString()),"expenses"===t?"\ud83d\udcb8 ".concat(r("overview_expenses")):"commission"===t?"\ud83d\udcb0 ".concat(r("overview_commission_rate")):"\ud83d\udcca Data"],labelFormatter:e=>{const t=new Date(e);return"\ud83d\udcc5 ".concat(t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))}}),(0,ae.jsx)(FE,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",fill:"url(#expensesGradient)",name:"expenses",strokeWidth:2}),(0,ae.jsx)(FE,{type:"monotone",dataKey:"commission",stroke:"#10B981",fill:"url(#commissionAreaGradient)",name:"commission",strokeWidth:2})]})})})]})]}),K.length>0&&(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{children:[(0,ae.jsx)(Ie,{children:"Top Performing Customers"}),(0,ae.jsx)(Me,{children:"Highest rolling volume customers for the selected period \u2022 Sorted by rolling amount"})]}),(0,ae.jsx)(Re,{children:(0,ae.jsx)("div",{className:"space-y-4",children:K.map((e,t)=>(0,ae.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ae.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 rounded-full flex items-center justify-center text-sm font-medium",children:t+1}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("p",{className:"font-medium",children:e.name}),(0,ae.jsxs)("p",{className:"text-sm text-gray-500",children:["Agent: ",e.agentName," \u2022 ",e.rollingPercentage,"% rolling rate"]}),(0,ae.jsxs)("p",{className:"text-xs text-gray-400",children:[e.recordCount," records \u2022 ",e.transactionCount," transactions"]})]})]}),(0,ae.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-right text-xs",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:"Rolling"}),(0,ae.jsxs)("div",{className:"font-medium text-blue-600",children:["HK$",T(e.periodRolling)]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:"Win/Loss"}),(0,ae.jsxs)("div",{className:"font-medium ".concat(e.periodWinLoss>0?"text-red-600":"text-green-600"),children:["HK$",T(Math.abs(e.periodWinLoss))]}),(0,ae.jsx)("div",{className:"text-xs ".concat(e.periodWinLoss>0?"text-red-500":"text-green-500"),children:e.periodWinLoss>0?"Customer Win":"Company Win"})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:"Commission"}),(0,ae.jsxs)("div",{className:"font-medium text-purple-600",children:["HK$",T(e.periodCommission)]})]}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-gray-500",children:"Cash Flow"}),(0,ae.jsxs)("div",{className:"font-medium ".concat(e.periodNetCashFlow>=0?"text-green-600":"text-red-600"),children:["HK$",T(e.periodNetCashFlow)]})]})]})]},e.id))})})]}),"admin"===n.role&&V.length>0&&(0,ae.jsxs)(Te,{children:[(0,ae.jsxs)(De,{children:[(0,ae.jsx)(Ie,{children:"Agent Performance Analysis"}),(0,ae.jsx)(Me,{children:"Comprehensive performance metrics by agent for the selected period"})]}),(0,ae.jsx)(Re,{children:(0,ae.jsx)("div",{className:"overflow-x-auto",children:(0,ae.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ae.jsx)("thead",{className:"bg-gray-50",children:(0,ae.jsxs)("tr",{children:[(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent"}),(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customers"}),(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rolling Volume"}),(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"}),(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Win/Loss"}),(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cash Flow"}),(0,ae.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"})]})}),(0,ae.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(e=>(0,ae.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ae.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,ae.jsxs)("div",{className:"text-xs text-gray-500",children:[e.averageRollingPercentage.toFixed(1),"% avg rate"]})]})}),(0,ae.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,ae.jsxs)("div",{children:[e.activeCustomers,"/",e.customers]}),(0,ae.jsx)("div",{className:"text-xs text-gray-400",children:"active/total"})]}),(0,ae.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,ae.jsxs)("div",{className:"font-medium",children:["HK$",T(e.rolling)]}),(0,ae.jsxs)("div",{className:"text-xs text-blue-600",children:[e.trips," trips"]})]}),(0,ae.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-purple-600 font-medium",children:["HK$",T(e.commission)]}),(0,ae.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,ae.jsxs)("div",{className:e.winLoss>0?"text-red-600":"text-green-600",children:["HK$",T(Math.abs(e.winLoss))]}),(0,ae.jsx)("div",{className:"text-xs ".concat(e.winLoss>0?"text-red-500":"text-green-500"),children:e.winLoss>0?"Customer Win":"Company Win"})]}),(0,ae.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,ae.jsxs)("div",{className:"font-medium ".concat(e.netCashFlow>=0?"text-green-600":"text-red-600"),children:["HK$",T(e.netCashFlow)]}),(0,ae.jsxs)("div",{className:"text-xs text-gray-400",children:["In: HK$",T(e.buyIn)," \u2022 Out: HK$",T(e.buyOut)]})]}),(0,ae.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,ae.jsxs)("div",{children:[e.rollingRecords," rolling"]}),(0,ae.jsxs)("div",{className:"text-xs text-gray-400",children:[e.transactionRecords," buy-in/out"]})]})]},e.name))})]})})})]}),("admin"===n.role||"boss"===n.role)&&(0,ae.jsxs)(Te,{children:[(0,ae.jsx)(De,{children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{children:[(0,ae.jsxs)(Ie,{className:"flex items-center space-x-2",children:[(0,ae.jsx)(At,{className:"w-5 h-5"}),(0,ae.jsx)("span",{children:r("agent_hierarchy")}),(0,ae.jsxs)(ku,{variant:"secondary",children:[W.length," ",r("agents")]})]}),(0,ae.jsx)(Me,{children:r("agent_hierarchy_desc")})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ae.jsx)("label",{className:"text-sm font-medium text-gray-700",children:r("sort_by")}),(0,ae.jsxs)("select",{value:O,onChange:e=>C(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,ae.jsx)("option",{value:"totalRolling",children:r("reports_total_rolling")}),(0,ae.jsx)("option",{value:"totalWinLoss",children:r("win_loss")}),(0,ae.jsx)("option",{value:"customerCount",children:r("customer_count")}),(0,ae.jsx)("option",{value:"averageRolling",children:r("average_rolling")}),(0,ae.jsx)("option",{value:"name",children:r("agent_name")})]})]}),(0,ae.jsx)("button",{onClick:()=>E("asc"===P?"desc":"asc"),className:"p-1 hover:bg-gray-100 rounded-md transition-colors",title:"Sort ".concat("asc"===P?"Descending":"Ascending"),children:"asc"===P?(0,ae.jsx)(Dt,{className:"w-4 h-4 text-gray-600"}):(0,ae.jsx)(Tt,{className:"w-4 h-4 text-gray-600"})})]})]})}),(0,ae.jsxs)(Re,{children:[(0,ae.jsx)("div",{className:"space-y-2",children:W.map(e=>{var t;return(0,ae.jsxs)("div",{className:"border rounded-lg",children:[(0,ae.jsx)("div",{className:"p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>(e=>{const t=new Set(S);t.has(e)?t.delete(e):t.add(e),A(t)})(e.agentId),children:(0,ae.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-3",children:[S.has(e.agentId)?(0,ae.jsx)(lu,{className:"w-4 h-4 text-gray-500"}):(0,ae.jsx)(BD,{className:"w-4 h-4 text-gray-500"}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-semibold text-gray-900",children:(null===(t=e.agent)||void 0===t?void 0:t.name)||"Unknown Agent"}),(0,ae.jsxs)("div",{className:"text-sm text-gray-500",children:[e.customerCount," ",r("customers")]})]})]}),(0,ae.jsxs)("div",{className:"flex space-x-8 text-sm",children:[(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsxs)("div",{className:"font-medium text-blue-600",children:["HK$",T(e.totalRolling)]}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:r("reports_total_rolling")})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsxs)("div",{className:"font-medium ".concat(e.totalWinLoss>=0?"text-green-600":"text-red-600"),children:["HK$",T(Math.abs(e.totalWinLoss))]}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:e.totalWinLoss>=0?r("individual_win"):r("win_loss")})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"font-medium text-gray-700",children:e.customerCount}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:r("customer_count")})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsxs)("div",{className:"font-medium text-purple-600",children:["HK$",T(e.averageRollingPerCustomer)]}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:r("average_rolling")})]})]})]})}),S.has(e.agentId)&&(0,ae.jsx)("div",{className:"border-t",children:(0,ae.jsxs)("div",{className:"p-4 bg-white",children:[(0,ae.jsx)("div",{className:"grid gap-3",children:e.customers.map(e=>(0,ae.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ae.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(0,ae.jsxs)("div",{children:[(0,ae.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,ae.jsxs)("div",{className:"text-sm text-gray-500",children:[e.trips," ",r("trips")]})]})]}),(0,ae.jsxs)("div",{className:"flex space-x-8 text-sm",children:[(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsxs)("div",{className:"font-medium text-blue-600",children:["HK$",T(e.rolling)]}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:r("individual_rolling")})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsxs)("div",{className:"font-medium ".concat(e.winLoss>=0?"text-green-600":"text-red-600"),children:["HK$",T(Math.abs(e.winLoss))]}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:e.winLoss>=0?r("individual_win"):r("win_loss")})]}),(0,ae.jsxs)("div",{className:"text-center",children:[(0,ae.jsx)("div",{className:"font-medium text-gray-700",children:e.trips}),(0,ae.jsx)("div",{className:"text-xs text-gray-500",children:r("trip_count")})]})]})]},e.id))}),0===e.customers.length&&(0,ae.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ae.jsx)(At,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,ae.jsx)("div",{children:r("no_data")})]})]})})]},e.agentId)})}),0===W.length&&(0,ae.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,ae.jsx)(At,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,ae.jsx)("div",{className:"text-lg font-medium mb-2",children:"No Agent Data Available"}),(0,ae.jsx)("div",{children:"No agents with customers found in the selected date range"})]})]})]})]})},WD=$e("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),qD=$e("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),HD=$e("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),VD=$e("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),KD=()=>{const{language:e,setLanguage:t}=Lt(),n=[{value:"en",label:"English"},{value:"zh",label:"\u4e2d\u6587"}],r=n.find(t=>t.value===e);return(0,ae.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ae.jsx)(VD,{className:"w-4 h-4 text-gray-600"}),(0,ae.jsxs)(gu,{value:e,onValueChange:e=>t(e),children:[(0,ae.jsx)(yu,{className:"w-auto min-w-[80px] h-8",children:(0,ae.jsx)(vu,{children:(0,ae.jsx)("span",{className:"text-sm font-medium",children:null===r||void 0===r?void 0:r.label})})}),(0,ae.jsx)(xu,{align:"end",children:n.map(e=>(0,ae.jsx)(bu,{value:e.value,children:(0,ae.jsx)("span",{className:"font-medium",children:e.label})},e.value))})]})]})};function $D(){const{t:e}=Lt(),[r,a]=(0,t.useState)(null),[i,s]=(0,t.useState)("dashboard"),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)(!0),[p,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!1);(0,t.useEffect)(()=>{var e;const t=window.location.hostname;("www.hoewingroup.com"===t||"hoewingroup.com"===t)&&console.log("\ud83d\udd12 Production domain detected - enhanced security mode"),Promise.all([y(),fetch("".concat(null===(e="http://localhost:3001/api")?void 0:e.replace("/api",""),"/health")).then(e=>e.json()).then(e=>{console.log("\u2705 Backend health check:",e)}).catch(e=>{console.error("\u274c Backend health check failed:",e)})]).catch(e=>{console.error("\u274c Parallel initialization error:",e)})},[]);const y=async()=>{f(!0),d("");try{console.log("\ud83d\ude80 Initializing Casino Management System...");const t=await ze.testConnection();if(m(t),c(t.success),!t.success)throw new Error("Database connection failed: ".concat(t.message,". ").concat(t.details||""));localStorage.getItem("app_initialized")?console.log("\u26a1 Skipping data initialization - already configured"):(console.log("\ud83d\udee1\ufe0f First-time setup - initializing data..."),await ze.initializeSampleDataIfNeeded(),localStorage.setItem("app_initialized","true"));const r=window.location.hostname,o="www.hoewingroup.com"===r||"hoewingroup.com"===r,i=localStorage.getItem("casinoUser");if(i)try{const e=JSON.parse(i);if(o){const t=e.loginTime||0,r=Date.now();if(r-t>288e5)console.log("\ud83d\udd12 Session expired for production domain - requiring fresh login"),localStorage.removeItem("casinoUser");else{if(a(e),console.log("\ud83d\udc64 Restored valid session for production:",e.username),e.token){const{apiClient:t}=await Promise.resolve().then(n.bind(n,9501));t.setToken(e.token),console.log("\ud83d\udd11 Token restored to API client")}"staff"===e.role?s("checkinout"):s("dashboard")}}else{if(a(e),console.log("\ud83d\udc64 Restored user session:",e.username),e.token){const{apiClient:t}=await Promise.resolve().then(n.bind(n,9501));t.setToken(e.token),console.log("\ud83d\udd11 Token restored to API client")}"staff"===e.role?s("checkinout"):s("dashboard")}}catch(e){console.error("Error parsing saved user session:",e),localStorage.removeItem("casinoUser")}else o&&console.log("\ud83d\udd12 Production domain - no saved session, showing login");console.log("\u2705 Application initialization completed")}catch(e){console.error("\u274c Application initialization failed:",e),d("Initialization failed: ".concat(e instanceof Error?e.message:"Unknown error occurred")),c(!1)}finally{f(!1)}},x=async e=>{try{if(!await ze.isHealthy())throw new Error("Database is not available. Please try again later.");console.log("\ud83d\udd0d App.handleLogin received user:",e),console.log("\ud83d\udd0d App.handleLogin user role:",null===e||void 0===e?void 0:e.role),console.log("\ud83d\udd0d App.handleLogin user token:",null!==e&&void 0!==e&&e.token?"Present":"Missing");const t=(0,o.A)((0,o.A)({},e),{},{loginTime:Date.now()});a(t),localStorage.setItem("casinoUser",JSON.stringify(t)),console.log("\ud83d\udd0d App.handleLogin updated localStorage with timestamp"),"staff"===e.role?s("checkinout"):s("dashboard"),d(""),console.log("\ud83d\udc64 User logged in:",e.username,"Role:",e.role)}catch(t){console.error("\u274c Login error:",t),d("Login failed: ".concat(t instanceof Error?t.message:"Unknown error occurred"))}},b=async()=>{try{f(!0);const e=await ze.testConnection();m(e);const t=await ze.isHealthy();c(t),t?(d(""),console.log("\u2705 Database health check passed")):(d("Database connection issues detected. Some features may not work properly."),console.warn("\u26a0\ufe0f Database health check failed"))}catch(e){console.error("\u274c Database health check error:",e),c(!1),d("Database error: ".concat(e instanceof Error?e.message:"Unknown error occurred"))}finally{f(!1)}};if(h)return(0,ae.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,ae.jsxs)("div",{className:"text-center max-w-md",children:[(0,ae.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,ae.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Initializing Casino Management System"}),(0,ae.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Connecting to Supabase database with data preservation..."}),p&&(0,ae.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-left",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ae.jsx)(th,{className:"w-4 h-4 text-blue-600"}),(0,ae.jsx)("span",{className:"text-sm font-medium text-blue-800",children:"Connection Status"})]}),(0,ae.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,ae.jsxs)("div",{children:["Status: ",p.success?"\u2705 Connected":"\u274c Failed"]}),(0,ae.jsxs)("div",{children:["Message: ",p.message]}),p.details&&(0,ae.jsxs)("div",{children:["Details: ",p.details]})]})]}),(0,ae.jsxs)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ae.jsx)(Ch,{className:"w-4 h-4 text-green-600"}),(0,ae.jsx)("span",{className:"text-sm font-medium text-green-800",children:"Data Protection"})]}),(0,ae.jsx)("p",{className:"text-xs text-green-700",children:"Your existing data is safe. The system will not clear any entered information during initialization."})]})]})});if(!r)return(0,ae.jsxs)("div",{children:[u&&(0,ae.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,ae.jsxs)("div",{className:"flex",children:[(0,ae.jsx)("div",{className:"flex-shrink-0",children:(0,ae.jsx)(Xe,{className:"h-5 w-5 text-red-400"})}),(0,ae.jsxs)("div",{className:"ml-3",children:[(0,ae.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Database Connection Error"}),(0,ae.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,ae.jsx)("p",{children:u})}),(0,ae.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,ae.jsxs)(Vt,{onClick:b,size:"sm",variant:"outline",className:"text-red-800 border-red-300 hover:bg-red-100",children:[(0,ae.jsx)(eh,{className:"w-4 h-4 mr-2"}),"Retry Connection"]}),(0,ae.jsxs)(Vt,{onClick:()=>v(!g),size:"sm",variant:"outline",className:"text-red-800 border-red-300 hover:bg-red-100",children:[(0,ae.jsx)(WD,{className:"w-4 h-4 mr-2"}),g?"Hide":"Show"," Debug Info"]})]}),g&&p&&(0,ae.jsx)("div",{className:"mt-3 p-2 bg-red-100 rounded text-xs",children:(0,ae.jsx)("pre",{className:"text-red-800",children:JSON.stringify(p,null,2)})})]})]})}),(0,ae.jsx)(wt,{onLogin:x})]});const w="admin"===(null===r||void 0===r?void 0:r.role),j="agent"===(null===r||void 0===r?void 0:r.role),_="staff"===(null===r||void 0===r?void 0:r.role),N="boss"===(null===r||void 0===r?void 0:r.role),k=()=>{var e;return null===r||void 0===r||null===(e=r.role)||void 0===e?void 0:e.toUpperCase()};return(0,ae.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ae.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,ae.jsx)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:(0,ae.jsxs)("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[(0,ae.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[(0,ae.jsxs)("h1",{className:"text-sm sm:text-xl font-semibold text-gray-900 truncate",children:[(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Casino Management System"}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Casino Management"})]}),(0,ae.jsxs)("div",{className:"hidden sm:flex items-center space-x-2",children:[(0,ae.jsx)(ku,{variant:"secondary",className:"text-xs",children:k()}),(0,ae.jsxs)(ku,{variant:"default",className:"text-xs flex items-center gap-1",children:[(0,ae.jsx)(th,{className:"w-3 h-3"}),"Supabase"]}),(0,ae.jsx)(ku,{variant:"outline",className:"text-xs flex items-center gap-1 ".concat(l?"border-green-200 text-green-700":"border-red-200 text-red-700"),children:l?(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Ye,{className:"w-3 h-3"}),"Connected"]}):(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)(Xe,{className:"w-3 h-3"}),"Issues"]})}),(0,ae.jsxs)(ku,{variant:"outline",className:"text-xs flex items-center gap-1 border-blue-200 text-blue-700",children:[(0,ae.jsx)(Ch,{className:"w-3 h-3"}),"Data Protected"]})]}),(0,ae.jsxs)("div",{className:"sm:hidden flex items-center space-x-1",children:[(0,ae.jsx)(ku,{variant:"secondary",className:"text-xs",children:k()}),(0,ae.jsx)(ku,{variant:"outline",className:"text-xs flex items-center gap-1 ".concat(l?"border-green-200 text-green-700":"border-red-200 text-red-700"),children:l?(0,ae.jsx)(Ye,{className:"w-3 h-3"}):(0,ae.jsx)(Xe,{className:"w-3 h-3"})})]})]}),(0,ae.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-shrink-0",children:[(0,ae.jsx)(KD,{}),!l&&(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:b,className:"text-xs hidden sm:flex",children:[(0,ae.jsx)(qD,{className:"w-4 h-4 mr-2"}),"Reconnect"]}),(0,ae.jsxs)("span",{className:"text-xs sm:text-sm text-gray-600 hidden sm:inline",children:["Welcome, ",r.username]}),(0,ae.jsxs)(Vt,{variant:"outline",size:"sm",onClick:async()=>{a(null),localStorage.removeItem("casinoUser");try{const{apiClient:e}=await Promise.resolve().then(n.bind(n,9501));e.setToken(""),console.log("\ud83d\udd11 Token cleared from API client")}catch(e){console.warn("Failed to clear token from API client:",e)}s("dashboard"),d(""),console.log("\ud83d\udc64 User logged out")},className:"text-xs",children:[(0,ae.jsx)(Oh,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),(0,ae.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:[(0,ae.jsxs)("div",{className:"flex flex-wrap gap-1 sm:space-x-1 mb-6 sm:mb-8 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:[(w||j||N)&&(0,ae.jsxs)("button",{onClick:()=>s("dashboard"),className:"flex items-center px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ".concat("dashboard"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(zD,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:e("dashboard")}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Dashboard"})]}),_&&(0,ae.jsxs)("button",{onClick:()=>s("checkinout"),className:"flex items-center px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ".concat("checkinout"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(Ph,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),(0,ae.jsx)("span",{className:"hidden sm:inline",children:e("checkinout")}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Check"})]}),(w||j||_||N)&&(0,ae.jsxs)("button",{onClick:()=>s("customers"),className:"flex items-center px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ".concat("customers"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(At,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),(0,ae.jsxs)("span",{className:"hidden sm:inline",children:[e("customers")," ",(_||N)&&(0,ae.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(View)"})]}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Customers"})]}),(w||_||N)&&(0,ae.jsxs)("button",{onClick:()=>s("agents"),className:"flex items-center px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap ".concat("agents"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(Ot,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),(0,ae.jsxs)("span",{className:"hidden sm:inline",children:[e("agents")," ",(_||N)&&(0,ae.jsx)("span",{className:"ml-1 text-xs text-gray-500",children:"(View)"})]}),(0,ae.jsx)("span",{className:"sm:hidden",children:"Agents"})]}),(w||N)&&(0,ae.jsxs)("button",{onClick:()=>s("staff"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("staff"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(HD,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e("staff")]}),(w||j||N)&&(0,ae.jsxs)("button",{onClick:()=>s("projects"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("projects"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(Ct,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e("projects")]}),(w||N)&&(0,ae.jsxs)("button",{onClick:()=>s("reports"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("reports"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(zD,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e("reports")]}),w&&(0,ae.jsxs)("button",{onClick:()=>s("settings"),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("settings"===i?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,ae.jsx)(tf,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),e("settings")]})]}),"dashboard"===i&&(0,ae.jsx)(Ft,{user:r}),"customers"===i&&(w||j||_||N)&&(0,ae.jsx)(jh,{user:r,showError:()=>{},clearError:()=>{}}),"agents"===i&&(w||_||N)&&(0,ae.jsx)(Nh,{user:r,showError:()=>{},clearError:()=>{}}),"staff"===i&&(w||N)&&(0,ae.jsx)(Th,{user:r,showError:()=>{},clearError:()=>{}}),"checkinout"===i&&_&&(0,ae.jsx)(Mh,{user:r,showError:()=>{},clearError:()=>{}}),"projects"===i&&(w||j||N)&&(0,ae.jsx)(af,{user:r}),"reports"===i&&(w||N)&&(0,ae.jsx)(UD,{user:r}),"settings"===i&&w&&(0,ae.jsx)(uf,{user:r})]})]})}const GD=function(){return(0,ae.jsx)(Rt,{children:(0,ae.jsx)($D,{})})};a.createRoot(document.getElementById("root")).render((0,ae.jsx)(t.StrictMode,{children:(0,ae.jsx)(GD,{})}))})()})();